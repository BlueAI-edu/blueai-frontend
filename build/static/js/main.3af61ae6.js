/*! For license information please see main.3af61ae6.js.LICENSE.txt */
(()=>{var __webpack_modules__={356(e,t,r){e.exports=r(9645).last},418(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.toString=function e(t){if(null==t)return"";if("string"===typeof t)return t;if(Array.isArray(t))return t.map(e).join(",");const r=String(t);return"0"===r&&Object.is(Number(t),-0)?"-0":r}},528(e,t){"use strict";var r=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.for("react.view_transition"),f=Symbol.for("react.client.reference");function g(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case a:case o:case i:case u:case d:case p:return e;default:switch(e=e&&e.$$typeof){case l:case c:case m:case h:case s:return e;default:return t}}case n:return t}}}t.zv=function(e){return g(e)===a}},579(e,t,r){"use strict";e.exports=r(2799)},870(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isObject=function(e){return null!==e&&("object"===typeof e||"function"===typeof e)}},1203(e,t,r){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(8420);t.isArrayLike=function(e){return null!=e&&"function"!==typeof e&&n.isLength(e.length)}},1293(e,t,r){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(4830);t.debounce=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"object"!==typeof r&&(r={});const{leading:a=!1,trailing:i=!0,maxWait:o}=r,s=Array(2);let l;a&&(s[0]="leading"),i&&(s[1]="trailing");let c=null;const u=n.debounce(function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];l=e.apply(this,r),c=null},t,{edges:s}),d=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return null!=o&&(null===c&&(c=Date.now()),Date.now()-c>=o)?(l=e.apply(this,r),c=Date.now(),u.cancel(),u.schedule(),l):(u.apply(this,r),l)};return d.cancel=u.cancel,d.flush=()=>(u.flush(),l),d}},1444(e,t,r){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(418),a=r(3272);t.toPath=function(e){if(Array.isArray(e))return e.map(a.toKey);if("symbol"===typeof e)return[e];const t=[],r=(e=n.toString(e)).length;if(0===r)return t;let i=0,o="",s="",l=!1;for(46===e.charCodeAt(0)&&(t.push(""),i++);i<r;){const n=e[i];s?"\\"===n&&i+1<r?(i++,o+=e[i]):n===s?s="":o+=n:l?'"'===n||"'"===n?s=n:"]"===n?(l=!1,t.push(o),o=""):o+=n:"["===n?(l=!0,o&&(t.push(o),o="")):"."===n?o&&(t.push(o),o=""):o+=n,i++}return o&&t.push(o),t}},2104(e,t,r){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(1203),a=r(9921);t.isArrayLikeObject=function(e){return a.isObjectLike(e)&&n.isArrayLike(e)}},2132(e,t,r){"use strict";var n=r(2897).default;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const a=r(870),i=r(4803),o=r(5093);function s(e,t,r,u){if(t===e)return!0;switch(typeof t){case"object":return function(e,t,r,n){if(null==t)return!0;if(Array.isArray(t))return l(e,t,r,n);if(t instanceof Map)return function(e,t,r,n){if(0===t.size)return!0;if(!(e instanceof Map))return!1;for(const[a,i]of t.entries()){if(!1===r(e.get(a),i,a,e,t,n))return!1}return!0}(e,t,r,n);if(t instanceof Set)return c(e,t,r,n);const a=Object.keys(t);if(null==e||i.isPrimitive(e))return 0===a.length;if(0===a.length)return!0;if(null!==n&&void 0!==n&&n.has(t))return n.get(t)===e;null===n||void 0===n||n.set(t,e);try{for(let o=0;o<a.length;o++){const s=a[o];if(!i.isPrimitive(e)&&!(s in e))return!1;if(void 0===t[s]&&void 0!==e[s])return!1;if(null===t[s]&&null!==e[s])return!1;if(!r(e[s],t[s],s,e,t,n))return!1}return!0}finally{null===n||void 0===n||n.delete(t)}}(e,t,r,u);case"function":return Object.keys(t).length>0?s(e,n({},t),r,u):o.isEqualsSameValueZero(e,t);default:return a.isObject(e)?"string"!==typeof t||""===t:o.isEqualsSameValueZero(e,t)}}function l(e,t,r,n){if(0===t.length)return!0;if(!Array.isArray(e))return!1;const a=new Set;for(let i=0;i<t.length;i++){const o=t[i];let s=!1;for(let l=0;l<e.length;l++){if(a.has(l))continue;let c=!1;if(r(e[l],o,i,e,t,n)&&(c=!0),c){a.add(l),s=!0;break}}if(!s)return!1}return!0}function c(e,t,r,n){return 0===t.size||e instanceof Set&&l([...e],[...t],r,n)}t.isMatchWith=function e(t,r,n){return"function"!==typeof n?e(t,r,()=>{}):s(t,r,function e(t,r,a,i,o,l){const c=n(t,r,a,i,o,l);return void 0!==c?Boolean(c):s(t,r,e,l)},new Map)},t.isSetMatch=c},2204(e,t,r){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(5316),a=r(7312),i=r(3799);t.sortBy=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];const s=r.length;return s>1&&i.isIterateeCall(e,r[0],r[1])?r=[]:s>2&&i.isIterateeCall(r[0],r[1],r[2])&&(r=[r[0]]),n.orderBy(e,a.flatten(r),["asc"])}},2330(e,t,r){"use strict";var n=r(5043);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},i=n.useState,o=n.useEffect,s=n.useLayoutEffect,l=n.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!a(e,r)}catch(n){return!0}}var u="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=i({inst:{value:r,getSnapshot:t}}),a=n[0].inst,u=n[1];return s(function(){a.value=r,a.getSnapshot=t,c(a)&&u({inst:a})},[e,r,t]),o(function(){return c(a)&&u({inst:a}),e(function(){c(a)&&u({inst:a})})},[e]),l(r),r};t.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:u},2419(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5043),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(579);const GraphPlotter=_ref=>{let{onSave:onSave,initialData:initialData=null}=_ref;const canvasRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),[mode,setMode]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("function"),[equation,setEquation]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)((null===initialData||void 0===initialData?void 0:initialData.equation)||""),[points,setPoints]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)((null===initialData||void 0===initialData?void 0:initialData.points)||[]),[gridSize,setGridSize]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({min:-10,max:10}),[zoom,setZoom]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(20),[showGrid,setShowGrid]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!0),[lineColor,setLineColor]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("#2563eb"),[error,setError]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(""),canvasWidth=600,canvasHeight=600,centerX=canvasWidth/2,centerY=canvasHeight/2,canvasToGraph=(e,t)=>({x:(e-centerX)/zoom,y:(centerY-t)/zoom}),graphToCanvas=(e,t)=>({x:centerX+e*zoom,y:centerY-t*zoom}),drawGrid=e=>{if(e.clearRect(0,0,canvasWidth,canvasHeight),e.fillStyle="#ffffff",e.fillRect(0,0,canvasWidth,canvasHeight),showGrid){e.strokeStyle="#e5e7eb",e.lineWidth=1;for(let t=gridSize.min;t<=gridSize.max;t++){const r=graphToCanvas(t,0);e.beginPath(),e.moveTo(r.x,0),e.lineTo(r.x,canvasHeight),e.stroke();const n=graphToCanvas(0,t);e.beginPath(),e.moveTo(0,n.y),e.lineTo(canvasWidth,n.y),e.stroke()}}e.strokeStyle="#000000",e.lineWidth=2,e.beginPath(),e.moveTo(0,centerY),e.lineTo(canvasWidth,centerY),e.stroke(),e.beginPath(),e.moveTo(centerX,0),e.moveTo(centerX,canvasHeight),e.stroke(),e.fillStyle="#000000",e.font="12px Arial",e.textAlign="center";for(let t=gridSize.min;t<=gridSize.max;t++)if(0!==t){const r=graphToCanvas(t,0);e.fillText(t.toString(),r.x,centerY+20);const n=graphToCanvas(0,t);e.fillText(t.toString(),centerX-20,n.y+5)}},evaluateExpression=(expr,xVal)=>{try{let expression=expr.toLowerCase().replace(/\^/g,"**").replace(/x/g,"(".concat(xVal,")")).replace(/sin/g,"Math.sin").replace(/cos/g,"Math.cos").replace(/tan/g,"Math.tan").replace(/sqrt/g,"Math.sqrt").replace(/abs/g,"Math.abs").replace(/log/g,"Math.log10").replace(/ln/g,"Math.log").replace(/pi/g,"Math.PI").replace(/e(?![a-z])/g,"Math.E");return eval(expression)}catch(e){return null}},plotFunction=e=>{if(!equation.trim())return;setError(""),e.strokeStyle=lineColor,e.lineWidth=2,e.beginPath();let t=!1;for(let r=gridSize.min;r<=gridSize.max;r+=.1){const n=evaluateExpression(equation,r);if(null===n||!isFinite(n)){t=!1;continue}const a=graphToCanvas(r,n);a.y<-50||a.y>canvasHeight+50?t=!1:t?e.lineTo(a.x,a.y):(e.moveTo(a.x,a.y),t=!0)}e.stroke()},plotPoints=e=>{e.fillStyle=lineColor,points.forEach(t=>{const r=graphToCanvas(t.x,t.y);e.beginPath(),e.arc(r.x,r.y,5,0,2*Math.PI),e.fill(),e.fillStyle="#000000",e.font="11px Arial",e.fillText("(".concat(t.x,", ").concat(t.y,")"),r.x+8,r.y-8),e.fillStyle=lineColor})};(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{const e=canvasRef.current;if(!e)return;const t=e.getContext("2d");if(drawGrid(t),"function"===mode)try{plotFunction(t)}catch(r){setError("Invalid equation. Use format like: 2*x+3 or x^2 or sin(x)")}else plotPoints(t)},[equation,points,zoom,showGrid,lineColor,mode,gridSize]);const handleCanvasClick=e=>{if("points"!==mode)return;const t=canvasRef.current.getBoundingClientRect(),r=e.clientX-t.left,n=e.clientY-t.top,a=canvasToGraph(r,n),i=Math.round(10*a.x)/10,o=Math.round(10*a.y)/10;setPoints([...points,{x:i,y:o}])},removeLastPoint=()=>{setPoints(points.slice(0,-1))},clearAllPoints=()=>{setPoints([])},handleSave=()=>{const e=canvasRef.current.toDataURL("image/png");onSave({mode:mode,equation:"function"===mode?equation:null,points:"points"===mode?points:null,image:e,gridSize:gridSize,zoom:zoom})};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("div",{className:"bg-white rounded-lg border p-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\ud83d\udcca Graph Plotter"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("button",{onClick:()=>setMode("function"),className:"px-4 py-2 rounded-lg font-medium transition-colors ".concat("function"===mode?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"Plot Function"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("button",{onClick:()=>setMode("points"),className:"px-4 py-2 rounded-lg font-medium transition-colors ".concat("points"===mode?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"Plot Points"})]}),"function"===mode&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("div",{className:"mb-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Enter equation (y = ...)"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("input",{type:"text",value:equation,onChange:e=>setEquation(e.target.value),placeholder:"e.g., 2*x+3, x^2, sin(x), x^2-4",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Supported: +, -, *, /, ^, sin, cos, tan, sqrt, abs, log, ln, pi, e"}),error&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("p",{className:"text-xs text-red-600 mt-1",children:error})]}),"points"===mode&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("div",{className:"mb-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("p",{className:"text-sm text-gray-700 mb-2",children:["Click on the graph to plot points. Points: ",points.length]}),points.length>0&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("div",{className:"flex gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("button",{onClick:removeLastPoint,className:"px-3 py-1 bg-gray-100 text-gray-700 rounded hover:bg-gray-200 text-sm",children:"Remove Last"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("button",{onClick:clearAllPoints,className:"px-3 py-1 bg-red-100 text-red-700 rounded hover:bg-red-200 text-sm",children:"Clear All"})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("div",{className:"border rounded-lg overflow-hidden mb-4 bg-white",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("canvas",{ref:canvasRef,width:canvasWidth,height:canvasHeight,onClick:handleCanvasClick,className:"cursor-crosshair"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Zoom: ",zoom,"px/unit"]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("input",{type:"range",min:"10",max:"50",value:zoom,onChange:e=>setZoom(parseInt(e.target.value)),className:"w-full"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Line Color"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("input",{type:"color",value:lineColor,onChange:e=>setLineColor(e.target.value),className:"w-full h-10 rounded cursor-pointer"})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("div",{className:"flex items-center justify-between",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("label",{className:"flex items-center gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("input",{type:"checkbox",checked:showGrid,onChange:e=>setShowGrid(e.target.checked),className:"w-4 h-4"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("span",{className:"text-sm text-gray-700",children:"Show Grid"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("button",{onClick:handleSave,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium",children:"Save Graph"})]})]})},__WEBPACK_DEFAULT_EXPORT__=GraphPlotter},2489(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isDeepKey=function(e){switch(typeof e){case"number":case"symbol":return!1;case"string":return e.includes(".")||e.includes("[")||e.includes("]")}}},2682(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isPlainObject=function(e){if("object"!==typeof e)return!1;if(null==e)return!1;if(null===Object.getPrototypeOf(e))return!0;if("[object Object]"!==Object.prototype.toString.call(e)){var t;const r=e[Symbol.toStringTag];if(null==r)return!1;return!!(null!==(t=Object.getOwnPropertyDescriptor(e,Symbol.toStringTag))&&void 0!==t&&t.writable)&&e.toString()==="[object ".concat(r,"]")}let r=e;for(;null!==Object.getPrototypeOf(r);)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(e)===r}},2715(e,t,r){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(9599),a=r(7330),i=r(3808),o=r(8845);t.iteratee=function(e){if(null==e)return n.identity;switch(typeof e){case"function":return e;case"object":return Array.isArray(e)&&2===e.length?o.matchesProperty(e[0],e[1]):i.matches(e);case"string":case"symbol":case"number":return a.property(e)}}},2777(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isSymbol=function(e){return"symbol"===typeof e||e instanceof Symbol}},2799(e,t){"use strict";var r=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function a(e,t,n){var a=null;if(void 0!==n&&(a=""+n),void 0!==t.key&&(a=""+t.key),"key"in t)for(var i in n={},t)"key"!==i&&(n[i]=t[i]);else n=t;return t=n.ref,{$$typeof:r,type:e,key:a,ref:void 0!==t?t:null,props:n}}t.Fragment=n,t.jsx=a,t.jsxs=a},2897(e,t,r){var n=r(3693);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}e.exports=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e},e.exports.__esModule=!0,e.exports.default=e.exports},3272(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.toKey=function(e){var t;return"string"===typeof e||"symbol"===typeof e?e:Object.is(null===e||void 0===e||null===(t=e.valueOf)||void 0===t?void 0:t.call(e),-0)?"-0":String(e)}},3693(e,t,r){var n=r(7736);e.exports=function(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports},3738(e){function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},3757(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isTypedArray=function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}},3799(e,t,r){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(4704),a=r(1203),i=r(870),o=r(5093);t.isIterateeCall=function(e,t,r){return!!i.isObject(r)&&(!!("number"===typeof t&&a.isArrayLike(r)&&n.isIndex(t)&&t<r.length||"string"===typeof t&&t in r)&&o.isEqualsSameValueZero(r[t],e))}},3808(e,t,r){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(8268),a=r(5261);t.matches=function(e){return e=a.cloneDeep(e),t=>n.isMatch(t,e)}},3821(e,t,r){e.exports=r(2204).sortBy},4208(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.uniqBy=function(e,t){const r=new Map;for(let n=0;n<e.length;n++){const a=e[n],i=t(a,n,e);r.has(i)||r.set(i,a)}return Array.from(r.values())}},4288(e,t){"use strict";var r=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,v={};function y(e,t,r){this.props=e,this.context=t,this.refs=v,this.updater=r||f}function b(){}function x(e,t,r){this.props=e,this.context=t,this.refs=v,this.updater=r||f}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=y.prototype;var w=x.prototype=new b;w.constructor=x,g(w,y.prototype),w.isPureReactComponent=!0;var k=Array.isArray;function j(){}var S={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function N(e,t,n){var a=n.ref;return{$$typeof:r,type:e,key:t,ref:void 0!==a?a:null,props:n}}function _(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var A=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function E(e,t,a,i,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(s){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case r:case n:u=!0;break;case h:return E((u=e._init)(e._payload),t,a,i,o)}}if(u)return o=o(e),u=""===i?"."+T(e,0):i,k(o)?(a="",null!=u&&(a=u.replace(A,"$&/")+"/"),E(o,t,a,"",function(e){return e})):null!=o&&(_(o)&&(l=o,c=a+(null==o.key||e&&e.key===o.key?"":(""+o.key).replace(A,"$&/")+"/")+u,o=N(l.type,c,l.props)),t.push(o)),1;u=0;var d,m=""===i?".":i+":";if(k(e))for(var f=0;f<e.length;f++)u+=E(i=e[f],t,a,s=m+T(i,f),o);else if("function"===typeof(f=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=p&&d[p]||d["@@iterator"])?d:null))for(e=f.call(e),f=0;!(i=e.next()).done;)u+=E(i=i.value,t,a,s=m+T(i,f++),o);else if("object"===s){if("function"===typeof e.then)return E(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(j,j):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,a,i,o);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function O(e,t,r){if(null==e)return e;var n=[],a=0;return E(e,n,"","",function(e){return t.call(r,e,a++)}),n}function P(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var I="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},M={map:O,forEach:function(e,t,r){O(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return O(e,function(){t++}),t},toArray:function(e){return O(e,function(e){return e})||[]},only:function(e){if(!_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};t.Activity=m,t.Children=M,t.Component=y,t.Fragment=a,t.Profiler=o,t.PureComponent=x,t.StrictMode=i,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return S.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cacheSignal=function(){return null},t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var n=g({},e.props),a=e.key;if(null!=t)for(i in void 0!==t.key&&(a=""+t.key),t)!C.call(t,i)||"key"===i||"__self"===i||"__source"===i||"ref"===i&&void 0===t.ref||(n[i]=t[i]);var i=arguments.length-2;if(1===i)n.children=r;else if(1<i){for(var o=Array(i),s=0;s<i;s++)o[s]=arguments[s+2];n.children=o}return N(e.type,a,n)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:s,_context:e},e},t.createElement=function(e,t,r){var n,a={},i=null;if(null!=t)for(n in void 0!==t.key&&(i=""+t.key),t)C.call(t,n)&&"key"!==n&&"__self"!==n&&"__source"!==n&&(a[n]=t[n]);var o=arguments.length-2;if(1===o)a.children=r;else if(1<o){for(var s=Array(o),l=0;l<o;l++)s[l]=arguments[l+2];a.children=s}if(e&&e.defaultProps)for(n in o=e.defaultProps)void 0===a[n]&&(a[n]=o[n]);return N(e,i,a)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=_,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=S.T,r={};S.T=r;try{var n=e(),a=S.S;null!==a&&a(r,n),"object"===typeof n&&null!==n&&"function"===typeof n.then&&n.then(j,I)}catch(i){I(i)}finally{null!==t&&null!==r.types&&(t.types=r.types),S.T=t}},t.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},t.use=function(e){return S.H.use(e)},t.useActionState=function(e,t,r){return S.H.useActionState(e,t,r)},t.useCallback=function(e,t){return S.H.useCallback(e,t)},t.useContext=function(e){return S.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return S.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return S.H.useEffect(e,t)},t.useEffectEvent=function(e){return S.H.useEffectEvent(e)},t.useId=function(){return S.H.useId()},t.useImperativeHandle=function(e,t,r){return S.H.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return S.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return S.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return S.H.useMemo(e,t)},t.useOptimistic=function(e,t){return S.H.useOptimistic(e,t)},t.useReducer=function(e,t,r){return S.H.useReducer(e,t,r)},t.useRef=function(e){return S.H.useRef(e)},t.useState=function(e){return S.H.useState(e)},t.useSyncExternalStore=function(e,t,r){return S.H.useSyncExternalStore(e,t,r)},t.useTransition=function(){return S.H.useTransition()},t.version="19.2.4"},4332(e,t,r){e.exports=r(5053).uniqBy},4391(e,t,r){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(7004)},4704(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=/^(?:0|[1-9]\d*)$/;t.isIndex=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_SAFE_INTEGER;switch(typeof e){case"number":return Number.isInteger(e)&&e>=0&&e<t;case"symbol":return!1;case"string":return r.test(e)}}},4803(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isPrimitive=function(e){return null==e||"object"!==typeof e&&"function"!==typeof e}},4830(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.debounce=function(e,t){let r,{signal:n,edges:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=null;const o=null!=a&&a.includes("leading"),s=null==a||a.includes("trailing"),l=()=>{null!==i&&(e.apply(r,i),r=void 0,i=null)};let c=null;const u=()=>{null!=c&&clearTimeout(c),c=setTimeout(()=>{c=null,s&&l(),d()},t)},d=()=>{null!==c&&(clearTimeout(c),c=null),r=void 0,i=null},h=function(){if(null!==n&&void 0!==n&&n.aborted)return;r=this;for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];i=t;const s=null==c;u(),o&&s&&l()};return h.schedule=u,h.cancel=d,h.flush=()=>{l()},null===n||void 0===n||n.addEventListener("abort",d,{once:!0}),h}},4879(e,t,r){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(6770);t.toFinite=function(e){if(!e)return 0===e?e:0;if((e=n.toNumber(e))===1/0||e===-1/0){return(e<0?-1:1)*Number.MAX_VALUE}return e===e?e:0}},5043(e,t,r){"use strict";e.exports=r(4288)},5053(e,t,r){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(4208),a=r(9903),i=r(9599),o=r(2104),s=r(2715);t.uniqBy=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.identity;return o.isArrayLikeObject(e)?n.uniqBy(Array.from(e),a.ary(s.iteratee(t),1)):[]}},5093(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isEqualsSameValueZero=function(e,t){return e===t||Number.isNaN(e)&&Number.isNaN(t)}},5261(e,t,r){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(6433);t.cloneDeep=function(e){return n.cloneDeepWithImpl(e,void 0,e,new Map,void 0)}},5303(e,t,r){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(2489),a=r(4704),i=r(6321),o=r(1444);t.has=function(e,t){let r;if(r=Array.isArray(t)?t:"string"===typeof t&&n.isDeepKey(t)&&null==(null===e||void 0===e?void 0:e[t])?o.toPath(t):[t],0===r.length)return!1;let s=e;for(let n=0;n<r.length;n++){const e=r[n];if(null==s||!Object.hasOwn(s,e)){if(!((Array.isArray(s)||i.isArguments(s))&&a.isIndex(e)&&e<s.length))return!1}s=s[e]}return!0}},5316(e,t,r){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(9709),a=r(7043),i=r(1444);t.orderBy=function(e,t,r,o){if(null==e)return[];r=o?void 0:r,Array.isArray(e)||(e=Object.values(e)),Array.isArray(t)||(t=null==t?[null]:[t]),0===t.length&&(t=[null]),Array.isArray(r)||(r=null==r?[]:[r]),r=r.map(e=>String(e));const s=(e,t)=>{let r=e;for(let n=0;n<t.length&&null!=r;++n)r=r[t[n]];return r},l=t.map(e=>(Array.isArray(e)&&1===e.length&&(e=e[0]),null==e||"function"===typeof e||Array.isArray(e)||a.isKey(e)?e:{key:e,path:i.toPath(e)}));return e.map(e=>({original:e,criteria:l.map(t=>((e,t)=>null==t||null==e?t:"object"===typeof e&&"key"in e?Object.hasOwn(t,e.key)?t[e.key]:s(t,e.path):"function"===typeof e?e(t):Array.isArray(e)?s(t,e):"object"===typeof t?t[e]:t)(t,e))})).slice().sort((e,t)=>{for(let a=0;a<l.length;a++){const i=n.compareValues(e.criteria[a],t.criteria[a],r[a]);if(0!==i)return i}return 0}).map(e=>e.original)}},5414(e,t,r){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(1293);t.throttle=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{leading:a=!0,trailing:i=!0}=r;return n.debounce(e,t,{leading:a,maxWait:t,trailing:i})}},5508(e,t,r){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(6433),a=r(5990),i=r(7599);t.cloneDeepWith=function(e,t){return n.cloneDeepWith(e,(r,o,s,l)=>{const c=null===t||void 0===t?void 0:t(r,o,s,l);if(void 0!==c)return c;if("object"===typeof e){if(a.getTag(e)===i.objectTag&&"function"!==typeof e.constructor){const t={};return l.set(e,t),n.copyProperties(t,e,s,l),t}switch(Object.prototype.toString.call(e)){case i.numberTag:case i.stringTag:case i.booleanTag:{const t=new e.constructor(null===e||void 0===e?void 0:e.valueOf());return n.copyProperties(t,e),t}case i.argumentsTag:{const t={};return n.copyProperties(t,e),t.length=e.length,t[Symbol.iterator]=e[Symbol.iterator],t}default:return}}})}},5896(e,t){"use strict";function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,a=e[n];if(!(0<i(a,t)))break e;e[n]=t,e[r]=a,r=n}}function n(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,a=e.length,o=a>>>1;n<o;){var s=2*(n+1)-1,l=e[s],c=s+1,u=e[c];if(0>i(l,r))c<a&&0>i(u,l)?(e[n]=u,e[c]=r,n=c):(e[n]=l,e[s]=r,n=s);else{if(!(c<a&&0>i(u,r)))break e;e[n]=u,e[c]=r,n=c}}}return t}function i(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],d=1,h=null,m=3,p=!1,f=!1,g=!1,v=!1,y="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=n(u);null!==t;){if(null===t.callback)a(u);else{if(!(t.startTime<=e))break;a(u),t.sortIndex=t.expirationTime,r(c,t)}t=n(u)}}function k(e){if(g=!1,w(e),!f)if(null!==n(c))f=!0,S||(S=!0,j());else{var t=n(u);null!==t&&P(k,t.startTime-e)}}var j,S=!1,C=-1,N=5,_=-1;function A(){return!!v||!(t.unstable_now()-_<N)}function T(){if(v=!1,S){var e=t.unstable_now();_=e;var r=!0;try{e:{f=!1,g&&(g=!1,b(C),C=-1),p=!0;var i=m;try{t:{for(w(e),h=n(c);null!==h&&!(h.expirationTime>e&&A());){var o=h.callback;if("function"===typeof o){h.callback=null,m=h.priorityLevel;var s=o(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof s){h.callback=s,w(e),r=!0;break t}h===n(c)&&a(c),w(e)}else a(c);h=n(c)}if(null!==h)r=!0;else{var l=n(u);null!==l&&P(k,l.startTime-e),r=!1}}break e}finally{h=null,m=i,p=!1}r=void 0}}finally{r?j():S=!1}}}if("function"===typeof x)j=function(){x(T)};else if("undefined"!==typeof MessageChannel){var E=new MessageChannel,O=E.port2;E.port1.onmessage=T,j=function(){O.postMessage(null)}}else j=function(){y(T,0)};function P(e,r){C=y(function(){e(t.unstable_now())},r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(e){switch(m){case 1:case 2:case 3:var t=3;break;default:t=m}var r=m;m=t;try{return e()}finally{m=r}},t.unstable_requestPaint=function(){v=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=m;m=e;try{return t()}finally{m=r}},t.unstable_scheduleCallback=function(e,a,i){var o=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?o+i:o:i=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:a,priorityLevel:e,startTime:i,expirationTime:s=i+s,sortIndex:-1},i>o?(e.sortIndex=i,r(u,e),null===n(c)&&e===n(u)&&(g?(b(C),C=-1):g=!0,P(k,i-o))):(e.sortIndex=s,r(c,e),f||p||(f=!0,S||(S=!0,j()))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=m;return function(){var r=m;m=t;try{return e.apply(this,arguments)}finally{m=r}}}},5990(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.getTag=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}},6321(e,t,r){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(5990);t.isArguments=function(e){return null!==e&&"object"===typeof e&&"[object Arguments]"===n.getTag(e)}},6392(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.last=function(e){return e[e.length-1]}},6433(e,t,r){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(6443),a=r(5990),i=r(7599),o=r(4803),s=r(3757);function l(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Map,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;const d=null===u||void 0===u?void 0:u(e,t,r,n);if(void 0!==d)return d;if(o.isPrimitive(e))return e;if(n.has(e))return n.get(e);if(Array.isArray(e)){const t=new Array(e.length);n.set(e,t);for(let a=0;a<e.length;a++)t[a]=l(e[a],a,r,n,u);return Object.hasOwn(e,"index")&&(t.index=e.index),Object.hasOwn(e,"input")&&(t.input=e.input),t}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){const t=new RegExp(e.source,e.flags);return t.lastIndex=e.lastIndex,t}if(e instanceof Map){const t=new Map;n.set(e,t);for(const[a,i]of e)t.set(a,l(i,a,r,n,u));return t}if(e instanceof Set){const t=new Set;n.set(e,t);for(const a of e)t.add(l(a,void 0,r,n,u));return t}if("undefined"!==typeof Buffer&&Buffer.isBuffer(e))return e.subarray();if(s.isTypedArray(e)){const t=new(Object.getPrototypeOf(e).constructor)(e.length);n.set(e,t);for(let a=0;a<e.length;a++)t[a]=l(e[a],a,r,n,u);return t}if(e instanceof ArrayBuffer||"undefined"!==typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer)return e.slice(0);if(e instanceof DataView){const t=new DataView(e.buffer.slice(0),e.byteOffset,e.byteLength);return n.set(e,t),c(t,e,r,n,u),t}if("undefined"!==typeof File&&e instanceof File){const t=new File([e],e.name,{type:e.type});return n.set(e,t),c(t,e,r,n,u),t}if("undefined"!==typeof Blob&&e instanceof Blob){const t=new Blob([e],{type:e.type});return n.set(e,t),c(t,e,r,n,u),t}if(e instanceof Error){const t=new e.constructor;return n.set(e,t),t.message=e.message,t.name=e.name,t.stack=e.stack,t.cause=e.cause,c(t,e,r,n,u),t}if(e instanceof Boolean){const t=new Boolean(e.valueOf());return n.set(e,t),c(t,e,r,n,u),t}if(e instanceof Number){const t=new Number(e.valueOf());return n.set(e,t),c(t,e,r,n,u),t}if(e instanceof String){const t=new String(e.valueOf());return n.set(e,t),c(t,e,r,n,u),t}if("object"===typeof e&&function(e){switch(a.getTag(e)){case i.argumentsTag:case i.arrayTag:case i.arrayBufferTag:case i.dataViewTag:case i.booleanTag:case i.dateTag:case i.float32ArrayTag:case i.float64ArrayTag:case i.int8ArrayTag:case i.int16ArrayTag:case i.int32ArrayTag:case i.mapTag:case i.numberTag:case i.objectTag:case i.regexpTag:case i.setTag:case i.stringTag:case i.symbolTag:case i.uint8ArrayTag:case i.uint8ClampedArrayTag:case i.uint16ArrayTag:case i.uint32ArrayTag:return!0;default:return!1}}(e)){const t=Object.create(Object.getPrototypeOf(e));return n.set(e,t),c(t,e,r,n,u),t}return e}function c(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,a=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;const o=[...Object.keys(t),...n.getSymbols(t)];for(let n=0;n<o.length;n++){const s=o[n],c=Object.getOwnPropertyDescriptor(e,s);(null==c||c.writable)&&(e[s]=l(t[s],s,r,a,i))}}t.cloneDeepWith=function(e,t){return l(e,void 0,e,new Map,t)},t.cloneDeepWithImpl=l,t.copyProperties=c},6443(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.getSymbols=function(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.prototype.propertyIsEnumerable.call(e,t))}},6672(e,t,r){"use strict";var n=r(5043);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var o={d:{f:i,r:function(){throw Error(a(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},s=Symbol.for("react.portal");var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(a(299));return function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:s,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},t.flushSync=function(e){var t=l.T,r=o.p;try{if(l.T=null,o.p=2,e)return e()}finally{l.T=t,o.p=r,o.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,o.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&o.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var r=t.as,n=c(r,t.crossOrigin),a="string"===typeof t.integrity?t.integrity:void 0,i="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===r?o.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:n,integrity:a,fetchPriority:i}):"script"===r&&o.d.X(e,{crossOrigin:n,integrity:a,fetchPriority:i,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var r=c(t.as,t.crossOrigin);o.d.M(e,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&o.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var r=t.as,n=c(r,t.crossOrigin);o.d.L(e,r,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var r=c(t.as,t.crossOrigin);o.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else o.d.m(e)},t.requestFormReset=function(e){o.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,r){return l.H.useFormState(e,t,r)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.2.4"},6770(e,t,r){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(2777);t.toNumber=function(e){return n.isSymbol(e)?NaN:Number(e)}},7004(e,t,r){"use strict";var n=r(8853),a=r(5043),i=r(7950);function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(31===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function d(e){if(l(e)!==e)throw Error(o(188))}function h(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=h(e)))return t;e=e.sibling}return null}var m=Object.assign,p=Symbol.for("react.element"),f=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),x=Symbol.for("react.consumer"),w=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),N=Symbol.for("react.lazy");Symbol.for("react.scope");var _=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var A=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var T=Symbol.iterator;function E(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=T&&e[T]||e["@@iterator"])?e:null}var O=Symbol.for("react.client.reference");function P(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===O?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case v:return"Fragment";case b:return"Profiler";case y:return"StrictMode";case j:return"Suspense";case S:return"SuspenseList";case _:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case g:return"Portal";case w:return e.displayName||"Context";case x:return(e._context.displayName||"Context")+".Consumer";case k:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case C:return null!==(t=e.displayName||null)?t:P(e.type)||"Memo";case N:t=e._payload,e=e._init;try{return P(e(t))}catch(r){}}return null}var I=Array.isArray,M=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,R=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D={pending:!1,data:null,method:null,action:null},L=[],z=-1;function q(e){return{current:e}}function B(e){0>z||(e.current=L[z],L[z]=null,z--)}function F(e,t){z++,L[z]=e.current,e.current=t}var U,H,W=q(null),K=q(null),V=q(null),G=q(null);function Q(e,t){switch(F(V,t),F(K,e),F(W,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?vd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=yd(t=vd(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}B(W),F(W,e)}function Y(){B(W),B(K),B(V)}function $(e){null!==e.memoizedState&&F(G,e);var t=W.current,r=yd(t,e.type);t!==r&&(F(K,e),F(W,r))}function J(e){K.current===e&&(B(W),B(K)),G.current===e&&(B(G),uh._currentValue=D)}function X(e){if(void 0===U)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);U=t&&t[1]||"",H=-1<r.stack.indexOf("\n    at")?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+U+e+H}var Z=!1;function ee(e,t){if(!e||Z)return"";Z=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(t){var r=function(){throw Error()};if(Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(r,[])}catch(a){var n=a}Reflect.construct(e,[],r)}else{try{r.call()}catch(i){n=i}e.call(r.prototype)}}else{try{throw Error()}catch(o){n=o}(r=e())&&"function"===typeof r.catch&&r.catch(function(){})}}catch(s){if(s&&n&&"string"===typeof s.stack)return[s.stack,n.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var a=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");a&&a.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=n.DetermineComponentFrameRoot(),o=i[0],s=i[1];if(o&&s){var l=o.split("\n"),c=s.split("\n");for(a=n=0;n<l.length&&!l[n].includes("DetermineComponentFrameRoot");)n++;for(;a<c.length&&!c[a].includes("DetermineComponentFrameRoot");)a++;if(n===l.length||a===c.length)for(n=l.length-1,a=c.length-1;1<=n&&0<=a&&l[n]!==c[a];)a--;for(;1<=n&&0<=a;n--,a--)if(l[n]!==c[a]){if(1!==n||1!==a)do{if(n--,0>--a||l[n]!==c[a]){var u="\n"+l[n].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=n&&0<=a);break}}}finally{Z=!1,Error.prepareStackTrace=r}return(r=e?e.displayName||e.name:"")?X(r):""}function te(e,t){switch(e.tag){case 26:case 27:case 5:return X(e.type);case 16:return X("Lazy");case 13:return e.child!==t&&null!==t?X("Suspense Fallback"):X("Suspense");case 19:return X("SuspenseList");case 0:case 15:return ee(e.type,!1);case 11:return ee(e.type.render,!1);case 1:return ee(e.type,!0);case 31:return X("Activity");default:return""}}function re(e){try{var t="",r=null;do{t+=te(e,r),r=e,e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}var ne=Object.prototype.hasOwnProperty,ae=n.unstable_scheduleCallback,ie=n.unstable_cancelCallback,oe=n.unstable_shouldYield,se=n.unstable_requestPaint,le=n.unstable_now,ce=n.unstable_getCurrentPriorityLevel,ue=n.unstable_ImmediatePriority,de=n.unstable_UserBlockingPriority,he=n.unstable_NormalPriority,me=n.unstable_LowPriority,pe=n.unstable_IdlePriority,fe=n.log,ge=n.unstable_setDisableYieldValue,ve=null,ye=null;function be(e){if("function"===typeof fe&&ge(e),ye&&"function"===typeof ye.setStrictMode)try{ye.setStrictMode(ve,e)}catch(t){}}var xe=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(we(e)/ke|0)|0},we=Math.log,ke=Math.LN2;var je=256,Se=262144,Ce=4194304;function Ne(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function _e(e,t,r){var n=e.pendingLanes;if(0===n)return 0;var a=0,i=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var s=134217727&n;return 0!==s?0!==(n=s&~i)?a=Ne(n):0!==(o&=s)?a=Ne(o):r||0!==(r=s&~e)&&(a=Ne(r)):0!==(s=n&~i)?a=Ne(s):0!==o?a=Ne(o):r||0!==(r=n&~e)&&(a=Ne(r)),0===a?0:0!==t&&t!==a&&0===(t&i)&&((i=a&-a)>=(r=t&-t)||32===i&&0!==(4194048&r))?t:a}function Ae(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Te(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Ee(){var e=Ce;return 0===(62914560&(Ce<<=1))&&(Ce=4194304),e}function Oe(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Pe(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ie(e,t,r){e.pendingLanes|=t,e.suspendedLanes&=~t;var n=31-xe(t);e.entangledLanes|=t,e.entanglements[n]=1073741824|e.entanglements[n]|261930&r}function Me(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-xe(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}function Re(e,t){var r=t&-t;return 0!==((r=0!==(42&r)?1:De(r))&(e.suspendedLanes|t))?0:r}function De(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Le(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function ze(){var e=R.p;return 0!==e?e:void 0===(e=window.event)?32:Nh(e.type)}function qe(e,t){var r=R.p;try{return R.p=e,t()}finally{R.p=r}}var Be=Math.random().toString(36).slice(2),Fe="__reactFiber$"+Be,Ue="__reactProps$"+Be,He="__reactContainer$"+Be,We="__reactEvents$"+Be,Ke="__reactListeners$"+Be,Ve="__reactHandles$"+Be,Ge="__reactResources$"+Be,Qe="__reactMarker$"+Be;function Ye(e){delete e[Fe],delete e[Ue],delete e[We],delete e[Ke],delete e[Ve]}function $e(e){var t=e[Fe];if(t)return t;for(var r=e.parentNode;r;){if(t=r[He]||r[Fe]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=Dd(e);null!==e;){if(r=e[Fe])return r;e=Dd(e)}return t}r=(e=r).parentNode}return null}function Je(e){if(e=e[Fe]||e[He]){var t=e.tag;if(5===t||6===t||13===t||31===t||26===t||27===t||3===t)return e}return null}function Xe(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(o(33))}function Ze(e){var t=e[Ge];return t||(t=e[Ge]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function et(e){e[Qe]=!0}var tt=new Set,rt={};function nt(e,t){at(e,t),at(e+"Capture",t)}function at(e,t){for(rt[e]=t,e=0;e<t.length;e++)tt.add(t[e])}var it=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ot={},st={};function lt(e,t,r){if(a=t,ne.call(st,a)||!ne.call(ot,a)&&(it.test(a)?st[a]=!0:(ot[a]=!0,0)))if(null===r)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var n=t.toLowerCase().slice(0,5);if("data-"!==n&&"aria-"!==n)return void e.removeAttribute(t)}e.setAttribute(t,""+r)}var a}function ct(e,t,r){if(null===r)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+r)}}function ut(e,t,r,n){if(null===n)e.removeAttribute(r);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(r)}e.setAttributeNS(t,r,""+n)}}function dt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ht(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function mt(e){if(!e._valueTracker){var t=ht(e)?"checked":"value";e._valueTracker=function(e,t,r){var n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e,t,""+e[t])}}function pt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=ht(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function ft(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var gt=/[\n"\\]/g;function vt(e){return e.replace(gt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function yt(e,t,r,n,a,i,o,s){e.name="",null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.type=o:e.removeAttribute("type"),null!=t?"number"===o?(0===t&&""===e.value||e.value!=t)&&(e.value=""+dt(t)):e.value!==""+dt(t)&&(e.value=""+dt(t)):"submit"!==o&&"reset"!==o||e.removeAttribute("value"),null!=t?xt(e,o,dt(t)):null!=r?xt(e,o,dt(r)):null!=n&&e.removeAttribute("value"),null==a&&null!=i&&(e.defaultChecked=!!i),null!=a&&(e.checked=a&&"function"!==typeof a&&"symbol"!==typeof a),null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s?e.name=""+dt(s):e.removeAttribute("name")}function bt(e,t,r,n,a,i,o,s){if(null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i&&(e.type=i),null!=t||null!=r){if(!("submit"!==i&&"reset"!==i||void 0!==t&&null!==t))return void mt(e);r=null!=r?""+dt(r):"",t=null!=t?""+dt(t):r,s||t===e.value||(e.value=t),e.defaultValue=t}n="function"!==typeof(n=null!=n?n:a)&&"symbol"!==typeof n&&!!n,e.checked=s?e.checked:!!n,e.defaultChecked=!!n,null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o&&(e.name=o),mt(e)}function xt(e,t,r){"number"===t&&ft(e.ownerDocument)===e||e.defaultValue===""+r||(e.defaultValue=""+r)}function wt(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+dt(r),t=null,a=0;a<e.length;a++){if(e[a].value===r)return e[a].selected=!0,void(n&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function kt(e,t,r){null==t||((t=""+dt(t))!==e.value&&(e.value=t),null!=r)?e.defaultValue=null!=r?""+dt(r):"":e.defaultValue!==t&&(e.defaultValue=t)}function jt(e,t,r,n){if(null==t){if(null!=n){if(null!=r)throw Error(o(92));if(I(n)){if(1<n.length)throw Error(o(93));n=n[0]}r=n}null==r&&(r=""),t=r}r=dt(t),e.defaultValue=r,(n=e.textContent)===r&&""!==n&&null!==n&&(e.value=n),mt(e)}function St(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var Ct=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Nt(e,t,r){var n=0===t.indexOf("--");null==r||"boolean"===typeof r||""===r?n?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":n?e.setProperty(t,r):"number"!==typeof r||0===r||Ct.has(t)?"float"===t?e.cssFloat=r:e[t]=(""+r).trim():e[t]=r+"px"}function _t(e,t,r){if(null!=t&&"object"!==typeof t)throw Error(o(62));if(e=e.style,null!=r){for(var n in r)!r.hasOwnProperty(n)||null!=t&&t.hasOwnProperty(n)||(0===n.indexOf("--")?e.setProperty(n,""):"float"===n?e.cssFloat="":e[n]="");for(var a in t)n=t[a],t.hasOwnProperty(a)&&r[a]!==n&&Nt(e,a,n)}else for(var i in t)t.hasOwnProperty(i)&&Nt(e,i,t[i])}function At(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Et=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ot(e){return Et.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Pt(){}var It=null;function Mt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Rt=null,Dt=null;function Lt(e){var t=Je(e);if(t&&(e=t.stateNode)){var r=e[Ue]||null;e:switch(e=t.stateNode,t.type){case"input":if(yt(e,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+vt(""+t)+'"][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=n[Ue]||null;if(!a)throw Error(o(90));yt(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<r.length;t++)(n=r[t]).form===e.form&&pt(n)}break e;case"textarea":kt(e,r.value,r.defaultValue);break e;case"select":null!=(t=r.value)&&wt(e,!!r.multiple,t,!1)}}}var zt=!1;function qt(e,t,r){if(zt)return e(t,r);zt=!0;try{return e(t)}finally{if(zt=!1,(null!==Rt||null!==Dt)&&(Zc(),Rt&&(t=Rt,e=Dt,Dt=Rt=null,Lt(t),e)))for(t=0;t<e.length;t++)Lt(e[t])}}function Bt(e,t){var r=e.stateNode;if(null===r)return null;var n=r[Ue]||null;if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw Error(o(231,t,typeof r));return r}var Ft=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Ut=!1;if(Ft)try{var Ht={};Object.defineProperty(Ht,"passive",{get:function(){Ut=!0}}),window.addEventListener("test",Ht,Ht),window.removeEventListener("test",Ht,Ht)}catch(Jh){Ut=!1}var Wt=null,Kt=null,Vt=null;function Gt(){if(Vt)return Vt;var e,t,r=Kt,n=r.length,a="value"in Wt?Wt.value:Wt.textContent,i=a.length;for(e=0;e<n&&r[e]===a[e];e++);var o=n-e;for(t=1;t<=o&&r[n-t]===a[i-t];t++);return Vt=a.slice(e,1<t?1-t:void 0)}function Qt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Yt(){return!0}function $t(){return!1}function Jt(e){function t(t,r,n,a,i){for(var o in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=a,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(a):a[o]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?Yt:$t,this.isPropagationStopped=$t,this}return m(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Yt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Yt)},persist:function(){},isPersistent:Yt}),t}var Xt,Zt,er,tr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rr=Jt(tr),nr=m({},tr,{view:0,detail:0}),ar=Jt(nr),ir=m({},nr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==er&&(er&&"mousemove"===e.type?(Xt=e.screenX-er.screenX,Zt=e.screenY-er.screenY):Zt=Xt=0,er=e),Xt)},movementY:function(e){return"movementY"in e?e.movementY:Zt}}),or=Jt(ir),sr=Jt(m({},ir,{dataTransfer:0})),lr=Jt(m({},nr,{relatedTarget:0})),cr=Jt(m({},tr,{animationName:0,elapsedTime:0,pseudoElement:0})),ur=Jt(m({},tr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),dr=Jt(m({},tr,{data:0})),hr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=pr[e])&&!!t[e]}function gr(){return fr}var vr=Jt(m({},nr,{key:function(e){if(e.key){var t=hr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Qt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?mr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gr,charCode:function(e){return"keypress"===e.type?Qt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Qt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),yr=Jt(m({},ir,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),br=Jt(m({},nr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gr})),xr=Jt(m({},tr,{propertyName:0,elapsedTime:0,pseudoElement:0})),wr=Jt(m({},ir,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),kr=Jt(m({},tr,{newState:0,oldState:0})),jr=[9,13,27,32],Sr=Ft&&"CompositionEvent"in window,Cr=null;Ft&&"documentMode"in document&&(Cr=document.documentMode);var Nr=Ft&&"TextEvent"in window&&!Cr,_r=Ft&&(!Sr||Cr&&8<Cr&&11>=Cr),Ar=String.fromCharCode(32),Tr=!1;function Er(e,t){switch(e){case"keyup":return-1!==jr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Or(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Pr=!1;var Ir={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Ir[e.type]:"textarea"===t}function Rr(e,t,r,n){Rt?Dt?Dt.push(n):Dt=[n]:Rt=n,0<(t=nd(t,"onChange")).length&&(r=new rr("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Dr=null,Lr=null;function zr(e){Yu(e,0)}function qr(e){if(pt(Xe(e)))return e}function Br(e,t){if("change"===e)return t}var Fr=!1;if(Ft){var Ur;if(Ft){var Hr="oninput"in document;if(!Hr){var Wr=document.createElement("div");Wr.setAttribute("oninput","return;"),Hr="function"===typeof Wr.oninput}Ur=Hr}else Ur=!1;Fr=Ur&&(!document.documentMode||9<document.documentMode)}function Kr(){Dr&&(Dr.detachEvent("onpropertychange",Vr),Lr=Dr=null)}function Vr(e){if("value"===e.propertyName&&qr(Lr)){var t=[];Rr(t,Lr,e,Mt(e)),qt(zr,t)}}function Gr(e,t,r){"focusin"===e?(Kr(),Lr=r,(Dr=t).attachEvent("onpropertychange",Vr)):"focusout"===e&&Kr()}function Qr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return qr(Lr)}function Yr(e,t){if("click"===e)return qr(t)}function $r(e,t){if("input"===e||"change"===e)return qr(t)}var Jr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Xr(e,t){if(Jr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!ne.call(t,a)||!Jr(e[a],t[a]))return!1}return!0}function Zr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function en(e,t){var r,n=Zr(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Zr(n)}}function tn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?tn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function rn(e){for(var t=ft((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var r="string"===typeof t.contentWindow.location.href}catch(n){r=!1}if(!r)break;t=ft((e=t.contentWindow).document)}return t}function nn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var an=Ft&&"documentMode"in document&&11>=document.documentMode,on=null,sn=null,ln=null,cn=!1;function un(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;cn||null==on||on!==ft(n)||("selectionStart"in(n=on)&&nn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},ln&&Xr(ln,n)||(ln=n,0<(n=nd(sn,"onSelect")).length&&(t=new rr("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=on)))}function dn(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var hn={animationend:dn("Animation","AnimationEnd"),animationiteration:dn("Animation","AnimationIteration"),animationstart:dn("Animation","AnimationStart"),transitionrun:dn("Transition","TransitionRun"),transitionstart:dn("Transition","TransitionStart"),transitioncancel:dn("Transition","TransitionCancel"),transitionend:dn("Transition","TransitionEnd")},mn={},pn={};function fn(e){if(mn[e])return mn[e];if(!hn[e])return e;var t,r=hn[e];for(t in r)if(r.hasOwnProperty(t)&&t in pn)return mn[e]=r[t];return e}Ft&&(pn=document.createElement("div").style,"AnimationEvent"in window||(delete hn.animationend.animation,delete hn.animationiteration.animation,delete hn.animationstart.animation),"TransitionEvent"in window||delete hn.transitionend.transition);var gn=fn("animationend"),vn=fn("animationiteration"),yn=fn("animationstart"),bn=fn("transitionrun"),xn=fn("transitionstart"),wn=fn("transitioncancel"),kn=fn("transitionend"),jn=new Map,Sn="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cn(e,t){jn.set(e,t),nt(t,[e])}Sn.push("scrollEnd");var Nn="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},_n=[],An=0,Tn=0;function En(){for(var e=An,t=Tn=An=0;t<e;){var r=_n[t];_n[t++]=null;var n=_n[t];_n[t++]=null;var a=_n[t];_n[t++]=null;var i=_n[t];if(_n[t++]=null,null!==n&&null!==a){var o=n.pending;null===o?a.next=a:(a.next=o.next,o.next=a),n.pending=a}0!==i&&Mn(r,a,i)}}function On(e,t,r,n){_n[An++]=e,_n[An++]=t,_n[An++]=r,_n[An++]=n,Tn|=n,e.lanes|=n,null!==(e=e.alternate)&&(e.lanes|=n)}function Pn(e,t,r,n){return On(e,t,r,n),Rn(e)}function In(e,t){return On(e,null,null,t),Rn(e)}function Mn(e,t,r){e.lanes|=r;var n=e.alternate;null!==n&&(n.lanes|=r);for(var a=!1,i=e.return;null!==i;)i.childLanes|=r,null!==(n=i.alternate)&&(n.childLanes|=r),22===i.tag&&(null===(e=i.stateNode)||1&e._visibility||(a=!0)),e=i,i=i.return;return 3===e.tag?(i=e.stateNode,a&&null!==t&&(a=31-xe(r),null===(n=(e=i.hiddenUpdates)[a])?e[a]=[t]:n.push(t),t.lane=536870912|r),i):null}function Rn(e){if(50<Wc)throw Wc=0,Kc=null,Error(o(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Dn={};function Ln(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zn(e,t,r,n){return new Ln(e,t,r,n)}function qn(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Bn(e,t){var r=e.alternate;return null===r?((r=zn(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=65011712&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function Fn(e,t){e.flags&=65011714;var r=e.alternate;return null===r?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,e.type=r.type,t=r.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Un(e,t,r,n,a,i){var s=0;if(n=e,"function"===typeof e)qn(e)&&(s=1);else if("string"===typeof e)s=function(e,t,r){if(1===r||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,r,W.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case _:return(e=zn(31,r,t,a)).elementType=_,e.lanes=i,e;case v:return Hn(r.children,a,i,t);case y:s=8,a|=24;break;case b:return(e=zn(12,r,t,2|a)).elementType=b,e.lanes=i,e;case j:return(e=zn(13,r,t,a)).elementType=j,e.lanes=i,e;case S:return(e=zn(19,r,t,a)).elementType=S,e.lanes=i,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case w:s=10;break e;case x:s=9;break e;case k:s=11;break e;case C:s=14;break e;case N:s=16,n=null;break e}s=29,r=Error(o(130,null===e?"null":typeof e,"")),n=null}return(t=zn(s,r,t,a)).elementType=e,t.type=n,t.lanes=i,t}function Hn(e,t,r,n){return(e=zn(7,e,n,t)).lanes=r,e}function Wn(e,t,r){return(e=zn(6,e,null,t)).lanes=r,e}function Kn(e){var t=zn(18,null,null,0);return t.stateNode=e,t}function Vn(e,t,r){return(t=zn(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Gn=new WeakMap;function Qn(e,t){if("object"===typeof e&&null!==e){var r=Gn.get(e);return void 0!==r?r:(t={value:e,source:t,stack:re(t)},Gn.set(e,t),t)}return{value:e,source:t,stack:re(t)}}var Yn=[],$n=0,Jn=null,Xn=0,Zn=[],ea=0,ta=null,ra=1,na="";function aa(e,t){Yn[$n++]=Xn,Yn[$n++]=Jn,Jn=e,Xn=t}function ia(e,t,r){Zn[ea++]=ra,Zn[ea++]=na,Zn[ea++]=ta,ta=e;var n=ra;e=na;var a=32-xe(n)-1;n&=~(1<<a),r+=1;var i=32-xe(t)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,ra=1<<32-xe(t)+a|r<<a|n,na=i+e}else ra=1<<i|r<<a|n,na=e}function oa(e){null!==e.return&&(aa(e,1),ia(e,1,0))}function sa(e){for(;e===Jn;)Jn=Yn[--$n],Yn[$n]=null,Xn=Yn[--$n],Yn[$n]=null;for(;e===ta;)ta=Zn[--ea],Zn[ea]=null,na=Zn[--ea],Zn[ea]=null,ra=Zn[--ea],Zn[ea]=null}function la(e,t){Zn[ea++]=ra,Zn[ea++]=na,Zn[ea++]=ta,ra=t.id,na=t.overflow,ta=e}var ca=null,ua=null,da=!1,ha=null,ma=!1,pa=Error(o(519));function fa(e){throw wa(Qn(Error(o(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),pa}function ga(e){var t=e.stateNode,r=e.type,n=e.memoizedProps;switch(t[Fe]=e,t[Ue]=n,r){case"dialog":$u("cancel",t),$u("close",t);break;case"iframe":case"object":case"embed":$u("load",t);break;case"video":case"audio":for(r=0;r<Gu.length;r++)$u(Gu[r],t);break;case"source":$u("error",t);break;case"img":case"image":case"link":$u("error",t),$u("load",t);break;case"details":$u("toggle",t);break;case"input":$u("invalid",t),bt(t,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0);break;case"select":$u("invalid",t);break;case"textarea":$u("invalid",t),jt(t,n.value,n.defaultValue,n.children)}"string"!==typeof(r=n.children)&&"number"!==typeof r&&"bigint"!==typeof r||t.textContent===""+r||!0===n.suppressHydrationWarning||cd(t.textContent,r)?(null!=n.popover&&($u("beforetoggle",t),$u("toggle",t)),null!=n.onScroll&&$u("scroll",t),null!=n.onScrollEnd&&$u("scrollend",t),null!=n.onClick&&(t.onclick=Pt),t=!0):t=!1,t||fa(e,!0)}function va(e){for(ca=e.return;ca;)switch(ca.tag){case 5:case 31:case 13:return void(ma=!1);case 27:case 3:return void(ma=!0);default:ca=ca.return}}function ya(e){if(e!==ca)return!1;if(!da)return va(e),da=!0,!1;var t,r=e.tag;if((t=3!==r&&27!==r)&&((t=5===r)&&(t=!("form"!==(t=e.type)&&"button"!==t)||bd(e.type,e.memoizedProps)),t=!t),t&&ua&&fa(e),va(e),13===r){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));ua=Rd(e)}else if(31===r){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));ua=Rd(e)}else 27===r?(r=ua,Nd(e.type)?(e=Md,Md=null,ua=e):ua=r):ua=ca?Id(e.stateNode.nextSibling):null;return!0}function ba(){ua=ca=null,da=!1}function xa(){var e=ha;return null!==e&&(null===Ec?Ec=e:Ec.push.apply(Ec,e),ha=null),e}function wa(e){null===ha?ha=[e]:ha.push(e)}var ka=q(null),ja=null,Sa=null;function Ca(e,t,r){F(ka,t._currentValue),t._currentValue=r}function Na(e){e._currentValue=ka.current,B(ka)}function _a(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Aa(e,t,r,n){var a=e.child;for(null!==a&&(a.return=e);null!==a;){var i=a.dependencies;if(null!==i){var s=a.child;i=i.firstContext;e:for(;null!==i;){var l=i;i=a;for(var c=0;c<t.length;c++)if(l.context===t[c]){i.lanes|=r,null!==(l=i.alternate)&&(l.lanes|=r),_a(i.return,r,e),n||(s=null);break e}i=l.next}}else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=r,null!==(i=s.alternate)&&(i.lanes|=r),_a(s,r,e),s=null}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===e){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}}function Ta(e,t,r,n){e=null;for(var a=t,i=!1;null!==a;){if(!i)if(0!==(524288&a.flags))i=!0;else if(0!==(262144&a.flags))break;if(10===a.tag){var s=a.alternate;if(null===s)throw Error(o(387));if(null!==(s=s.memoizedProps)){var l=a.type;Jr(a.pendingProps.value,s.value)||(null!==e?e.push(l):e=[l])}}else if(a===G.current){if(null===(s=a.alternate))throw Error(o(387));s.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(null!==e?e.push(uh):e=[uh])}a=a.return}null!==e&&Aa(t,e,r,n),t.flags|=262144}function Ea(e){for(e=e.firstContext;null!==e;){if(!Jr(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Oa(e){ja=e,Sa=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Pa(e){return Ma(ja,e)}function Ia(e,t){return null===ja&&Oa(e),Ma(e,t)}function Ma(e,t){var r=t._currentValue;if(t={context:t,memoizedValue:r,next:null},null===Sa){if(null===e)throw Error(o(308));Sa=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Sa=Sa.next=t;return r}var Ra="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,r){e.push(r)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Da=n.unstable_scheduleCallback,La=n.unstable_NormalPriority,za={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function qa(){return{controller:new Ra,data:new Map,refCount:0}}function Ba(e){e.refCount--,0===e.refCount&&Da(La,function(){e.controller.abort()})}var Fa=null,Ua=0,Ha=0,Wa=null;function Ka(){if(0===--Ua&&null!==Fa){null!==Wa&&(Wa.status="fulfilled");var e=Fa;Fa=null,Ha=0,Wa=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Va=M.S;M.S=function(e,t){Ic=le(),"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Fa){var r=Fa=[];Ua=0,Ha=Uu(),Wa={status:"pending",value:void 0,then:function(e){r.push(e)}}}Ua++,t.then(Ka,Ka)}(0,t),null!==Va&&Va(e,t)};var Ga=q(null);function Qa(){var e=Ga.current;return null!==e?e:pc.pooledCache}function Ya(e,t){F(Ga,null===t?Ga.current:t.pool)}function $a(){var e=Qa();return null===e?null:{parent:za._currentValue,pool:e}}var Ja=Error(o(460)),Xa=Error(o(474)),Za=Error(o(542)),ei={then:function(){}};function ti(e){return"fulfilled"===(e=e.status)||"rejected"===e}function ri(e,t,r){switch(void 0===(r=e[r])?e.push(t):r!==t&&(t.then(Pt,Pt),t=r),t.status){case"fulfilled":return t.value;case"rejected":throw oi(e=t.reason),e;default:if("string"===typeof t.status)t.then(Pt,Pt);else{if(null!==(e=pc)&&100<e.shellSuspendCounter)throw Error(o(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var r=t;r.status="fulfilled",r.value=e}},function(e){if("pending"===t.status){var r=t;r.status="rejected",r.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw oi(e=t.reason),e}throw ai=t,Ja}}function ni(e){try{return(0,e._init)(e._payload)}catch(t){if(null!==t&&"object"===typeof t&&"function"===typeof t.then)throw ai=t,Ja;throw t}}var ai=null;function ii(){if(null===ai)throw Error(o(459));var e=ai;return ai=null,e}function oi(e){if(e===Ja||e===Za)throw Error(o(483))}var si=null,li=0;function ci(e){var t=li;return li+=1,null===si&&(si=[]),ri(si,e,t)}function ui(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function di(e,t){if(t.$$typeof===p)throw Error(o(525));throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function hi(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function a(e,t){return(e=Bn(e,t)).index=0,e.sibling=null,e}function i(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=67108866,r):n:(t.flags|=67108866,r):(t.flags|=1048576,r)}function s(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,r,n){return null===t||6!==t.tag?((t=Wn(r,e.mode,n)).return=e,t):((t=a(t,r)).return=e,t)}function c(e,t,r,n){var i=r.type;return i===v?d(e,t,r.props.children,n,r.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===N&&ni(i)===t.type)?(ui(t=a(t,r.props),r),t.return=e,t):(ui(t=Un(r.type,r.key,r.props,null,e.mode,n),r),t.return=e,t)}function u(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Vn(r,e.mode,n)).return=e,t):((t=a(t,r.children||[])).return=e,t)}function d(e,t,r,n,i){return null===t||7!==t.tag?((t=Hn(r,e.mode,n,i)).return=e,t):((t=a(t,r)).return=e,t)}function h(e,t,r){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Wn(""+t,e.mode,r)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case f:return ui(r=Un(t.type,t.key,t.props,null,e.mode,r),t),r.return=e,r;case g:return(t=Vn(t,e.mode,r)).return=e,t;case N:return h(e,t=ni(t),r)}if(I(t)||E(t))return(t=Hn(t,e.mode,r,null)).return=e,t;if("function"===typeof t.then)return h(e,ci(t),r);if(t.$$typeof===w)return h(e,Ia(e,t),r);di(e,t)}return null}function m(e,t,r,n){var a=null!==t?t.key:null;if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return null!==a?null:l(e,t,""+r,n);if("object"===typeof r&&null!==r){switch(r.$$typeof){case f:return r.key===a?c(e,t,r,n):null;case g:return r.key===a?u(e,t,r,n):null;case N:return m(e,t,r=ni(r),n)}if(I(r)||E(r))return null!==a?null:d(e,t,r,n,null);if("function"===typeof r.then)return m(e,t,ci(r),n);if(r.$$typeof===w)return m(e,t,Ia(e,r),n);di(e,r)}return null}function p(e,t,r,n,a){if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return l(t,e=e.get(r)||null,""+n,a);if("object"===typeof n&&null!==n){switch(n.$$typeof){case f:return c(t,e=e.get(null===n.key?r:n.key)||null,n,a);case g:return u(t,e=e.get(null===n.key?r:n.key)||null,n,a);case N:return p(e,t,r,n=ni(n),a)}if(I(n)||E(n))return d(t,e=e.get(r)||null,n,a,null);if("function"===typeof n.then)return p(e,t,r,ci(n),a);if(n.$$typeof===w)return p(e,t,r,Ia(t,n),a);di(t,n)}return null}function y(l,c,u,d){if("object"===typeof u&&null!==u&&u.type===v&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case f:e:{for(var b=u.key;null!==c;){if(c.key===b){if((b=u.type)===v){if(7===c.tag){r(l,c.sibling),(d=a(c,u.props.children)).return=l,l=d;break e}}else if(c.elementType===b||"object"===typeof b&&null!==b&&b.$$typeof===N&&ni(b)===c.type){r(l,c.sibling),ui(d=a(c,u.props),u),d.return=l,l=d;break e}r(l,c);break}t(l,c),c=c.sibling}u.type===v?((d=Hn(u.props.children,l.mode,d,u.key)).return=l,l=d):(ui(d=Un(u.type,u.key,u.props,null,l.mode,d),u),d.return=l,l=d)}return s(l);case g:e:{for(b=u.key;null!==c;){if(c.key===b){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){r(l,c.sibling),(d=a(c,u.children||[])).return=l,l=d;break e}r(l,c);break}t(l,c),c=c.sibling}(d=Vn(u,l.mode,d)).return=l,l=d}return s(l);case N:return y(l,c,u=ni(u),d)}if(I(u))return function(a,o,s,l){for(var c=null,u=null,d=o,f=o=0,g=null;null!==d&&f<s.length;f++){d.index>f?(g=d,d=null):g=d.sibling;var v=m(a,d,s[f],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(a,d),o=i(v,o,f),null===u?c=v:u.sibling=v,u=v,d=g}if(f===s.length)return r(a,d),da&&aa(a,f),c;if(null===d){for(;f<s.length;f++)null!==(d=h(a,s[f],l))&&(o=i(d,o,f),null===u?c=d:u.sibling=d,u=d);return da&&aa(a,f),c}for(d=n(d);f<s.length;f++)null!==(g=p(d,a,f,s[f],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?f:g.key),o=i(g,o,f),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(a,e)}),da&&aa(a,f),c}(l,c,u,d);if(E(u)){if("function"!==typeof(b=E(u)))throw Error(o(150));return function(a,s,l,c){if(null==l)throw Error(o(151));for(var u=null,d=null,f=s,g=s=0,v=null,y=l.next();null!==f&&!y.done;g++,y=l.next()){f.index>g?(v=f,f=null):v=f.sibling;var b=m(a,f,y.value,c);if(null===b){null===f&&(f=v);break}e&&f&&null===b.alternate&&t(a,f),s=i(b,s,g),null===d?u=b:d.sibling=b,d=b,f=v}if(y.done)return r(a,f),da&&aa(a,g),u;if(null===f){for(;!y.done;g++,y=l.next())null!==(y=h(a,y.value,c))&&(s=i(y,s,g),null===d?u=y:d.sibling=y,d=y);return da&&aa(a,g),u}for(f=n(f);!y.done;g++,y=l.next())null!==(y=p(f,a,g,y.value,c))&&(e&&null!==y.alternate&&f.delete(null===y.key?g:y.key),s=i(y,s,g),null===d?u=y:d.sibling=y,d=y);return e&&f.forEach(function(e){return t(a,e)}),da&&aa(a,g),u}(l,c,u=b.call(u),d)}if("function"===typeof u.then)return y(l,c,ci(u),d);if(u.$$typeof===w)return y(l,c,Ia(l,u),d);di(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(r(l,c.sibling),(d=a(c,u)).return=l,l=d):(r(l,c),(d=Wn(u,l.mode,d)).return=l,l=d),s(l)):r(l,c)}return function(e,t,r,n){try{li=0;var a=y(e,t,r,n);return si=null,a}catch(o){if(o===Ja||o===Za)throw o;var i=zn(29,o,null,e.mode);return i.lanes=n,i.return=e,i}}}var mi=hi(!0),pi=hi(!1),fi=!1;function gi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function vi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function yi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function bi(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&mc)){var a=n.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),n.pending=t,t=Rn(e),Mn(e,null,r),t}return On(e,n,t,r),Rn(e)}function xi(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&r))){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,Me(e,r)}}function wi(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var a=null,i=null;if(null!==(r=r.firstBaseUpdate)){do{var o={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};null===i?a=i=o:i=i.next=o,r=r.next}while(null!==r);null===i?a=i=t:i=i.next=t}else a=i=t;return r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,callbacks:n.callbacks},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}var ki=!1;function ji(){if(ki){if(null!==Wa)throw Wa}}function Si(e,t,r,n){ki=!1;var a=e.updateQueue;fi=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var l=s,c=l.next;l.next=null,null===o?i=c:o.next=c,o=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=a.baseState;for(o=0,u=c=l=null,s=i;;){var h=-536870913&s.lane,p=h!==s.lane;if(p?(gc&h)===h:(n&h)===h){0!==h&&h===Ha&&(ki=!0),null!==u&&(u=u.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});e:{var f=e,g=s;h=t;var v=r;switch(g.tag){case 1:if("function"===typeof(f=g.payload)){d=f.call(v,d,h);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=g.payload)?f.call(v,d,h):f)||void 0===h)break e;d=m({},d,h);break e;case 2:fi=!0}}null!==(h=s.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=a.callbacks)?a.callbacks=[h]:p.push(h))}else p={lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,o|=h;if(null===(s=s.next)){if(null===(s=a.shared.pending))break;s=(p=s).next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}}null===u&&(l=d),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=u,null===i&&(a.shared.lanes=0),Sc|=o,e.lanes=o,e.memoizedState=d}}function Ci(e,t){if("function"!==typeof e)throw Error(o(191,e));e.call(t)}function Ni(e,t){var r=e.callbacks;if(null!==r)for(e.callbacks=null,e=0;e<r.length;e++)Ci(r[e],t)}var _i=q(null),Ai=q(0);function Ti(e,t){F(Ai,e=kc),F(_i,t),kc=e|t.baseLanes}function Ei(){F(Ai,kc),F(_i,_i.current)}function Oi(){kc=Ai.current,B(_i),B(Ai)}var Pi=q(null),Ii=null;function Mi(e){var t=e.alternate;F(qi,1&qi.current),F(Pi,e),null===Ii&&(null===t||null!==_i.current||null!==t.memoizedState)&&(Ii=e)}function Ri(e){F(qi,qi.current),F(Pi,e),null===Ii&&(Ii=e)}function Di(e){22===e.tag?(F(qi,qi.current),F(Pi,e),null===Ii&&(Ii=e)):Li()}function Li(){F(qi,qi.current),F(Pi,Pi.current)}function zi(e){B(Pi),Ii===e&&(Ii=null),B(qi)}var qi=q(0);function Bi(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||Od(r)||Pd(r)))return t}else if(19!==t.tag||"forwards"!==t.memoizedProps.revealOrder&&"backwards"!==t.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==t.memoizedProps.revealOrder&&"together"!==t.memoizedProps.revealOrder){if(null!==t.child){t.child.return=t,t=t.child;continue}}else if(0!==(128&t.flags))return t;if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Fi=0,Ui=null,Hi=null,Wi=null,Ki=!1,Vi=!1,Gi=!1,Qi=0,Yi=0,$i=null,Ji=0;function Xi(){throw Error(o(321))}function Zi(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Jr(e[r],t[r]))return!1;return!0}function eo(e,t,r,n,a,i){return Fi=i,Ui=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,M.H=null===e||null===e.memoizedState?gs:vs,Gi=!1,i=r(n,a),Gi=!1,Vi&&(i=ro(t,r,n,a)),to(e),i}function to(e){M.H=fs;var t=null!==Hi&&null!==Hi.next;if(Fi=0,Wi=Hi=Ui=null,Ki=!1,Yi=0,$i=null,t)throw Error(o(300));null===e||Is||null!==(e=e.dependencies)&&Ea(e)&&(Is=!0)}function ro(e,t,r,n){Ui=e;var a=0;do{if(Vi&&($i=null),Yi=0,Vi=!1,25<=a)throw Error(o(301));if(a+=1,Wi=Hi=null,null!=e.updateQueue){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,null!=i.memoCache&&(i.memoCache.index=0)}M.H=ys,i=t(r,n)}while(Vi);return i}function no(){var e=M.H,t=e.useState()[0];return t="function"===typeof t.then?co(t):t,e=e.useState()[0],(null!==Hi?Hi.memoizedState:null)!==e&&(Ui.flags|=1024),t}function ao(){var e=0!==Qi;return Qi=0,e}function io(e,t,r){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r}function oo(e){if(Ki){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Ki=!1}Fi=0,Wi=Hi=Ui=null,Vi=!1,Yi=Qi=0,$i=null}function so(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Wi?Ui.memoizedState=Wi=e:Wi=Wi.next=e,Wi}function lo(){if(null===Hi){var e=Ui.alternate;e=null!==e?e.memoizedState:null}else e=Hi.next;var t=null===Wi?Ui.memoizedState:Wi.next;if(null!==t)Wi=t,Hi=e;else{if(null===e){if(null===Ui.alternate)throw Error(o(467));throw Error(o(310))}e={memoizedState:(Hi=e).memoizedState,baseState:Hi.baseState,baseQueue:Hi.baseQueue,queue:Hi.queue,next:null},null===Wi?Ui.memoizedState=Wi=e:Wi=Wi.next=e}return Wi}function co(e){var t=Yi;return Yi+=1,null===$i&&($i=[]),e=ri($i,e,t),t=Ui,null===(null===Wi?t.memoizedState:Wi.next)&&(t=t.alternate,M.H=null===t||null===t.memoizedState?gs:vs),e}function uo(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return co(e);if(e.$$typeof===w)return Pa(e)}throw Error(o(438,String(e)))}function ho(e){var t=null,r=Ui.updateQueue;if(null!==r&&(t=r.memoCache),null==t){var n=Ui.alternate;null!==n&&(null!==(n=n.updateQueue)&&(null!=(n=n.memoCache)&&(t={data:n.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===r&&(r={lastEffect:null,events:null,stores:null,memoCache:null},Ui.updateQueue=r),r.memoCache=t,void 0===(r=t.data[t.index]))for(r=t.data[t.index]=Array(e),n=0;n<e;n++)r[n]=A;return t.index++,r}function mo(e,t){return"function"===typeof t?t(e):t}function po(e){return fo(lo(),Hi,e)}function fo(e,t,r){var n=e.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=r;var a=e.baseQueue,i=n.pending;if(null!==i){if(null!==a){var s=a.next;a.next=i.next,i.next=s}t.baseQueue=a=i,n.pending=null}if(i=e.baseState,null===a)e.memoizedState=i;else{var l=s=null,c=null,u=t=a.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(gc&h)===h:(Fi&h)===h){var m=u.revertLane;if(0===m)null!==c&&(c=c.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Ha&&(d=!0);else{if((Fi&m)===m){u=u.next,m===Ha&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,s=i):c=c.next=h,Ui.lanes|=m,Sc|=m}h=u.action,Gi&&r(i,h),i=u.hasEagerState?u.eagerState:r(i,h)}else m={lane:h,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=m,s=i):c=c.next=m,Ui.lanes|=h,Sc|=h;u=u.next}while(null!==u&&u!==t);if(null===c?s=i:c.next=l,!Jr(i,e.memoizedState)&&(Is=!0,d&&null!==(r=Wa)))throw r;e.memoizedState=i,e.baseState=s,e.baseQueue=c,n.lastRenderedState=i}return null===a&&(n.lanes=0),[e.memoizedState,n.dispatch]}function go(e){var t=lo(),r=t.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(null!==a){r.pending=null;var s=a=a.next;do{i=e(i,s.action),s=s.next}while(s!==a);Jr(i,t.memoizedState)||(Is=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function vo(e,t,r){var n=Ui,a=lo(),i=da;if(i){if(void 0===r)throw Error(o(407));r=r()}else r=t();var s=!Jr((Hi||a).memoizedState,r);if(s&&(a.memoizedState=r,Is=!0),a=a.queue,Uo(xo.bind(null,n,a,e),[e]),a.getSnapshot!==t||s||null!==Wi&&1&Wi.memoizedState.tag){if(n.flags|=2048,Lo(9,{destroy:void 0},bo.bind(null,n,a,r,t),null),null===pc)throw Error(o(349));i||0!==(127&Fi)||yo(n,t,r)}return r}function yo(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=Ui.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Ui.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function bo(e,t,r,n){t.value=r,t.getSnapshot=n,wo(t)&&ko(e)}function xo(e,t,r){return r(function(){wo(t)&&ko(e)})}function wo(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Jr(e,r)}catch(n){return!0}}function ko(e){var t=In(e,2);null!==t&&Qc(t,e,2)}function jo(e){var t=so();if("function"===typeof e){var r=e;if(e=r(),Gi){be(!0);try{r()}finally{be(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mo,lastRenderedState:e},t}function So(e,t,r,n){return e.baseState=r,fo(e,Hi,"function"===typeof n?n:mo)}function Co(e,t,r,n,a){if(hs(e))throw Error(o(485));if(null!==(e=t.action)){var i={payload:a,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){i.listeners.push(e)}};null!==M.T?r(!0):i.isTransition=!1,n(i),null===(r=t.pending)?(i.next=t.pending=i,No(t,i)):(i.next=r.next,t.pending=r.next=i)}}function No(e,t){var r=t.action,n=t.payload,a=e.state;if(t.isTransition){var i=M.T,o={};M.T=o;try{var s=r(a,n),l=M.S;null!==l&&l(o,s),_o(e,t,s)}catch(c){To(e,t,c)}finally{null!==i&&null!==o.types&&(i.types=o.types),M.T=i}}else try{_o(e,t,i=r(a,n))}catch(u){To(e,t,u)}}function _o(e,t,r){null!==r&&"object"===typeof r&&"function"===typeof r.then?r.then(function(r){Ao(e,t,r)},function(r){return To(e,t,r)}):Ao(e,t,r)}function Ao(e,t,r){t.status="fulfilled",t.value=r,Eo(t),e.state=r,null!==(t=e.pending)&&((r=t.next)===t?e.pending=null:(r=r.next,t.next=r,No(e,r)))}function To(e,t,r){var n=e.pending;if(e.pending=null,null!==n){n=n.next;do{t.status="rejected",t.reason=r,Eo(t),t=t.next}while(t!==n)}e.action=null}function Eo(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Oo(e,t){return t}function Po(e,t){if(da){var r=pc.formState;if(null!==r){e:{var n=Ui;if(da){if(ua){t:{for(var a=ua,i=ma;8!==a.nodeType;){if(!i){a=null;break t}if(null===(a=Id(a.nextSibling))){a=null;break t}}a="F!"===(i=a.data)||"F"===i?a:null}if(a){ua=Id(a.nextSibling),n="F!"===a.data;break e}}fa(n)}n=!1}n&&(t=r[0])}}return(r=so()).memoizedState=r.baseState=t,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oo,lastRenderedState:t},r.queue=n,r=cs.bind(null,Ui,n),n.dispatch=r,n=jo(!1),i=ds.bind(null,Ui,!1,n.queue),a={state:t,dispatch:null,action:e,pending:null},(n=so()).queue=a,r=Co.bind(null,Ui,a,i,r),a.dispatch=r,n.memoizedState=e,[t,r,!1]}function Io(e){return Mo(lo(),Hi,e)}function Mo(e,t,r){if(t=fo(e,t,Oo)[0],e=po(mo)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var n=co(t)}catch(o){if(o===Ja)throw Za;throw o}else n=t;var a=(t=lo()).queue,i=a.dispatch;return r!==t.memoizedState&&(Ui.flags|=2048,Lo(9,{destroy:void 0},Ro.bind(null,a,r),null)),[n,i,e]}function Ro(e,t){e.action=t}function Do(e){var t=lo(),r=Hi;if(null!==r)return Mo(t,r,e);lo(),t=t.memoizedState;var n=(r=lo()).queue.dispatch;return r.memoizedState=e,[t,n,!1]}function Lo(e,t,r,n){return e={tag:e,create:r,deps:n,inst:t,next:null},null===(t=Ui.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Ui.updateQueue=t),null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function zo(){return lo().memoizedState}function qo(e,t,r,n){var a=so();Ui.flags|=e,a.memoizedState=Lo(1|t,{destroy:void 0},r,void 0===n?null:n)}function Bo(e,t,r,n){var a=lo();n=void 0===n?null:n;var i=a.memoizedState.inst;null!==Hi&&null!==n&&Zi(n,Hi.memoizedState.deps)?a.memoizedState=Lo(t,i,r,n):(Ui.flags|=e,a.memoizedState=Lo(1|t,i,r,n))}function Fo(e,t){qo(8390656,8,e,t)}function Uo(e,t){Bo(2048,8,e,t)}function Ho(e){var t=lo().memoizedState;return function(e){Ui.flags|=4;var t=Ui.updateQueue;if(null===t)t={lastEffect:null,events:null,stores:null,memoCache:null},Ui.updateQueue=t,t.events=[e];else{var r=t.events;null===r?t.events=[e]:r.push(e)}}({ref:t,nextImpl:e}),function(){if(0!==(2&mc))throw Error(o(440));return t.impl.apply(void 0,arguments)}}function Wo(e,t){return Bo(4,2,e,t)}function Ko(e,t){return Bo(4,4,e,t)}function Vo(e,t){if("function"===typeof t){e=e();var r=t(e);return function(){"function"===typeof r?r():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function Go(e,t,r){r=null!==r&&void 0!==r?r.concat([e]):null,Bo(4,4,Vo.bind(null,t,e),r)}function Qo(){}function Yo(e,t){var r=lo();t=void 0===t?null:t;var n=r.memoizedState;return null!==t&&Zi(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function $o(e,t){var r=lo();t=void 0===t?null:t;var n=r.memoizedState;if(null!==t&&Zi(t,n[1]))return n[0];if(n=e(),Gi){be(!0);try{e()}finally{be(!1)}}return r.memoizedState=[n,t],n}function Jo(e,t,r){return void 0===r||0!==(1073741824&Fi)&&0===(261930&gc)?e.memoizedState=t:(e.memoizedState=r,e=Gc(),Ui.lanes|=e,Sc|=e,r)}function Xo(e,t,r,n){return Jr(r,t)?r:null!==_i.current?(e=Jo(e,r,n),Jr(e,t)||(Is=!0),e):0===(42&Fi)||0!==(1073741824&Fi)&&0===(261930&gc)?(Is=!0,e.memoizedState=r):(e=Gc(),Ui.lanes|=e,Sc|=e,t)}function Zo(e,t,r,n,a){var i=R.p;R.p=0!==i&&8>i?i:8;var o=M.T,s={};M.T=s,ds(e,!1,t,r);try{var l=a(),c=M.S;if(null!==c&&c(s,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)us(e,t,function(e,t){var r=[],n={status:"pending",value:null,reason:null,then:function(e){r.push(e)}};return e.then(function(){n.status="fulfilled",n.value=t;for(var e=0;e<r.length;e++)(0,r[e])(t)},function(e){for(n.status="rejected",n.reason=e,e=0;e<r.length;e++)(0,r[e])(void 0)}),n}(l,n),Vc());else us(e,t,n,Vc())}catch(u){us(e,t,{then:function(){},status:"rejected",reason:u},Vc())}finally{R.p=i,null!==o&&null!==s.types&&(o.types=s.types),M.T=o}}function es(){}function ts(e,t,r,n){if(5!==e.tag)throw Error(o(476));var a=rs(e).queue;Zo(e,a,t,D,null===r?es:function(){return ns(e),r(n)})}function rs(e){var t=e.memoizedState;if(null!==t)return t;var r={};return(t={memoizedState:D,baseState:D,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:mo,lastRenderedState:D},next:null}).next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:mo,lastRenderedState:r},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function ns(e){var t=rs(e);null===t.next&&(t=e.alternate.memoizedState),us(e,t.next.queue,{},Vc())}function as(){return Pa(uh)}function is(){return lo().memoizedState}function os(){return lo().memoizedState}function ss(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var r=Vc(),n=bi(t,e=yi(r),r);return null!==n&&(Qc(n,t,r),xi(n,t,r)),t={cache:qa()},void(e.payload=t)}t=t.return}}function ls(e,t,r){var n=Vc();r={lane:n,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},hs(e)?ms(t,r):null!==(r=Pn(e,t,r,n))&&(Qc(r,e,n),ps(r,t,n))}function cs(e,t,r){us(e,t,r,Vc())}function us(e,t,r,n){var a={lane:n,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(hs(e))ms(t,a);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=i(o,r);if(a.hasEagerState=!0,a.eagerState=s,Jr(s,o))return On(e,t,a,0),null===pc&&En(),!1}catch(l){}if(null!==(r=Pn(e,t,a,n)))return Qc(r,e,n),ps(r,t,n),!0}return!1}function ds(e,t,r,n){if(n={lane:2,revertLane:Uu(),gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},hs(e)){if(t)throw Error(o(479))}else null!==(t=Pn(e,r,n,2))&&Qc(t,e,2)}function hs(e){var t=e.alternate;return e===Ui||null!==t&&t===Ui}function ms(e,t){Vi=Ki=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function ps(e,t,r){if(0!==(4194048&r)){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,Me(e,r)}}var fs={readContext:Pa,use:uo,useCallback:Xi,useContext:Xi,useEffect:Xi,useImperativeHandle:Xi,useLayoutEffect:Xi,useInsertionEffect:Xi,useMemo:Xi,useReducer:Xi,useRef:Xi,useState:Xi,useDebugValue:Xi,useDeferredValue:Xi,useTransition:Xi,useSyncExternalStore:Xi,useId:Xi,useHostTransitionStatus:Xi,useFormState:Xi,useActionState:Xi,useOptimistic:Xi,useMemoCache:Xi,useCacheRefresh:Xi};fs.useEffectEvent=Xi;var gs={readContext:Pa,use:uo,useCallback:function(e,t){return so().memoizedState=[e,void 0===t?null:t],e},useContext:Pa,useEffect:Fo,useImperativeHandle:function(e,t,r){r=null!==r&&void 0!==r?r.concat([e]):null,qo(4194308,4,Vo.bind(null,t,e),r)},useLayoutEffect:function(e,t){return qo(4194308,4,e,t)},useInsertionEffect:function(e,t){qo(4,2,e,t)},useMemo:function(e,t){var r=so();t=void 0===t?null:t;var n=e();if(Gi){be(!0);try{e()}finally{be(!1)}}return r.memoizedState=[n,t],n},useReducer:function(e,t,r){var n=so();if(void 0!==r){var a=r(t);if(Gi){be(!0);try{r(t)}finally{be(!1)}}}else a=t;return n.memoizedState=n.baseState=a,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:a},n.queue=e,e=e.dispatch=ls.bind(null,Ui,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},so().memoizedState=e},useState:function(e){var t=(e=jo(e)).queue,r=cs.bind(null,Ui,t);return t.dispatch=r,[e.memoizedState,r]},useDebugValue:Qo,useDeferredValue:function(e,t){return Jo(so(),e,t)},useTransition:function(){var e=jo(!1);return e=Zo.bind(null,Ui,e.queue,!0,!1),so().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,r){var n=Ui,a=so();if(da){if(void 0===r)throw Error(o(407));r=r()}else{if(r=t(),null===pc)throw Error(o(349));0!==(127&gc)||yo(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,Fo(xo.bind(null,n,i,e),[e]),n.flags|=2048,Lo(9,{destroy:void 0},bo.bind(null,n,i,r,t),null),r},useId:function(){var e=so(),t=pc.identifierPrefix;if(da){var r=na;t="_"+t+"R_"+(r=(ra&~(1<<32-xe(ra)-1)).toString(32)+r),0<(r=Qi++)&&(t+="H"+r.toString(32)),t+="_"}else t="_"+t+"r_"+(r=Ji++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:as,useFormState:Po,useActionState:Po,useOptimistic:function(e){var t=so();t.memoizedState=t.baseState=e;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=r,t=ds.bind(null,Ui,!0,r),r.dispatch=t,[e,t]},useMemoCache:ho,useCacheRefresh:function(){return so().memoizedState=ss.bind(null,Ui)},useEffectEvent:function(e){var t=so(),r={impl:e};return t.memoizedState=r,function(){if(0!==(2&mc))throw Error(o(440));return r.impl.apply(void 0,arguments)}}},vs={readContext:Pa,use:uo,useCallback:Yo,useContext:Pa,useEffect:Uo,useImperativeHandle:Go,useInsertionEffect:Wo,useLayoutEffect:Ko,useMemo:$o,useReducer:po,useRef:zo,useState:function(){return po(mo)},useDebugValue:Qo,useDeferredValue:function(e,t){return Xo(lo(),Hi.memoizedState,e,t)},useTransition:function(){var e=po(mo)[0],t=lo().memoizedState;return["boolean"===typeof e?e:co(e),t]},useSyncExternalStore:vo,useId:is,useHostTransitionStatus:as,useFormState:Io,useActionState:Io,useOptimistic:function(e,t){return So(lo(),0,e,t)},useMemoCache:ho,useCacheRefresh:os};vs.useEffectEvent=Ho;var ys={readContext:Pa,use:uo,useCallback:Yo,useContext:Pa,useEffect:Uo,useImperativeHandle:Go,useInsertionEffect:Wo,useLayoutEffect:Ko,useMemo:$o,useReducer:go,useRef:zo,useState:function(){return go(mo)},useDebugValue:Qo,useDeferredValue:function(e,t){var r=lo();return null===Hi?Jo(r,e,t):Xo(r,Hi.memoizedState,e,t)},useTransition:function(){var e=go(mo)[0],t=lo().memoizedState;return["boolean"===typeof e?e:co(e),t]},useSyncExternalStore:vo,useId:is,useHostTransitionStatus:as,useFormState:Do,useActionState:Do,useOptimistic:function(e,t){var r=lo();return null!==Hi?So(r,0,e,t):(r.baseState=e,[e,r.queue.dispatch])},useMemoCache:ho,useCacheRefresh:os};function bs(e,t,r,n){r=null===(r=r(n,t=e.memoizedState))||void 0===r?t:m({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}ys.useEffectEvent=Ho;var xs={enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Vc(),a=yi(n);a.payload=t,void 0!==r&&null!==r&&(a.callback=r),null!==(t=bi(e,a,n))&&(Qc(t,e,n),xi(t,e,n))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Vc(),a=yi(n);a.tag=1,a.payload=t,void 0!==r&&null!==r&&(a.callback=r),null!==(t=bi(e,a,n))&&(Qc(t,e,n),xi(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Vc(),n=yi(r);n.tag=2,void 0!==t&&null!==t&&(n.callback=t),null!==(t=bi(e,n,r))&&(Qc(t,e,r),xi(t,e,r))}};function ws(e,t,r,n,a,i,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,i,o):!t.prototype||!t.prototype.isPureReactComponent||(!Xr(r,n)||!Xr(a,i))}function ks(e,t,r,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&xs.enqueueReplaceState(t,t.state,null)}function js(e,t){var r=t;if("ref"in t)for(var n in r={},t)"ref"!==n&&(r[n]=t[n]);if(e=e.defaultProps)for(var a in r===t&&(r=m({},r)),e)void 0===r[a]&&(r[a]=e[a]);return r}function Ss(e){Nn(e)}function Cs(e){console.error(e)}function Ns(e){Nn(e)}function _s(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(r){setTimeout(function(){throw r})}}function As(e,t,r){try{(0,e.onCaughtError)(r.value,{componentStack:r.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(n){setTimeout(function(){throw n})}}function Ts(e,t,r){return(r=yi(r)).tag=3,r.payload={element:null},r.callback=function(){_s(e,t)},r}function Es(e){return(e=yi(e)).tag=3,e}function Os(e,t,r,n){var a=r.type.getDerivedStateFromError;if("function"===typeof a){var i=n.value;e.payload=function(){return a(i)},e.callback=function(){As(t,r,n)}}var o=r.stateNode;null!==o&&"function"===typeof o.componentDidCatch&&(e.callback=function(){As(t,r,n),"function"!==typeof a&&(null===Dc?Dc=new Set([this]):Dc.add(this));var e=n.stack;this.componentDidCatch(n.value,{componentStack:null!==e?e:""})})}var Ps=Error(o(461)),Is=!1;function Ms(e,t,r,n){t.child=null===e?pi(t,null,r,n):mi(t,e.child,r,n)}function Rs(e,t,r,n,a){r=r.render;var i=t.ref;if("ref"in n){var o={};for(var s in n)"ref"!==s&&(o[s]=n[s])}else o=n;return Oa(t),n=eo(e,t,r,o,i,a),s=ao(),null===e||Is?(da&&s&&oa(t),t.flags|=1,Ms(e,t,n,a),t.child):(io(e,t,a),al(e,t,a))}function Ds(e,t,r,n,a){if(null===e){var i=r.type;return"function"!==typeof i||qn(i)||void 0!==i.defaultProps||null!==r.compare?((e=Un(r.type,null,n,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Ls(e,t,i,n,a))}if(i=e.child,!il(e,a)){var o=i.memoizedProps;if((r=null!==(r=r.compare)?r:Xr)(o,n)&&e.ref===t.ref)return al(e,t,a)}return t.flags|=1,(e=Bn(i,n)).ref=t.ref,e.return=t,t.child=e}function Ls(e,t,r,n,a){if(null!==e){var i=e.memoizedProps;if(Xr(i,n)&&e.ref===t.ref){if(Is=!1,t.pendingProps=n=i,!il(e,a))return t.lanes=e.lanes,al(e,t,a);0!==(131072&e.flags)&&(Is=!0)}}return Ws(e,t,r,n,a)}function zs(e,t,r,n){var a=n.children,i=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===n.mode){if(0!==(128&t.flags)){if(i=null!==i?i.baseLanes|r:r,null!==e){for(n=t.child=e.child,a=0;null!==n;)a=a|n.lanes|n.childLanes,n=n.sibling;n=a&~i}else n=0,t.child=null;return Bs(e,t,i,r,n)}if(0===(536870912&r))return n=t.lanes=536870912,Bs(e,t,null!==i?i.baseLanes|r:r,r,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Ya(0,null!==i?i.cachePool:null),null!==i?Ti(t,i):Ei(),Di(t)}else null!==i?(Ya(0,i.cachePool),Ti(t,i),Li(),t.memoizedState=null):(null!==e&&Ya(0,null),Ei(),Li());return Ms(e,t,a,r),t.child}function qs(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Bs(e,t,r,n,a){var i=Qa();return i=null===i?null:{parent:za._currentValue,pool:i},t.memoizedState={baseLanes:r,cachePool:i},null!==e&&Ya(0,null),Ei(),Di(t),null!==e&&Ta(e,t,n,!0),t.childLanes=a,null}function Fs(e,t){return(t=Zs({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function Us(e,t,r){return mi(t,e.child,null,r),(e=Fs(t,t.pendingProps)).flags|=2,zi(t),t.memoizedState=null,e}function Hs(e,t){var r=t.ref;if(null===r)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof r&&"object"!==typeof r)throw Error(o(284));null!==e&&e.ref===r||(t.flags|=4194816)}}function Ws(e,t,r,n,a){return Oa(t),r=eo(e,t,r,n,void 0,a),n=ao(),null===e||Is?(da&&n&&oa(t),t.flags|=1,Ms(e,t,r,a),t.child):(io(e,t,a),al(e,t,a))}function Ks(e,t,r,n,a,i){return Oa(t),t.updateQueue=null,r=ro(t,n,r,a),to(e),n=ao(),null===e||Is?(da&&n&&oa(t),t.flags|=1,Ms(e,t,r,i),t.child):(io(e,t,i),al(e,t,i))}function Vs(e,t,r,n,a){if(Oa(t),null===t.stateNode){var i=Dn,o=r.contextType;"object"===typeof o&&null!==o&&(i=Pa(o)),i=new r(n,i),t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,i.updater=xs,t.stateNode=i,i._reactInternals=t,(i=t.stateNode).props=n,i.state=t.memoizedState,i.refs={},gi(t),o=r.contextType,i.context="object"===typeof o&&null!==o?Pa(o):Dn,i.state=t.memoizedState,"function"===typeof(o=r.getDerivedStateFromProps)&&(bs(t,r,o,n),i.state=t.memoizedState),"function"===typeof r.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(o=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),o!==i.state&&xs.enqueueReplaceState(i,i.state,null),Si(t,n,i,a),ji(),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4194308),n=!0}else if(null===e){i=t.stateNode;var s=t.memoizedProps,l=js(r,s);i.props=l;var c=i.context,u=r.contextType;o=Dn,"object"===typeof u&&null!==u&&(o=Pa(u));var d=r.getDerivedStateFromProps;u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate,s=t.pendingProps!==s,u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(s||c!==o)&&ks(t,i,n,o),fi=!1;var h=t.memoizedState;i.state=h,Si(t,n,i,a),ji(),c=t.memoizedState,s||h!==c||fi?("function"===typeof d&&(bs(t,r,d,n),c=t.memoizedState),(l=fi||ws(t,r,l,n,h,c,o))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),i.props=n,i.state=c,i.context=o,n=l):("function"===typeof i.componentDidMount&&(t.flags|=4194308),n=!1)}else{i=t.stateNode,vi(e,t),u=js(r,o=t.memoizedProps),i.props=u,d=t.pendingProps,h=i.context,c=r.contextType,l=Dn,"object"===typeof c&&null!==c&&(l=Pa(c)),(c="function"===typeof(s=r.getDerivedStateFromProps)||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==d||h!==l)&&ks(t,i,n,l),fi=!1,h=t.memoizedState,i.state=h,Si(t,n,i,a),ji();var m=t.memoizedState;o!==d||h!==m||fi||null!==e&&null!==e.dependencies&&Ea(e.dependencies)?("function"===typeof s&&(bs(t,r,s,n),m=t.memoizedState),(u=fi||ws(t,r,u,n,h,m,l)||null!==e&&null!==e.dependencies&&Ea(e.dependencies))?(c||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(n,m,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(n,m,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=m),i.props=n,i.state=m,i.context=l,n=u):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return i=n,Hs(e,t),n=0!==(128&t.flags),i||n?(i=t.stateNode,r=n&&"function"!==typeof r.getDerivedStateFromError?null:i.render(),t.flags|=1,null!==e&&n?(t.child=mi(t,e.child,null,a),t.child=mi(t,null,r,a)):Ms(e,t,r,a),t.memoizedState=i.state,e=t.child):e=al(e,t,a),e}function Gs(e,t,r,n){return ba(),t.flags|=256,Ms(e,t,r,n),t.child}var Qs={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ys(e){return{baseLanes:e,cachePool:$a()}}function $s(e,t,r){return e=null!==e?e.childLanes&~r:0,t&&(e|=_c),e}function Js(e,t,r){var n,a=t.pendingProps,i=!1,s=0!==(128&t.flags);if((n=s)||(n=(null===e||null!==e.memoizedState)&&0!==(2&qi.current)),n&&(i=!0,t.flags&=-129),n=0!==(32&t.flags),t.flags&=-33,null===e){if(da){if(i?Mi(t):Li(),(e=ua)?null!==(e=null!==(e=Ed(e,ma))&&"&"!==e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ta?{id:ra,overflow:na}:null,retryLane:536870912,hydrationErrors:null},(r=Kn(e)).return=t,t.child=r,ca=t,ua=null):e=null,null===e)throw fa(t);return Pd(e)?t.lanes=32:t.lanes=536870912,null}var l=a.children;return a=a.fallback,i?(Li(),l=Zs({mode:"hidden",children:l},i=t.mode),a=Hn(a,i,r,null),l.return=t,a.return=t,l.sibling=a,t.child=l,(a=t.child).memoizedState=Ys(r),a.childLanes=$s(e,n,r),t.memoizedState=Qs,qs(null,a)):(Mi(t),Xs(t,l))}var c=e.memoizedState;if(null!==c&&null!==(l=c.dehydrated)){if(s)256&t.flags?(Mi(t),t.flags&=-257,t=el(e,t,r)):null!==t.memoizedState?(Li(),t.child=e.child,t.flags|=128,t=null):(Li(),l=a.fallback,i=t.mode,a=Zs({mode:"visible",children:a.children},i),(l=Hn(l,i,r,null)).flags|=2,a.return=t,l.return=t,a.sibling=l,t.child=a,mi(t,e.child,null,r),(a=t.child).memoizedState=Ys(r),a.childLanes=$s(e,n,r),t.memoizedState=Qs,t=qs(null,a));else if(Mi(t),Pd(l)){if(n=l.nextSibling&&l.nextSibling.dataset)var u=n.dgst;n=u,(a=Error(o(419))).stack="",a.digest=n,wa({value:a,source:null,stack:null}),t=el(e,t,r)}else if(Is||Ta(e,t,r,!1),n=0!==(r&e.childLanes),Is||n){if(null!==(n=pc)&&(0!==(a=Re(n,r))&&a!==c.retryLane))throw c.retryLane=a,In(e,a),Qc(n,e,a),Ps;Od(l)||ou(),t=el(e,t,r)}else Od(l)?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,ua=Id(l.nextSibling),ca=t,da=!0,ha=null,ma=!1,null!==e&&la(t,e),(t=Xs(t,a.children)).flags|=4096);return t}return i?(Li(),l=a.fallback,i=t.mode,u=(c=e.child).sibling,(a=Bn(c,{mode:"hidden",children:a.children})).subtreeFlags=65011712&c.subtreeFlags,null!==u?l=Bn(u,l):(l=Hn(l,i,r,null)).flags|=2,l.return=t,a.return=t,a.sibling=l,t.child=a,qs(null,a),a=t.child,null===(l=e.child.memoizedState)?l=Ys(r):(null!==(i=l.cachePool)?(c=za._currentValue,i=i.parent!==c?{parent:c,pool:c}:i):i=$a(),l={baseLanes:l.baseLanes|r,cachePool:i}),a.memoizedState=l,a.childLanes=$s(e,n,r),t.memoizedState=Qs,qs(e.child,a)):(Mi(t),e=(r=e.child).sibling,(r=Bn(r,{mode:"visible",children:a.children})).return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r)}function Xs(e,t){return(t=Zs({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Zs(e,t){return(e=zn(22,e,null,t)).lanes=0,e}function el(e,t,r){return mi(t,e.child,null,r),(e=Xs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function tl(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),_a(e.return,t,r)}function rl(e,t,r,n,a,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a,treeForkCount:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=a,o.treeForkCount=i)}function nl(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;n=n.children;var o=qi.current,s=0!==(2&o);if(s?(o=1&o|2,t.flags|=128):o&=1,F(qi,o),Ms(e,t,n,r),n=da?Xn:0,!s&&null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&tl(e,r,t);else if(19===e.tag)tl(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(a){case"forwards":for(r=t.child,a=null;null!==r;)null!==(e=r.alternate)&&null===Bi(e)&&(a=r),r=r.sibling;null===(r=a)?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),rl(t,!1,a,r,i,n);break;case"backwards":case"unstable_legacy-backwards":for(r=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===Bi(e)){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}rl(t,!0,r,null,i,n);break;case"together":rl(t,!1,null,null,void 0,n);break;default:t.memoizedState=null}return t.child}function al(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Sc|=t.lanes,0===(r&t.childLanes)){if(null===e)return null;if(Ta(e,t,r,!1),0===(r&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(r=Bn(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Bn(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function il(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Ea(e))}function ol(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps)Is=!0;else{if(!il(e,r)&&0===(128&t.flags))return Is=!1,function(e,t,r){switch(t.tag){case 3:Q(t,t.stateNode.containerInfo),Ca(0,za,e.memoizedState.cache),ba();break;case 27:case 5:$(t);break;case 4:Q(t,t.stateNode.containerInfo);break;case 10:Ca(0,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,Ri(t),null;break;case 13:var n=t.memoizedState;if(null!==n)return null!==n.dehydrated?(Mi(t),t.flags|=128,null):0!==(r&t.child.childLanes)?Js(e,t,r):(Mi(t),null!==(e=al(e,t,r))?e.sibling:null);Mi(t);break;case 19:var a=0!==(128&e.flags);if((n=0!==(r&t.childLanes))||(Ta(e,t,r,!1),n=0!==(r&t.childLanes)),a){if(n)return nl(e,t,r);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),F(qi,qi.current),n)break;return null;case 22:return t.lanes=0,zs(e,t,r,t.pendingProps);case 24:Ca(0,za,e.memoizedState.cache)}return al(e,t,r)}(e,t,r);Is=0!==(131072&e.flags)}else Is=!1,da&&0!==(1048576&t.flags)&&ia(t,Xn,t.index);switch(t.lanes=0,t.tag){case 16:e:{var n=t.pendingProps;if(e=ni(t.elementType),t.type=e,"function"!==typeof e){if(void 0!==e&&null!==e){var a=e.$$typeof;if(a===k){t.tag=11,t=Rs(null,t,e,n,r);break e}if(a===C){t.tag=14,t=Ds(null,t,e,n,r);break e}}throw t=P(e)||e,Error(o(306,t,""))}qn(e)?(n=js(e,n),t.tag=1,t=Vs(null,t,e,n,r)):(t.tag=0,t=Ws(null,t,e,n,r))}return t;case 0:return Ws(e,t,t.type,t.pendingProps,r);case 1:return Vs(e,t,n=t.type,a=js(n,t.pendingProps),r);case 3:e:{if(Q(t,t.stateNode.containerInfo),null===e)throw Error(o(387));n=t.pendingProps;var i=t.memoizedState;a=i.element,vi(e,t),Si(t,n,null,r);var s=t.memoizedState;if(n=s.cache,Ca(0,za,n),n!==i.cache&&Aa(t,[za],r,!0),ji(),n=s.element,i.isDehydrated){if(i={element:n,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Gs(e,t,n,r);break e}if(n!==a){wa(a=Qn(Error(o(424)),t)),t=Gs(e,t,n,r);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ua=Id(e.firstChild),ca=t,da=!0,ha=null,ma=!0,r=pi(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(ba(),n===a){t=al(e,t,r);break e}Ms(e,t,n,r)}t=t.child}return t;case 26:return Hs(e,t),null===e?(r=Kd(t.type,null,t.pendingProps,null))?t.memoizedState=r:da||(r=t.type,e=t.pendingProps,(n=gd(V.current).createElement(r))[Fe]=t,n[Ue]=e,hd(n,r,e),et(n),t.stateNode=n):t.memoizedState=Kd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return $(t),null===e&&da&&(n=t.stateNode=Ld(t.type,t.pendingProps,V.current),ca=t,ma=!0,a=ua,Nd(t.type)?(Md=a,ua=Id(n.firstChild)):ua=a),Ms(e,t,t.pendingProps.children,r),Hs(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&da&&((a=n=ua)&&(null!==(n=function(e,t,r,n){for(;1===e.nodeType;){var a=r;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!n&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(n){if(!e[Qe])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(i=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(i!==a.rel||e.getAttribute("href")!==(null==a.href||""===a.href?null:a.href)||e.getAttribute("crossorigin")!==(null==a.crossOrigin?null:a.crossOrigin)||e.getAttribute("title")!==(null==a.title?null:a.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((i=e.getAttribute("src"))!==(null==a.src?null:a.src)||e.getAttribute("type")!==(null==a.type?null:a.type)||e.getAttribute("crossorigin")!==(null==a.crossOrigin?null:a.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var i=null==a.name?null:""+a.name;if("hidden"===a.type&&e.getAttribute("name")===i)return e}if(null===(e=Id(e.nextSibling)))break}return null}(n,t.type,t.pendingProps,ma))?(t.stateNode=n,ca=t,ua=Id(n.firstChild),ma=!1,a=!0):a=!1),a||fa(t)),$(t),a=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,n=i.children,bd(a,i)?n=null:null!==s&&bd(a,s)&&(t.flags|=32),null!==t.memoizedState&&(a=eo(e,t,no,null,null,r),uh._currentValue=a),Hs(e,t),Ms(e,t,n,r),t.child;case 6:return null===e&&da&&((e=r=ua)&&(null!==(r=function(e,t,r){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!r)return null;if(null===(e=Id(e.nextSibling)))return null}return e}(r,t.pendingProps,ma))?(t.stateNode=r,ca=t,ua=null,e=!0):e=!1),e||fa(t)),null;case 13:return Js(e,t,r);case 4:return Q(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=mi(t,null,n,r):Ms(e,t,n,r),t.child;case 11:return Rs(e,t,t.type,t.pendingProps,r);case 7:return Ms(e,t,t.pendingProps,r),t.child;case 8:case 12:return Ms(e,t,t.pendingProps.children,r),t.child;case 10:return n=t.pendingProps,Ca(0,t.type,n.value),Ms(e,t,n.children,r),t.child;case 9:return a=t.type._context,n=t.pendingProps.children,Oa(t),n=n(a=Pa(a)),t.flags|=1,Ms(e,t,n,r),t.child;case 14:return Ds(e,t,t.type,t.pendingProps,r);case 15:return Ls(e,t,t.type,t.pendingProps,r);case 19:return nl(e,t,r);case 31:return function(e,t,r){var n=t.pendingProps,a=0!==(128&t.flags);if(t.flags&=-129,null===e){if(da){if("hidden"===n.mode)return e=Fs(t,n),t.lanes=536870912,qs(null,e);if(Ri(t),(e=ua)?null!==(e=null!==(e=Ed(e,ma))&&"&"===e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ta?{id:ra,overflow:na}:null,retryLane:536870912,hydrationErrors:null},(r=Kn(e)).return=t,t.child=r,ca=t,ua=null):e=null,null===e)throw fa(t);return t.lanes=536870912,null}return Fs(t,n)}var i=e.memoizedState;if(null!==i){var s=i.dehydrated;if(Ri(t),a)if(256&t.flags)t.flags&=-257,t=Us(e,t,r);else{if(null===t.memoizedState)throw Error(o(558));t.child=e.child,t.flags|=128,t=null}else if(Is||Ta(e,t,r,!1),a=0!==(r&e.childLanes),Is||a){if(null!==(n=pc)&&0!==(s=Re(n,r))&&s!==i.retryLane)throw i.retryLane=s,In(e,s),Qc(n,e,s),Ps;ou(),t=Us(e,t,r)}else e=i.treeContext,ua=Id(s.nextSibling),ca=t,da=!0,ha=null,ma=!1,null!==e&&la(t,e),(t=Fs(t,n)).flags|=4096;return t}return(e=Bn(e.child,{mode:n.mode,children:n.children})).ref=t.ref,t.child=e,e.return=t,e}(e,t,r);case 22:return zs(e,t,r,t.pendingProps);case 24:return Oa(t),n=Pa(za),null===e?(null===(a=Qa())&&(a=pc,i=qa(),a.pooledCache=i,i.refCount++,null!==i&&(a.pooledCacheLanes|=r),a=i),t.memoizedState={parent:n,cache:a},gi(t),Ca(0,za,a)):(0!==(e.lanes&r)&&(vi(e,t),Si(t,null,null,r),ji()),a=e.memoizedState,i=t.memoizedState,a.parent!==n?(a={parent:n,cache:n},t.memoizedState=a,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=a),Ca(0,za,n)):(n=i.cache,Ca(0,za,n),n!==a.cache&&Aa(t,[za],r,!0))),Ms(e,t,t.pendingProps.children,r),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function sl(e){e.flags|=4}function ll(e,t,r,n,a){if((t=0!==(32&e.mode))&&(t=!1),t){if(e.flags|=16777216,(335544128&a)===a)if(e.stateNode.complete)e.flags|=8192;else{if(!nu())throw ai=ei,Xa;e.flags|=8192}}else e.flags&=-16777217}function cl(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!ah(t)){if(!nu())throw ai=ei,Xa;e.flags|=8192}}function ul(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Ee():536870912,e.lanes|=t,Ac|=t)}function dl(e,t){if(!da)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function hl(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;null!==a;)r|=a.lanes|a.childLanes,n|=65011712&a.subtreeFlags,n|=65011712&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function ml(e,t,r){var n=t.pendingProps;switch(sa(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return hl(t),null;case 3:return r=t.stateNode,n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Na(za),Y(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ya(t)?sl(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,xa())),hl(t),null;case 26:var a=t.type,i=t.memoizedState;return null===e?(sl(t),null!==i?(hl(t),cl(t,i)):(hl(t),ll(t,a,0,0,r))):i?i!==e.memoizedState?(sl(t),hl(t),cl(t,i)):(hl(t),t.flags&=-16777217):((e=e.memoizedProps)!==n&&sl(t),hl(t),ll(t,a,0,0,r)),null;case 27:if(J(t),r=V.current,a=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==n&&sl(t);else{if(!n){if(null===t.stateNode)throw Error(o(166));return hl(t),null}e=W.current,ya(t)?ga(t):(e=Ld(a,n,r),t.stateNode=e,sl(t))}return hl(t),null;case 5:if(J(t),a=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==n&&sl(t);else{if(!n){if(null===t.stateNode)throw Error(o(166));return hl(t),null}if(i=W.current,ya(t))ga(t);else{var s=gd(V.current);switch(i){case 1:i=s.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:i=s.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":i=s.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":i=s.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":(i=s.createElement("div")).innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i="string"===typeof n.is?s.createElement("select",{is:n.is}):s.createElement("select"),n.multiple?i.multiple=!0:n.size&&(i.size=n.size);break;default:i="string"===typeof n.is?s.createElement(a,{is:n.is}):s.createElement(a)}}i[Fe]=t,i[Ue]=n;e:for(s=t.child;null!==s;){if(5===s.tag||6===s.tag)i.appendChild(s.stateNode);else if(4!==s.tag&&27!==s.tag&&null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;null===s.sibling;){if(null===s.return||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=i;e:switch(hd(i,a,n),a){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&sl(t)}}return hl(t),ll(t,t.type,null===e||e.memoizedProps,t.pendingProps,r),null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==n&&sl(t);else{if("string"!==typeof n&&null===t.stateNode)throw Error(o(166));if(e=V.current,ya(t)){if(e=t.stateNode,r=t.memoizedProps,n=null,null!==(a=ca))switch(a.tag){case 27:case 5:n=a.memoizedProps}e[Fe]=t,(e=!!(e.nodeValue===r||null!==n&&!0===n.suppressHydrationWarning||cd(e.nodeValue,r)))||fa(t,!0)}else(e=gd(e).createTextNode(n))[Fe]=t,t.stateNode=e}return hl(t),null;case 31:if(r=t.memoizedState,null===e||null!==e.memoizedState){if(n=ya(t),null!==r){if(null===e){if(!n)throw Error(o(318));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(o(557));e[Fe]=t}else ba(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;hl(t),e=!1}else r=xa(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=r),e=!0;if(!e)return 256&t.flags?(zi(t),t):(zi(t),null);if(0!==(128&t.flags))throw Error(o(558))}return hl(t),null;case 13:if(n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(a=ya(t),null!==n&&null!==n.dehydrated){if(null===e){if(!a)throw Error(o(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(o(317));a[Fe]=t}else ba(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;hl(t),a=!1}else a=xa(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=a),a=!0;if(!a)return 256&t.flags?(zi(t),t):(zi(t),null)}return zi(t),0!==(128&t.flags)?(t.lanes=r,t):(r=null!==n,e=null!==e&&null!==e.memoizedState,r&&(a=null,null!==(n=t.child).alternate&&null!==n.alternate.memoizedState&&null!==n.alternate.memoizedState.cachePool&&(a=n.alternate.memoizedState.cachePool.pool),i=null,null!==n.memoizedState&&null!==n.memoizedState.cachePool&&(i=n.memoizedState.cachePool.pool),i!==a&&(n.flags|=2048)),r!==e&&r&&(t.child.flags|=8192),ul(t,t.updateQueue),hl(t),null);case 4:return Y(),null===e&&Zu(t.stateNode.containerInfo),hl(t),null;case 10:return Na(t.type),hl(t),null;case 19:if(B(qi),null===(n=t.memoizedState))return hl(t),null;if(a=0!==(128&t.flags),null===(i=n.rendering))if(a)dl(n,!1);else{if(0!==jc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(i=Bi(e))){for(t.flags|=128,dl(n,!1),e=i.updateQueue,t.updateQueue=e,ul(t,e),t.subtreeFlags=0,e=r,r=t.child;null!==r;)Fn(r,e),r=r.sibling;return F(qi,1&qi.current|2),da&&aa(t,n.treeForkCount),t.child}e=e.sibling}null!==n.tail&&le()>Mc&&(t.flags|=128,a=!0,dl(n,!1),t.lanes=4194304)}else{if(!a)if(null!==(e=Bi(i))){if(t.flags|=128,a=!0,e=e.updateQueue,t.updateQueue=e,ul(t,e),dl(n,!0),null===n.tail&&"hidden"===n.tailMode&&!i.alternate&&!da)return hl(t),null}else 2*le()-n.renderingStartTime>Mc&&536870912!==r&&(t.flags|=128,a=!0,dl(n,!1),t.lanes=4194304);n.isBackwards?(i.sibling=t.child,t.child=i):(null!==(e=n.last)?e.sibling=i:t.child=i,n.last=i)}return null!==n.tail?(e=n.tail,n.rendering=e,n.tail=e.sibling,n.renderingStartTime=le(),e.sibling=null,r=qi.current,F(qi,a?1&r|2:1&r),da&&aa(t,n.treeForkCount),e):(hl(t),null);case 22:case 23:return zi(t),Oi(),n=null!==t.memoizedState,null!==e?null!==e.memoizedState!==n&&(t.flags|=8192):n&&(t.flags|=8192),n?0!==(536870912&r)&&0===(128&t.flags)&&(hl(t),6&t.subtreeFlags&&(t.flags|=8192)):hl(t),null!==(r=t.updateQueue)&&ul(t,r.retryQueue),r=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(r=e.memoizedState.cachePool.pool),n=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(n=t.memoizedState.cachePool.pool),n!==r&&(t.flags|=2048),null!==e&&B(Ga),null;case 24:return r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Na(za),hl(t),null;case 25:case 30:return null}throw Error(o(156,t.tag))}function pl(e,t){switch(sa(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Na(za),Y(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return J(t),null;case 31:if(null!==t.memoizedState){if(zi(t),null===t.alternate)throw Error(o(340));ba()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(zi(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));ba()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return B(qi),null;case 4:return Y(),null;case 10:return Na(t.type),null;case 22:case 23:return zi(t),Oi(),null!==e&&B(Ga),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Na(za),null;default:return null}}function fl(e,t){switch(sa(t),t.tag){case 3:Na(za),Y();break;case 26:case 27:case 5:J(t);break;case 4:Y();break;case 31:null!==t.memoizedState&&zi(t);break;case 13:zi(t);break;case 19:B(qi);break;case 10:Na(t.type);break;case 22:case 23:zi(t),Oi(),null!==e&&B(Ga);break;case 24:Na(za)}}function gl(e,t){try{var r=t.updateQueue,n=null!==r?r.lastEffect:null;if(null!==n){var a=n.next;r=a;do{if((r.tag&e)===e){n=void 0;var i=r.create,o=r.inst;n=i(),o.destroy=n}r=r.next}while(r!==a)}}catch(s){ju(t,t.return,s)}}function vl(e,t,r){try{var n=t.updateQueue,a=null!==n?n.lastEffect:null;if(null!==a){var i=a.next;n=i;do{if((n.tag&e)===e){var o=n.inst,s=o.destroy;if(void 0!==s){o.destroy=void 0,a=t;var l=r,c=s;try{c()}catch(u){ju(a,l,u)}}}n=n.next}while(n!==i)}}catch(u){ju(t,t.return,u)}}function yl(e){var t=e.updateQueue;if(null!==t){var r=e.stateNode;try{Ni(t,r)}catch(n){ju(e,e.return,n)}}}function bl(e,t,r){r.props=js(e.type,e.memoizedProps),r.state=e.memoizedState;try{r.componentWillUnmount()}catch(n){ju(e,t,n)}}function xl(e,t){try{var r=e.ref;if(null!==r){switch(e.tag){case 26:case 27:case 5:var n=e.stateNode;break;default:n=e.stateNode}"function"===typeof r?e.refCleanup=r(n):r.current=n}}catch(a){ju(e,t,a)}}function wl(e,t){var r=e.ref,n=e.refCleanup;if(null!==r)if("function"===typeof n)try{n()}catch(a){ju(e,t,a)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof r)try{r(null)}catch(i){ju(e,t,i)}else r.current=null}function kl(e){var t=e.type,r=e.memoizedProps,n=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":r.autoFocus&&n.focus();break e;case"img":r.src?n.src=r.src:r.srcSet&&(n.srcset=r.srcSet)}}catch(a){ju(e,e.return,a)}}function jl(e,t,r){try{var n=e.stateNode;!function(e,t,r,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var a=null,i=null,s=null,l=null,c=null,u=null,d=null;for(p in r){var h=r[p];if(r.hasOwnProperty(p)&&null!=h)switch(p){case"checked":case"value":break;case"defaultValue":c=h;default:n.hasOwnProperty(p)||ud(e,t,p,null,n,h)}}for(var m in n){var p=n[m];if(h=r[m],n.hasOwnProperty(m)&&(null!=p||null!=h))switch(m){case"type":i=p;break;case"name":a=p;break;case"checked":u=p;break;case"defaultChecked":d=p;break;case"value":s=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(o(137,t));break;default:p!==h&&ud(e,t,m,p,n,h)}}return void yt(e,s,l,c,u,d,i,a);case"select":for(i in p=s=l=m=null,r)if(c=r[i],r.hasOwnProperty(i)&&null!=c)switch(i){case"value":break;case"multiple":p=c;default:n.hasOwnProperty(i)||ud(e,t,i,null,n,c)}for(a in n)if(i=n[a],c=r[a],n.hasOwnProperty(a)&&(null!=i||null!=c))switch(a){case"value":m=i;break;case"defaultValue":l=i;break;case"multiple":s=i;default:i!==c&&ud(e,t,a,i,n,c)}return t=l,r=s,n=p,void(null!=m?wt(e,!!r,m,!1):!!n!==!!r&&(null!=t?wt(e,!!r,t,!0):wt(e,!!r,r?[]:"",!1)));case"textarea":for(l in p=m=null,r)if(a=r[l],r.hasOwnProperty(l)&&null!=a&&!n.hasOwnProperty(l))switch(l){case"value":case"children":break;default:ud(e,t,l,null,n,a)}for(s in n)if(a=n[s],i=r[s],n.hasOwnProperty(s)&&(null!=a||null!=i))switch(s){case"value":m=a;break;case"defaultValue":p=a;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=a)throw Error(o(91));break;default:a!==i&&ud(e,t,s,a,n,i)}return void kt(e,m,p);case"option":for(var f in r)if(m=r[f],r.hasOwnProperty(f)&&null!=m&&!n.hasOwnProperty(f))if("selected"===f)e.selected=!1;else ud(e,t,f,null,n,m);for(c in n)if(m=n[c],p=r[c],n.hasOwnProperty(c)&&m!==p&&(null!=m||null!=p))if("selected"===c)e.selected=m&&"function"!==typeof m&&"symbol"!==typeof m;else ud(e,t,c,m,n,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in r)m=r[g],r.hasOwnProperty(g)&&null!=m&&!n.hasOwnProperty(g)&&ud(e,t,g,null,n,m);for(u in n)if(m=n[u],p=r[u],n.hasOwnProperty(u)&&m!==p&&(null!=m||null!=p))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=m)throw Error(o(137,t));break;default:ud(e,t,u,m,n,p)}return;default:if(At(t)){for(var v in r)m=r[v],r.hasOwnProperty(v)&&void 0!==m&&!n.hasOwnProperty(v)&&dd(e,t,v,void 0,n,m);for(d in n)m=n[d],p=r[d],!n.hasOwnProperty(d)||m===p||void 0===m&&void 0===p||dd(e,t,d,m,n,p);return}}for(var y in r)m=r[y],r.hasOwnProperty(y)&&null!=m&&!n.hasOwnProperty(y)&&ud(e,t,y,null,n,m);for(h in n)m=n[h],p=r[h],!n.hasOwnProperty(h)||m===p||null==m&&null==p||ud(e,t,h,m,n,p)}(n,e.type,r,t),n[Ue]=t}catch(a){ju(e,e.return,a)}}function Sl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&Nd(e.type)||4===e.tag}function Cl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&Nd(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Nl(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?(9===r.nodeType?r.body:"HTML"===r.nodeName?r.ownerDocument.body:r).insertBefore(e,t):((t=9===r.nodeType?r.body:"HTML"===r.nodeName?r.ownerDocument.body:r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==t.onclick||(t.onclick=Pt));else if(4!==n&&(27===n&&Nd(e.type)&&(r=e.stateNode,t=null),null!==(e=e.child)))for(Nl(e,t,r),e=e.sibling;null!==e;)Nl(e,t,r),e=e.sibling}function _l(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&(27===n&&Nd(e.type)&&(r=e.stateNode),null!==(e=e.child)))for(_l(e,t,r),e=e.sibling;null!==e;)_l(e,t,r),e=e.sibling}function Al(e){var t=e.stateNode,r=e.memoizedProps;try{for(var n=e.type,a=t.attributes;a.length;)t.removeAttributeNode(a[0]);hd(t,n,r),t[Fe]=e,t[Ue]=r}catch(i){ju(e,e.return,i)}}var Tl=!1,El=!1,Ol=!1,Pl="function"===typeof WeakSet?WeakSet:Set,Il=null;function Ml(e,t,r){var n=r.flags;switch(r.tag){case 0:case 11:case 15:Ql(e,r),4&n&&gl(5,r);break;case 1:if(Ql(e,r),4&n)if(e=r.stateNode,null===t)try{e.componentDidMount()}catch(o){ju(r,r.return,o)}else{var a=js(r.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(a,t,e.__reactInternalSnapshotBeforeUpdate)}catch(s){ju(r,r.return,s)}}64&n&&yl(r),512&n&&xl(r,r.return);break;case 3:if(Ql(e,r),64&n&&null!==(e=r.updateQueue)){if(t=null,null!==r.child)switch(r.child.tag){case 27:case 5:case 1:t=r.child.stateNode}try{Ni(e,t)}catch(o){ju(r,r.return,o)}}break;case 27:null===t&&4&n&&Al(r);case 26:case 5:Ql(e,r),null===t&&4&n&&kl(r),512&n&&xl(r,r.return);break;case 12:Ql(e,r);break;case 31:Ql(e,r),4&n&&Bl(e,r);break;case 13:Ql(e,r),4&n&&Fl(e,r),64&n&&(null!==(e=r.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var r=e.ownerDocument;if("$~"===e.data)e._reactRetry=t;else if("$?"!==e.data||"loading"!==r.readyState)t();else{var n=function(){t(),r.removeEventListener("DOMContentLoaded",n)};r.addEventListener("DOMContentLoaded",n),e._reactRetry=n}}(e,r=_u.bind(null,r))));break;case 22:if(!(n=null!==r.memoizedState||Tl)){t=null!==t&&null!==t.memoizedState||El,a=Tl;var i=El;Tl=n,(El=t)&&!i?$l(e,r,0!==(8772&r.subtreeFlags)):Ql(e,r),Tl=a,El=i}break;case 30:break;default:Ql(e,r)}}function Rl(e){var t=e.alternate;null!==t&&(e.alternate=null,Rl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Ye(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Dl=null,Ll=!1;function zl(e,t,r){for(r=r.child;null!==r;)ql(e,t,r),r=r.sibling}function ql(e,t,r){if(ye&&"function"===typeof ye.onCommitFiberUnmount)try{ye.onCommitFiberUnmount(ve,r)}catch(i){}switch(r.tag){case 26:El||wl(r,t),zl(e,t,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode).parentNode.removeChild(r);break;case 27:El||wl(r,t);var n=Dl,a=Ll;Nd(r.type)&&(Dl=r.stateNode,Ll=!1),zl(e,t,r),zd(r.stateNode),Dl=n,Ll=a;break;case 5:El||wl(r,t);case 6:if(n=Dl,a=Ll,Dl=null,zl(e,t,r),Ll=a,null!==(Dl=n))if(Ll)try{(9===Dl.nodeType?Dl.body:"HTML"===Dl.nodeName?Dl.ownerDocument.body:Dl).removeChild(r.stateNode)}catch(o){ju(r,t,o)}else try{Dl.removeChild(r.stateNode)}catch(o){ju(r,t,o)}break;case 18:null!==Dl&&(Ll?(_d(9===(e=Dl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,r.stateNode),Wh(e)):_d(Dl,r.stateNode));break;case 4:n=Dl,a=Ll,Dl=r.stateNode.containerInfo,Ll=!0,zl(e,t,r),Dl=n,Ll=a;break;case 0:case 11:case 14:case 15:vl(2,r,t),El||vl(4,r,t),zl(e,t,r);break;case 1:El||(wl(r,t),"function"===typeof(n=r.stateNode).componentWillUnmount&&bl(r,t,n)),zl(e,t,r);break;case 21:zl(e,t,r);break;case 22:El=(n=El)||null!==r.memoizedState,zl(e,t,r),El=n;break;default:zl(e,t,r)}}function Bl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&null!==(e=e.memoizedState))){e=e.dehydrated;try{Wh(e)}catch(r){ju(t,t.return,r)}}}function Fl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Wh(e)}catch(r){ju(t,t.return,r)}}function Ul(e,t){var r=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Pl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Pl),t;default:throw Error(o(435,e.tag))}}(e);t.forEach(function(t){if(!r.has(t)){r.add(t);var n=Au.bind(null,e,t);t.then(n,n)}})}function Hl(e,t){var r=t.deletions;if(null!==r)for(var n=0;n<r.length;n++){var a=r[n],i=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 27:if(Nd(l.type)){Dl=l.stateNode,Ll=!1;break e}break;case 5:Dl=l.stateNode,Ll=!1;break e;case 3:case 4:Dl=l.stateNode.containerInfo,Ll=!0;break e}l=l.return}if(null===Dl)throw Error(o(160));ql(i,s,a),Dl=null,Ll=!1,null!==(i=a.alternate)&&(i.return=null),a.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)Kl(t,e),t=t.sibling}var Wl=null;function Kl(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Hl(t,e),Vl(e),4&n&&(vl(3,e,e.return),gl(3,e),vl(5,e,e.return));break;case 1:Hl(t,e),Vl(e),512&n&&(El||null===r||wl(r,r.return)),64&n&&Tl&&(null!==(e=e.updateQueue)&&(null!==(n=e.callbacks)&&(r=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===r?n:r.concat(n))));break;case 26:var a=Wl;if(Hl(t,e),Vl(e),512&n&&(El||null===r||wl(r,r.return)),4&n){var i=null!==r?r.memoizedState:null;if(n=e.memoizedState,null===r)if(null===n)if(null===e.stateNode){e:{n=e.type,r=e.memoizedProps,a=a.ownerDocument||a;t:switch(n){case"title":(!(i=a.getElementsByTagName("title")[0])||i[Qe]||i[Fe]||"http://www.w3.org/2000/svg"===i.namespaceURI||i.hasAttribute("itemprop"))&&(i=a.createElement(n),a.head.insertBefore(i,a.querySelector("head > title"))),hd(i,n,r),i[Fe]=e,et(i),n=i;break e;case"link":var s=rh("link","href",a).get(n+(r.href||""));if(s)for(var l=0;l<s.length;l++)if((i=s[l]).getAttribute("href")===(null==r.href||""===r.href?null:r.href)&&i.getAttribute("rel")===(null==r.rel?null:r.rel)&&i.getAttribute("title")===(null==r.title?null:r.title)&&i.getAttribute("crossorigin")===(null==r.crossOrigin?null:r.crossOrigin)){s.splice(l,1);break t}hd(i=a.createElement(n),n,r),a.head.appendChild(i);break;case"meta":if(s=rh("meta","content",a).get(n+(r.content||"")))for(l=0;l<s.length;l++)if((i=s[l]).getAttribute("content")===(null==r.content?null:""+r.content)&&i.getAttribute("name")===(null==r.name?null:r.name)&&i.getAttribute("property")===(null==r.property?null:r.property)&&i.getAttribute("http-equiv")===(null==r.httpEquiv?null:r.httpEquiv)&&i.getAttribute("charset")===(null==r.charSet?null:r.charSet)){s.splice(l,1);break t}hd(i=a.createElement(n),n,r),a.head.appendChild(i);break;default:throw Error(o(468,n))}i[Fe]=e,et(i),n=i}e.stateNode=n}else nh(a,e.type,e.stateNode);else e.stateNode=Jd(a,n,e.memoizedProps);else i!==n?(null===i?null!==r.stateNode&&(r=r.stateNode).parentNode.removeChild(r):i.count--,null===n?nh(a,e.type,e.stateNode):Jd(a,n,e.memoizedProps)):null===n&&null!==e.stateNode&&jl(e,e.memoizedProps,r.memoizedProps)}break;case 27:Hl(t,e),Vl(e),512&n&&(El||null===r||wl(r,r.return)),null!==r&&4&n&&jl(e,e.memoizedProps,r.memoizedProps);break;case 5:if(Hl(t,e),Vl(e),512&n&&(El||null===r||wl(r,r.return)),32&e.flags){a=e.stateNode;try{St(a,"")}catch(f){ju(e,e.return,f)}}4&n&&null!=e.stateNode&&jl(e,a=e.memoizedProps,null!==r?r.memoizedProps:a),1024&n&&(Ol=!0);break;case 6:if(Hl(t,e),Vl(e),4&n){if(null===e.stateNode)throw Error(o(162));n=e.memoizedProps,r=e.stateNode;try{r.nodeValue=n}catch(f){ju(e,e.return,f)}}break;case 3:if(th=null,a=Wl,Wl=Fd(t.containerInfo),Hl(t,e),Wl=a,Vl(e),4&n&&null!==r&&r.memoizedState.isDehydrated)try{Wh(t.containerInfo)}catch(f){ju(e,e.return,f)}Ol&&(Ol=!1,Gl(e));break;case 4:n=Wl,Wl=Fd(e.stateNode.containerInfo),Hl(t,e),Vl(e),Wl=n;break;case 12:default:Hl(t,e),Vl(e);break;case 31:case 19:Hl(t,e),Vl(e),4&n&&(null!==(n=e.updateQueue)&&(e.updateQueue=null,Ul(e,n)));break;case 13:Hl(t,e),Vl(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==r&&null!==r.memoizedState)&&(Pc=le()),4&n&&(null!==(n=e.updateQueue)&&(e.updateQueue=null,Ul(e,n)));break;case 22:a=null!==e.memoizedState;var c=null!==r&&null!==r.memoizedState,u=Tl,d=El;if(Tl=u||a,El=d||c,Hl(t,e),El=d,Tl=u,Vl(e),8192&n)e:for(t=e.stateNode,t._visibility=a?-2&t._visibility:1|t._visibility,a&&(null===r||c||Tl||El||Yl(e)),r=null,t=e;;){if(5===t.tag||26===t.tag){if(null===r){c=r=t;try{if(i=c.stateNode,a)"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,m=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==m||"boolean"===typeof m?"":(""+m).trim()}}catch(f){ju(c,c.return,f)}}}else if(6===t.tag){if(null===r){c=t;try{c.stateNode.nodeValue=a?"":c.memoizedProps}catch(f){ju(c,c.return,f)}}}else if(18===t.tag){if(null===r){c=t;try{var p=c.stateNode;a?Ad(p,!0):Ad(c.stateNode,!1)}catch(f){ju(c,c.return,f)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;r===t&&(r=null),t=t.return}r===t&&(r=null),t.sibling.return=t.return,t=t.sibling}4&n&&(null!==(n=e.updateQueue)&&(null!==(r=n.retryQueue)&&(n.retryQueue=null,Ul(e,r))));case 30:case 21:}}function Vl(e){var t=e.flags;if(2&t){try{for(var r,n=e.return;null!==n;){if(Sl(n)){r=n;break}n=n.return}if(null==r)throw Error(o(160));switch(r.tag){case 27:var a=r.stateNode;_l(e,Cl(e),a);break;case 5:var i=r.stateNode;32&r.flags&&(St(i,""),r.flags&=-33),_l(e,Cl(e),i);break;case 3:case 4:var s=r.stateNode.containerInfo;Nl(e,Cl(e),s);break;default:throw Error(o(161))}}catch(l){ju(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Gl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Gl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Ql(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Ml(e,t.alternate,t),t=t.sibling}function Yl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:vl(4,t,t.return),Yl(t);break;case 1:wl(t,t.return);var r=t.stateNode;"function"===typeof r.componentWillUnmount&&bl(t,t.return,r),Yl(t);break;case 27:zd(t.stateNode);case 26:case 5:wl(t,t.return),Yl(t);break;case 22:null===t.memoizedState&&Yl(t);break;default:Yl(t)}e=e.sibling}}function $l(e,t,r){for(r=r&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var n=t.alternate,a=e,i=t,o=i.flags;switch(i.tag){case 0:case 11:case 15:$l(a,i,r),gl(4,i);break;case 1:if($l(a,i,r),"function"===typeof(a=(n=i).stateNode).componentDidMount)try{a.componentDidMount()}catch(c){ju(n,n.return,c)}if(null!==(a=(n=i).updateQueue)){var s=n.stateNode;try{var l=a.shared.hiddenCallbacks;if(null!==l)for(a.shared.hiddenCallbacks=null,a=0;a<l.length;a++)Ci(l[a],s)}catch(c){ju(n,n.return,c)}}r&&64&o&&yl(i),xl(i,i.return);break;case 27:Al(i);case 26:case 5:$l(a,i,r),r&&null===n&&4&o&&kl(i),xl(i,i.return);break;case 12:$l(a,i,r);break;case 31:$l(a,i,r),r&&4&o&&Bl(a,i);break;case 13:$l(a,i,r),r&&4&o&&Fl(a,i);break;case 22:null===i.memoizedState&&$l(a,i,r),xl(i,i.return);break;case 30:break;default:$l(a,i,r)}t=t.sibling}}function Jl(e,t){var r=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(r=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==r&&(null!=e&&e.refCount++,null!=r&&Ba(r))}function Xl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ba(e))}function Zl(e,t,r,n){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)ec(e,t,r,n),t=t.sibling}function ec(e,t,r,n){var a=t.flags;switch(t.tag){case 0:case 11:case 15:Zl(e,t,r,n),2048&a&&gl(9,t);break;case 1:case 31:case 13:default:Zl(e,t,r,n);break;case 3:Zl(e,t,r,n),2048&a&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ba(e)));break;case 12:if(2048&a){Zl(e,t,r,n),e=t.stateNode;try{var i=t.memoizedProps,o=i.id,s=i.onPostCommit;"function"===typeof s&&s(o,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){ju(t,t.return,l)}}else Zl(e,t,r,n);break;case 23:break;case 22:i=t.stateNode,o=t.alternate,null!==t.memoizedState?2&i._visibility?Zl(e,t,r,n):rc(e,t):2&i._visibility?Zl(e,t,r,n):(i._visibility|=2,tc(e,t,r,n,0!==(10256&t.subtreeFlags)||!1)),2048&a&&Jl(o,t);break;case 24:Zl(e,t,r,n),2048&a&&Xl(t.alternate,t)}}function tc(e,t,r,n,a){for(a=a&&(0!==(10256&t.subtreeFlags)||!1),t=t.child;null!==t;){var i=e,o=t,s=r,l=n,c=o.flags;switch(o.tag){case 0:case 11:case 15:tc(i,o,s,l,a),gl(8,o);break;case 23:break;case 22:var u=o.stateNode;null!==o.memoizedState?2&u._visibility?tc(i,o,s,l,a):rc(i,o):(u._visibility|=2,tc(i,o,s,l,a)),a&&2048&c&&Jl(o.alternate,o);break;case 24:tc(i,o,s,l,a),a&&2048&c&&Xl(o.alternate,o);break;default:tc(i,o,s,l,a)}t=t.sibling}}function rc(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var r=e,n=t,a=n.flags;switch(n.tag){case 22:rc(r,n),2048&a&&Jl(n.alternate,n);break;case 24:rc(r,n),2048&a&&Xl(n.alternate,n);break;default:rc(r,n)}t=t.sibling}}var nc=8192;function ac(e,t,r){if(e.subtreeFlags&nc)for(e=e.child;null!==e;)ic(e,t,r),e=e.sibling}function ic(e,t,r){switch(e.tag){case 26:ac(e,t,r),e.flags&nc&&null!==e.memoizedState&&function(e,t,r,n){if("stylesheet"===r.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&r.state.loading)){if(null===r.instance){var a=Vd(n.href),i=t.querySelector(Gd(a));if(i)return null!==(t=i._p)&&"object"===typeof t&&"function"===typeof t.then&&(e.count++,e=oh.bind(e),t.then(e,e)),r.state.loading|=4,r.instance=i,void et(i);i=t.ownerDocument||t,n=Qd(n),(a=qd.get(a))&&Zd(n,a),et(i=i.createElement("link"));var o=i;o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),hd(i,"link",n),r.instance=i}null===e.stylesheets&&(e.stylesheets=new Map),e.stylesheets.set(r,t),(t=r.state.preload)&&0===(3&r.state.loading)&&(e.count++,r=oh.bind(e),t.addEventListener("load",r),t.addEventListener("error",r))}}(r,Wl,e.memoizedState,e.memoizedProps);break;case 5:default:ac(e,t,r);break;case 3:case 4:var n=Wl;Wl=Fd(e.stateNode.containerInfo),ac(e,t,r),Wl=n;break;case 22:null===e.memoizedState&&(null!==(n=e.alternate)&&null!==n.memoizedState?(n=nc,nc=16777216,ac(e,t,r),nc=n):ac(e,t,r))}}function oc(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function sc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var r=0;r<t.length;r++){var n=t[r];Il=n,uc(n,e)}oc(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)lc(e),e=e.sibling}function lc(e){switch(e.tag){case 0:case 11:case 15:sc(e),2048&e.flags&&vl(9,e,e.return);break;case 3:case 12:default:sc(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,cc(e)):sc(e)}}function cc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var r=0;r<t.length;r++){var n=t[r];Il=n,uc(n,e)}oc(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:vl(8,t,t.return),cc(t);break;case 22:2&(r=t.stateNode)._visibility&&(r._visibility&=-3,cc(t));break;default:cc(t)}e=e.sibling}}function uc(e,t){for(;null!==Il;){var r=Il;switch(r.tag){case 0:case 11:case 15:vl(8,r,t);break;case 23:case 22:if(null!==r.memoizedState&&null!==r.memoizedState.cachePool){var n=r.memoizedState.cachePool.pool;null!=n&&n.refCount++}break;case 24:Ba(r.memoizedState.cache)}if(null!==(n=r.child))n.return=r,Il=n;else e:for(r=e;null!==Il;){var a=(n=Il).sibling,i=n.return;if(Rl(n),n===r){Il=null;break e}if(null!==a){a.return=i,Il=a;break e}Il=i}}}var dc={getCacheForType:function(e){var t=Pa(za),r=t.data.get(e);return void 0===r&&(r=e(),t.data.set(e,r)),r},cacheSignal:function(){return Pa(za).controller.signal}},hc="function"===typeof WeakMap?WeakMap:Map,mc=0,pc=null,fc=null,gc=0,vc=0,yc=null,bc=!1,xc=!1,wc=!1,kc=0,jc=0,Sc=0,Cc=0,Nc=0,_c=0,Ac=0,Tc=null,Ec=null,Oc=!1,Pc=0,Ic=0,Mc=1/0,Rc=null,Dc=null,Lc=0,zc=null,qc=null,Bc=0,Fc=0,Uc=null,Hc=null,Wc=0,Kc=null;function Vc(){return 0!==(2&mc)&&0!==gc?gc&-gc:null!==M.T?Uu():ze()}function Gc(){if(0===_c)if(0===(536870912&gc)||da){var e=Se;0===(3932160&(Se<<=1))&&(Se=262144),_c=e}else _c=536870912;return null!==(e=Pi.current)&&(e.flags|=32),_c}function Qc(e,t,r){(e!==pc||2!==vc&&9!==vc)&&null===e.cancelPendingCommit||(tu(e,0),Xc(e,gc,_c,!1)),Pe(e,r),0!==(2&mc)&&e===pc||(e===pc&&(0===(2&mc)&&(Cc|=r),4===jc&&Xc(e,gc,_c,!1)),Ru(e))}function Yc(e,t,r){if(0!==(6&mc))throw Error(o(327));for(var n=!r&&0===(127&t)&&0===(t&e.expiredLanes)||Ae(e,t),a=n?function(e,t){var r=mc;mc|=2;var n=au(),a=iu();pc!==e||gc!==t?(Rc=null,Mc=le()+500,tu(e,t)):xc=Ae(e,t);e:for(;;)try{if(0!==vc&&null!==fc){t=fc;var i=yc;t:switch(vc){case 1:vc=0,yc=null,hu(e,t,i,1);break;case 2:case 9:if(ti(i)){vc=0,yc=null,du(t);break}t=function(){2!==vc&&9!==vc||pc!==e||(vc=7),Ru(e)},i.then(t,t);break e;case 3:vc=7;break e;case 4:vc=5;break e;case 7:ti(i)?(vc=0,yc=null,du(t)):(vc=0,yc=null,hu(e,t,i,7));break;case 5:var s=null;switch(fc.tag){case 26:s=fc.memoizedState;case 5:case 27:var l=fc;if(s?ah(s):l.stateNode.complete){vc=0,yc=null;var c=l.sibling;if(null!==c)fc=c;else{var u=l.return;null!==u?(fc=u,mu(u)):fc=null}break t}}vc=0,yc=null,hu(e,t,i,5);break;case 6:vc=0,yc=null,hu(e,t,i,6);break;case 8:eu(),jc=6;break e;default:throw Error(o(462))}}cu();break}catch(d){ru(e,d)}return Sa=ja=null,M.H=n,M.A=a,mc=r,null!==fc?0:(pc=null,gc=0,En(),jc)}(e,t):su(e,t,!0),i=n;;){if(0===a){xc&&!n&&Xc(e,t,0,!1);break}if(r=e.current.alternate,!i||Jc(r)){if(2===a){if(i=t,e.errorRecoveryDisabledLanes&i)var s=0;else s=0!==(s=-536870913&e.pendingLanes)?s:536870912&s?536870912:0;if(0!==s){t=s;e:{var l=e;a=Tc;var c=l.current.memoizedState.isDehydrated;if(c&&(tu(l,s).flags|=256),2!==(s=su(l,s,!1))){if(wc&&!c){l.errorRecoveryDisabledLanes|=i,Cc|=i,a=4;break e}i=Ec,Ec=a,null!==i&&(null===Ec?Ec=i:Ec.push.apply(Ec,i))}a=s}if(i=!1,2!==a)continue}}if(1===a){tu(e,0),Xc(e,t,0,!0);break}e:{switch(n=e,i=a){case 0:case 1:throw Error(o(345));case 4:if((4194048&t)!==t)break;case 6:Xc(n,t,_c,!bc);break e;case 2:Ec=null;break;case 3:case 5:break;default:throw Error(o(329))}if((62914560&t)===t&&10<(a=Pc+300-le())){if(Xc(n,t,_c,!bc),0!==_e(n,0,!0))break e;Bc=t,n.timeoutHandle=wd($c.bind(null,n,r,Ec,Rc,Oc,t,_c,Cc,Ac,bc,i,"Throttled",-0,0),a)}else $c(n,r,Ec,Rc,Oc,t,_c,Cc,Ac,bc,i,null,-0,0)}break}a=su(e,t,!1),i=!1}Ru(e)}function $c(e,t,r,n,a,i,o,s,l,c,u,d,h,m){if(e.timeoutHandle=-1,8192&(d=t.subtreeFlags)||16785408===(16785408&d)){ic(t,i,d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Pt});var p=(62914560&i)===i?Pc-le():(4194048&i)===i?Ic-le():0;if(null!==(p=function(e,t){return e.stylesheets&&0===e.count&&lh(e,e.stylesheets),0<e.count||0<e.imgCount?function(r){var n=setTimeout(function(){if(e.stylesheets&&lh(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&0===ih&&(ih=62500*function(){if("function"===typeof performance.getEntriesByType){for(var e=0,t=0,r=performance.getEntriesByType("resource"),n=0;n<r.length;n++){var a=r[n],i=a.transferSize,o=a.initiatorType,s=a.duration;if(i&&s&&md(o)){for(o=0,s=a.responseEnd,n+=1;n<r.length;n++){var l=r[n],c=l.startTime;if(c>s)break;var u=l.transferSize,d=l.initiatorType;u&&md(d)&&(o+=u*((l=l.responseEnd)<s?1:(s-c)/(l-c)))}if(--n,t+=8*(i+o)/(a.duration/1e3),10<++e)break}}if(0<e)return t/e/1e6}return navigator.connection&&"number"===typeof(e=navigator.connection.downlink)?e:5}());var a=setTimeout(function(){if(e.waitingForImages=!1,0===e.count&&(e.stylesheets&&lh(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>ih?50:800)+t);return e.unsuspend=r,function(){e.unsuspend=null,clearTimeout(n),clearTimeout(a)}}:null}(d,p)))return Bc=i,e.cancelPendingCommit=p(fu.bind(null,e,t,i,r,n,a,o,s,l,u,d,null,h,m)),void Xc(e,i,o,!c)}fu(e,t,i,r,n,a,o,s,l)}function Jc(e){for(var t=e;;){var r=t.tag;if((0===r||11===r||15===r)&&16384&t.flags&&(null!==(r=t.updateQueue)&&null!==(r=r.stores)))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!Jr(i(),a))return!1}catch(o){return!1}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Xc(e,t,r,n){t&=~Nc,t&=~Cc,e.suspendedLanes|=t,e.pingedLanes&=~t,n&&(e.warmLanes|=t),n=e.expirationTimes;for(var a=t;0<a;){var i=31-xe(a),o=1<<i;n[i]=-1,a&=~o}0!==r&&Ie(e,r,t)}function Zc(){return 0!==(6&mc)||(Du(0,!1),!1)}function eu(){if(null!==fc){if(0===vc)var e=fc.return;else Sa=ja=null,oo(e=fc),si=null,li=0,e=fc;for(;null!==e;)fl(e.alternate,e),e=e.return;fc=null}}function tu(e,t){var r=e.timeoutHandle;-1!==r&&(e.timeoutHandle=-1,kd(r)),null!==(r=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,r()),Bc=0,eu(),pc=e,fc=r=Bn(e.current,null),gc=t,vc=0,yc=null,bc=!1,xc=Ae(e,t),wc=!1,Ac=_c=Nc=Cc=Sc=jc=0,Ec=Tc=null,Oc=!1,0!==(8&t)&&(t|=32&t);var n=e.entangledLanes;if(0!==n)for(e=e.entanglements,n&=t;0<n;){var a=31-xe(n),i=1<<a;t|=e[a],n&=~i}return kc=t,En(),r}function ru(e,t){Ui=null,M.H=fs,t===Ja||t===Za?(t=ii(),vc=3):t===Xa?(t=ii(),vc=4):vc=t===Ps?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,yc=t,null===fc&&(jc=1,_s(e,Qn(t,e.current)))}function nu(){var e=Pi.current;return null===e||((4194048&gc)===gc?null===Ii:((62914560&gc)===gc||0!==(536870912&gc))&&e===Ii)}function au(){var e=M.H;return M.H=fs,null===e?fs:e}function iu(){var e=M.A;return M.A=dc,e}function ou(){jc=4,bc||(4194048&gc)!==gc&&null!==Pi.current||(xc=!0),0===(134217727&Sc)&&0===(134217727&Cc)||null===pc||Xc(pc,gc,_c,!1)}function su(e,t,r){var n=mc;mc|=2;var a=au(),i=iu();pc===e&&gc===t||(Rc=null,tu(e,t)),t=!1;var o=jc;e:for(;;)try{if(0!==vc&&null!==fc){var s=fc,l=yc;switch(vc){case 8:eu(),o=6;break e;case 3:case 2:case 9:case 6:null===Pi.current&&(t=!0);var c=vc;if(vc=0,yc=null,hu(e,s,l,c),r&&xc){o=0;break e}break;default:c=vc,vc=0,yc=null,hu(e,s,l,c)}}lu(),o=jc;break}catch(u){ru(e,u)}return t&&e.shellSuspendCounter++,Sa=ja=null,mc=n,M.H=a,M.A=i,null===fc&&(pc=null,gc=0,En()),o}function lu(){for(;null!==fc;)uu(fc)}function cu(){for(;null!==fc&&!oe();)uu(fc)}function uu(e){var t=ol(e.alternate,e,kc);e.memoizedProps=e.pendingProps,null===t?mu(e):fc=t}function du(e){var t=e,r=t.alternate;switch(t.tag){case 15:case 0:t=Ks(r,t,t.pendingProps,t.type,void 0,gc);break;case 11:t=Ks(r,t,t.pendingProps,t.type.render,t.ref,gc);break;case 5:oo(t);default:fl(r,t),t=ol(r,t=fc=Fn(t,kc),kc)}e.memoizedProps=e.pendingProps,null===t?mu(e):fc=t}function hu(e,t,r,n){Sa=ja=null,oo(t),si=null,li=0;var a=t.return;try{if(function(e,t,r,n,a){if(r.flags|=32768,null!==n&&"object"===typeof n&&"function"===typeof n.then){if(null!==(t=r.alternate)&&Ta(t,r,a,!0),null!==(r=Pi.current)){switch(r.tag){case 31:case 13:return null===Ii?ou():null===r.alternate&&0===jc&&(jc=3),r.flags&=-257,r.flags|=65536,r.lanes=a,n===ei?r.flags|=16384:(null===(t=r.updateQueue)?r.updateQueue=new Set([n]):t.add(n),Su(e,n,a)),!1;case 22:return r.flags|=65536,n===ei?r.flags|=16384:(null===(t=r.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([n])},r.updateQueue=t):null===(r=t.retryQueue)?t.retryQueue=new Set([n]):r.add(n),Su(e,n,a)),!1}throw Error(o(435,r.tag))}return Su(e,n,a),ou(),!1}if(da)return null!==(t=Pi.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=a,n!==pa&&wa(Qn(e=Error(o(422),{cause:n}),r))):(n!==pa&&wa(Qn(t=Error(o(423),{cause:n}),r)),(e=e.current.alternate).flags|=65536,a&=-a,e.lanes|=a,n=Qn(n,r),wi(e,a=Ts(e.stateNode,n,a)),4!==jc&&(jc=2)),!1;var i=Error(o(520),{cause:n});if(i=Qn(i,r),null===Tc?Tc=[i]:Tc.push(i),4!==jc&&(jc=2),null===t)return!0;n=Qn(n,r),r=t;do{switch(r.tag){case 3:return r.flags|=65536,e=a&-a,r.lanes|=e,wi(r,e=Ts(r.stateNode,n,e)),!1;case 1:if(t=r.type,i=r.stateNode,0===(128&r.flags)&&("function"===typeof t.getDerivedStateFromError||null!==i&&"function"===typeof i.componentDidCatch&&(null===Dc||!Dc.has(i))))return r.flags|=65536,a&=-a,r.lanes|=a,Os(a=Es(a),e,r,n),wi(r,a),!1}r=r.return}while(null!==r);return!1}(e,a,t,r,gc))return jc=1,_s(e,Qn(r,e.current)),void(fc=null)}catch(i){if(null!==a)throw fc=a,i;return jc=1,_s(e,Qn(r,e.current)),void(fc=null)}32768&t.flags?(da||1===n?e=!0:xc||0!==(536870912&gc)?e=!1:(bc=e=!0,(2===n||9===n||3===n||6===n)&&(null!==(n=Pi.current)&&13===n.tag&&(n.flags|=16384))),pu(t,e)):mu(t)}function mu(e){var t=e;do{if(0!==(32768&t.flags))return void pu(t,bc);e=t.return;var r=ml(t.alternate,t,kc);if(null!==r)return void(fc=r);if(null!==(t=t.sibling))return void(fc=t);fc=t=e}while(null!==t);0===jc&&(jc=5)}function pu(e,t){do{var r=pl(e.alternate,e);if(null!==r)return r.flags&=32767,void(fc=r);if(null!==(r=e.return)&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!t&&null!==(e=e.sibling))return void(fc=e);fc=e=r}while(null!==e);jc=6,fc=null}function fu(e,t,r,n,a,i,s,l,c){e.cancelPendingCommit=null;do{xu()}while(0!==Lc);if(0!==(6&mc))throw Error(o(327));if(null!==t){if(t===e.current)throw Error(o(177));if(i=t.lanes|t.childLanes,function(e,t,r,n,a,i){var o=e.pendingLanes;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=r,e.entangledLanes&=r,e.errorRecoveryDisabledLanes&=r,e.shellSuspendCounter=0;var s=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(r=o&~r;0<r;){var u=31-xe(r),d=1<<u;s[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var m=h[u];null!==m&&(m.lane&=-536870913)}r&=~d}0!==n&&Ie(e,n,0),0!==i&&0===a&&0!==e.tag&&(e.suspendedLanes|=i&~(o&~t))}(e,r,i|=Tn,s,l,c),e===pc&&(fc=pc=null,gc=0),qc=t,zc=e,Bc=r,Fc=i,Uc=a,Hc=n,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,ae(he,function(){return wu(),null})):(e.callbackNode=null,e.callbackPriority=0),n=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||n){n=M.T,M.T=null,a=R.p,R.p=2,s=mc,mc|=4;try{!function(e,t){if(e=e.containerInfo,pd=bh,nn(e=rn(e))){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch(g){r=null;break e}var s=0,l=-1,c=-1,u=0,d=0,h=e,m=null;t:for(;;){for(var p;h!==r||0!==a&&3!==h.nodeType||(l=s+a),h!==i||0!==n&&3!==h.nodeType||(c=s+n),3===h.nodeType&&(s+=h.nodeValue.length),null!==(p=h.firstChild);)m=h,h=p;for(;;){if(h===e)break t;if(m===r&&++u===a&&(l=s),m===i&&++d===n&&(c=s),null!==(p=h.nextSibling))break;m=(h=m).parentNode}h=p}r=-1===l||-1===c?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(fd={focusedElem:e,selectionRange:r},bh=!1,Il=t;null!==Il;)if(e=(t=Il).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Il=e;else for(;null!==Il;){switch(i=(t=Il).alternate,e=t.flags,t.tag){case 0:if(0!==(4&e)&&null!==(e=null!==(e=t.updateQueue)?e.events:null))for(r=0;r<e.length;r++)(a=e[r]).ref.impl=a.nextImpl;break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==i){e=void 0,r=t,a=i.memoizedProps,i=i.memoizedState,n=r.stateNode;try{var f=js(r.type,a);e=n.getSnapshotBeforeUpdate(f,i),n.__reactInternalSnapshotBeforeUpdate=e}catch(v){ju(r,r.return,v)}}break;case 3:if(0!==(1024&e))if(9===(r=(e=t.stateNode.containerInfo).nodeType))Td(e);else if(1===r)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Td(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(o(163))}if(null!==(e=t.sibling)){e.return=t.return,Il=e;break}Il=t.return}}(e,t)}finally{mc=s,R.p=a,M.T=n}}Lc=1,gu(),vu(),yu()}}function gu(){if(1===Lc){Lc=0;var e=zc,t=qc,r=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||r){r=M.T,M.T=null;var n=R.p;R.p=2;var a=mc;mc|=4;try{Kl(t,e);var i=fd,o=rn(e.containerInfo),s=i.focusedElem,l=i.selectionRange;if(o!==s&&s&&s.ownerDocument&&tn(s.ownerDocument.documentElement,s)){if(null!==l&&nn(s)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in s)s.selectionStart=c,s.selectionEnd=Math.min(u,s.value.length);else{var d=s.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var m=h.getSelection(),p=s.textContent.length,f=Math.min(l.start,p),g=void 0===l.end?f:Math.min(l.end,p);!m.extend&&f>g&&(o=g,g=f,f=o);var v=en(s,f),y=en(s,g);if(v&&y&&(1!==m.rangeCount||m.anchorNode!==v.node||m.anchorOffset!==v.offset||m.focusNode!==y.node||m.focusOffset!==y.offset)){var b=d.createRange();b.setStart(v.node,v.offset),m.removeAllRanges(),f>g?(m.addRange(b),m.extend(y.node,y.offset)):(b.setEnd(y.node,y.offset),m.addRange(b))}}}}for(d=[],m=s;m=m.parentNode;)1===m.nodeType&&d.push({element:m,left:m.scrollLeft,top:m.scrollTop});for("function"===typeof s.focus&&s.focus(),s=0;s<d.length;s++){var x=d[s];x.element.scrollLeft=x.left,x.element.scrollTop=x.top}}bh=!!pd,fd=pd=null}finally{mc=a,R.p=n,M.T=r}}e.current=t,Lc=2}}function vu(){if(2===Lc){Lc=0;var e=zc,t=qc,r=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||r){r=M.T,M.T=null;var n=R.p;R.p=2;var a=mc;mc|=4;try{Ml(e,t.alternate,t)}finally{mc=a,R.p=n,M.T=r}}Lc=3}}function yu(){if(4===Lc||3===Lc){Lc=0,se();var e=zc,t=qc,r=Bc,n=Hc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Lc=5:(Lc=0,qc=zc=null,bu(e,e.pendingLanes));var a=e.pendingLanes;if(0===a&&(Dc=null),Le(r),t=t.stateNode,ye&&"function"===typeof ye.onCommitFiberRoot)try{ye.onCommitFiberRoot(ve,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==n){t=M.T,a=R.p,R.p=2,M.T=null;try{for(var i=e.onRecoverableError,o=0;o<n.length;o++){var s=n[o];i(s.value,{componentStack:s.stack})}}finally{M.T=t,R.p=a}}0!==(3&Bc)&&xu(),Ru(e),a=e.pendingLanes,0!==(261930&r)&&0!==(42&a)?e===Kc?Wc++:(Wc=0,Kc=e):Wc=0,Du(0,!1)}}function bu(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Ba(t)))}function xu(){return gu(),vu(),yu(),wu()}function wu(){if(5!==Lc)return!1;var e=zc,t=Fc;Fc=0;var r=Le(Bc),n=M.T,a=R.p;try{R.p=32>r?32:r,M.T=null,r=Uc,Uc=null;var i=zc,s=Bc;if(Lc=0,qc=zc=null,Bc=0,0!==(6&mc))throw Error(o(331));var l=mc;if(mc|=4,lc(i.current),ec(i,i.current,s,r),mc=l,Du(0,!1),ye&&"function"===typeof ye.onPostCommitFiberRoot)try{ye.onPostCommitFiberRoot(ve,i)}catch(c){}return!0}finally{R.p=a,M.T=n,bu(e,t)}}function ku(e,t,r){t=Qn(r,t),null!==(e=bi(e,t=Ts(e.stateNode,t,2),2))&&(Pe(e,2),Ru(e))}function ju(e,t,r){if(3===e.tag)ku(e,e,r);else for(;null!==t;){if(3===t.tag){ku(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===Dc||!Dc.has(n))){e=Qn(r,e),null!==(n=bi(t,r=Es(2),2))&&(Os(r,n,t,e),Pe(n,2),Ru(n));break}}t=t.return}}function Su(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new hc;var a=new Set;n.set(t,a)}else void 0===(a=n.get(t))&&(a=new Set,n.set(t,a));a.has(r)||(wc=!0,a.add(r),e=Cu.bind(null,e,t,r),t.then(e,e))}function Cu(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),e.pingedLanes|=e.suspendedLanes&r,e.warmLanes&=~r,pc===e&&(gc&r)===r&&(4===jc||3===jc&&(62914560&gc)===gc&&300>le()-Pc?0===(2&mc)&&tu(e,0):Nc|=r,Ac===gc&&(Ac=0)),Ru(e)}function Nu(e,t){0===t&&(t=Ee()),null!==(e=In(e,t))&&(Pe(e,t),Ru(e))}function _u(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),Nu(e,r)}function Au(e,t){var r=0;switch(e.tag){case 31:case 13:var n=e.stateNode,a=e.memoizedState;null!==a&&(r=a.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(o(314))}null!==n&&n.delete(t),Nu(e,r)}var Tu=null,Eu=null,Ou=!1,Pu=!1,Iu=!1,Mu=0;function Ru(e){e!==Eu&&null===e.next&&(null===Eu?Tu=Eu=e:Eu=Eu.next=e),Pu=!0,Ou||(Ou=!0,Sd(function(){0!==(6&mc)?ae(ue,Lu):zu()}))}function Du(e,t){if(!Iu&&Pu){Iu=!0;do{for(var r=!1,n=Tu;null!==n;){if(!t)if(0!==e){var a=n.pendingLanes;if(0===a)var i=0;else{var o=n.suspendedLanes,s=n.pingedLanes;i=(1<<31-xe(42|e)+1)-1,i=201326741&(i&=a&~(o&~s))?201326741&i|1:i?2|i:0}0!==i&&(r=!0,Fu(n,i))}else i=gc,0===(3&(i=_e(n,n===pc?i:0,null!==n.cancelPendingCommit||-1!==n.timeoutHandle)))||Ae(n,i)||(r=!0,Fu(n,i));n=n.next}}while(r);Iu=!1}}function Lu(){zu()}function zu(){Pu=Ou=!1;var e=0;0!==Mu&&function(){var e=window.event;if(e&&"popstate"===e.type)return e!==xd&&(xd=e,!0);return xd=null,!1}()&&(e=Mu);for(var t=le(),r=null,n=Tu;null!==n;){var a=n.next,i=qu(n,t);0===i?(n.next=null,null===r?Tu=a:r.next=a,null===a&&(Eu=r)):(r=n,(0!==e||0!==(3&i))&&(Pu=!0)),n=a}0!==Lc&&5!==Lc||Du(e,!1),0!==Mu&&(Mu=0)}function qu(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=-62914561&e.pendingLanes;0<i;){var o=31-xe(i),s=1<<o,l=a[o];-1===l?0!==(s&r)&&0===(s&n)||(a[o]=Te(s,t)):l<=t&&(e.expiredLanes|=s),i&=~s}if(r=gc,r=_e(e,e===(t=pc)?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),n=e.callbackNode,0===r||e===t&&(2===vc||9===vc)||null!==e.cancelPendingCommit)return null!==n&&null!==n&&ie(n),e.callbackNode=null,e.callbackPriority=0;if(0===(3&r)||Ae(e,r)){if((t=r&-r)===e.callbackPriority)return t;switch(null!==n&&ie(n),Le(r)){case 2:case 8:r=de;break;case 32:default:r=he;break;case 268435456:r=pe}return n=Bu.bind(null,e),r=ae(r,n),e.callbackPriority=t,e.callbackNode=r,t}return null!==n&&null!==n&&ie(n),e.callbackPriority=2,e.callbackNode=null,2}function Bu(e,t){if(0!==Lc&&5!==Lc)return e.callbackNode=null,e.callbackPriority=0,null;var r=e.callbackNode;if(xu()&&e.callbackNode!==r)return null;var n=gc;return 0===(n=_e(e,e===pc?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Yc(e,n,t),qu(e,le()),null!=e.callbackNode&&e.callbackNode===r?Bu.bind(null,e):null)}function Fu(e,t){if(xu())return null;Yc(e,t,!0)}function Uu(){if(0===Mu){var e=Ha;0===e&&(e=je,0===(261888&(je<<=1))&&(je=256)),Mu=e}return Mu}function Hu(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Ot(""+e)}function Wu(e,t){var r=t.ownerDocument.createElement("input");return r.name=t.name,r.value=t.value,e.id&&r.setAttribute("form",e.id),t.parentNode.insertBefore(r,t),e=new FormData(e),r.parentNode.removeChild(r),e}for(var Ku=0;Ku<Sn.length;Ku++){var Vu=Sn[Ku];Cn(Vu.toLowerCase(),"on"+(Vu[0].toUpperCase()+Vu.slice(1)))}Cn(gn,"onAnimationEnd"),Cn(vn,"onAnimationIteration"),Cn(yn,"onAnimationStart"),Cn("dblclick","onDoubleClick"),Cn("focusin","onFocus"),Cn("focusout","onBlur"),Cn(bn,"onTransitionRun"),Cn(xn,"onTransitionStart"),Cn(wn,"onTransitionCancel"),Cn(kn,"onTransitionEnd"),at("onMouseEnter",["mouseout","mouseover"]),at("onMouseLeave",["mouseout","mouseover"]),at("onPointerEnter",["pointerout","pointerover"]),at("onPointerLeave",["pointerout","pointerover"]),nt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),nt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),nt("onBeforeInput",["compositionend","keypress","textInput","paste"]),nt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),nt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),nt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Gu));function Yu(e,t){t=0!==(4&t);for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var s=n[o],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==i&&a.isPropagationStopped())break e;i=s,a.currentTarget=c;try{i(a)}catch(u){Nn(u)}a.currentTarget=null,i=l}else for(o=0;o<n.length;o++){if(l=(s=n[o]).instance,c=s.currentTarget,s=s.listener,l!==i&&a.isPropagationStopped())break e;i=s,a.currentTarget=c;try{i(a)}catch(u){Nn(u)}a.currentTarget=null,i=l}}}}function $u(e,t){var r=t[We];void 0===r&&(r=t[We]=new Set);var n=e+"__bubble";r.has(n)||(ed(t,e,2,!1),r.add(n))}function Ju(e,t,r){var n=0;t&&(n|=4),ed(r,e,n,t)}var Xu="_reactListening"+Math.random().toString(36).slice(2);function Zu(e){if(!e[Xu]){e[Xu]=!0,tt.forEach(function(t){"selectionchange"!==t&&(Qu.has(t)||Ju(t,!1,e),Ju(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Xu]||(t[Xu]=!0,Ju("selectionchange",!1,t))}}function ed(e,t,r,n){switch(Nh(t)){case 2:var a=xh;break;case 8:a=wh;break;default:a=kh}r=a.bind(null,t,r,e),a=void 0,!Ut||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),n?void 0!==a?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):void 0!==a?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function td(e,t,r,n,a){var i=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var o=n.tag;if(3===o||4===o){var s=n.stateNode.containerInfo;if(s===a)break;if(4===o)for(o=n.return;null!==o;){var c=o.tag;if((3===c||4===c)&&o.stateNode.containerInfo===a)return;o=o.return}for(;null!==s;){if(null===(o=$e(s)))return;if(5===(c=o.tag)||6===c||26===c||27===c){n=i=o;continue e}s=s.parentNode}}n=n.return}qt(function(){var n=i,a=Mt(r),o=[];e:{var s=jn.get(e);if(void 0!==s){var c=rr,u=e;switch(e){case"keypress":if(0===Qt(r))break e;case"keydown":case"keyup":c=vr;break;case"focusin":u="focus",c=lr;break;case"focusout":u="blur",c=lr;break;case"beforeblur":case"afterblur":c=lr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=or;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=sr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=br;break;case gn:case vn:case yn:c=cr;break;case kn:c=xr;break;case"scroll":case"scrollend":c=ar;break;case"wheel":c=wr;break;case"copy":case"cut":case"paste":c=ur;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=yr;break;case"toggle":case"beforetoggle":c=kr}var d=0!==(4&t),h=!d&&("scroll"===e||"scrollend"===e),m=d?null!==s?s+"Capture":null:s;d=[];for(var p,f=n;null!==f;){var g=f;if(p=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===p||null===m||null!=(g=Bt(f,m))&&d.push(rd(f,g,p)),h)break;f=f.return}0<d.length&&(s=new c(s,u,null,r,a),o.push({event:s,listeners:d}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||r===It||!(u=r.relatedTarget||r.fromElement)||!$e(u)&&!u[He])&&(c||s)&&(s=a.window===a?a:(s=a.ownerDocument)?s.defaultView||s.parentWindow:window,c?(c=n,null!==(u=(u=r.relatedTarget||r.toElement)?$e(u):null)&&(h=l(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=n),c!==u)){if(d=or,g="onMouseLeave",m="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(d=yr,g="onPointerLeave",m="onPointerEnter",f="pointer"),h=null==c?s:Xe(c),p=null==u?s:Xe(u),(s=new d(g,f+"leave",c,r,a)).target=h,s.relatedTarget=p,g=null,$e(a)===n&&((d=new d(m,f+"enter",u,r,a)).target=p,d.relatedTarget=h,g=d),h=g,c&&u)e:{for(d=ad,f=u,p=0,g=m=c;g;g=d(g))p++;g=0;for(var v=f;v;v=d(v))g++;for(;0<p-g;)m=d(m),p--;for(;0<g-p;)f=d(f),g--;for(;p--;){if(m===f||null!==f&&m===f.alternate){d=m;break e}m=d(m),f=d(f)}d=null}else d=null;null!==c&&id(o,s,c,d,!1),null!==u&&null!==h&&id(o,h,u,d,!0)}if("select"===(c=(s=n?Xe(n):window).nodeName&&s.nodeName.toLowerCase())||"input"===c&&"file"===s.type)var y=Br;else if(Mr(s))if(Fr)y=$r;else{y=Qr;var b=Gr}else!(c=s.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==s.type&&"radio"!==s.type?n&&At(n.elementType)&&(y=Br):y=Yr;switch(y&&(y=y(e,n))?Rr(o,y,r,a):(b&&b(e,s,n),"focusout"===e&&n&&"number"===s.type&&null!=n.memoizedProps.value&&xt(s,"number",s.value)),b=n?Xe(n):window,e){case"focusin":(Mr(b)||"true"===b.contentEditable)&&(on=b,sn=n,ln=null);break;case"focusout":ln=sn=on=null;break;case"mousedown":cn=!0;break;case"contextmenu":case"mouseup":case"dragend":cn=!1,un(o,r,a);break;case"selectionchange":if(an)break;case"keydown":case"keyup":un(o,r,a)}var x;if(Sr)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Pr?Er(e,r)&&(w="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(w="onCompositionStart");w&&(_r&&"ko"!==r.locale&&(Pr||"onCompositionStart"!==w?"onCompositionEnd"===w&&Pr&&(x=Gt()):(Kt="value"in(Wt=a)?Wt.value:Wt.textContent,Pr=!0)),0<(b=nd(n,w)).length&&(w=new dr(w,e,null,r,a),o.push({event:w,listeners:b}),x?w.data=x:null!==(x=Or(r))&&(w.data=x))),(x=Nr?function(e,t){switch(e){case"compositionend":return Or(t);case"keypress":return 32!==t.which?null:(Tr=!0,Ar);case"textInput":return(e=t.data)===Ar&&Tr?null:e;default:return null}}(e,r):function(e,t){if(Pr)return"compositionend"===e||!Sr&&Er(e,t)?(e=Gt(),Vt=Kt=Wt=null,Pr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _r&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(w=nd(n,"onBeforeInput")).length&&(b=new dr("onBeforeInput","beforeinput",null,r,a),o.push({event:b,listeners:w}),b.data=x)),function(e,t,r,n,a){if("submit"===t&&r&&r.stateNode===a){var i=Hu((a[Ue]||null).action),o=n.submitter;o&&null!==(t=(t=o[Ue]||null)?Hu(t.formAction):o.getAttribute("formAction"))&&(i=t,o=null);var s=new rr("action","action",null,n,a);e.push({event:s,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(0!==Mu){var e=o?Wu(a,o):new FormData(a);ts(r,{pending:!0,data:e,method:a.method,action:i},null,e)}}else"function"===typeof i&&(s.preventDefault(),e=o?Wu(a,o):new FormData(a),ts(r,{pending:!0,data:e,method:a.method,action:i},i,e))},currentTarget:a}]})}}(o,e,n,r,a)}Yu(o,t)})}function rd(e,t,r){return{instance:e,listener:t,currentTarget:r}}function nd(e,t){for(var r=t+"Capture",n=[];null!==e;){var a=e,i=a.stateNode;if(5!==(a=a.tag)&&26!==a&&27!==a||null===i||(null!=(a=Bt(e,r))&&n.unshift(rd(e,a,i)),null!=(a=Bt(e,t))&&n.push(rd(e,a,i))),3===e.tag)return n;e=e.return}return[]}function ad(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function id(e,t,r,n,a){for(var i=t._reactName,o=[];null!==r&&r!==n;){var s=r,l=s.alternate,c=s.stateNode;if(s=s.tag,null!==l&&l===n)break;5!==s&&26!==s&&27!==s||null===c||(l=c,a?null!=(c=Bt(r,i))&&o.unshift(rd(r,c,l)):a||null!=(c=Bt(r,i))&&o.push(rd(r,c,l))),r=r.return}0!==o.length&&e.push({event:t,listeners:o})}var od=/\r\n?/g,sd=/\u0000|\uFFFD/g;function ld(e){return("string"===typeof e?e:""+e).replace(od,"\n").replace(sd,"")}function cd(e,t){return t=ld(t),ld(e)===t}function ud(e,t,r,n,a,i){switch(r){case"children":"string"===typeof n?"body"===t||"textarea"===t&&""===n||St(e,n):("number"===typeof n||"bigint"===typeof n)&&"body"!==t&&St(e,""+n);break;case"className":ct(e,"class",n);break;case"tabIndex":ct(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":ct(e,r,n);break;case"style":_t(e,n,i);break;case"data":if("object"!==t){ct(e,"data",n);break}case"src":case"href":if(""===n&&("a"!==t||"href"!==r)){e.removeAttribute(r);break}if(null==n||"function"===typeof n||"symbol"===typeof n||"boolean"===typeof n){e.removeAttribute(r);break}n=Ot(""+n),e.setAttribute(r,n);break;case"action":case"formAction":if("function"===typeof n){e.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof i&&("formAction"===r?("input"!==t&&ud(e,t,"name",a.name,a,null),ud(e,t,"formEncType",a.formEncType,a,null),ud(e,t,"formMethod",a.formMethod,a,null),ud(e,t,"formTarget",a.formTarget,a,null)):(ud(e,t,"encType",a.encType,a,null),ud(e,t,"method",a.method,a,null),ud(e,t,"target",a.target,a,null))),null==n||"symbol"===typeof n||"boolean"===typeof n){e.removeAttribute(r);break}n=Ot(""+n),e.setAttribute(r,n);break;case"onClick":null!=n&&(e.onclick=Pt);break;case"onScroll":null!=n&&$u("scroll",e);break;case"onScrollEnd":null!=n&&$u("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=n){if("object"!==typeof n||!("__html"in n))throw Error(o(61));if(null!=(r=n.__html)){if(null!=a.children)throw Error(o(60));e.innerHTML=r}}break;case"multiple":e.multiple=n&&"function"!==typeof n&&"symbol"!==typeof n;break;case"muted":e.muted=n&&"function"!==typeof n&&"symbol"!==typeof n;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==n||"function"===typeof n||"boolean"===typeof n||"symbol"===typeof n){e.removeAttribute("xlink:href");break}r=Ot(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=n&&"function"!==typeof n&&"symbol"!==typeof n?e.setAttribute(r,""+n):e.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&"function"!==typeof n&&"symbol"!==typeof n?e.setAttribute(r,""):e.removeAttribute(r);break;case"capture":case"download":!0===n?e.setAttribute(r,""):!1!==n&&null!=n&&"function"!==typeof n&&"symbol"!==typeof n?e.setAttribute(r,n):e.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":null!=n&&"function"!==typeof n&&"symbol"!==typeof n&&!isNaN(n)&&1<=n?e.setAttribute(r,n):e.removeAttribute(r);break;case"rowSpan":case"start":null==n||"function"===typeof n||"symbol"===typeof n||isNaN(n)?e.removeAttribute(r):e.setAttribute(r,n);break;case"popover":$u("beforetoggle",e),$u("toggle",e),lt(e,"popover",n);break;case"xlinkActuate":ut(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":ut(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":ut(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":ut(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":ut(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":ut(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":ut(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":ut(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":ut(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":lt(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<r.length)||"o"!==r[0]&&"O"!==r[0]||"n"!==r[1]&&"N"!==r[1])&&lt(e,r=Tt.get(r)||r,n)}}function dd(e,t,r,n,a,i){switch(r){case"style":_t(e,n,i);break;case"dangerouslySetInnerHTML":if(null!=n){if("object"!==typeof n||!("__html"in n))throw Error(o(61));if(null!=(r=n.__html)){if(null!=a.children)throw Error(o(60));e.innerHTML=r}}break;case"children":"string"===typeof n?St(e,n):("number"===typeof n||"bigint"===typeof n)&&St(e,""+n);break;case"onScroll":null!=n&&$u("scroll",e);break;case"onScrollEnd":null!=n&&$u("scrollend",e);break;case"onClick":null!=n&&(e.onclick=Pt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:rt.hasOwnProperty(r)||("o"!==r[0]||"n"!==r[1]||(a=r.endsWith("Capture"),t=r.slice(2,a?r.length-7:void 0),"function"===typeof(i=null!=(i=e[Ue]||null)?i[r]:null)&&e.removeEventListener(t,i,a),"function"!==typeof n)?r in e?e[r]=n:!0===n?e.setAttribute(r,""):lt(e,r,n):("function"!==typeof i&&null!==i&&(r in e?e[r]=null:e.hasAttribute(r)&&e.removeAttribute(r)),e.addEventListener(t,n,a)))}}function hd(e,t,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":$u("error",e),$u("load",e);var n,a=!1,i=!1;for(n in r)if(r.hasOwnProperty(n)){var s=r[n];if(null!=s)switch(n){case"src":a=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:ud(e,t,n,s,r,null)}}return i&&ud(e,t,"srcSet",r.srcSet,r,null),void(a&&ud(e,t,"src",r.src,r,null));case"input":$u("invalid",e);var l=n=s=i=null,c=null,u=null;for(a in r)if(r.hasOwnProperty(a)){var d=r[a];if(null!=d)switch(a){case"name":i=d;break;case"type":s=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":n=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(o(137,t));break;default:ud(e,t,a,d,r,null)}}return void bt(e,n,l,c,u,s,i,!1);case"select":for(i in $u("invalid",e),a=s=n=null,r)if(r.hasOwnProperty(i)&&null!=(l=r[i]))switch(i){case"value":n=l;break;case"defaultValue":s=l;break;case"multiple":a=l;default:ud(e,t,i,l,r,null)}return t=n,r=s,e.multiple=!!a,void(null!=t?wt(e,!!a,t,!1):null!=r&&wt(e,!!a,r,!0));case"textarea":for(s in $u("invalid",e),n=i=a=null,r)if(r.hasOwnProperty(s)&&null!=(l=r[s]))switch(s){case"value":a=l;break;case"defaultValue":i=l;break;case"children":n=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(o(91));break;default:ud(e,t,s,l,r,null)}return void jt(e,a,i,n);case"option":for(c in r)if(r.hasOwnProperty(c)&&null!=(a=r[c]))if("selected"===c)e.selected=a&&"function"!==typeof a&&"symbol"!==typeof a;else ud(e,t,c,a,r,null);return;case"dialog":$u("beforetoggle",e),$u("toggle",e),$u("cancel",e),$u("close",e);break;case"iframe":case"object":$u("load",e);break;case"video":case"audio":for(a=0;a<Gu.length;a++)$u(Gu[a],e);break;case"image":$u("error",e),$u("load",e);break;case"details":$u("toggle",e);break;case"embed":case"source":case"link":$u("error",e),$u("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in r)if(r.hasOwnProperty(u)&&null!=(a=r[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:ud(e,t,u,a,r,null)}return;default:if(At(t)){for(d in r)r.hasOwnProperty(d)&&(void 0!==(a=r[d])&&dd(e,t,d,a,r,void 0));return}}for(l in r)r.hasOwnProperty(l)&&(null!=(a=r[l])&&ud(e,t,l,a,r,null))}function md(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}var pd=null,fd=null;function gd(e){return 9===e.nodeType?e:e.ownerDocument}function vd(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function yd(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function bd(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var xd=null;var wd="function"===typeof setTimeout?setTimeout:void 0,kd="function"===typeof clearTimeout?clearTimeout:void 0,jd="function"===typeof Promise?Promise:void 0,Sd="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof jd?function(e){return jd.resolve(null).then(e).catch(Cd)}:wd;function Cd(e){setTimeout(function(){throw e})}function Nd(e){return"head"===e}function _d(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&8===a.nodeType)if("/$"===(r=a.data)||"/&"===r){if(0===n)return e.removeChild(a),void Wh(t);n--}else if("$"===r||"$?"===r||"$~"===r||"$!"===r||"&"===r)n++;else if("html"===r)zd(e.ownerDocument.documentElement);else if("head"===r){zd(r=e.ownerDocument.head);for(var i=r.firstChild;i;){var o=i.nextSibling,s=i.nodeName;i[Qe]||"SCRIPT"===s||"STYLE"===s||"LINK"===s&&"stylesheet"===i.rel.toLowerCase()||r.removeChild(i),i=o}}else"body"===r&&zd(e.ownerDocument.body);r=a}while(r);Wh(t)}function Ad(e,t){var r=e;e=0;do{var n=r.nextSibling;if(1===r.nodeType?t?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",""===r.getAttribute("style")&&r.removeAttribute("style")):3===r.nodeType&&(t?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),n&&8===n.nodeType)if("/$"===(r=n.data)){if(0===e)break;e--}else"$"!==r&&"$?"!==r&&"$~"!==r&&"$!"!==r||e++;r=n}while(r)}function Td(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var r=t;switch(t=t.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":Td(r),Ye(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===r.rel.toLowerCase())continue}e.removeChild(r)}}function Ed(e,t){for(;8!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!t)return null;if(null===(e=Id(e.nextSibling)))return null}return e}function Od(e){return"$?"===e.data||"$~"===e.data}function Pd(e){return"$!"===e.data||"$?"===e.data&&"loading"!==e.ownerDocument.readyState}function Id(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"$~"===t||"&"===t||"F!"===t||"F"===t)break;if("/$"===t||"/&"===t)return null}}return e}var Md=null;function Rd(e){e=e.nextSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r||"/&"===r){if(0===t)return Id(e.nextSibling);t--}else"$"!==r&&"$!"!==r&&"$?"!==r&&"$~"!==r&&"&"!==r||t++}e=e.nextSibling}return null}function Dd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r||"$~"===r||"&"===r){if(0===t)return e;t--}else"/$"!==r&&"/&"!==r||t++}e=e.previousSibling}return null}function Ld(e,t,r){switch(t=gd(r),e){case"html":if(!(e=t.documentElement))throw Error(o(452));return e;case"head":if(!(e=t.head))throw Error(o(453));return e;case"body":if(!(e=t.body))throw Error(o(454));return e;default:throw Error(o(451))}}function zd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ye(e)}var qd=new Map,Bd=new Set;function Fd(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Ud=R.d;R.d={f:function(){var e=Ud.f(),t=Zc();return e||t},r:function(e){var t=Je(e);null!==t&&5===t.tag&&"form"===t.type?ns(t):Ud.r(e)},D:function(e){Ud.D(e),Wd("dns-prefetch",e,null)},C:function(e,t){Ud.C(e,t),Wd("preconnect",e,t)},L:function(e,t,r){Ud.L(e,t,r);var n=Hd;if(n&&e&&t){var a='link[rel="preload"][as="'+vt(t)+'"]';"image"===t&&r&&r.imageSrcSet?(a+='[imagesrcset="'+vt(r.imageSrcSet)+'"]',"string"===typeof r.imageSizes&&(a+='[imagesizes="'+vt(r.imageSizes)+'"]')):a+='[href="'+vt(e)+'"]';var i=a;switch(t){case"style":i=Vd(e);break;case"script":i=Yd(e)}qd.has(i)||(e=m({rel:"preload",href:"image"===t&&r&&r.imageSrcSet?void 0:e,as:t},r),qd.set(i,e),null!==n.querySelector(a)||"style"===t&&n.querySelector(Gd(i))||"script"===t&&n.querySelector($d(i))||(hd(t=n.createElement("link"),"link",e),et(t),n.head.appendChild(t)))}},m:function(e,t){Ud.m(e,t);var r=Hd;if(r&&e){var n=t&&"string"===typeof t.as?t.as:"script",a='link[rel="modulepreload"][as="'+vt(n)+'"][href="'+vt(e)+'"]',i=a;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=Yd(e)}if(!qd.has(i)&&(e=m({rel:"modulepreload",href:e},t),qd.set(i,e),null===r.querySelector(a))){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector($d(i)))return}hd(n=r.createElement("link"),"link",e),et(n),r.head.appendChild(n)}}},X:function(e,t){Ud.X(e,t);var r=Hd;if(r&&e){var n=Ze(r).hoistableScripts,a=Yd(e),i=n.get(a);i||((i=r.querySelector($d(a)))||(e=m({src:e,async:!0},t),(t=qd.get(a))&&eh(e,t),et(i=r.createElement("script")),hd(i,"link",e),r.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},n.set(a,i))}},S:function(e,t,r){Ud.S(e,t,r);var n=Hd;if(n&&e){var a=Ze(n).hoistableStyles,i=Vd(e);t=t||"default";var o=a.get(i);if(!o){var s={loading:0,preload:null};if(o=n.querySelector(Gd(i)))s.loading=5;else{e=m({rel:"stylesheet",href:e,"data-precedence":t},r),(r=qd.get(i))&&Zd(e,r);var l=o=n.createElement("link");et(l),hd(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){s.loading|=1}),l.addEventListener("error",function(){s.loading|=2}),s.loading|=4,Xd(o,t,n)}o={type:"stylesheet",instance:o,count:1,state:s},a.set(i,o)}}},M:function(e,t){Ud.M(e,t);var r=Hd;if(r&&e){var n=Ze(r).hoistableScripts,a=Yd(e),i=n.get(a);i||((i=r.querySelector($d(a)))||(e=m({src:e,async:!0,type:"module"},t),(t=qd.get(a))&&eh(e,t),et(i=r.createElement("script")),hd(i,"link",e),r.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},n.set(a,i))}}};var Hd="undefined"===typeof document?null:document;function Wd(e,t,r){var n=Hd;if(n&&"string"===typeof t&&t){var a=vt(t);a='link[rel="'+e+'"][href="'+a+'"]',"string"===typeof r&&(a+='[crossorigin="'+r+'"]'),Bd.has(a)||(Bd.add(a),e={rel:e,crossOrigin:r,href:t},null===n.querySelector(a)&&(hd(t=n.createElement("link"),"link",e),et(t),n.head.appendChild(t)))}}function Kd(e,t,r,n){var a,i,s,l,c=(c=V.current)?Fd(c):null;if(!c)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof r.precedence&&"string"===typeof r.href?(t=Vd(r.href),(n=(r=Ze(c).hoistableStyles).get(t))||(n={type:"style",instance:null,count:0,state:null},r.set(t,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===r.rel&&"string"===typeof r.href&&"string"===typeof r.precedence){e=Vd(r.href);var u=Ze(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(Gd(e)))&&!u._p&&(d.instance=u,d.state.loading=5),qd.has(e)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},qd.set(e,r),u||(a=c,i=e,s=r,l=d.state,a.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=a.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),hd(i,"link",s),et(i),a.head.appendChild(i))))),t&&null===n)throw Error(o(528,""));return d}if(t&&null!==n)throw Error(o(529,""));return null;case"script":return t=r.async,"string"===typeof(r=r.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Yd(r),(n=(r=Ze(c).hoistableScripts).get(t))||(n={type:"script",instance:null,count:0,state:null},r.set(t,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Vd(e){return'href="'+vt(e)+'"'}function Gd(e){return'link[rel="stylesheet"]['+e+"]"}function Qd(e){return m({},e,{"data-precedence":e.precedence,precedence:null})}function Yd(e){return'[src="'+vt(e)+'"]'}function $d(e){return"script[async]"+e}function Jd(e,t,r){if(t.count++,null===t.instance)switch(t.type){case"style":var n=e.querySelector('style[data-href~="'+vt(r.href)+'"]');if(n)return t.instance=n,et(n),n;var a=m({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return et(n=(e.ownerDocument||e).createElement("style")),hd(n,"style",a),Xd(n,r.precedence,e),t.instance=n;case"stylesheet":a=Vd(r.href);var i=e.querySelector(Gd(a));if(i)return t.state.loading|=4,t.instance=i,et(i),i;n=Qd(r),(a=qd.get(a))&&Zd(n,a),et(i=(e.ownerDocument||e).createElement("link"));var s=i;return s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),hd(i,"link",n),t.state.loading|=4,Xd(i,r.precedence,e),t.instance=i;case"script":return i=Yd(r.src),(a=e.querySelector($d(i)))?(t.instance=a,et(a),a):(n=r,(a=qd.get(i))&&eh(n=m({},r),a),et(a=(e=e.ownerDocument||e).createElement("script")),hd(a,"link",n),e.head.appendChild(a),t.instance=a);case"void":return null;default:throw Error(o(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(n=t.instance,t.state.loading|=4,Xd(n,r.precedence,e));return t.instance}function Xd(e,t,r){for(var n=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),a=n.length?n[n.length-1]:null,i=a,o=0;o<n.length;o++){var s=n[o];if(s.dataset.precedence===t)i=s;else if(i!==a)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=9===r.nodeType?r.head:r).insertBefore(e,t.firstChild)}function Zd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function eh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var th=null;function rh(e,t,r){if(null===th){var n=new Map,a=th=new Map;a.set(r,n)}else(n=(a=th).get(r))||(n=new Map,a.set(r,n));if(n.has(e))return n;for(n.set(e,null),r=r.getElementsByTagName(e),a=0;a<r.length;a++){var i=r[a];if(!(i[Qe]||i[Fe]||"link"===e&&"stylesheet"===i.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==i.namespaceURI){var o=i.getAttribute(t)||"";o=e+o;var s=n.get(o);s?s.push(i):n.set(o,[i])}}return n}function nh(e,t,r){(e=e.ownerDocument||e).head.insertBefore(r,"title"===t?e.querySelector("head > title"):null)}function ah(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var ih=0;function oh(){if(this.count--,0===this.count&&(0===this.imgCount||!this.waitingForImages))if(this.stylesheets)lh(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var sh=null;function lh(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,sh=new Map,t.forEach(ch,e),sh=null,oh.call(e))}function ch(e,t){if(!(4&t.state.loading)){var r=sh.get(e);if(r)var n=r.get(null);else{r=new Map,sh.set(e,r);for(var a=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<a.length;i++){var o=a[i];"LINK"!==o.nodeName&&"not all"===o.getAttribute("media")||(r.set(o.dataset.precedence,o),n=o)}n&&r.set(null,n)}o=(a=t.instance).getAttribute("data-precedence"),(i=r.get(o)||n)===n&&r.set(null,a),r.set(o,a),this.count++,n=oh.bind(this),a.addEventListener("load",n),a.addEventListener("error",n),i?i.parentNode.insertBefore(a,i.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(a,e.firstChild),t.state.loading|=4}}var uh={$$typeof:w,Provider:null,Consumer:null,_currentValue:D,_currentValue2:D,_threadCount:0};function dh(e,t,r,n,a,i,o,s,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Oe(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Oe(0),this.hiddenUpdates=Oe(null),this.identifierPrefix=n,this.onUncaughtError=a,this.onCaughtError=i,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function hh(e,t,r,n,a,i,o,s,l,c,u,d){return e=new dh(e,t,r,o,l,c,u,d,s),t=1,!0===i&&(t|=24),i=zn(3,null,null,t),e.current=i,i.stateNode=e,(t=qa()).refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:n,isDehydrated:r,cache:t},gi(i),e}function mh(e){return e?e=Dn:Dn}function ph(e,t,r,n,a,i){a=mh(a),null===n.context?n.context=a:n.pendingContext=a,(n=yi(t)).payload={element:r},null!==(i=void 0===i?null:i)&&(n.callback=i),null!==(r=bi(e,n,t))&&(Qc(r,0,t),xi(r,e,t))}function fh(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function gh(e,t){fh(e,t),(e=e.alternate)&&fh(e,t)}function vh(e){if(13===e.tag||31===e.tag){var t=In(e,67108864);null!==t&&Qc(t,0,67108864),gh(e,67108864)}}function yh(e){if(13===e.tag||31===e.tag){var t=Vc(),r=In(e,t=De(t));null!==r&&Qc(r,0,t),gh(e,t)}}var bh=!0;function xh(e,t,r,n){var a=M.T;M.T=null;var i=R.p;try{R.p=2,kh(e,t,r,n)}finally{R.p=i,M.T=a}}function wh(e,t,r,n){var a=M.T;M.T=null;var i=R.p;try{R.p=8,kh(e,t,r,n)}finally{R.p=i,M.T=a}}function kh(e,t,r,n){if(bh){var a=jh(n);if(null===a)td(e,t,n,Sh,r),Rh(e,n);else if(function(e,t,r,n,a){switch(t){case"focusin":return Ah=Dh(Ah,e,t,r,n,a),!0;case"dragenter":return Th=Dh(Th,e,t,r,n,a),!0;case"mouseover":return Eh=Dh(Eh,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return Oh.set(i,Dh(Oh.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,Ph.set(i,Dh(Ph.get(i)||null,e,t,r,n,a)),!0}return!1}(a,e,t,r,n))n.stopPropagation();else if(Rh(e,n),4&t&&-1<Mh.indexOf(e)){for(;null!==a;){var i=Je(a);if(null!==i)switch(i.tag){case 3:if((i=i.stateNode).current.memoizedState.isDehydrated){var o=Ne(i.pendingLanes);if(0!==o){var s=i;for(s.pendingLanes|=2,s.entangledLanes|=2;o;){var l=1<<31-xe(o);s.entanglements[1]|=l,o&=~l}Ru(i),0===(6&mc)&&(Mc=le()+500,Du(0,!1))}}break;case 31:case 13:null!==(s=In(i,2))&&Qc(s,0,2),Zc(),gh(i,2)}if(null===(i=jh(n))&&td(e,t,n,Sh,r),i===a)break;a=i}null!==a&&n.stopPropagation()}else td(e,t,n,null,r)}}function jh(e){return Ch(e=Mt(e))}var Sh=null;function Ch(e){if(Sh=null,null!==(e=$e(e))){var t=l(e);if(null===t)e=null;else{var r=t.tag;if(13===r){if(null!==(e=c(t)))return e;e=null}else if(31===r){if(null!==(e=u(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Sh=e,null}function Nh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ce()){case ue:return 2;case de:return 8;case he:case me:return 32;case pe:return 268435456;default:return 32}default:return 32}}var _h=!1,Ah=null,Th=null,Eh=null,Oh=new Map,Ph=new Map,Ih=[],Mh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Rh(e,t){switch(e){case"focusin":case"focusout":Ah=null;break;case"dragenter":case"dragleave":Th=null;break;case"mouseover":case"mouseout":Eh=null;break;case"pointerover":case"pointerout":Oh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ph.delete(t.pointerId)}}function Dh(e,t,r,n,a,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},null!==t&&(null!==(t=Je(t))&&vh(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Lh(e){var t=$e(e.target);if(null!==t){var r=l(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=c(r)))return e.blockedOn=t,void qe(e.priority,function(){yh(r)})}else if(31===t){if(null!==(t=u(r)))return e.blockedOn=t,void qe(e.priority,function(){yh(r)})}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function zh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=jh(e.nativeEvent);if(null!==r)return null!==(t=Je(r))&&vh(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);It=n,r.target.dispatchEvent(n),It=null,t.shift()}return!0}function qh(e,t,r){zh(e)&&r.delete(t)}function Bh(){_h=!1,null!==Ah&&zh(Ah)&&(Ah=null),null!==Th&&zh(Th)&&(Th=null),null!==Eh&&zh(Eh)&&(Eh=null),Oh.forEach(qh),Ph.forEach(qh)}function Fh(e,t){e.blockedOn===t&&(e.blockedOn=null,_h||(_h=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Bh)))}var Uh=null;function Hh(e){Uh!==e&&(Uh=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Uh===e&&(Uh=null);for(var t=0;t<e.length;t+=3){var r=e[t],n=e[t+1],a=e[t+2];if("function"!==typeof n){if(null===Ch(n||r))continue;break}var i=Je(r);null!==i&&(e.splice(t,3),t-=3,ts(i,{pending:!0,data:a,method:r.method,action:n},n,a))}}))}function Wh(e){function t(t){return Fh(t,e)}null!==Ah&&Fh(Ah,e),null!==Th&&Fh(Th,e),null!==Eh&&Fh(Eh,e),Oh.forEach(t),Ph.forEach(t);for(var r=0;r<Ih.length;r++){var n=Ih[r];n.blockedOn===e&&(n.blockedOn=null)}for(;0<Ih.length&&null===(r=Ih[0]).blockedOn;)Lh(r),null===r.blockedOn&&Ih.shift();if(null!=(r=(e.ownerDocument||e).$$reactFormReplay))for(n=0;n<r.length;n+=3){var a=r[n],i=r[n+1],o=a[Ue]||null;if("function"===typeof i)o||Hh(r);else if(o){var s=null;if(i&&i.hasAttribute("formAction")){if(a=i,o=i[Ue]||null)s=o.formAction;else if(null!==Ch(a))continue}else s=o.action;"function"===typeof s?r[n+1]=s:(r.splice(n,3),n-=3),Hh(r)}}}function Kh(){function e(e){e.canIntercept&&"react-transition"===e.info&&e.intercept({handler:function(){return new Promise(function(e){return a=e})},focusReset:"manual",scroll:"manual"})}function t(){null!==a&&(a(),a=null),n||setTimeout(r,20)}function r(){if(!n&&!navigation.transition){var e=navigation.currentEntry;e&&null!=e.url&&navigation.navigate(e.url,{state:e.getState(),info:"react-transition",history:"replace"})}}if("object"===typeof navigation){var n=!1,a=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(r,100),function(){n=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),null!==a&&(a(),a=null)}}}function Vh(e){this._internalRoot=e}function Gh(e){this._internalRoot=e}Gh.prototype.render=Vh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));ph(t.current,Vc(),e,t,null,null)},Gh.prototype.unmount=Vh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;ph(e.current,2,null,e,null,null),Zc(),t[He]=null}},Gh.prototype.unstable_scheduleHydration=function(e){if(e){var t=ze();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Ih.length&&0!==t&&t<Ih[r].priority;r++);Ih.splice(r,0,e),0===r&&Lh(e)}};var Qh=a.version;if("19.2.4"!==Qh)throw Error(o(527,Qh,"19.2.4"));R.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(o(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(n=a.return)){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return d(a),e;if(i===n)return d(a),t;i=i.sibling}throw Error(o(188))}if(r.return!==n.return)r=a,n=i;else{for(var s=!1,c=a.child;c;){if(c===r){s=!0,r=a,n=i;break}if(c===n){s=!0,n=a,r=i;break}c=c.sibling}if(!s){for(c=i.child;c;){if(c===r){s=!0,r=i,n=a;break}if(c===n){s=!0,n=i,r=a;break}c=c.sibling}if(!s)throw Error(o(189))}}if(r.alternate!==n)throw Error(o(190))}if(3!==r.tag)throw Error(o(188));return r.stateNode.current===r?e:t}(t),e=null===(e=null!==e?h(e):null)?null:e.stateNode};var Yh={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.2.4"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var $h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$h.isDisabled&&$h.supportsFiber)try{ve=$h.inject(Yh),ye=$h}catch(Xh){}}t.createRoot=function(e,t){if(!s(e))throw Error(o(299));var r=!1,n="",a=Ss,i=Cs,l=Ns;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onUncaughtError&&(a=t.onUncaughtError),void 0!==t.onCaughtError&&(i=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError)),t=hh(e,1,!1,null,0,r,n,null,a,i,l,Kh),e[He]=t.current,Zu(e),new Vh(t)},t.hydrateRoot=function(e,t,r){if(!s(e))throw Error(o(299));var n=!1,a="",i=Ss,l=Cs,c=Ns,u=null;return null!==r&&void 0!==r&&(!0===r.unstable_strictMode&&(n=!0),void 0!==r.identifierPrefix&&(a=r.identifierPrefix),void 0!==r.onUncaughtError&&(i=r.onUncaughtError),void 0!==r.onCaughtError&&(l=r.onCaughtError),void 0!==r.onRecoverableError&&(c=r.onRecoverableError),void 0!==r.formState&&(u=r.formState)),(t=hh(e,1,!0,t,0,n,a,u,i,l,c,Kh)).context=mh(null),r=t.current,(a=yi(n=De(n=Vc()))).callback=null,bi(r,a,n),r=n,t.current.lanes=r,Pe(t,r),Ru(t),e[He]=t.current,Zu(e),new Gh(t)},t.version="19.2.4"},7043(e,t,r){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(2777),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;t.isKey=function(e,t){return!Array.isArray(e)&&(!("number"!==typeof e&&"boolean"!==typeof e&&null!=e&&!n.isSymbol(e))||("string"===typeof e&&(i.test(e)||!a.test(e))||null!=t&&Object.hasOwn(t,e)))}},7231(e,t,r){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(3799),a=r(4879);t.range=function(e,t,r){r&&"number"!==typeof r&&n.isIterateeCall(e,t,r)&&(t=r=void 0),e=a.toFinite(e),void 0===t?(t=e,e=0):t=a.toFinite(t),r=void 0===r?e<t?1:-1:a.toFinite(r);const i=Math.max(Math.ceil((t-e)/(r||1)),0),o=new Array(i);for(let n=0;n<i;n++)o[n]=e,e+=r;return o}},7237(e,t,r){"use strict";r(8365)},7260(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isUnsafeProperty=function(e){return"__proto__"===e}},7283(e){"use strict";var t=Object.prototype.hasOwnProperty,r="~";function n(){}function a(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function i(e,t,n,i,o){if("function"!==typeof n)throw new TypeError("The listener must be a function");var s=new a(n,i||e,o),l=r?r+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function o(e,t){0===--e._eventsCount?e._events=new n:delete e._events[t]}function s(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),s.prototype.eventNames=function(){var e,n,a=[];if(0===this._eventsCount)return a;for(n in e=this._events)t.call(e,n)&&a.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(e)):a},s.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var a=0,i=n.length,o=new Array(i);a<i;a++)o[a]=n[a].fn;return o},s.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},s.prototype.emit=function(e,t,n,a,i,o){var s=r?r+e:e;if(!this._events[s])return!1;var l,c,u=this._events[s],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,a),!0;case 5:return u.fn.call(u.context,t,n,a,i),!0;case 6:return u.fn.call(u.context,t,n,a,i,o),!0}for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var h,m=u.length;for(c=0;c<m;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,n);break;case 4:u[c].fn.call(u[c].context,t,n,a);break;default:if(!l)for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];u[c].fn.apply(u[c].context,l)}}return!0},s.prototype.on=function(e,t,r){return i(this,e,t,r,!1)},s.prototype.once=function(e,t,r){return i(this,e,t,r,!0)},s.prototype.removeListener=function(e,t,n,a){var i=r?r+e:e;if(!this._events[i])return this;if(!t)return o(this,i),this;var s=this._events[i];if(s.fn)s.fn!==t||a&&!s.once||n&&s.context!==n||o(this,i);else{for(var l=0,c=[],u=s.length;l<u;l++)(s[l].fn!==t||a&&!s[l].once||n&&s[l].context!==n)&&c.push(s[l]);c.length?this._events[i]=1===c.length?c[0]:c:o(this,i)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&o(this,t)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,e.exports=s},7312(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.flatten=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const r=[],n=Math.floor(t),a=(e,t)=>{for(let i=0;i<e.length;i++){const o=e[i];Array.isArray(o)&&t<n?a(o,t+1):r.push(o)}};return a(e,0),r}},7330(e,t,r){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(9323);t.property=function(e){return function(t){return n.get(t,e)}}},7599(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});t.argumentsTag="[object Arguments]",t.arrayBufferTag="[object ArrayBuffer]",t.arrayTag="[object Array]",t.bigInt64ArrayTag="[object BigInt64Array]",t.bigUint64ArrayTag="[object BigUint64Array]",t.booleanTag="[object Boolean]",t.dataViewTag="[object DataView]",t.dateTag="[object Date]",t.errorTag="[object Error]",t.float32ArrayTag="[object Float32Array]",t.float64ArrayTag="[object Float64Array]",t.functionTag="[object Function]",t.int16ArrayTag="[object Int16Array]",t.int32ArrayTag="[object Int32Array]",t.int8ArrayTag="[object Int8Array]",t.mapTag="[object Map]",t.numberTag="[object Number]",t.objectTag="[object Object]",t.regexpTag="[object RegExp]",t.setTag="[object Set]",t.stringTag="[object String]",t.symbolTag="[object Symbol]",t.uint16ArrayTag="[object Uint16Array]",t.uint32ArrayTag="[object Uint32Array]",t.uint8ArrayTag="[object Uint8Array]",t.uint8ClampedArrayTag="[object Uint8ClampedArray]"},7736(e,t,r){var n=r(3738).default,a=r(9045);e.exports=function(e){var t=a(e,"string");return"symbol"==n(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},7770(e,t,r){e.exports=r(9323).get},7820(e,t,r){e.exports=r(5414).throttle},7950(e,t,r){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(6672)},8210(e,t,r){var n;!function(){"use strict";var a,i=1e9,o={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},s=!0,l="[DecimalError] ",c=l+"Invalid argument: ",u=l+"Exponent out of range: ",d=Math.floor,h=Math.pow,m=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,p=1e7,f=9007199254740991,g=d(1286742750677284.5),v={};function y(e,t){var r,n,a,i,o,l,c,u,d=e.constructor,h=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),s?A(t,h):t;if(c=e.d,u=t.d,o=e.e,a=t.e,c=c.slice(),i=o-a){for(i<0?(n=c,i=-i,l=u.length):(n=u,a=o,l=c.length),i>(l=(o=Math.ceil(h/7))>l?o+1:l+1)&&(i=l,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for((l=c.length)-(i=u.length)<0&&(i=l,n=u,u=c,c=n),r=0;i;)r=(c[--i]=c[i]+u[i]+r)/p|0,c[i]%=p;for(r&&(c.unshift(r),++a),l=c.length;0==c[--l];)c.pop();return t.d=c,t.e=a,s?A(t,h):t}function b(e,t,r){if(e!==~~e||e<t||e>r)throw Error(c+e)}function x(e){var t,r,n,a=e.length-1,i="",o=e[0];if(a>0){for(i+=o,t=1;t<a;t++)(r=7-(n=e[t]+"").length)&&(i+=C(r)),i+=n;(r=7-(n=(o=e[t])+"").length)&&(i+=C(r))}else if(0===o)return"0";for(;o%10===0;)o/=10;return i+o}v.absoluteValue=v.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},v.comparedTo=v.cmp=function(e){var t,r,n,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(t=0,r=(n=i.d.length)<(a=e.d.length)?n:a;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1},v.decimalPlaces=v.dp=function(){var e=this,t=e.d.length-1,r=7*(t-e.e);if(t=e.d[t])for(;t%10==0;t/=10)r--;return r<0?0:r},v.dividedBy=v.div=function(e){return w(this,new this.constructor(e))},v.dividedToIntegerBy=v.idiv=function(e){var t=this.constructor;return A(w(this,new t(e),0,1),t.precision)},v.equals=v.eq=function(e){return!this.cmp(e)},v.exponent=function(){return j(this)},v.greaterThan=v.gt=function(e){return this.cmp(e)>0},v.greaterThanOrEqualTo=v.gte=function(e){return this.cmp(e)>=0},v.isInteger=v.isint=function(){return this.e>this.d.length-2},v.isNegative=v.isneg=function(){return this.s<0},v.isPositive=v.ispos=function(){return this.s>0},v.isZero=function(){return 0===this.s},v.lessThan=v.lt=function(e){return this.cmp(e)<0},v.lessThanOrEqualTo=v.lte=function(e){return this.cmp(e)<1},v.logarithm=v.log=function(e){var t,r=this,n=r.constructor,i=n.precision,o=i+5;if(void 0===e)e=new n(10);else if((e=new n(e)).s<1||e.eq(a))throw Error(l+"NaN");if(r.s<1)throw Error(l+(r.s?"NaN":"-Infinity"));return r.eq(a)?new n(0):(s=!1,t=w(N(r,o),N(e,o),o),s=!0,A(t,i))},v.minus=v.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?T(t,e):y(t,(e.s=-e.s,e))},v.modulo=v.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(!(e=new n(e)).s)throw Error(l+"NaN");return r.s?(s=!1,t=w(r,e,0,1).times(e),s=!0,r.minus(t)):A(new n(r),a)},v.naturalExponential=v.exp=function(){return k(this)},v.naturalLogarithm=v.ln=function(){return N(this)},v.negated=v.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},v.plus=v.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?y(t,e):T(t,(e.s=-e.s,e))},v.precision=v.sd=function(e){var t,r,n,a=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(c+e);if(t=j(a)+1,r=7*(n=a.d.length-1)+1,n=a.d[n]){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r},v.squareRoot=v.sqrt=function(){var e,t,r,n,a,i,o,c=this,u=c.constructor;if(c.s<1){if(!c.s)return new u(0);throw Error(l+"NaN")}for(e=j(c),s=!1,0==(a=Math.sqrt(+c))||a==1/0?(((t=x(c.d)).length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=d((e+1)/2)-(e<0||e%2),n=new u(t=a==1/0?"5e"+e:(t=a.toExponential()).slice(0,t.indexOf("e")+1)+e)):n=new u(a.toString()),a=o=(r=u.precision)+3;;)if(n=(i=n).plus(w(c,i,o+2)).times(.5),x(i.d).slice(0,o)===(t=x(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&"4999"==t){if(A(i,r+1,0),i.times(i).eq(c)){n=i;break}}else if("9999"!=t)break;o+=4}return s=!0,A(n,r)},v.times=v.mul=function(e){var t,r,n,a,i,o,l,c,u,d=this,h=d.constructor,m=d.d,f=(e=new h(e)).d;if(!d.s||!e.s)return new h(0);for(e.s*=d.s,r=d.e+e.e,(c=m.length)<(u=f.length)&&(i=m,m=f,f=i,o=c,c=u,u=o),i=[],n=o=c+u;n--;)i.push(0);for(n=u;--n>=0;){for(t=0,a=c+n;a>n;)l=i[a]+f[n]*m[a-n-1]+t,i[a--]=l%p|0,t=l/p|0;i[a]=(i[a]+t)%p|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,s?A(e,h.precision):e},v.toDecimalPlaces=v.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),void 0===e?r:(b(e,0,i),void 0===t?t=n.rounding:b(t,0,8),A(r,e+j(r)+1,t))},v.toExponential=function(e,t){var r,n=this,a=n.constructor;return void 0===e?r=E(n,!0):(b(e,0,i),void 0===t?t=a.rounding:b(t,0,8),r=E(n=A(new a(n),e+1,t),!0,e+1)),r},v.toFixed=function(e,t){var r,n,a=this,o=a.constructor;return void 0===e?E(a):(b(e,0,i),void 0===t?t=o.rounding:b(t,0,8),r=E((n=A(new o(a),e+j(a)+1,t)).abs(),!1,e+j(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)},v.toInteger=v.toint=function(){var e=this,t=e.constructor;return A(new t(e),j(e)+1,t.rounding)},v.toNumber=function(){return+this},v.toPower=v.pow=function(e){var t,r,n,i,o,c,u=this,h=u.constructor,m=+(e=new h(e));if(!e.s)return new h(a);if(!(u=new h(u)).s){if(e.s<1)throw Error(l+"Infinity");return u}if(u.eq(a))return u;if(n=h.precision,e.eq(a))return A(u,n);if(c=(t=e.e)>=(r=e.d.length-1),o=u.s,c){if((r=m<0?-m:m)<=f){for(i=new h(a),t=Math.ceil(n/7+4),s=!1;r%2&&O((i=i.times(u)).d,t),0!==(r=d(r/2));)O((u=u.times(u)).d,t);return s=!0,e.s<0?new h(a).div(i):A(i,n)}}else if(o<0)throw Error(l+"NaN");return o=o<0&&1&e.d[Math.max(t,r)]?-1:1,u.s=1,s=!1,i=e.times(N(u,n+12)),s=!0,(i=k(i)).s=o,i},v.toPrecision=function(e,t){var r,n,a=this,o=a.constructor;return void 0===e?n=E(a,(r=j(a))<=o.toExpNeg||r>=o.toExpPos):(b(e,1,i),void 0===t?t=o.rounding:b(t,0,8),n=E(a=A(new o(a),e,t),e<=(r=j(a))||r<=o.toExpNeg,e)),n},v.toSignificantDigits=v.tosd=function(e,t){var r=this.constructor;return void 0===e?(e=r.precision,t=r.rounding):(b(e,1,i),void 0===t?t=r.rounding:b(t,0,8)),A(new r(this),e,t)},v.toString=v.valueOf=v.val=v.toJSON=function(){var e=this,t=j(e),r=e.constructor;return E(e,t<=r.toExpNeg||t>=r.toExpPos)};var w=function(){function e(e,t){var r,n=0,a=e.length;for(e=e.slice();a--;)r=e[a]*t+n,e[a]=r%p|0,n=r/p|0;return n&&e.unshift(n),e}function t(e,t,r,n){var a,i;if(r!=n)i=r>n?1:-1;else for(a=i=0;a<r;a++)if(e[a]!=t[a]){i=e[a]>t[a]?1:-1;break}return i}function r(e,t,r){for(var n=0;r--;)e[r]-=n,n=e[r]<t[r]?1:0,e[r]=n*p+e[r]-t[r];for(;!e[0]&&e.length>1;)e.shift()}return function(n,a,i,o){var s,c,u,d,h,m,f,g,v,y,b,x,w,k,S,C,N,_,T=n.constructor,E=n.s==a.s?1:-1,O=n.d,P=a.d;if(!n.s)return new T(n);if(!a.s)throw Error(l+"Division by zero");for(c=n.e-a.e,N=P.length,S=O.length,g=(f=new T(E)).d=[],u=0;P[u]==(O[u]||0);)++u;if(P[u]>(O[u]||0)&&--c,(x=null==i?i=T.precision:o?i+(j(n)-j(a))+1:i)<0)return new T(0);if(x=x/7+2|0,u=0,1==N)for(d=0,P=P[0],x++;(u<S||d)&&x--;u++)w=d*p+(O[u]||0),g[u]=w/P|0,d=w%P|0;else{for((d=p/(P[0]+1)|0)>1&&(P=e(P,d),O=e(O,d),N=P.length,S=O.length),k=N,y=(v=O.slice(0,N)).length;y<N;)v[y++]=0;(_=P.slice()).unshift(0),C=P[0],P[1]>=p/2&&++C;do{d=0,(s=t(P,v,N,y))<0?(b=v[0],N!=y&&(b=b*p+(v[1]||0)),(d=b/C|0)>1?(d>=p&&(d=p-1),1==(s=t(h=e(P,d),v,m=h.length,y=v.length))&&(d--,r(h,N<m?_:P,m))):(0==d&&(s=d=1),h=P.slice()),(m=h.length)<y&&h.unshift(0),r(v,h,y),-1==s&&(s=t(P,v,N,y=v.length))<1&&(d++,r(v,N<y?_:P,y)),y=v.length):0===s&&(d++,v=[0]),g[u++]=d,s&&v[0]?v[y++]=O[k]||0:(v=[O[k]],y=1)}while((k++<S||void 0!==v[0])&&x--)}return g[0]||g.shift(),f.e=c,A(f,o?i+j(f)+1:i)}}();function k(e,t){var r,n,i,o,l,c=0,d=0,m=e.constructor,p=m.precision;if(j(e)>16)throw Error(u+j(e));if(!e.s)return new m(a);for(null==t?(s=!1,l=p):l=t,o=new m(.03125);e.abs().gte(.1);)e=e.times(o),d+=5;for(l+=Math.log(h(2,d))/Math.LN10*2+5|0,r=n=i=new m(a),m.precision=l;;){if(n=A(n.times(e),l),r=r.times(++c),x((o=i.plus(w(n,r,l))).d).slice(0,l)===x(i.d).slice(0,l)){for(;d--;)i=A(i.times(i),l);return m.precision=p,null==t?(s=!0,A(i,p)):i}i=o}}function j(e){for(var t=7*e.e,r=e.d[0];r>=10;r/=10)t++;return t}function S(e,t,r){if(t>e.LN10.sd())throw s=!0,r&&(e.precision=r),Error(l+"LN10 precision limit exceeded");return A(new e(e.LN10),t)}function C(e){for(var t="";e--;)t+="0";return t}function N(e,t){var r,n,i,o,c,u,d,h,m,p=1,f=e,g=f.d,v=f.constructor,y=v.precision;if(f.s<1)throw Error(l+(f.s?"NaN":"-Infinity"));if(f.eq(a))return new v(0);if(null==t?(s=!1,h=y):h=t,f.eq(10))return null==t&&(s=!0),S(v,h);if(h+=10,v.precision=h,n=(r=x(g)).charAt(0),o=j(f),!(Math.abs(o)<15e14))return d=S(v,h+2,y).times(o+""),f=N(new v(n+"."+r.slice(1)),h-10).plus(d),v.precision=y,null==t?(s=!0,A(f,y)):f;for(;n<7&&1!=n||1==n&&r.charAt(1)>3;)n=(r=x((f=f.times(e)).d)).charAt(0),p++;for(o=j(f),n>1?(f=new v("0."+r),o++):f=new v(n+"."+r.slice(1)),u=c=f=w(f.minus(a),f.plus(a),h),m=A(f.times(f),h),i=3;;){if(c=A(c.times(m),h),x((d=u.plus(w(c,new v(i),h))).d).slice(0,h)===x(u.d).slice(0,h))return u=u.times(2),0!==o&&(u=u.plus(S(v,h+2,y).times(o+""))),u=w(u,new v(p),h),v.precision=y,null==t?(s=!0,A(u,y)):u;u=d,i+=2}}function _(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;48===t.charCodeAt(n);)++n;for(a=t.length;48===t.charCodeAt(a-1);)--a;if(t=t.slice(n,a)){if(a-=n,r=r-n-1,e.e=d(r/7),e.d=[],n=(r+1)%7,r<0&&(n+=7),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=7;n<a;)e.d.push(+t.slice(n,n+=7));n=7-(t=t.slice(n)).length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),s&&(e.e>g||e.e<-g))throw Error(u+r)}else e.s=0,e.e=0,e.d=[0];return e}function A(e,t,r){var n,a,i,o,l,c,m,f,v=e.d;for(o=1,i=v[0];i>=10;i/=10)o++;if((n=t-o)<0)n+=7,a=t,m=v[f=0];else{if((f=Math.ceil((n+1)/7))>=(i=v.length))return e;for(m=i=v[f],o=1;i>=10;i/=10)o++;a=(n%=7)-7+o}if(void 0!==r&&(l=m/(i=h(10,o-a-1))%10|0,c=t<0||void 0!==v[f+1]||m%i,c=r<4?(l||c)&&(0==r||r==(e.s<0?3:2)):l>5||5==l&&(4==r||c||6==r&&(n>0?a>0?m/h(10,o-a):0:v[f-1])%10&1||r==(e.s<0?8:7))),t<1||!v[0])return c?(i=j(e),v.length=1,t=t-i-1,v[0]=h(10,(7-t%7)%7),e.e=d(-t/7)||0):(v.length=1,v[0]=e.e=e.s=0),e;if(0==n?(v.length=f,i=1,f--):(v.length=f+1,i=h(10,7-n),v[f]=a>0?(m/h(10,o-a)%h(10,a)|0)*i:0),c)for(;;){if(0==f){(v[0]+=i)==p&&(v[0]=1,++e.e);break}if(v[f]+=i,v[f]!=p)break;v[f--]=0,i=1}for(n=v.length;0===v[--n];)v.pop();if(s&&(e.e>g||e.e<-g))throw Error(u+j(e));return e}function T(e,t){var r,n,a,i,o,l,c,u,d,h,m=e.constructor,f=m.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new m(e),s?A(t,f):t;if(c=e.d,h=t.d,n=t.e,u=e.e,c=c.slice(),o=u-n){for((d=o<0)?(r=c,o=-o,l=h.length):(r=h,n=u,l=c.length),o>(a=Math.max(Math.ceil(f/7),l)+2)&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for((d=(a=c.length)<(l=h.length))&&(l=a),a=0;a<l;a++)if(c[a]!=h[a]){d=c[a]<h[a];break}o=0}for(d&&(r=c,c=h,h=r,t.s=-t.s),l=c.length,a=h.length-l;a>0;--a)c[l++]=0;for(a=h.length;a>o;){if(c[--a]<h[a]){for(i=a;i&&0===c[--i];)c[i]=p-1;--c[i],c[a]+=p}c[a]-=h[a]}for(;0===c[--l];)c.pop();for(;0===c[0];c.shift())--n;return c[0]?(t.d=c,t.e=n,s?A(t,f):t):new m(0)}function E(e,t,r){var n,a=j(e),i=x(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+C(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+C(-a-1)+i,r&&(n=r-o)>0&&(i+=C(n))):a>=o?(i+=C(a+1-o),r&&(n=r-a-1)>0&&(i=i+"."+C(n))):((n=a+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(i+="."),i+=C(n))),e.s<0?"-"+i:i}function O(e,t){if(e.length>t)return e.length=t,!0}function P(e){if(!e||"object"!==typeof e)throw Error(l+"Object expected");var t,r,n,a=["precision",1,i,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if(void 0!==(n=e[r=a[t]])){if(!(d(n)===n&&n>=a[t+1]&&n<=a[t+2]))throw Error(c+r+": "+n);this[r]=n}if(void 0!==(n=e[r="LN10"])){if(n!=Math.LN10)throw Error(c+r+": "+n);this[r]=new this(n)}return this}o=function e(t){var r,n,a;function i(e){var t=this;if(!(t instanceof i))return new i(e);if(t.constructor=i,e instanceof i)return t.s=e.s,t.e=e.e,void(t.d=(e=e.d)?e.slice():e);if("number"===typeof e){if(0*e!==0)throw Error(c+e);if(e>0)t.s=1;else{if(!(e<0))return t.s=0,t.e=0,void(t.d=[0]);e=-e,t.s=-1}return e===~~e&&e<1e7?(t.e=0,void(t.d=[e])):_(t,e.toString())}if("string"!==typeof e)throw Error(c+e);if(45===e.charCodeAt(0)?(e=e.slice(1),t.s=-1):t.s=1,!m.test(e))throw Error(c+e);_(t,e)}if(i.prototype=v,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=e,i.config=i.set=P,void 0===t&&(t={}),t)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],r=0;r<a.length;)t.hasOwnProperty(n=a[r++])||(t[n]=this[n]);return i.config(t),i}(o),o.default=o.Decimal=o,a=new o(1),void 0===(n=function(){return o}.call(t,r,t,e))||(e.exports=n)}()},8268(e,t,r){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(2132);t.isMatch=function(e,t){return n.isMatchWith(e,t,()=>{})}},8346(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.toArray=function(e){return Array.isArray(e)?e:Array.from(e)}},8365(e,t,r){"use strict";var n=r(5043);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},i=n.useSyncExternalStore,o=n.useRef,s=n.useEffect,l=n.useMemo,c=n.useDebugValue},8396(e,t,r){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(5508);t.cloneDeep=function(e){return n.cloneDeepWith(e)}},8420(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isLength=function(e){return Number.isSafeInteger(e)&&e>=0}},8443(e,t,r){"use strict";e.exports=r(9717)},8845(e,t,r){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(8268),a=r(3272),i=r(8396),o=r(9323),s=r(5303);t.matchesProperty=function(e,t){switch(typeof e){case"object":var r;Object.is(null===(r=e)||void 0===r?void 0:r.valueOf(),-0)&&(e="-0");break;case"number":e=a.toKey(e)}return t=i.cloneDeep(t),function(r){const a=o.get(r,e);return void 0===a?s.has(r,e):void 0===t?void 0===a:n.isMatch(a,t)}}},8853(e,t,r){"use strict";e.exports=r(5896)},9045(e,t,r){var n=r(3738).default;e.exports=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=n(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},9323(e,t,r){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(7260),a=r(2489),i=r(3272),o=r(1444);t.get=function e(t,r,s){if(null==t)return s;switch(typeof r){case"string":{if(n.isUnsafeProperty(r))return s;const i=t[r];return void 0===i?a.isDeepKey(r)?e(t,o.toPath(r),s):s:i}case"number":case"symbol":{"number"===typeof r&&(r=i.toKey(r));const e=t[r];return void 0===e?s:e}default:{var l;if(Array.isArray(r))return function(e,t,r){if(0===t.length)return r;let a=e;for(let i=0;i<t.length;i++){if(null==a)return r;if(n.isUnsafeProperty(t[i]))return r;a=a[t[i]]}if(void 0===a)return r;return a}(t,r,s);if(r=Object.is(null===(l=r)||void 0===l?void 0:l.valueOf(),-0)?"-0":String(r),n.isUnsafeProperty(r))return s;const e=t[r];return void 0===e?s:e}}}},9397(e,t,r){e.exports=r(2682).isPlainObject},9461(e,t,r){"use strict";e.exports=r(2330)},9599(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.identity=function(e){return e}},9645(e,t,r){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(6392),a=r(8346),i=r(1203);t.last=function(e){if(i.isArrayLike(e))return n.last(a.toArray(e))}},9709(e,t){"use strict";function r(e){return"symbol"===typeof e?1:null===e?2:void 0===e?3:e!==e?4:0}Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});t.compareValues=(e,t,n)=>{if(e!==t){const a=r(e),i=r(t);if(a===i&&0===a){if(e<t)return"desc"===n?1:-1;if(e>t)return"desc"===n?-1:1}return"desc"===n?i-a:a-i}return 0}},9717(e,t,r){"use strict";var n=r(5043),a=r(9461);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=a.useSyncExternalStore,s=n.useRef,l=n.useEffect,c=n.useMemo,u=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var d=s(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;d=c(function(){function e(e){if(!l){if(l=!0,o=e,e=n(e),void 0!==a&&h.hasValue){var t=h.value;if(a(t,e))return s=t}return s=e}if(t=s,i(o,e))return t;var r=n(e);return void 0!==a&&a(t,r)?(o=e,t):(o=e,s=r)}var o,s,l=!1,c=void 0===r?null:r;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,r,n,a]);var m=o(e,d[0],d[1]);return l(function(){h.hasValue=!0,h.value=m},[m]),u(m),m}},9859(e,t,r){e.exports=r(7231).range},9903(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.ary=function(e,t){return function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return e.apply(this,n.slice(0,t))}}},9921(e,t){"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isObjectLike=function(e){return"object"===typeof e&&null!==e}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__webpack_require__),r.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;__webpack_require__.t=function(r,n){if(1&n&&(r=this(r)),8&n)return r;if("object"===typeof r&&r){if(4&n&&r.__esModule)return r;if(16&n&&"function"===typeof r.then)return r}var a=Object.create(null);__webpack_require__.r(a);var i={};e=e||[null,t({}),t([]),t(t)];for(var o=2&n&&r;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>i[e]=()=>r[e]);return i.default=()=>r,__webpack_require__.d(a,i),a}})(),__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{"use strict";var e={};__webpack_require__.r(e),__webpack_require__.d(e,{hasBrowserEnv:()=>zr,hasStandardBrowserEnv:()=>Br,hasStandardBrowserWebWorkerEnv:()=>Fr,navigator:()=>qr,origin:()=>Ur});var t={};__webpack_require__.r(t),__webpack_require__.d(t,{scaleBand:()=>Cg,scaleDiverging:()=>bw,scaleDivergingLog:()=>xw,scaleDivergingPow:()=>kw,scaleDivergingSqrt:()=>jw,scaleDivergingSymlog:()=>ww,scaleIdentity:()=>my,scaleImplicit:()=>jg,scaleLinear:()=>hy,scaleLog:()=>ky,scaleOrdinal:()=>Sg,scalePoint:()=>_g,scalePow:()=>Oy,scaleQuantile:()=>Hy,scaleQuantize:()=>Wy,scaleRadial:()=>My,scaleSequential:()=>hw,scaleSequentialLog:()=>mw,scaleSequentialPow:()=>fw,scaleSequentialQuantile:()=>vw,scaleSequentialSqrt:()=>gw,scaleSequentialSymlog:()=>pw,scaleSqrt:()=>Py,scaleSymlog:()=>Ny,scaleThreshold:()=>Ky,scaleTime:()=>lw,scaleUtc:()=>cw,tickFormat:()=>uy});var r=__webpack_require__(5043),n=__webpack_require__.t(r,2),a=__webpack_require__(4391);function i(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function s(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}function l(e,t,r){return(t=s(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach(function(t){l(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}const d=["sri"],h=["page"],m=["page","matches"],p=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition","unstable_defaultShouldRevalidate"],f=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],g=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition","unstable_defaultShouldRevalidate"];var v="popstate";function y(){return C(function(e,t){let{pathname:r,search:n,hash:a}=e.location;return k("",{pathname:r,search:n,hash:a},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:j(t)},null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function b(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function x(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(r){}}}function w(e,t){return{usr:e.state,key:e.key,idx:t}}function k(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3?arguments[3]:void 0;return u(u({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?S(t):t),{},{state:r,key:t&&t.key||n||Math.random().toString(36).substring(2,10)})}function j(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&"?"!==r&&(t+="?"===r.charAt(0)?r:"?"+r),n&&"#"!==n&&(t+="#"===n.charAt(0)?n:"#"+n),t}function S(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function C(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:a=document.defaultView,v5Compat:i=!1}=n,o=a.history,s="POP",l=null,c=d();function d(){return(o.state||{idx:null}).idx}function h(){s="POP";let e=d(),t=null==e?null:e-c;c=e,l&&l({action:s,location:p.location,delta:t})}function m(e){return N(e)}null==c&&(c=0,o.replaceState(u(u({},o.state),{},{idx:c}),""));let p={get action(){return s},get location(){return e(a,o)},listen(e){if(l)throw new Error("A history only accepts one active listener");return a.addEventListener(v,h),l=e,()=>{a.removeEventListener(v,h),l=null}},createHref:e=>t(a,e),createURL:m,encodeLocation(e){let t=m(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){s="PUSH";let n=k(p.location,e,t);r&&r(n,e),c=d()+1;let u=w(n,c),h=p.createHref(n);try{o.pushState(u,"",h)}catch(m){if(m instanceof DOMException&&"DataCloneError"===m.name)throw m;a.location.assign(h)}i&&l&&l({action:s,location:p.location,delta:1})},replace:function(e,t){s="REPLACE";let n=k(p.location,e,t);r&&r(n,e),c=d();let a=w(n,c),u=p.createHref(n);o.replaceState(a,"",u),i&&l&&l({action:s,location:p.location,delta:0})},go:e=>o.go(e)};return p}function N(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r="http://localhost";"undefined"!==typeof window&&(r="null"!==window.location.origin?window.location.origin:window.location.href),b(r,"No window.location.(origin|href) available to create URL");let n="string"===typeof e?e:j(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}new WeakMap;function _(e,t){return A(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function A(e,t,r,n){let a=H(("string"===typeof t?S(t):t).pathname||"/",r);if(null==a)return null;let i=T(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let r=e.length===t.length&&e.slice(0,-1).every((e,r)=>e===t[r]);return r?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(i);let o=null;for(let s=0;null==o&&s<i.length;++s){let e=U(a);o=q(i[s],e,n)}return o}function T(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=function(e,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a,s=arguments.length>3?arguments[3]:void 0,l={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};if(l.relativePath.startsWith("/")){if(!l.relativePath.startsWith(n)&&o)return;b(l.relativePath.startsWith(n),'Absolute route path "'.concat(l.relativePath,'" nested under path "').concat(n,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),l.relativePath=l.relativePath.slice(n.length)}let c=$([n,l.relativePath]),u=r.concat(l);e.children&&e.children.length>0&&(b(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(c,'".')),T(e.children,t,u,c,o)),(null!=e.path||e.index)&&t.push({path:c,score:z(c,e.index),routesMeta:u})};return e.forEach((e,t)=>{var r;if(""!==e.path&&null!==(r=e.path)&&void 0!==r&&r.includes("?"))for(let n of E(e.path))i(e,t,!0,n);else i(e,t)}),t}function E(e){let t=e.split("/");if(0===t.length)return[];let[r,...n]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(0===n.length)return a?[i,""]:[i];let o=E(n.join("/")),s=[];return s.push(...o.map(e=>""===e?i:[i,e].join("/"))),a&&s.push(...o),s.map(t=>e.startsWith("/")&&""===t?"/":t)}var O=/^:[\w-]+$/,P=3,I=2,M=1,R=10,D=-2,L=e=>"*"===e;function z(e,t){let r=e.split("/"),n=r.length;return r.some(L)&&(n+=D),t&&(n+=I),r.filter(e=>!L(e)).reduce((e,t)=>e+(O.test(t)?P:""===t?M:R),n)}function q(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:n}=e,a={},i="/",o=[];for(let s=0;s<n.length;++s){let e=n[s],l=s===n.length-1,c="/"===i?t:t.slice(i.length)||"/",u=B({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&r&&!n[n.length-1].route.index&&(u=B({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(a,u.params),o.push({params:a,pathname:$([i,u.pathname]),pathnameBase:J($([i,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(i=$([i,u.pathnameBase]))}return o}function B(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=F(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),s=a.slice(1),l=n.reduce((e,t,r)=>{let{paramName:n,isOptional:a}=t;if("*"===n){let e=s[r]||"";o=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const l=s[r];return e[n]=a&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{});return{params:l,pathname:i,pathnameBase:o,pattern:e}}function F(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];x("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,r)=>(n.push({paramName:t,isOptional:null!=r}),r?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function U(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return x(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function H(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&"/"!==n?null:e.slice(r)||"/"}var W=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function K(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)}),r.length>1?r.join("/"):"/"}function V(e,t,r,n){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(n),"].  Please separate it out to the `to.").concat(r,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function G(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function Q(e){let t=G(e);return t.map((e,r)=>r===t.length-1?e.pathname:e.pathnameBase)}function Y(e,t,r){let n,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?n=S(e):(n=u({},e),b(!n.pathname||!n.pathname.includes("?"),V("?","pathname","search",n)),b(!n.pathname||!n.pathname.includes("#"),V("#","pathname","hash",n)),b(!n.search||!n.search.includes("#"),V("#","search","hash",n)));let i,o=""===e||""===n.pathname,s=o?"/":n.pathname;if(null==s)i=r;else{let e=t.length-1;if(!a&&s.startsWith("..")){let t=s.split("/");for(;".."===t[0];)t.shift(),e-=1;n.pathname=t.join("/")}i=e>=0?t[e]:"/"}let l=function(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:n,search:a="",hash:i=""}="string"===typeof e?S(e):e;return n?(n=n.replace(/\/\/+/g,"/"),t=n.startsWith("/")?K(n.substring(1),"/"):K(n,r)):t=r,{pathname:t,search:X(a),hash:Z(i)}}(n,i),c=s&&"/"!==s&&s.endsWith("/"),d=(o||"."===s)&&r.endsWith("/");return l.pathname.endsWith("/")||!c&&!d||(l.pathname+="/"),l}var $=e=>e.join("/").replace(/\/\/+/g,"/"),J=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),X=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",Z=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";var ee=class{constructor(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.status=e,this.statusText=t||"",this.internal=n,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}};function te(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}function re(e){return e.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var ne="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;function ae(e,t){let r=e;if("string"!==typeof r||!W.test(r))return{absoluteURL:void 0,isExternal:!1,to:r};let n=r,a=!1;if(ne)try{let e=new URL(window.location.href),n=r.startsWith("//")?new URL(e.protocol+r):new URL(r),i=H(n.pathname,t);n.origin===e.origin&&null!=i?r=i+n.search+n.hash:a=!0}catch(i){x(!1,'<Link to="'.concat(r,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}return{absoluteURL:n,isExternal:a,to:r}}Symbol("Uninstrumented");Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var ie=["POST","PUT","PATCH","DELETE"],oe=(new Set(ie),["GET",...ie]);new Set(oe),Symbol("ResetLoaderData");var se=r.createContext(null);se.displayName="DataRouter";var le=r.createContext(null);le.displayName="DataRouterState";var ce=r.createContext(!1);function ue(){return r.useContext(ce)}var de=r.createContext({isTransitioning:!1});de.displayName="ViewTransition";var he=r.createContext(new Map);he.displayName="Fetchers";var me=r.createContext(null);me.displayName="Await";var pe=r.createContext(null);pe.displayName="Navigation";var fe=r.createContext(null);fe.displayName="Location";var ge=r.createContext({outlet:null,matches:[],isDataRoute:!1});ge.displayName="Route";var ve=r.createContext(null);ve.displayName="RouteError";var ye="REACT_ROUTER_ERROR";function be(){return null!=r.useContext(fe)}function xe(){return b(be(),"useLocation() may be used only in the context of a <Router> component."),r.useContext(fe).location}var we="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ke(e){r.useContext(pe).static||r.useLayoutEffect(e)}function je(){let{isDataRoute:e}=r.useContext(ge);return e?function(){let{router:e}=Re("useNavigate"),t=Le("useNavigate"),n=r.useRef(!1);ke(()=>{n.current=!0});let a=r.useCallback(async function(r){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};x(n.current,we),n.current&&("number"===typeof r?await e.navigate(r):await e.navigate(r,u({fromRouteId:t},a)))},[e,t]);return a}():function(){b(be(),"useNavigate() may be used only in the context of a <Router> component.");let e=r.useContext(se),{basename:t,navigator:n}=r.useContext(pe),{matches:a}=r.useContext(ge),{pathname:i}=xe(),o=JSON.stringify(Q(a)),s=r.useRef(!1);ke(()=>{s.current=!0});let l=r.useCallback(function(r){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(x(s.current,we),!s.current)return;if("number"===typeof r)return void n.go(r);let l=Y(r,JSON.parse(o),i,"path"===a.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:$([t,l.pathname])),(a.replace?n.replace:n.push)(l,a.state,a)},[t,n,o,i,e]);return l}()}r.createContext(null);function Se(){let{matches:e}=r.useContext(ge),t=e[e.length-1];return t?t.params:{}}function Ce(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:n}=r.useContext(ge),{pathname:a}=xe(),i=JSON.stringify(Q(n));return r.useMemo(()=>Y(e,JSON.parse(i),a,"path"===t),[e,i,a,t])}function Ne(e,t,n,a,i){b(be(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=r.useContext(pe),{matches:s}=r.useContext(ge),l=s[s.length-1],c=l?l.params:{},d=l?l.pathname:"/",h=l?l.pathnameBase:"/",m=l&&l.route;{let e=m&&m.path||"";Be(d,!m||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(d,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let p,f=xe();if(t){var g;let e="string"===typeof t?S(t):t;b("/"===h||(null===(g=e.pathname)||void 0===g?void 0:g.startsWith(h)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(h,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),p=e}else p=f;let v=p.pathname||"/",y=v;if("/"!==h){let e=h.replace(/^\//,"").split("/");y="/"+v.replace(/^\//,"").split("/").slice(e.length).join("/")}let w=_(e,{pathname:y});x(m||null!=w,'No routes matched location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" ')),x(null==w||void 0!==w[w.length-1].route.element||void 0!==w[w.length-1].route.Component||void 0!==w[w.length-1].route.lazy,'Matched leaf route at location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let k=Ie(w&&w.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:$([h,o.encodeLocation?o.encodeLocation(e.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:$([h,o.encodeLocation?o.encodeLocation(e.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathnameBase])})),s,n,a,i);return t&&k?r.createElement(fe.Provider,{value:{location:u({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:"POP"}},k):k}function _e(){let e=ze(),t=te(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:a},o={padding:"2px 4px",backgroundColor:a},s=null;return console.error("Error handled by React Router default ErrorBoundary:",e),s=r.createElement(r.Fragment,null,r.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),r.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",r.createElement("code",{style:o},"ErrorBoundary")," or"," ",r.createElement("code",{style:o},"errorElement")," prop on your route.")),r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:i},n):null,s)}var Ae=r.createElement(_e,null),Te=class extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&"object"===typeof e&&e&&"digest"in e&&"string"===typeof e.digest){const t=function(e){if(e.startsWith("".concat(ye,":").concat("ROUTE_ERROR_RESPONSE",":{")))try{let t=JSON.parse(e.slice(40));if("object"===typeof t&&t&&"number"===typeof t.status&&"string"===typeof t.statusText)return new ee(t.status,t.statusText,t.data)}catch(t){}}(e.digest);t&&(e=t)}let t=void 0!==e?r.createElement(ge.Provider,{value:this.props.routeContext},r.createElement(ve.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?r.createElement(Oe,{error:e},t):t}};Te.contextType=ce;var Ee=new WeakMap;function Oe(e){let{children:t,error:n}=e,{basename:a}=r.useContext(pe);if("object"===typeof n&&n&&"digest"in n&&"string"===typeof n.digest){let e=function(e){if(e.startsWith("".concat(ye,":").concat("REDIRECT",":{")))try{let t=JSON.parse(e.slice(28));if("object"===typeof t&&t&&"number"===typeof t.status&&"string"===typeof t.statusText&&"string"===typeof t.location&&"boolean"===typeof t.reloadDocument&&"boolean"===typeof t.replace)return t}catch(t){}}(n.digest);if(e){let t=Ee.get(n);if(t)throw t;let i=ae(e.location,a);if(ne&&!Ee.get(n)){if(!i.isExternal&&!e.reloadDocument){const t=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(i.to,{replace:e.replace}));throw Ee.set(n,t),t}window.location.href=i.absoluteURL||i.to}return r.createElement("meta",{httpEquiv:"refresh",content:"0;url=".concat(i.absoluteURL||i.to)})}}return t}function Pe(e){let{routeContext:t,match:n,children:a}=e,i=r.useContext(se);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(ge.Provider,{value:t},a)}function Ie(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(0!==t.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let i=e,o=null===n||void 0===n?void 0:n.errors;if(null!=o){let e=i.findIndex(e=>e.route.id&&void 0!==(null===o||void 0===o?void 0:o[e.route.id]));b(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(o).join(","))),i=i.slice(0,Math.min(i.length,e+1))}let s=!1,l=-1;if(n)for(let r=0;r<i.length;r++){let e=i[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(l=r),e.route.id){let{loaderData:t,errors:r}=n,a=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!r||void 0===r[e.route.id]);if(e.route.lazy||a){s=!0,i=l>=0?i.slice(0,l+1):[i[0]];break}}}let c=n&&a?(e,t)=>{var r,i;a(e,{location:n.location,params:null!==(r=null===(i=n.matches)||void 0===i||null===(i=i[0])||void 0===i?void 0:i.params)&&void 0!==r?r:{},unstable_pattern:re(n.matches),errorInfo:t})}:void 0;return i.reduceRight((e,a,u)=>{let d,h=!1,m=null,p=null;n&&(d=o&&a.route.id?o[a.route.id]:void 0,m=a.route.errorElement||Ae,s&&(l<0&&0===u?(Be("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,p=null):l===u&&(h=!0,p=a.route.hydrateFallbackElement||null)));let f=t.concat(i.slice(0,u+1)),g=()=>{let t;return t=d?m:h?p:a.route.Component?r.createElement(a.route.Component,null):a.route.element?a.route.element:e,r.createElement(Pe,{match:a,routeContext:{outlet:e,matches:f,isDataRoute:null!=n},children:t})};return n&&(a.route.ErrorBoundary||a.route.errorElement||0===u)?r.createElement(Te,{location:n.location,revalidation:n.revalidation,component:m,error:d,children:g(),routeContext:{outlet:null,matches:f,isDataRoute:!0},onError:c}):g()},null)}function Me(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Re(e){let t=r.useContext(se);return b(t,Me(e)),t}function De(e){let t=r.useContext(le);return b(t,Me(e)),t}function Le(e){let t=function(e){let t=r.useContext(ge);return b(t,Me(e)),t}(e),n=t.matches[t.matches.length-1];return b(n.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),n.route.id}function ze(){var e;let t=r.useContext(ve),n=De("useRouteError"),a=Le("useRouteError");return void 0!==t?t:null===(e=n.errors)||void 0===e?void 0:e[a]}var qe={};function Be(e,t,r){t||qe[e]||(qe[e]=!0,x(!1,r))}var Fe={};function Ue(e,t){e||Fe[t]||(Fe[t]=!0,console.warn(t))}n.useOptimistic;r.memo(function(e){let{routes:t,future:r,state:n,onError:a}=e;return Ne(t,void 0,n,a,r)});function He(e){let{to:t,replace:n,state:a,relative:i}=e;b(be(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=r.useContext(pe);x(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=r.useContext(ge),{pathname:l}=xe(),c=je(),u=Y(t,Q(s),l,"path"===i),d=JSON.stringify(u);return r.useEffect(()=>{c(JSON.parse(d),{replace:n,state:a,relative:i})},[c,d,i,n,a]),null}function We(e){b(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Ke(e){let{basename:t="/",children:n=null,location:a,navigationType:i="POP",navigator:o,static:s=!1,unstable_useTransitions:l}=e;b(!be(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),u=r.useMemo(()=>({basename:c,navigator:o,static:s,unstable_useTransitions:l,future:{}}),[c,o,s,l]);"string"===typeof a&&(a=S(a));let{pathname:d="/",search:h="",hash:m="",state:p=null,key:f="default"}=a,g=r.useMemo(()=>{let e=H(d,c);return null==e?null:{location:{pathname:e,search:h,hash:m,state:p,key:f},navigationType:i}},[c,d,h,m,p,f,i]);return x(null!=g,'<Router basename="'.concat(c,'"> is not able to match the URL "').concat(d).concat(h).concat(m,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==g?null:r.createElement(pe.Provider,{value:u},r.createElement(fe.Provider,{children:n,value:g}))}function Ve(e){let{children:t,location:r}=e;return Ne(Ge(t),r)}r.Component;function Ge(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];return r.Children.forEach(e,(e,a)=>{if(!r.isValidElement(e))return;let i=[...t,a];if(e.type===r.Fragment)return void n.push.apply(n,Ge(e.props.children,i));b(e.type===We,"[".concat("string"===typeof e.type?e.type:e.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),b(!e.props.index||!e.props.children,"An index route cannot have child routes.");let o={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,middleware:e.props.middleware,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=Ge(e.props.children,i)),n.push(o)}),n}var Qe="get",Ye="application/x-www-form-urlencoded";function $e(e){return"undefined"!==typeof HTMLElement&&e instanceof HTMLElement}var Je=null;var Xe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ze(e){return null==e||Xe.has(e)?e:(x(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(Ye,'"')),null)}function et(e,t){let r,n,a,i,o;if(function(e){return $e(e)&&"form"===e.tagName.toLowerCase()}(e)){let o=e.getAttribute("action");n=o?H(o,t):null,r=e.getAttribute("method")||Qe,a=Ze(e.getAttribute("enctype"))||Ye,i=new FormData(e)}else if(function(e){return $e(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return $e(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let o=e.form;if(null==o)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let s=e.getAttribute("formaction")||o.getAttribute("action");if(n=s?H(s,t):null,r=e.getAttribute("formmethod")||o.getAttribute("method")||Qe,a=Ze(e.getAttribute("formenctype"))||Ze(o.getAttribute("enctype"))||Ye,i=new FormData(o,e),!function(){if(null===Je)try{new FormData(document.createElement("form"),0),Je=!1}catch(e){Je=!0}return Je}()){let{name:t,type:r,value:n}=e;if("image"===r){let e=t?"".concat(t,"."):"";i.append("".concat(e,"x"),"0"),i.append("".concat(e,"y"),"0")}else t&&i.append(t,n)}}else{if($e(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Qe,n=null,a=Ye,o=e}return i&&"text/plain"===a&&(o=i,i=void 0),{action:n,method:r.toLowerCase(),encType:a,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;function tt(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}Symbol("SingleFetchRedirect");function rt(e,t,r,n){let a="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return r?a.pathname.endsWith("/")?a.pathname="".concat(a.pathname,"_.").concat(n):a.pathname="".concat(a.pathname,".").concat(n):"/"===a.pathname?a.pathname="_root.".concat(n):t&&"/"===H(a.pathname,t)?a.pathname="".concat(t.replace(/\/$/,""),"/_root.").concat(n):a.pathname="".concat(a.pathname.replace(/\/$/,""),".").concat(n),a}async function nt(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function at(e){return null!=e&&"string"===typeof e.page}function it(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function ot(e,t,r,n,a,i){let o=(e,t)=>!r[t]||e.route.id!==r[t].route.id,s=(e,t)=>{var n;return r[t].pathname!==e.pathname||(null===(n=r[t].route.path)||void 0===n?void 0:n.endsWith("*"))&&r[t].params["*"]!==e.params["*"]};return"assets"===i?t.filter((e,t)=>o(e,t)||s(e,t)):"data"===i?t.filter((t,i)=>{let l=n.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(o(t,i)||s(t,i))return!0;if(t.route.shouldRevalidate){var c;let n=t.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:(null===(c=r[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof n)return n}return!0}):[]}function st(e,t){let{includeHydrateFallback:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n=e.map(e=>{let n=t.routes[e.route.id];if(!n)return[];let a=[n.module];return n.clientActionModule&&(a=a.concat(n.clientActionModule)),n.clientLoaderModule&&(a=a.concat(n.clientLoaderModule)),r&&n.hydrateFallbackModule&&(a=a.concat(n.hydrateFallbackModule)),n.imports&&(a=a.concat(n.imports)),a}).flat(1),[...new Set(n)];var n}function lt(e,t){let r=new Set,n=new Set(t);return e.reduce((e,a)=>{if(t&&!at(a)&&"script"===a.as&&a.href&&n.has(a.href))return e;let i=JSON.stringify(function(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}(a));return r.has(i)||(r.add(i),e.push({key:i,link:a})),e},[])}function ct(e,t){return"lazy"===e.mode&&!0===t}function ut(){let e=r.useContext(se);return tt(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function dt(){let e=r.useContext(le);return tt(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var ht=r.createContext(void 0);function mt(){let e=r.useContext(ht);return tt(e,"You must render this element inside a <HydratedRouter> element"),e}function pt(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function ft(e,t,r){if(r&&!bt)return[e[0]];if(t){let r=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,r+1)}return e}ht.displayName="FrameworkContext";function gt(e){let{page:t}=e,n=i(e,h),{router:a}=ut(),o=r.useMemo(()=>_(a.routes,t,a.basename),[a.routes,t,a.basename]);return o?r.createElement(yt,u({page:t,matches:o},n)):null}function vt(e){let{manifest:t,routeModules:n}=mt(),[a,i]=r.useState([]);return r.useEffect(()=>{let r=!1;return async function(e,t,r){return lt((await Promise.all(e.map(async e=>{let n=t.routes[e.route.id];if(n){let e=await nt(n,r);return e.links?e.links():[]}return[]}))).flat(1).filter(it).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?u(u({},e),{},{rel:"prefetch",as:"style"}):u(u({},e),{},{rel:"prefetch"})))}(e,t,n).then(e=>{r||i(e)}),()=>{r=!0}},[e,t,n]),a}function yt(e){let{page:t,matches:n}=e,a=i(e,m),o=xe(),{future:s,manifest:l,routeModules:c}=mt(),{basename:d}=ut(),{loaderData:h,matches:p}=dt(),f=r.useMemo(()=>ot(t,n,p,l,o,"data"),[t,n,p,l,o]),g=r.useMemo(()=>ot(t,n,p,l,o,"assets"),[t,n,p,l,o]),v=r.useMemo(()=>{if(t===o.pathname+o.search+o.hash)return[];let e=new Set,r=!1;if(n.forEach(t=>{var n;let a=l.routes[t.route.id];a&&a.hasLoader&&(!f.some(e=>e.route.id===t.route.id)&&t.route.id in h&&null!==(n=c[t.route.id])&&void 0!==n&&n.shouldRevalidate||a.hasClientLoader?r=!0:e.add(t.route.id))}),0===e.size)return[];let a=rt(t,d,s.unstable_trailingSlashAwareDataRequests,"data");return r&&e.size>0&&a.searchParams.set("_routes",n.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[a.pathname+a.search]},[d,s.unstable_trailingSlashAwareDataRequests,h,o,l,f,n,t,c]),y=r.useMemo(()=>st(g,l),[g,l]),b=vt(g);return r.createElement(r.Fragment,null,v.map(e=>r.createElement("link",u({key:e,rel:"prefetch",as:"fetch",href:e},a))),y.map(e=>r.createElement("link",u({key:e,rel:"modulepreload",href:e},a))),b.map(e=>{var t;let{key:n,link:i}=e;return r.createElement("link",u(u({key:n,nonce:a.nonce},i),{},{crossOrigin:null!==(t=i.crossOrigin)&&void 0!==t?t:a.crossOrigin}))}))}var bt=!1;function xt(e){let{manifest:t,serverHandoffString:n,isSpaMode:a,renderMeta:o,routeDiscovery:s,ssr:l}=mt(),{router:c,static:h,staticContext:m}=ut(),{matches:p}=dt(),f=ue(),g=ct(s,l);o&&(o.didRenderScripts=!0);let v=ft(p,null,a);r.useEffect(()=>{bt=!0},[]);let y=r.useMemo(()=>{var a;if(f)return null;let o=m?"window.__reactRouterContext = ".concat(n,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",s=h?"".concat(null!==(a=t.hmr)&&void 0!==a&&a.runtime?"import ".concat(JSON.stringify(t.hmr.runtime),";"):"").concat(g?"":"import ".concat(JSON.stringify(t.url)),";\n").concat(v.map((e,r)=>{let n="route".concat(r),a=t.routes[e.route.id];tt(a,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:i,clientLoaderModule:o,clientMiddlewareModule:s,hydrateFallbackModule:l,module:c}=a,u=[...i?[{module:i,varName:"".concat(n,"_clientAction")}]:[],...o?[{module:o,varName:"".concat(n,"_clientLoader")}]:[],...s?[{module:s,varName:"".concat(n,"_clientMiddleware")}]:[],...l?[{module:l,varName:"".concat(n,"_HydrateFallback")}]:[],{module:c,varName:"".concat(n,"_main")}];return 1===u.length?"import * as ".concat(n," from ").concat(JSON.stringify(c),";"):[u.map(e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";')).join("\n"),"const ".concat(n," = {").concat(u.map(e=>"...".concat(e.varName)).join(","),"};")].join("\n")}).join("\n"),"\n  ").concat(g?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:r}=e,n=i(e,d),a=new Set(t.state.matches.map(e=>e.route.id)),o=t.state.location.pathname.split("/").filter(Boolean),s=["/"];for(o.pop();o.length>0;)s.push("/".concat(o.join("/"))),o.pop();s.forEach(e=>{let r=_(t.routes,e,t.basename);r&&r.forEach(e=>a.add(e.route.id))});let l=[...a].reduce((e,t)=>Object.assign(e,{[t]:n.routes[t]}),{});return u(u({},n),{},{routes:l,sri:!!r||void 0})}(t,c),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(v.map((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t)).join(","),"};\n\nimport(").concat(JSON.stringify(t.entry.module),");"):" ";return r.createElement(r.Fragment,null,r.createElement("script",u(u({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:o},type:void 0})),r.createElement("script",u(u({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:s},type:"module",async:!0})))},[]),b=bt||f?[]:function(e){return[...new Set(e)]}(t.entry.imports.concat(st(v,t,{includeHydrateFallback:!0}))),x="object"===typeof t.sri?t.sri:{};return Ue(!f,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),bt||f?null:r.createElement(r.Fragment,null,"object"===typeof t.sri?r.createElement("script",u(u({},e),{},{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:x})}})):null,g?null:r.createElement("link",{rel:"modulepreload",href:t.url,crossOrigin:e.crossOrigin,integrity:x[t.url],suppressHydrationWarning:!0}),r.createElement("link",{rel:"modulepreload",href:t.entry.module,crossOrigin:e.crossOrigin,integrity:x[t.entry.module],suppressHydrationWarning:!0}),b.map(t=>r.createElement("link",{key:t,rel:"modulepreload",href:t,crossOrigin:e.crossOrigin,integrity:x[t],suppressHydrationWarning:!0})),y)}function wt(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}r.Component;function kt(e){let{error:t,isOutsideRemixApp:n}=e;console.error(t);let a,i=r.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(te(t))return r.createElement(jt,{title:"Unhandled Thrown Response!"},r.createElement("h1",{style:{fontSize:"24px"}},t.status," ",t.statusText),i);if(t instanceof Error)a=t;else{let e=null==t?"Unknown Error":"object"===typeof t&&"toString"in t?t.toString():JSON.stringify(t);a=new Error(e)}return r.createElement(jt,{title:"Application Error!",isOutsideRemixApp:n},r.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),r.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},a.stack),i)}function jt(e){var t;let{title:n,renderScripts:a,isOutsideRemixApp:i,children:o}=e,{routeModules:s}=mt();return null!==(t=s.root)&&void 0!==t&&t.Layout&&!i?o:r.createElement("html",{lang:"en"},r.createElement("head",null,r.createElement("meta",{charSet:"utf-8"}),r.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),r.createElement("title",null,n)),r.createElement("body",null,r.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},o,a?r.createElement(xt,null):null)))}var St="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{St&&(window.__reactRouterVersion="7.13.0")}catch(OX){}function Ct(e){let{basename:t,children:n,unstable_useTransitions:a,window:i}=e,o=r.useRef();null==o.current&&(o.current=y({window:i,v5Compat:!0}));let s=o.current,[l,c]=r.useState({action:s.action,location:s.location}),u=r.useCallback(e=>{!1===a?c(e):r.startTransition(()=>c(e))},[a]);return r.useLayoutEffect(()=>s.listen(u),[s,u]),r.createElement(Ke,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:s,unstable_useTransitions:a})}var Nt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_t=r.forwardRef(function(e,t){let{onClick:n,discover:a="render",prefetch:o="none",relative:s,reloadDocument:l,replace:c,state:d,target:h,to:m,preventScrollReset:f,viewTransition:g,unstable_defaultShouldRevalidate:v}=e,y=i(e,p),{basename:x,unstable_useTransitions:w}=r.useContext(pe),k="string"===typeof m&&Nt.test(m),S=ae(m,x);m=S.to;let C=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};b(be(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:a}=r.useContext(pe),{hash:i,pathname:o,search:s}=Ce(e,{relative:t}),l=o;return"/"!==n&&(l="/"===o?n:$([n,o])),a.createHref({pathname:l,search:s,hash:i})}(m,{relative:s}),[N,_,A]=function(e,t){let n=r.useContext(ht),[a,i]=r.useState(!1),[o,s]=r.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:h}=t,m=r.useRef(null);r.useEffect(()=>{if("render"===e&&s(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{s(e.isIntersecting)})},{threshold:.5});return m.current&&e.observe(m.current),()=>{e.disconnect()}}},[e]),r.useEffect(()=>{if(a){let e=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(e)}}},[a]);let p=()=>{i(!0)},f=()=>{i(!1),s(!1)};return n?"intent"!==e?[o,m,{}]:[o,m,{onFocus:pt(l,p),onBlur:pt(c,f),onMouseEnter:pt(u,p),onMouseLeave:pt(d,f),onTouchStart:pt(h,p)}]:[!1,m,{}]}(o,y),T=function(e){let{target:t,replace:n,state:a,preventScrollReset:i,relative:o,viewTransition:s,unstable_defaultShouldRevalidate:l,unstable_useTransitions:c}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=je(),d=xe(),h=Ce(e,{relative:o});return r.useCallback(m=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(m,t)){m.preventDefault();let t=void 0!==n?n:j(d)===j(h),p=()=>u(e,{replace:t,state:a,preventScrollReset:i,relative:o,viewTransition:s,unstable_defaultShouldRevalidate:l});c?r.startTransition(()=>p()):p()}},[d,u,h,n,a,t,e,i,o,s,l,c])}(m,{replace:c,state:d,target:h,preventScrollReset:f,relative:s,viewTransition:g,unstable_defaultShouldRevalidate:v,unstable_useTransitions:w});let E=r.createElement("a",u(u(u({},y),A),{},{href:S.absoluteURL||C,onClick:S.isExternal||l?n:function(e){n&&n(e),e.defaultPrevented||T(e)},ref:wt(t,_),target:h,"data-discover":k||"render"!==a?void 0:"true"}));return N&&!k?r.createElement(r.Fragment,null,E,r.createElement(gt,{page:C})):E});_t.displayName="Link";var At=r.forwardRef(function(e,t){let{"aria-current":n="page",caseSensitive:a=!1,className:o="",end:s=!1,style:l,to:c,viewTransition:d,children:h}=e,m=i(e,f),p=Ce(c,{relative:m.relative}),g=xe(),v=r.useContext(le),{navigator:y,basename:x}=r.useContext(pe),w=null!=v&&function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.useContext(de);b(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=Ot("useViewTransitionState"),i=Ce(e,{relative:t});if(!n.isTransitioning)return!1;let o=H(n.currentLocation.pathname,a)||n.currentLocation.pathname,s=H(n.nextLocation.pathname,a)||n.nextLocation.pathname;return null!=B(i.pathname,s)||null!=B(i.pathname,o)}(p)&&!0===d,k=y.encodeLocation?y.encodeLocation(p).pathname:p.pathname,j=g.pathname,S=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;a||(j=j.toLowerCase(),S=S?S.toLowerCase():null,k=k.toLowerCase()),S&&x&&(S=H(S,x)||S);const C="/"!==k&&k.endsWith("/")?k.length-1:k.length;let N,_=j===k||!s&&j.startsWith(k)&&"/"===j.charAt(C),A=null!=S&&(S===k||!s&&S.startsWith(k)&&"/"===S.charAt(k.length)),T={isActive:_,isPending:A,isTransitioning:w},E=_?n:void 0;N="function"===typeof o?o(T):[o,_?"active":null,A?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let O="function"===typeof l?l(T):l;return r.createElement(_t,u(u({},m),{},{"aria-current":E,className:N,ref:t,style:O,to:c,viewTransition:d}),"function"===typeof h?h(T):h)});At.displayName="NavLink";var Tt=r.forwardRef((e,t)=>{let{discover:n="render",fetcherKey:a,navigate:o,reloadDocument:s,replace:l,state:c,method:d=Qe,action:h,onSubmit:m,relative:p,preventScrollReset:f,viewTransition:v,unstable_defaultShouldRevalidate:y}=e,x=i(e,g),{unstable_useTransitions:w}=r.useContext(pe),k=Mt(),S=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:n}=r.useContext(pe),a=r.useContext(ge);b(a,"useFormAction must be used inside a RouteContext");let[i]=a.matches.slice(-1),o=u({},Ce(e||".",{relative:t})),s=xe();if(null==e){o.search=s.search;let e=new URLSearchParams(o.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let r=e.toString();o.search=r?"?".concat(r):""}}e&&"."!==e||!i.route.index||(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index");"/"!==n&&(o.pathname="/"===o.pathname?n:$([n,o.pathname]));return j(o)}(h,{relative:p}),C="get"===d.toLowerCase()?"get":"post",N="string"===typeof h&&Nt.test(h);return r.createElement("form",u(u({ref:t,method:C,action:S,onSubmit:s?m:e=>{if(m&&m(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||d,i=()=>k(t||e.currentTarget,{fetcherKey:a,method:n,navigate:o,replace:l,state:c,relative:p,preventScrollReset:f,viewTransition:v,unstable_defaultShouldRevalidate:y});w&&!1!==o?r.startTransition(()=>i()):i()}},x),{},{"data-discover":N||"render"!==n?void 0:"true"}))});function Et(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Ot(e){let t=r.useContext(se);return b(t,Et(e)),t}Tt.displayName="Form";var Pt=0,It=()=>"__".concat(String(++Pt),"__");function Mt(){let{router:e}=Ot("useSubmit"),{basename:t}=r.useContext(pe),n=Le("useRouteId"),a=e.fetch,i=e.navigate;return r.useCallback(async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:o,method:s,encType:l,formData:c,body:u}=et(e,t);if(!1===r.navigate){let e=r.fetcherKey||It();await a(e,n,r.action||o,{unstable_defaultShouldRevalidate:r.unstable_defaultShouldRevalidate,preventScrollReset:r.preventScrollReset,formData:c,body:u,formMethod:r.method||s,formEncType:r.encType||l,flushSync:r.flushSync})}else await i(r.action||o,{unstable_defaultShouldRevalidate:r.unstable_defaultShouldRevalidate,preventScrollReset:r.preventScrollReset,formData:c,body:u,formMethod:r.method||s,formEncType:r.encType||l,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[a,i,t,n])}function Rt(e,t){return function(){return e.apply(t,arguments)}}const{toString:Dt}=Object.prototype,{getPrototypeOf:Lt}=Object,{iterator:zt,toStringTag:qt}=Symbol,Bt=(Ft=Object.create(null),e=>{const t=Dt.call(e);return Ft[t]||(Ft[t]=t.slice(8,-1).toLowerCase())});var Ft;const Ut=e=>(e=e.toLowerCase(),t=>Bt(t)===e),Ht=e=>t=>typeof t===e,{isArray:Wt}=Array,Kt=Ht("undefined");function Vt(e){return null!==e&&!Kt(e)&&null!==e.constructor&&!Kt(e.constructor)&&Yt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Gt=Ut("ArrayBuffer");const Qt=Ht("string"),Yt=Ht("function"),$t=Ht("number"),Jt=e=>null!==e&&"object"===typeof e,Xt=e=>{if("object"!==Bt(e))return!1;const t=Lt(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(qt in e)&&!(zt in e)},Zt=Ut("Date"),er=Ut("File"),tr=Ut("Blob"),rr=Ut("FileList"),nr=Ut("URLSearchParams"),[ar,ir,or,sr]=["ReadableStream","Request","Response","Headers"].map(Ut);function lr(e,t){let r,n,{allOwnKeys:a=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),Wt(e))for(r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else{if(Vt(e))return;const n=a?Object.getOwnPropertyNames(e):Object.keys(e),i=n.length;let o;for(r=0;r<i;r++)o=n[r],t.call(null,e[o],o,e)}}function cr(e,t){if(Vt(e))return null;t=t.toLowerCase();const r=Object.keys(e);let n,a=r.length;for(;a-- >0;)if(n=r[a],t===n.toLowerCase())return n;return null}const ur="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:__webpack_require__.g,dr=e=>!Kt(e)&&e!==ur;const hr=(mr="undefined"!==typeof Uint8Array&&Lt(Uint8Array),e=>mr&&e instanceof mr);var mr;const pr=Ut("HTMLFormElement"),fr=(e=>{let{hasOwnProperty:t}=e;return(e,r)=>t.call(e,r)})(Object.prototype),gr=Ut("RegExp"),vr=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};lr(r,(r,a)=>{let i;!1!==(i=t(r,a,e))&&(n[a]=i||r)}),Object.defineProperties(e,n)};const yr=Ut("AsyncFunction"),br=((e,t)=>{return e?setImmediate:t?(r="axios@".concat(Math.random()),n=[],ur.addEventListener("message",e=>{let{source:t,data:a}=e;t===ur&&a===r&&n.length&&n.shift()()},!1),e=>{n.push(e),ur.postMessage(r,"*")}):e=>setTimeout(e);var r,n})("function"===typeof setImmediate,Yt(ur.postMessage)),xr="undefined"!==typeof queueMicrotask?queueMicrotask.bind(ur):"undefined"!==typeof process&&process.nextTick||br,wr={isArray:Wt,isArrayBuffer:Gt,isBuffer:Vt,isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||Yt(e.append)&&("formdata"===(t=Bt(e))||"object"===t&&Yt(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Gt(e.buffer),t},isString:Qt,isNumber:$t,isBoolean:e=>!0===e||!1===e,isObject:Jt,isPlainObject:Xt,isEmptyObject:e=>{if(!Jt(e)||Vt(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(OX){return!1}},isReadableStream:ar,isRequest:ir,isResponse:or,isHeaders:sr,isUndefined:Kt,isDate:Zt,isFile:er,isBlob:tr,isRegExp:gr,isFunction:Yt,isStream:e=>Jt(e)&&Yt(e.pipe),isURLSearchParams:nr,isTypedArray:hr,isFileList:rr,forEach:lr,merge:function e(){const{caseless:t,skipUndefined:r}=dr(this)&&this||{},n={},a=(a,i)=>{const o=t&&cr(n,i)||i;Xt(n[o])&&Xt(a)?n[o]=e(n[o],a):Xt(a)?n[o]=e({},a):Wt(a)?n[o]=a.slice():r&&Kt(a)||(n[o]=a)};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&lr(arguments[i],a);return n},extend:function(e,t,r){let{allOwnKeys:n}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return lr(t,(t,n)=>{r&&Yt(t)?Object.defineProperty(e,n,{value:Rt(t,r),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(e,n,{value:t,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:n}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:(e,t,r,n)=>{let a,i,o;const s={};if(t=t||{},null==e)return t;do{for(a=Object.getOwnPropertyNames(e),i=a.length;i-- >0;)o=a[i],n&&!n(o,e,t)||s[o]||(t[o]=e[o],s[o]=!0);e=!1!==r&&Lt(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},kindOf:Bt,kindOfTest:Ut,endsWith:(e,t,r)=>{e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return-1!==n&&n===r},toArray:e=>{if(!e)return null;if(Wt(e))return e;let t=e.length;if(!$t(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},forEachEntry:(e,t)=>{const r=(e&&e[zt]).call(e);let n;for(;(n=r.next())&&!n.done;){const r=n.value;t.call(e,r[0],r[1])}},matchAll:(e,t)=>{let r;const n=[];for(;null!==(r=e.exec(t));)n.push(r);return n},isHTMLForm:pr,hasOwnProperty:fr,hasOwnProp:fr,reduceDescriptors:vr,freezeMethods:e=>{vr(e,(t,r)=>{if(Yt(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;const n=e[r];Yt(n)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")}))})},toObjectSet:(e,t)=>{const r={},n=e=>{e.forEach(e=>{r[e]=!0})};return Wt(e)?n(e):n(String(e).split(t)),r},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,r){return t.toUpperCase()+r}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:cr,global:ur,isContextDefined:dr,isSpecCompliantForm:function(e){return!!(e&&Yt(e.append)&&"FormData"===e[qt]&&e[zt])},toJSONObject:e=>{const t=new Array(10),r=(e,n)=>{if(Jt(e)){if(t.indexOf(e)>=0)return;if(Vt(e))return e;if(!("toJSON"in e)){t[n]=e;const a=Wt(e)?[]:{};return lr(e,(e,t)=>{const i=r(e,n+1);!Kt(i)&&(a[t]=i)}),t[n]=void 0,a}}return e};return r(e,0)},isAsyncFn:yr,isThenable:e=>e&&(Jt(e)||Yt(e))&&Yt(e.then)&&Yt(e.catch),setImmediate:br,asap:xr,isIterable:e=>null!=e&&Yt(e[zt])};class kr extends Error{static from(e,t,r,n,a,i){const o=new kr(e.message,t||e.code,r,n,a);return o.cause=e,o.name=e.name,i&&Object.assign(o,i),o}constructor(e,t,r,n,a){super(e),this.name="AxiosError",this.isAxiosError=!0,t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),a&&(this.response=a,this.status=a.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:wr.toJSONObject(this.config),code:this.code,status:this.status}}}kr.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE",kr.ERR_BAD_OPTION="ERR_BAD_OPTION",kr.ECONNABORTED="ECONNABORTED",kr.ETIMEDOUT="ETIMEDOUT",kr.ERR_NETWORK="ERR_NETWORK",kr.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS",kr.ERR_DEPRECATED="ERR_DEPRECATED",kr.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE",kr.ERR_BAD_REQUEST="ERR_BAD_REQUEST",kr.ERR_CANCELED="ERR_CANCELED",kr.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT",kr.ERR_INVALID_URL="ERR_INVALID_URL";const jr=kr;function Sr(e){return wr.isPlainObject(e)||wr.isArray(e)}function Cr(e){return wr.endsWith(e,"[]")?e.slice(0,-2):e}function Nr(e,t,r){return e?e.concat(t).map(function(e,t){return e=Cr(e),!r&&t?"["+e+"]":e}).join(r?".":""):t}const _r=wr.toFlatObject(wr,{},null,function(e){return/^is[A-Z]/.test(e)});const Ar=function(e,t,r){if(!wr.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const n=(r=wr.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!wr.isUndefined(t[e])})).metaTokens,a=r.visitor||c,i=r.dots,o=r.indexes,s=(r.Blob||"undefined"!==typeof Blob&&Blob)&&wr.isSpecCompliantForm(t);if(!wr.isFunction(a))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(wr.isDate(e))return e.toISOString();if(wr.isBoolean(e))return e.toString();if(!s&&wr.isBlob(e))throw new jr("Blob is not supported. Use a Buffer instead.");return wr.isArrayBuffer(e)||wr.isTypedArray(e)?s&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,r,a){let s=e;if(e&&!a&&"object"===typeof e)if(wr.endsWith(r,"{}"))r=n?r:r.slice(0,-2),e=JSON.stringify(e);else if(wr.isArray(e)&&function(e){return wr.isArray(e)&&!e.some(Sr)}(e)||(wr.isFileList(e)||wr.endsWith(r,"[]"))&&(s=wr.toArray(e)))return r=Cr(r),s.forEach(function(e,n){!wr.isUndefined(e)&&null!==e&&t.append(!0===o?Nr([r],n,i):null===o?r:r+"[]",l(e))}),!1;return!!Sr(e)||(t.append(Nr(a,r,i),l(e)),!1)}const u=[],d=Object.assign(_r,{defaultVisitor:c,convertValue:l,isVisitable:Sr});if(!wr.isObject(e))throw new TypeError("data must be an object");return function e(r,n){if(!wr.isUndefined(r)){if(-1!==u.indexOf(r))throw Error("Circular reference detected in "+n.join("."));u.push(r),wr.forEach(r,function(r,i){!0===(!(wr.isUndefined(r)||null===r)&&a.call(t,r,wr.isString(i)?i.trim():i,n,d))&&e(r,n?n.concat(i):[i])}),u.pop()}}(e),t};function Tr(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function Er(e,t){this._pairs=[],e&&Ar(e,this,t)}const Or=Er.prototype;Or.append=function(e,t){this._pairs.push([e,t])},Or.toString=function(e){const t=e?function(t){return e.call(this,t,Tr)}:Tr;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};const Pr=Er;function Ir(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Mr(e,t,r){if(!t)return e;const n=r&&r.encode||Ir,a=wr.isFunction(r)?{serialize:r}:r,i=a&&a.serialize;let o;if(o=i?i(t,a):wr.isURLSearchParams(t)?t.toString():new Pr(t,a).toString(n),o){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}const Rr=class{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){wr.forEach(this.handlers,function(t){null!==t&&e(t)})}},Dr={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Lr={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:Pr,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},zr="undefined"!==typeof window&&"undefined"!==typeof document,qr="object"===typeof navigator&&navigator||void 0,Br=zr&&(!qr||["ReactNative","NativeScript","NS"].indexOf(qr.product)<0),Fr="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,Ur=zr&&window.location.href||"http://localhost",Hr=u(u({},e),Lr);const Wr=function(e){function t(e,r,n,a){let i=e[a++];if("__proto__"===i)return!0;const o=Number.isFinite(+i),s=a>=e.length;if(i=!i&&wr.isArray(n)?n.length:i,s)return wr.hasOwnProp(n,i)?n[i]=[n[i],r]:n[i]=r,!o;n[i]&&wr.isObject(n[i])||(n[i]=[]);return t(e,r,n[i],a)&&wr.isArray(n[i])&&(n[i]=function(e){const t={},r=Object.keys(e);let n;const a=r.length;let i;for(n=0;n<a;n++)i=r[n],t[i]=e[i];return t}(n[i])),!o}if(wr.isFormData(e)&&wr.isFunction(e.entries)){const r={};return wr.forEachEntry(e,(e,n)=>{t(function(e){return wr.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),n,r,0)}),r}return null};const Kr={transitional:Dr,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",n=r.indexOf("application/json")>-1,a=wr.isObject(e);a&&wr.isHTMLForm(e)&&(e=new FormData(e));if(wr.isFormData(e))return n?JSON.stringify(Wr(e)):e;if(wr.isArrayBuffer(e)||wr.isBuffer(e)||wr.isStream(e)||wr.isFile(e)||wr.isBlob(e)||wr.isReadableStream(e))return e;if(wr.isArrayBufferView(e))return e.buffer;if(wr.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let i;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Ar(e,new Hr.classes.URLSearchParams,u({visitor:function(e,t,r,n){return Hr.isNode&&wr.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((i=wr.isFileList(e))||r.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Ar(i?{"files[]":e}:e,t&&new t,this.formSerializer)}}return a||n?(t.setContentType("application/json",!1),function(e,t,r){if(wr.isString(e))try{return(t||JSON.parse)(e),wr.trim(e)}catch(OX){if("SyntaxError"!==OX.name)throw OX}return(r||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Kr.transitional,r=t&&t.forcedJSONParsing,n="json"===this.responseType;if(wr.isResponse(e)||wr.isReadableStream(e))return e;if(e&&wr.isString(e)&&(r&&!this.responseType||n)){const r=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e,this.parseReviver)}catch(OX){if(r){if("SyntaxError"===OX.name)throw jr.from(OX,jr.ERR_BAD_RESPONSE,this,null,this.response);throw OX}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Hr.classes.FormData,Blob:Hr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};wr.forEach(["delete","get","head","post","put","patch"],e=>{Kr.headers[e]={}});const Vr=Kr,Gr=wr.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Qr=Symbol("internals");function Yr(e){return e&&String(e).trim().toLowerCase()}function $r(e){return!1===e||null==e?e:wr.isArray(e)?e.map($r):String(e)}function Jr(e,t,r,n,a){return wr.isFunction(n)?n.call(this,t,r):(a&&(t=r),wr.isString(t)?wr.isString(n)?-1!==t.indexOf(n):wr.isRegExp(n)?n.test(t):void 0:void 0)}class Xr{constructor(e){e&&this.set(e)}set(e,t,r){const n=this;function a(e,t,r){const a=Yr(t);if(!a)throw new Error("header name must be a non-empty string");const i=wr.findKey(n,a);(!i||void 0===n[i]||!0===r||void 0===r&&!1!==n[i])&&(n[i||t]=$r(e))}const i=(e,t)=>wr.forEach(e,(e,r)=>a(e,r,t));if(wr.isPlainObject(e)||e instanceof this.constructor)i(e,t);else if(wr.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))i((e=>{const t={};let r,n,a;return e&&e.split("\n").forEach(function(e){a=e.indexOf(":"),r=e.substring(0,a).trim().toLowerCase(),n=e.substring(a+1).trim(),!r||t[r]&&Gr[r]||("set-cookie"===r?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t})(e),t);else if(wr.isObject(e)&&wr.isIterable(e)){let r,n,a={};for(const t of e){if(!wr.isArray(t))throw TypeError("Object iterator must return a key-value pair");a[n=t[0]]=(r=a[n])?wr.isArray(r)?[...r,t[1]]:[r,t[1]]:t[1]}i(a,t)}else null!=e&&a(t,e,r);return this}get(e,t){if(e=Yr(e)){const r=wr.findKey(this,e);if(r){const e=this[r];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}(e);if(wr.isFunction(t))return t.call(this,e,r);if(wr.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Yr(e)){const r=wr.findKey(this,e);return!(!r||void 0===this[r]||t&&!Jr(0,this[r],r,t))}return!1}delete(e,t){const r=this;let n=!1;function a(e){if(e=Yr(e)){const a=wr.findKey(r,e);!a||t&&!Jr(0,r[a],a,t)||(delete r[a],n=!0)}}return wr.isArray(e)?e.forEach(a):a(e),n}clear(e){const t=Object.keys(this);let r=t.length,n=!1;for(;r--;){const a=t[r];e&&!Jr(0,this[a],a,e,!0)||(delete this[a],n=!0)}return n}normalize(e){const t=this,r={};return wr.forEach(this,(n,a)=>{const i=wr.findKey(r,a);if(i)return t[i]=$r(n),void delete t[a];const o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}(a):String(a).trim();o!==a&&delete t[a],t[o]=$r(n),r[o]=!0}),this}concat(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return wr.forEach(this,(r,n)=>{null!=r&&!1!==r&&(t[n]=e&&wr.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(e=>{let[t,r]=e;return t+": "+r}).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return n.forEach(e=>t.set(e)),t}static accessor(e){const t=(this[Qr]=this[Qr]={accessors:{}}).accessors,r=this.prototype;function n(e){const n=Yr(e);t[n]||(!function(e,t){const r=wr.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(e,r,a){return this[n].call(this,t,e,r,a)},configurable:!0})})}(r,e),t[n]=!0)}return wr.isArray(e)?e.forEach(n):n(e),this}}Xr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),wr.reduceDescriptors(Xr.prototype,(e,t)=>{let{value:r}=e,n=t[0].toUpperCase()+t.slice(1);return{get:()=>r,set(e){this[n]=e}}}),wr.freezeMethods(Xr);const Zr=Xr;function en(e,t){const r=this||Vr,n=t||r,a=Zr.from(n.headers);let i=n.data;return wr.forEach(e,function(e){i=e.call(r,i,a.normalize(),t?t.status:void 0)}),a.normalize(),i}function tn(e){return!(!e||!e.__CANCEL__)}const rn=class extends jr{constructor(e,t,r){super(null==e?"canceled":e,jr.ERR_CANCELED,t,r),this.name="CanceledError",this.__CANCEL__=!0}};function nn(e,t,r){const n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(new jr("Request failed with status code "+r.status,[jr.ERR_BAD_REQUEST,jr.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):e(r)}const an=function(e,t){e=e||10;const r=new Array(e),n=new Array(e);let a,i=0,o=0;return t=void 0!==t?t:1e3,function(s){const l=Date.now(),c=n[o];a||(a=l),r[i]=s,n[i]=l;let u=o,d=0;for(;u!==i;)d+=r[u++],u%=e;if(i=(i+1)%e,i===o&&(o=(o+1)%e),l-a<t)return;const h=c&&l-c;return h?Math.round(1e3*d/h):void 0}};const on=function(e,t){let r,n,a=0,i=1e3/t;const o=function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();a=i,r=null,n&&(clearTimeout(n),n=null),e(...t)};return[function(){const e=Date.now(),t=e-a;for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];t>=i?o(l,e):(r=l,n||(n=setTimeout(()=>{n=null,o(r)},i-t)))},()=>r&&o(r)]},sn=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,n=0;const a=an(50,250);return on(r=>{const i=r.loaded,o=r.lengthComputable?r.total:void 0,s=i-n,l=a(s);n=i;e({loaded:i,total:o,progress:o?i/o:void 0,bytes:s,rate:l||void 0,estimated:l&&o&&i<=o?(o-i)/l:void 0,event:r,lengthComputable:null!=o,[t?"download":"upload"]:!0})},r)},ln=(e,t)=>{const r=null!=e;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},cn=e=>function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return wr.asap(()=>e(...r))},un=Hr.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,Hr.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(Hr.origin),Hr.navigator&&/(msie|trident)/i.test(Hr.navigator.userAgent)):()=>!0,dn=Hr.hasStandardBrowserEnv?{write(e,t,r,n,a,i,o){if("undefined"===typeof document)return;const s=["".concat(e,"=").concat(encodeURIComponent(t))];wr.isNumber(r)&&s.push("expires=".concat(new Date(r).toUTCString())),wr.isString(n)&&s.push("path=".concat(n)),wr.isString(a)&&s.push("domain=".concat(a)),!0===i&&s.push("secure"),wr.isString(o)&&s.push("SameSite=".concat(o)),document.cookie=s.join("; ")},read(e){if("undefined"===typeof document)return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read:()=>null,remove(){}};function hn(e,t,r){let n=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(n||0==r)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const mn=e=>e instanceof Zr?u({},e):e;function pn(e,t){t=t||{};const r={};function n(e,t,r,n){return wr.isPlainObject(e)&&wr.isPlainObject(t)?wr.merge.call({caseless:n},e,t):wr.isPlainObject(t)?wr.merge({},t):wr.isArray(t)?t.slice():t}function a(e,t,r,a){return wr.isUndefined(t)?wr.isUndefined(e)?void 0:n(void 0,e,0,a):n(e,t,0,a)}function i(e,t){if(!wr.isUndefined(t))return n(void 0,t)}function o(e,t){return wr.isUndefined(t)?wr.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function s(r,a,i){return i in t?n(r,a):i in e?n(void 0,r):void 0}const l={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:s,headers:(e,t,r)=>a(mn(e),mn(t),0,!0)};return wr.forEach(Object.keys(u(u({},e),t)),function(n){const i=l[n]||a,o=i(e[n],t[n],n);wr.isUndefined(o)&&i!==s||(r[n]=o)}),r}const fn=e=>{const t=pn({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:i,headers:o,auth:s}=t;if(t.headers=o=Zr.from(o),t.url=Mr(hn(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),s&&o.set("Authorization","Basic "+btoa((s.username||"")+":"+(s.password?unescape(encodeURIComponent(s.password)):""))),wr.isFormData(r))if(Hr.hasStandardBrowserEnv||Hr.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(wr.isFunction(r.getHeaders)){const e=r.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(e=>{let[r,n]=e;t.includes(r.toLowerCase())&&o.set(r,n)})}if(Hr.hasStandardBrowserEnv&&(n&&wr.isFunction(n)&&(n=n(t)),n||!1!==n&&un(t.url))){const e=a&&i&&dn.read(i);e&&o.set(a,e)}return t},gn="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise(function(t,r){const n=fn(e);let a=n.data;const i=Zr.from(n.headers).normalize();let o,s,l,c,u,{responseType:d,onUploadProgress:h,onDownloadProgress:m}=n;function p(){c&&c(),u&&u(),n.cancelToken&&n.cancelToken.unsubscribe(o),n.signal&&n.signal.removeEventListener("abort",o)}let f=new XMLHttpRequest;function g(){if(!f)return;const n=Zr.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders());nn(function(e){t(e),p()},function(e){r(e),p()},{data:d&&"text"!==d&&"json"!==d?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:n,config:e,request:f}),f=null}f.open(n.method.toUpperCase(),n.url,!0),f.timeout=n.timeout,"onloadend"in f?f.onloadend=g:f.onreadystatechange=function(){f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))&&setTimeout(g)},f.onabort=function(){f&&(r(new jr("Request aborted",jr.ECONNABORTED,e,f)),f=null)},f.onerror=function(t){const n=t&&t.message?t.message:"Network Error",a=new jr(n,jr.ERR_NETWORK,e,f);a.event=t||null,r(a),f=null},f.ontimeout=function(){let t=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const a=n.transitional||Dr;n.timeoutErrorMessage&&(t=n.timeoutErrorMessage),r(new jr(t,a.clarifyTimeoutError?jr.ETIMEDOUT:jr.ECONNABORTED,e,f)),f=null},void 0===a&&i.setContentType(null),"setRequestHeader"in f&&wr.forEach(i.toJSON(),function(e,t){f.setRequestHeader(t,e)}),wr.isUndefined(n.withCredentials)||(f.withCredentials=!!n.withCredentials),d&&"json"!==d&&(f.responseType=n.responseType),m&&([l,u]=sn(m,!0),f.addEventListener("progress",l)),h&&f.upload&&([s,c]=sn(h),f.upload.addEventListener("progress",s),f.upload.addEventListener("loadend",c)),(n.cancelToken||n.signal)&&(o=t=>{f&&(r(!t||t.type?new rn(null,e,f):t),f.abort(),f=null)},n.cancelToken&&n.cancelToken.subscribe(o),n.signal&&(n.signal.aborted?o():n.signal.addEventListener("abort",o)));const v=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(n.url);v&&-1===Hr.protocols.indexOf(v)?r(new jr("Unsupported protocol "+v+":",jr.ERR_BAD_REQUEST,e)):f.send(a||null)})},vn=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let r,n=new AbortController;const a=function(e){if(!r){r=!0,o();const t=e instanceof Error?e:this.reason;n.abort(t instanceof jr?t:new rn(t instanceof Error?t.message:t))}};let i=t&&setTimeout(()=>{i=null,a(new jr("timeout of ".concat(t,"ms exceeded"),jr.ETIMEDOUT))},t);const o=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(a):e.removeEventListener("abort",a)}),e=null)};e.forEach(e=>e.addEventListener("abort",a));const{signal:s}=n;return s.unsubscribe=()=>wr.asap(o),s}};function yn(e,t){this.v=e,this.k=t}function bn(e){return function(){return new xn(e.apply(this,arguments))}}function xn(e){var t,r;function n(t,r){try{var i=e[t](r),o=i.value,s=o instanceof yn;Promise.resolve(s?o.v:o).then(function(r){if(s){var l="return"===t?"return":"next";if(!o.k||r.done)return n(l,r);r=e[l](r).value}a(i.done?"return":"normal",r)},function(e){n("throw",e)})}catch(e){a("throw",e)}}function a(e,a){switch(e){case"return":t.resolve({value:a,done:!0});break;case"throw":t.reject(a);break;default:t.resolve({value:a,done:!1})}(t=t.next)?n(t.key,t.arg):r=null}this._invoke=function(e,a){return new Promise(function(i,o){var s={key:e,arg:a,resolve:i,reject:o,next:null};r?r=r.next=s:(t=r=s,n(e,a))})},"function"!=typeof e.return&&(this.return=void 0)}function wn(e){return new yn(e,0)}function kn(e){var t={},r=!1;function n(t,n){return r=!0,n=new Promise(function(r){r(e[t](n))}),{done:!1,value:new yn(n,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return r?(r=!1,e):n("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(r)throw r=!1,e;return n("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return r?(r=!1,e):n("return",e)}),t}function jn(e){var t,r,n,a=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);a--;){if(r&&null!=(t=e[r]))return t.call(e);if(n&&null!=(t=e[n]))return new Sn(t.call(e));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function Sn(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return Sn=function(e){this.s=e,this.n=e.next},Sn.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var r=this.s.return;return void 0===r?Promise.resolve({value:e,done:!0}):t(r.apply(this.s,arguments))},throw:function(e){var r=this.s.return;return void 0===r?Promise.reject(e):t(r.apply(this.s,arguments))}},new Sn(e)}xn.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},xn.prototype.next=function(e){return this._invoke("next",e)},xn.prototype.throw=function(e){return this._invoke("throw",e)},xn.prototype.return=function(e){return this._invoke("return",e)};const Cn=function*(e,t){let r=e.byteLength;if(!t||r<t)return void(yield e);let n,a=0;for(;a<r;)n=a+t,yield e.slice(a,n),a=n},Nn=function(){var e=bn(function*(e,t){var r,n=!1,a=!1;try{for(var i,o=jn(_n(e));n=!(i=yield wn(o.next())).done;n=!1){const e=i.value;yield*kn(jn(Cn(e,t)))}}catch(s){a=!0,r=s}finally{try{n&&null!=o.return&&(yield wn(o.return()))}finally{if(a)throw r}}});return function(t,r){return e.apply(this,arguments)}}(),_n=function(){var e=bn(function*(e){if(e[Symbol.asyncIterator])return void(yield*kn(jn(e)));const t=e.getReader();try{for(;;){const{done:e,value:r}=yield wn(t.read());if(e)break;yield r}}finally{yield wn(t.cancel())}});return function(t){return e.apply(this,arguments)}}(),An=(e,t,r,n)=>{const a=Nn(e,t);let i,o=0,s=e=>{i||(i=!0,n&&n(e))};return new ReadableStream({async pull(e){try{const{done:t,value:n}=await a.next();if(t)return s(),void e.close();let i=n.byteLength;if(r){let e=o+=i;r(e)}e.enqueue(new Uint8Array(n))}catch(t){throw s(t),t}},cancel:e=>(s(e),a.return())},{highWaterMark:2})},{isFunction:Tn}=wr,En=(e=>{let{Request:t,Response:r}=e;return{Request:t,Response:r}})(wr.global),{ReadableStream:On,TextEncoder:Pn}=wr.global,In=function(e){try{for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return!!e(...r)}catch(OX){return!1}},Mn=e=>{e=wr.merge.call({skipUndefined:!0},En,e);const{fetch:t,Request:r,Response:n}=e,a=t?Tn(t):"function"===typeof fetch,i=Tn(r),o=Tn(n);if(!a)return!1;const s=a&&Tn(On),l=a&&("function"===typeof Pn?(c=new Pn,e=>c.encode(e)):async e=>new Uint8Array(await new r(e).arrayBuffer()));var c;const d=i&&s&&In(()=>{let e=!1;const t=new r(Hr.origin,{body:new On,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),h=o&&s&&In(()=>wr.isReadableStream(new n("").body)),m={stream:h&&(e=>e.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!m[e]&&(m[e]=(t,r)=>{let n=t&&t[e];if(n)return n.call(t);throw new jr("Response type '".concat(e,"' is not supported"),jr.ERR_NOT_SUPPORT,r)})});const p=async(e,t)=>{const n=wr.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(wr.isBlob(e))return e.size;if(wr.isSpecCompliantForm(e)){const t=new r(Hr.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return wr.isArrayBufferView(e)||wr.isArrayBuffer(e)?e.byteLength:(wr.isURLSearchParams(e)&&(e+=""),wr.isString(e)?(await l(e)).byteLength:void 0)})(t):n};return async e=>{let{url:a,method:o,data:s,signal:l,cancelToken:c,timeout:f,onDownloadProgress:g,onUploadProgress:v,responseType:y,headers:b,withCredentials:x="same-origin",fetchOptions:w}=fn(e),k=t||fetch;y=y?(y+"").toLowerCase():"text";let j=vn([l,c&&c.toAbortSignal()],f),S=null;const C=j&&j.unsubscribe&&(()=>{j.unsubscribe()});let N;try{if(v&&d&&"get"!==o&&"head"!==o&&0!==(N=await p(b,s))){let e,t=new r(a,{method:"POST",body:s,duplex:"half"});if(wr.isFormData(s)&&(e=t.headers.get("content-type"))&&b.setContentType(e),t.body){const[e,r]=ln(N,sn(cn(v)));s=An(t.body,65536,e,r)}}wr.isString(x)||(x=x?"include":"omit");const t=i&&"credentials"in r.prototype,l=u(u({},w),{},{signal:j,method:o.toUpperCase(),headers:b.normalize().toJSON(),body:s,duplex:"half",credentials:t?x:void 0});S=i&&new r(a,l);let c=await(i?k(S,w):k(a,l));const f=h&&("stream"===y||"response"===y);if(h&&(g||f&&C)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=c[t]});const t=wr.toFiniteNumber(c.headers.get("content-length")),[r,a]=g&&ln(t,sn(cn(g),!0))||[];c=new n(An(c.body,65536,r,()=>{a&&a(),C&&C()}),e)}y=y||"text";let _=await m[wr.findKey(m,y)||"text"](c,e);return!f&&C&&C(),await new Promise((t,r)=>{nn(t,r,{data:_,headers:Zr.from(c.headers),status:c.status,statusText:c.statusText,config:e,request:S})})}catch(_){if(C&&C(),_&&"TypeError"===_.name&&/Load failed|fetch/i.test(_.message))throw Object.assign(new jr("Network Error",jr.ERR_NETWORK,e,S),{cause:_.cause||_});throw jr.from(_,_&&_.code,e,S)}}},Rn=new Map,Dn=e=>{let t=e&&e.env||{};const{fetch:r,Request:n,Response:a}=t,i=[n,a,r];let o,s,l=i.length,c=Rn;for(;l--;)o=i[l],s=c.get(o),void 0===s&&c.set(o,s=l?new Map:Mn(t)),c=s;return s},Ln=(Dn(),{http:null,xhr:gn,fetch:{get:Dn}});wr.forEach(Ln,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(OX){}Object.defineProperty(e,"adapterName",{value:t})}});const zn=e=>"- ".concat(e),qn=e=>wr.isFunction(e)||null===e||!1===e;const Bn={getAdapter:function(e,t){e=wr.isArray(e)?e:[e];const{length:r}=e;let n,a;const i={};for(let o=0;o<r;o++){let r;if(n=e[o],a=n,!qn(n)&&(a=Ln[(r=String(n)).toLowerCase()],void 0===a))throw new jr("Unknown adapter '".concat(r,"'"));if(a&&(wr.isFunction(a)||(a=a.get(t))))break;i[r||"#"+o]=a}if(!a){const e=Object.entries(i).map(e=>{let[t,r]=e;return"adapter ".concat(t," ")+(!1===r?"is not supported by the environment":"is not available in the build")});let t=r?e.length>1?"since :\n"+e.map(zn).join("\n"):" "+zn(e[0]):"as no adapter specified";throw new jr("There is no suitable adapter to dispatch the request "+t,"ERR_NOT_SUPPORT")}return a},adapters:Ln};function Fn(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new rn(null,e)}function Un(e){Fn(e),e.headers=Zr.from(e.headers),e.data=en.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Bn.getAdapter(e.adapter||Vr.adapter,e)(e).then(function(t){return Fn(e),t.data=en.call(e,e.transformResponse,t),t.headers=Zr.from(t.headers),t},function(t){return tn(t)||(Fn(e),t&&t.response&&(t.response.data=en.call(e,e.transformResponse,t.response),t.response.headers=Zr.from(t.response.headers))),Promise.reject(t)})}const Hn="1.13.4",Wn={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Wn[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const Kn={};Wn.transitional=function(e,t,r){function n(e,t){return"[Axios v"+Hn+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return(r,a,i)=>{if(!1===e)throw new jr(n(a," has been removed"+(t?" in "+t:"")),jr.ERR_DEPRECATED);return t&&!Kn[a]&&(Kn[a]=!0,console.warn(n(a," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,a,i)}},Wn.spelling=function(e){return(t,r)=>(console.warn("".concat(r," is likely a misspelling of ").concat(e)),!0)};const Vn={assertOptions:function(e,t,r){if("object"!==typeof e)throw new jr("options must be an object",jr.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let a=n.length;for(;a-- >0;){const i=n[a],o=t[i];if(o){const t=e[i],r=void 0===t||o(t,i,e);if(!0!==r)throw new jr("option "+i+" must be "+r,jr.ERR_BAD_OPTION_VALUE);continue}if(!0!==r)throw new jr("Unknown option "+i,jr.ERR_BAD_OPTION)}},validators:Wn},Gn=Vn.validators;class Qn{constructor(e){this.defaults=e||{},this.interceptors={request:new Rr,response:new Rr}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{r.stack?t&&!String(r.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(r.stack+="\n"+t):r.stack=t}catch(OX){}}throw r}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=pn(this.defaults,t);const{transitional:r,paramsSerializer:n,headers:a}=t;void 0!==r&&Vn.assertOptions(r,{silentJSONParsing:Gn.transitional(Gn.boolean),forcedJSONParsing:Gn.transitional(Gn.boolean),clarifyTimeoutError:Gn.transitional(Gn.boolean)},!1),null!=n&&(wr.isFunction(n)?t.paramsSerializer={serialize:n}:Vn.assertOptions(n,{encode:Gn.function,serialize:Gn.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Vn.assertOptions(t,{baseUrl:Gn.spelling("baseURL"),withXsrfToken:Gn.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i=a&&wr.merge(a.common,a[t.method]);a&&wr.forEach(["delete","get","head","post","put","patch","common"],e=>{delete a[e]}),t.headers=Zr.concat(i,a);const o=[];let s=!0;this.interceptors.request.forEach(function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(s=s&&e.synchronous,o.unshift(e.fulfilled,e.rejected))});const l=[];let c;this.interceptors.response.forEach(function(e){l.push(e.fulfilled,e.rejected)});let u,d=0;if(!s){const e=[Un.bind(this),void 0];for(e.unshift(...o),e.push(...l),u=e.length,c=Promise.resolve(t);d<u;)c=c.then(e[d++],e[d++]);return c}u=o.length;let h=t;for(;d<u;){const e=o[d++],t=o[d++];try{h=e(h)}catch(m){t.call(this,m);break}}try{c=Un.call(this,h)}catch(m){return Promise.reject(m)}for(d=0,u=l.length;d<u;)c=c.then(l[d++],l[d++]);return c}getUri(e){return Mr(hn((e=pn(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}wr.forEach(["delete","get","head","options"],function(e){Qn.prototype[e]=function(t,r){return this.request(pn(r||{},{method:e,url:t,data:(r||{}).data}))}}),wr.forEach(["post","put","patch"],function(e){function t(t){return function(r,n,a){return this.request(pn(a||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}Qn.prototype[e]=t(),Qn.prototype[e+"Form"]=t(!0)});const Yn=Qn;class $n{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const r=this;this.promise.then(e=>{if(!r._listeners)return;let t=r._listeners.length;for(;t-- >0;)r._listeners[t](e);r._listeners=null}),this.promise.then=e=>{let t;const n=new Promise(e=>{r.subscribe(e),t=e}).then(e);return n.cancel=function(){r.unsubscribe(t)},n},e(function(e,n,a){r.reason||(r.reason=new rn(e,n,a),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;const t=new $n(function(t){e=t});return{token:t,cancel:e}}}const Jn=$n;const Xn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Xn).forEach(e=>{let[t,r]=e;Xn[r]=t});const Zn=Xn;const ea=function e(t){const r=new Yn(t),n=Rt(Yn.prototype.request,r);return wr.extend(n,Yn.prototype,r,{allOwnKeys:!0}),wr.extend(n,r,null,{allOwnKeys:!0}),n.create=function(r){return e(pn(t,r))},n}(Vr);ea.Axios=Yn,ea.CanceledError=rn,ea.CancelToken=Jn,ea.isCancel=tn,ea.VERSION=Hn,ea.toFormData=Ar,ea.AxiosError=jr,ea.Cancel=ea.CanceledError,ea.all=function(e){return Promise.all(e)},ea.spread=function(e){return function(t){return e.apply(null,t)}},ea.isAxiosError=function(e){return wr.isObject(e)&&!0===e.isAxiosError},ea.mergeConfig=pn,ea.AxiosHeaders=Zr,ea.formToJSON=e=>Wr(wr.isHTMLForm(e)?new FormData(e):e),ea.getAdapter=Bn.getAdapter,ea.HttpStatusCode=Zn,ea.default=ea;const ta=ea;var ra=__webpack_require__(579);const na=()=>{const e=je();return(0,ra.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-6",children:(0,ra.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full","data-testid":"landing-container",children:[(0,ra.jsxs)("div",{className:"text-center mb-8",children:[(0,ra.jsx)("h1",{className:"text-4xl font-bold text-blue-600 mb-2","data-testid":"landing-title",children:"BlueAI Assessment"}),(0,ra.jsx)("p",{className:"text-gray-600",children:"AI-Powered Assessment Platform"})]}),(0,ra.jsxs)("div",{className:"space-y-4",children:[(0,ra.jsx)("button",{"data-testid":"student-join-btn",onClick:()=>e("/join"),className:"w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Student Join"}),(0,ra.jsx)("button",{"data-testid":"teacher-login-btn",onClick:()=>e("/teacher/login"),className:"w-full bg-white text-blue-600 py-3 px-6 rounded-lg font-medium border-2 border-blue-600 hover:bg-blue-50 transition-colors",children:"Teacher Login"})]}),(0,ra.jsxs)("p",{className:"text-xs text-gray-500 text-center mt-6",children:["Students: Join with your assessment code",(0,ra.jsx)("br",{}),"Teachers: Login to create and manage assessments"]})]})})},aa={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_BACKEND_URL+"/api",ia=()=>{const e=je(),t=xe(),n=(0,r.useRef)(!1);return(0,r.useEffect)(()=>{if(n.current)return;n.current=!0;const r=t.hash;console.log("[AuthCallback] Processing authentication callback"),console.log("[AuthCallback] Hash:",r);const a=new URLSearchParams(r.substring(1)).get("session_id");if(!a)return console.error("[AuthCallback] No session_id found in URL hash"),void e("/teacher/login",{state:{error:"Authentication failed. Please try again."}});console.log("[AuthCallback] Session ID found:",a.substring(0,10)+"...");(async()=>{try{console.log("[AuthCallback] Calling backend /auth/session endpoint");const t=await ta.post("".concat(aa,"/auth/session"),{session_id:a});console.log("[AuthCallback] Authentication successful, user:",t.data.email),e("/teacher/dashboard",{state:{user:t.data},replace:!0})}catch(i){var t,r,n;console.error("[AuthCallback] Session processing error:",i),console.error("[AuthCallback] Error details:",(null===(t=i.response)||void 0===t?void 0:t.data)||i.message);const a=(null===(r=i.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.detail)||"Authentication failed. Please try logging in again.";e("/teacher/login",{state:{error:a}})}})()},[t,e]),(0,ra.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:(0,ra.jsxs)("div",{className:"text-center",children:[(0,ra.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,ra.jsx)("div",{className:"text-lg text-gray-700",children:"Authenticating with Google..."}),(0,ra.jsx)("div",{className:"text-sm text-gray-500 mt-2",children:"Please wait"})]})})},oa={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_BACKEND_URL+"/api",sa=()=>{const[e,t]=(0,r.useState)(!1),[n,a]=(0,r.useState)(""),[i,o]=(0,r.useState)(""),[s,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[d,h]=(0,r.useState)(!1),[m,p]=(0,r.useState)(""),[f,g]=(0,r.useState)(!1),[v,y]=(0,r.useState)(""),[b,x]=(0,r.useState)(!1),w=je(),k=xe();(0,r.useEffect)(()=>{var e;null!==(e=k.state)&&void 0!==e&&e.error&&(p(k.state.error),w("/teacher/login",{replace:!0}))},[k.state,w]);const j=async e=>{e.preventDefault(),h(!0),p("");try{await ta.post("".concat(oa,"/auth/forgot-password"),{email:v}),x(!0),h(!1)}catch(t){p("Failed to send reset email"),h(!1)}};return f?(0,ra.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-6",children:(0,ra.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full","data-testid":"forgot-password-container",children:[(0,ra.jsx)("h1",{className:"text-3xl font-bold text-blue-600 mb-2 text-center","data-testid":"forgot-password-title",children:"Reset Password"}),b?(0,ra.jsxs)("div",{className:"text-center py-6",children:[(0,ra.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,ra.jsx)("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),(0,ra.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Check Your Email"}),(0,ra.jsx)("p",{className:"text-gray-600 mb-4",children:"If an account exists with that email, we've sent a password reset link."}),(0,ra.jsx)("button",{onClick:()=>{g(!1),x(!1)},className:"text-blue-600 hover:text-blue-700 font-medium","data-testid":"back-to-login-btn",children:"\u2190 Back to Login"})]}):(0,ra.jsxs)("form",{onSubmit:j,className:"space-y-4 mt-6",children:[(0,ra.jsx)("p",{className:"text-gray-600 text-sm",children:"Enter your email address and we'll send you a link to reset your password."}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),(0,ra.jsx)("input",{"data-testid":"reset-email-input",type:"email",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:v,onChange:e=>y(e.target.value),required:!0,placeholder:"your.email@example.com"})]}),m&&(0,ra.jsx)("div",{className:"bg-red-50 text-red-700 p-3 rounded-lg text-sm","data-testid":"reset-error",children:m}),(0,ra.jsx)("button",{"data-testid":"send-reset-btn",type:"submit",className:"w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50",disabled:d,children:d?"Sending...":"Send Reset Link"}),(0,ra.jsx)("button",{type:"button",onClick:()=>g(!1),className:"w-full text-blue-600 hover:text-blue-700 text-sm font-medium","data-testid":"cancel-reset-btn",children:"Cancel"})]})]})}):(0,ra.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-6",children:(0,ra.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full","data-testid":"login-container",children:[(0,ra.jsxs)("div",{className:"text-center mb-6",children:[(0,ra.jsx)("h1",{className:"text-4xl font-bold text-blue-600 mb-2","data-testid":"login-title",children:"BlueAI"}),(0,ra.jsx)("p",{className:"text-gray-600",children:"Teacher Portal"})]}),(0,ra.jsxs)("div",{className:"flex border-b border-gray-200 mb-6",children:[(0,ra.jsx)("button",{onClick:()=>{t(!1),p("")},className:"flex-1 pb-3 font-medium transition-colors ".concat(e?"text-gray-500 hover:text-gray-700":"text-blue-600 border-b-2 border-blue-600"),"data-testid":"signin-tab",children:"Sign In"}),(0,ra.jsx)("button",{onClick:()=>{t(!0),p("")},className:"flex-1 pb-3 font-medium transition-colors ".concat(e?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),"data-testid":"signup-tab",children:"Sign Up"})]}),(0,ra.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),h(!0),p("");try{const t=e?"/auth/register":"/auth/login",r=e?{email:n,password:i,name:s,school_name:c}:{email:n,password:i},a=await ta.post("".concat(oa).concat(t),r);w("/teacher/dashboard",{state:{user:a.data}})}catch(o){var r,a;p((null===(r=o.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.detail)||"Authentication failed"),h(!1)}},className:"space-y-4",children:[e&&(0,ra.jsxs)(ra.Fragment,{children:[(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),(0,ra.jsx)("input",{"data-testid":"name-input",type:"text",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:s,onChange:e=>l(e.target.value),required:!0,placeholder:"John Smith"})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"School / Organisation (Optional)"}),(0,ra.jsx)("input",{"data-testid":"school-input",type:"text",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:c,onChange:e=>u(e.target.value),placeholder:"Greenfield Academy"})]})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),(0,ra.jsx)("input",{"data-testid":"email-input",type:"email",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:n,onChange:e=>a(e.target.value),required:!0,placeholder:"your.email@example.com"})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),(0,ra.jsx)("input",{"data-testid":"password-input",type:"password",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:i,onChange:e=>o(e.target.value),required:!0,placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",minLength:6})]}),!e&&(0,ra.jsx)("div",{className:"text-right",children:(0,ra.jsx)("button",{type:"button",onClick:()=>g(!0),className:"text-sm text-blue-600 hover:text-blue-700 font-medium","data-testid":"forgot-password-link",children:"Forgot Password?"})}),m&&(0,ra.jsx)("div",{className:"bg-red-50 text-red-700 p-3 rounded-lg text-sm","data-testid":"auth-error",children:m}),(0,ra.jsx)("button",{"data-testid":"email-auth-btn",type:"submit",className:"w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50",disabled:d,children:d?"Please wait...":e?"Create Account":"Sign In"})]}),(0,ra.jsxs)("div",{className:"relative my-6",children:[(0,ra.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,ra.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,ra.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,ra.jsx)("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with"})})]}),(0,ra.jsxs)("button",{"data-testid":"google-login-btn",onClick:()=>{const e=window.location.origin;console.log("[OAuth] Redirecting to auth with redirect:",e),window.location.href="https://auth.emergentagent.com/?redirect=".concat(encodeURIComponent(e))},className:"w-full bg-white text-gray-700 py-3 px-6 rounded-lg font-medium border-2 border-gray-300 hover:bg-gray-50 transition-colors flex items-center justify-center gap-2",children:[(0,ra.jsxs)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[(0,ra.jsx)("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,ra.jsx)("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,ra.jsx)("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,ra.jsx)("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Sign in with Google"]}),(0,ra.jsxs)("p",{className:"text-xs text-gray-500 text-center mt-6",children:[e?"Already have an account?":"Don't have an account?"," ",(0,ra.jsx)("button",{type:"button",onClick:()=>{t(!e),p("")},className:"text-blue-600 hover:text-blue-700 font-medium","data-testid":"toggle-auth-mode",children:e?"Sign In":"Sign Up"})]})]})})},la={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_BACKEND_URL+"/api",ca=()=>{const[e,t]=(0,r.useState)(""),[n,a]=(0,r.useState)(""),[i,o]=(0,r.useState)(!1),[s,l]=(0,r.useState)(""),c=je(),[u,d]=(0,r.useState)(!1),[h,m]=(0,r.useState)(null),[p,f]=(0,r.useState)("");return(0,ra.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-6",children:(0,ra.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full","data-testid":"join-container",children:[(0,ra.jsx)("h1",{className:"text-3xl font-bold text-blue-600 mb-2 text-center","data-testid":"join-title",children:"Join Assessment"}),(0,ra.jsx)("p",{className:"text-gray-600 mb-6 text-center",children:"Enter your details to begin"}),(0,ra.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),o(!0),l("");try{const t={join_code:e.toUpperCase(),student_name:n};if(h&&p){t.student_id=p;const e=h.students.find(e=>e.id===p);e&&(t.student_name=e.display_name)}const r=await ta.post("".concat(la,"/public/join"),t),a=r.data.attempt_id,i=r.data.is_enhanced||!1;c(i?"/enhanced-attempt/".concat(a):"/attempt/".concat(a))}catch(i){var r,a;l((null===(r=i.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.detail)||"Failed to join assessment"),o(!1)}},className:"space-y-4",children:[(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2","data-testid":"code-label",children:"Assessment Code"}),(0,ra.jsxs)("div",{className:"relative",children:[(0,ra.jsx)("input",{"data-testid":"code-input",type:"text",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 uppercase",value:e,onChange:e=>(async e=>{if(t(e.toUpperCase()),m(null),f(""),a(""),6===e.length){d(!0);try{const t=await ta.get("".concat(la,"/public/assessment/").concat(e.toUpperCase(),"/class-roster"));t.data.has_roster&&t.data.students.length>0&&m(t.data)}catch(r){console.log("Not a class-linked assessment or invalid code")}d(!1)}})(e.target.value),required:!0,maxLength:6,placeholder:"e.g., ABC123"}),u&&(0,ra.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:(0,ra.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"})})]})]}),h&&(0,ra.jsxs)("div",{children:[(0,ra.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Select Your Name (",h.class_name,")"]}),(0,ra.jsxs)("select",{"data-testid":"student-select",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:p,onChange:e=>{f(e.target.value);const t=h.students.find(t=>t.id===e.target.value);t&&a(t.display_name)},required:!0,children:[(0,ra.jsx)("option",{value:"",children:"-- Select your name --"}),h.students.map(e=>(0,ra.jsx)("option",{value:e.id,children:e.display_name},e.id))]}),(0,ra.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Can't find your name? Contact your teacher."})]}),!h&&(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2","data-testid":"name-label",children:"Your Name"}),(0,ra.jsx)("input",{"data-testid":"name-input",type:"text",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:n,onChange:e=>a(e.target.value),required:!0,placeholder:"Enter your full name"})]}),s&&(0,ra.jsx)("div",{className:"bg-red-50 text-red-700 p-3 rounded-lg text-sm","data-testid":"join-error",children:s}),(0,ra.jsx)("button",{"data-testid":"join-submit-btn",type:"submit",className:"w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50",disabled:i||h&&!p,children:i?"Joining...":"Join Assessment"})]})]})})},ua=e=>{var t;let{onInsert:n,onClose:a,compact:i=!1}=e;const[o,s]=(0,r.useState)("basic"),[l,c]=(0,r.useState)([]),u=e=>{(e=>{const t=[e,...l.filter(t=>t.value!==e.value)].slice(0,12);c(t)})(e),n(e)},d={basic:[{label:"7",value:"7"},{label:"8",value:"8"},{label:"9",value:"9"},{label:"\xf7",value:"\\div",latex:!0},{label:"(",value:"("},{label:")",value:")"},{label:"4",value:"4"},{label:"5",value:"5"},{label:"6",value:"6"},{label:"\xd7",value:"\\times",latex:!0},{label:"+",value:"+"},{label:"\u2212",value:"-"},{label:"1",value:"1"},{label:"2",value:"2"},{label:"3",value:"3"},{label:"=",value:"="},{label:"<",value:"<"},{label:">",value:">"},{label:"0",value:"0"},{label:".",value:"."},{label:"\xb1",value:"\\pm",latex:!0},{label:"\u2260",value:"\\neq",latex:!0},{label:"\u2264",value:"\\le",latex:!0},{label:"\u2265",value:"\\ge",latex:!0}],algebra:[{label:"x",value:"x"},{label:"y",value:"y"},{label:"z",value:"z"},{label:"a",value:"a"},{label:"b",value:"b"},{label:"c",value:"c"},{label:"x\xb2",value:"^2",latex:!0},{label:"x\u207f",value:"^{}",latex:!0,cursor:-1},{label:"x\u2081",value:"_1",latex:!0},{label:"x\u2099",value:"_{}",latex:!0,cursor:-1},{label:"\u221a",value:"\\sqrt{}",latex:!0,cursor:-1},{label:"\u221b",value:"\\sqrt[3]{}",latex:!0,cursor:-1},{label:"a/b",value:"\\frac{}{}",latex:!0,cursor:-3},{label:"|x|",value:"|{}|",cursor:-2},{label:"\u221e",value:"\\infty",latex:!0},{label:"\u2211",value:"\\sum",latex:!0}],trig:[{label:"sin",value:"\\sin("},{label:"cos",value:"\\cos("},{label:"tan",value:"\\tan("},{label:"sin\u207b\xb9",value:"\\sin^{-1}("},{label:"cos\u207b\xb9",value:"\\cos^{-1}("},{label:"tan\u207b\xb9",value:"\\tan^{-1}("},{label:"\u03c0",value:"\\pi",latex:!0},{label:"\u03b8",value:"\\theta",latex:!0},{label:"\u03b1",value:"\\alpha",latex:!0},{label:"\u03b2",value:"\\beta",latex:!0},{label:"\xb0",value:"^\\circ",latex:!0},{label:"log",value:"\\log("},{label:"ln",value:"\\ln("},{label:"e",value:"e"}],science:[{label:"\xd710\u207f",value:"\\times 10^{}",latex:!0,cursor:-1},{label:"m/s",value:"\\text{ m/s}",latex:!0},{label:"m/s\xb2",value:"\\text{ m/s}^2",latex:!0},{label:"kg",value:"\\text{ kg}",latex:!0},{label:"N",value:"\\text{ N}",latex:!0},{label:"J",value:"\\text{ J}",latex:!0},{label:"W",value:"\\text{ W}",latex:!0},{label:"mol",value:"\\text{ mol}",latex:!0},{label:"\xb0C",value:"^\\circ\\text{C}",latex:!0},{label:"H\u2082O",value:"H_2O",latex:!0},{label:"CO\u2082",value:"CO_2",latex:!0},{label:"\u2192",value:"\\rightarrow",latex:!0},{label:"\u21cc",value:"\\rightleftharpoons",latex:!0},{label:"\u0394",value:"\\Delta",latex:!0}],greek:[{label:"\u03b1",value:"\\alpha",latex:!0,tooltip:"alpha"},{label:"\u03b2",value:"\\beta",latex:!0,tooltip:"beta"},{label:"\u03b3",value:"\\gamma",latex:!0,tooltip:"gamma"},{label:"\u03b4",value:"\\delta",latex:!0,tooltip:"delta"},{label:"\u03b5",value:"\\epsilon",latex:!0,tooltip:"epsilon"},{label:"\u03b8",value:"\\theta",latex:!0,tooltip:"theta"},{label:"\u03bb",value:"\\lambda",latex:!0,tooltip:"lambda"},{label:"\u03bc",value:"\\mu",latex:!0,tooltip:"mu"},{label:"\u03c0",value:"\\pi",latex:!0,tooltip:"pi"},{label:"\u03c1",value:"\\rho",latex:!0,tooltip:"rho"},{label:"\u03c3",value:"\\sigma",latex:!0,tooltip:"sigma"},{label:"\u03c6",value:"\\phi",latex:!0,tooltip:"phi"},{label:"\u03c9",value:"\\omega",latex:!0,tooltip:"omega"},{label:"\u0393",value:"\\Gamma",latex:!0,tooltip:"Gamma"},{label:"\u0394",value:"\\Delta",latex:!0,tooltip:"Delta"},{label:"\u0398",value:"\\Theta",latex:!0,tooltip:"Theta"},{label:"\u039b",value:"\\Lambda",latex:!0,tooltip:"Lambda"},{label:"\u03a3",value:"\\Sigma",latex:!0,tooltip:"Sigma"},{label:"\u03a6",value:"\\Phi",latex:!0,tooltip:"Phi"},{label:"\u03a9",value:"\\Omega",latex:!0,tooltip:"Omega"}],calculus:[{label:"\u222b",value:"\\int",latex:!0,tooltip:"Integral"},{label:"\u222b\u2090\u1d47",value:"\\int_{}^{}",latex:!0,cursor:-3,tooltip:"Definite integral"},{label:"d/dx",value:"\\frac{d}{dx}",latex:!0,tooltip:"Derivative"},{label:"\u2202/\u2202x",value:"\\frac{\\partial}{\\partial x}",latex:!0,tooltip:"Partial derivative"},{label:"lim",value:"\\lim_{x \\to }",latex:!0,cursor:-1,tooltip:"Limit"},{label:"\u2211",value:"\\sum",latex:!0,tooltip:"Summation"},{label:"\u2211\u1d62\u208c\u2099",value:"\\sum_{i=}^{}",latex:!0,cursor:-3,tooltip:"Summation with bounds"},{label:"\u220f",value:"\\prod",latex:!0,tooltip:"Product"},{label:"\u221e",value:"\\infty",latex:!0,tooltip:"Infinity"},{label:"\u2207",value:"\\nabla",latex:!0,tooltip:"Nabla/gradient"},{label:"\u2202",value:"\\partial",latex:!0,tooltip:"Partial"},{label:"f'",value:"f'",tooltip:"Prime notation"},{label:"f''",value:"f''",tooltip:"Double prime"},{label:"\u2192",value:"\\to",latex:!0,tooltip:"Approaches"}],geometry:[{label:"\u2220",value:"\\angle",latex:!0,tooltip:"Angle"},{label:"\xb0",value:"^\\circ",latex:!0,tooltip:"Degree"},{label:"\u22a5",value:"\\perp",latex:!0,tooltip:"Perpendicular"},{label:"\u2225",value:"\\parallel",latex:!0,tooltip:"Parallel"},{label:"\u25b3",value:"\\triangle",latex:!0,tooltip:"Triangle"},{label:"\u25ef",value:"\\circ",latex:!0,tooltip:"Circle"},{label:"\u2245",value:"\\cong",latex:!0,tooltip:"Congruent"},{label:"\u223c",value:"\\sim",latex:!0,tooltip:"Similar"},{label:"\u2322",value:"\\frown",latex:!0,tooltip:"Arc"},{label:"\u221f",value:"\\sqcap",latex:!0,tooltip:"Right angle"},{label:"\u25a1",value:"\\square",latex:!0,tooltip:"Square"},{label:"\u20d7",value:"\\vec{}",latex:!0,cursor:-1,tooltip:"Vector"},{label:"|AB|",value:"|AB|",tooltip:"Length/Distance"},{label:"\u03c0",value:"\\pi",latex:!0,tooltip:"Pi"}]},h=e=>{e.latex?u("$".concat(e.value,"$"),e.cursor):u(e.value,e.cursor)},m=[{id:"basic",label:"123",title:"Numbers & Basic"},{id:"algebra",label:"x\xb2",title:"Algebra"},{id:"greek",label:"\u03b1\u03b2\u03b3",title:"Greek Letters"},{id:"calculus",label:"\u222b",title:"Calculus"},{id:"geometry",label:"\u2220",title:"Geometry"},{id:"trig",label:"sin",title:"Trig & Functions"},{id:"science",label:"H\u2082O",title:"Science & Units"}];return l.length>0&&m.unshift({id:"recent",label:"\ud83d\udd50",title:"Recently Used"}),i?(0,ra.jsxs)("div",{className:"bg-white border border-gray-300 rounded-lg p-3 shadow-lg",children:[(0,ra.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,ra.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Maths Symbols"}),(0,ra.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600","aria-label":"Close keyboard",children:(0,ra.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),(0,ra.jsx)("div",{className:"grid grid-cols-6 gap-1",children:d.algebra.slice(0,12).map((e,t)=>(0,ra.jsx)("button",{onClick:()=>h(e),className:"px-2 py-2 bg-gray-50 hover:bg-blue-50 rounded text-sm font-medium transition-colors",title:e.tooltip||e.value,children:e.label},t))})]}):(0,ra.jsxs)("div",{className:"bg-white border border-gray-300 rounded-lg shadow-lg",children:[(0,ra.jsxs)("div",{className:"flex justify-between items-center p-3 border-b",children:[(0,ra.jsx)("h4",{className:"font-medium text-gray-900",children:"Maths Keyboard"}),(0,ra.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600","aria-label":"Close keyboard",children:(0,ra.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),(0,ra.jsx)("div",{className:"flex border-b bg-gray-50",children:m.map(e=>(0,ra.jsx)("button",{onClick:()=>s(e.id),className:"flex-1 px-3 py-2 text-sm font-medium border-b-2 ".concat(o===e.id?"border-blue-600 text-blue-600 bg-white":"border-transparent text-gray-600 hover:text-blue-600"),title:e.title,children:e.label},e.id))}),(0,ra.jsx)("div",{className:"p-3",children:(0,ra.jsx)("div",{className:"grid gap-1 ".concat("basic"===o?"grid-cols-6":"grid-cols-7"),children:null===(t="recent"===o?l:d[o])||void 0===t?void 0:t.map((e,t)=>(0,ra.jsxs)("button",{onClick:()=>h(e),className:"px-3 py-2 bg-gray-50 hover:bg-blue-50 rounded font-medium transition-colors text-center relative group",title:e.tooltip||e.value,children:[e.label,e.tooltip&&(0,ra.jsx)("span",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-1 px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none",children:e.tooltip})]},t))})}),(0,ra.jsxs)("div",{className:"p-3 bg-gray-50 border-t text-xs text-gray-600 flex justify-between items-center",children:[(0,ra.jsxs)("span",{children:[(0,ra.jsx)("strong",{children:"Tip:"})," Hover over symbols for descriptions. Recently used symbols appear in \ud83d\udd50 tab."]}),l.length>0&&(0,ra.jsx)("button",{onClick:()=>c([]),className:"text-blue-600 hover:text-blue-700 font-medium",children:"Clear Recent"})]})]})},da=e=>{let{mode:t="basic",onClose:n}=e;const[a,i]=(0,r.useState)("0"),[o,s]=(0,r.useState)(null),[l,c]=(0,r.useState)(null),[u,d]=(0,r.useState)(!1),[h,m]=(0,r.useState)("scientific"===t),p=e=>{u?(i(String(e)),d(!1)):i("0"===a?String(e):a+e)},f=e=>{const t=parseFloat(a);if(null===o)s(t);else if(l){const e=g(o||0,t,l);i(String(e)),s(e)}d(!0),c(e)},g=(e,t,r)=>{switch(r){case"+":return e+t;case"-":return e-t;case"*":return e*t;case"/":return e/t;case"%":return e/100*t;case"^":return Math.pow(e,t);default:return t}},v=e=>{const t=parseFloat(a);let r;switch(e){case"sin":r=Math.sin(t*(Math.PI/180));break;case"cos":r=Math.cos(t*(Math.PI/180));break;case"tan":r=Math.tan(t*(Math.PI/180));break;case"log":r=Math.log10(t);break;case"ln":r=Math.log(t);break;case"sqrt":r=Math.sqrt(t);break;case"square":r=t*t;break;case"pi":r=Math.PI;break;case"e":r=Math.E;break;case"exp":r=Math.exp(t);break;case"inv":r=1/t;break;case"abs":r=Math.abs(t);break;case"fact":r=y(t);break;default:return}i(String(r)),d(!0)},y=e=>{if(e<0)return NaN;if(0===e||1===e)return 1;let t=1;for(let r=2;r<=e;r++)t*=r;return t},b=e=>{let{children:t,onClick:r,className:n="",colSpan:a=1}=e;return(0,ra.jsx)("button",{onClick:r,className:"\n        ".concat(2===a?"col-span-2":"","\n        px-4 py-3 rounded font-medium transition-colors\n        ").concat(n||"bg-gray-100 hover:bg-gray-200 text-gray-900","\n      "),children:t})};return(0,ra.jsxs)("div",{className:"bg-white border border-gray-300 rounded-lg shadow-lg w-full max-w-sm",children:[(0,ra.jsxs)("div",{className:"flex justify-between items-center p-3 border-b bg-gray-50",children:[(0,ra.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ra.jsx)("h4",{className:"font-medium text-gray-900",children:"Calculator"}),"scientific"===t&&(0,ra.jsx)("button",{onClick:()=>m(!h),className:"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded hover:bg-blue-200",children:h?"Basic":"Scientific"})]}),(0,ra.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600","aria-label":"Close calculator",children:(0,ra.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),(0,ra.jsx)("div",{className:"p-4 bg-gray-900 text-white",children:(0,ra.jsx)("div",{className:"text-right text-3xl font-mono break-all",children:a})}),h&&"scientific"===t&&(0,ra.jsx)("div",{className:"p-3 bg-gray-50 border-b",children:(0,ra.jsxs)("div",{className:"grid grid-cols-5 gap-1",children:[(0,ra.jsx)(b,{onClick:()=>v("sin"),className:"bg-blue-100 hover:bg-blue-200 text-blue-900 text-sm",children:"sin"}),(0,ra.jsx)(b,{onClick:()=>v("cos"),className:"bg-blue-100 hover:bg-blue-200 text-blue-900 text-sm",children:"cos"}),(0,ra.jsx)(b,{onClick:()=>v("tan"),className:"bg-blue-100 hover:bg-blue-200 text-blue-900 text-sm",children:"tan"}),(0,ra.jsx)(b,{onClick:()=>v("log"),className:"bg-blue-100 hover:bg-blue-200 text-blue-900 text-sm",children:"log"}),(0,ra.jsx)(b,{onClick:()=>v("ln"),className:"bg-blue-100 hover:bg-blue-200 text-blue-900 text-sm",children:"ln"}),(0,ra.jsx)(b,{onClick:()=>v("sqrt"),className:"bg-blue-100 hover:bg-blue-200 text-blue-900 text-sm",children:"\u221a"}),(0,ra.jsx)(b,{onClick:()=>v("square"),className:"bg-blue-100 hover:bg-blue-200 text-blue-900 text-sm",children:"x\xb2"}),(0,ra.jsx)(b,{onClick:()=>f("^"),className:"bg-blue-100 hover:bg-blue-200 text-blue-900 text-sm",children:"x\u02b8"}),(0,ra.jsx)(b,{onClick:()=>v("pi"),className:"bg-blue-100 hover:bg-blue-200 text-blue-900 text-sm",children:"\u03c0"}),(0,ra.jsx)(b,{onClick:()=>v("e"),className:"bg-blue-100 hover:bg-blue-200 text-blue-900 text-sm",children:"e"})]})}),(0,ra.jsx)("div",{className:"p-3",children:(0,ra.jsxs)("div",{className:"grid grid-cols-4 gap-2",children:[(0,ra.jsx)(b,{onClick:()=>{i("0"),d(!1)},className:"bg-red-100 hover:bg-red-200 text-red-900",children:"CE"}),(0,ra.jsx)(b,{onClick:()=>{i("0"),s(null),c(null),d(!1)},className:"bg-red-100 hover:bg-red-200 text-red-900",children:"C"}),(0,ra.jsx)(b,{onClick:()=>{const e=parseFloat(a);i(String(-1*e))},className:"bg-gray-200 hover:bg-gray-300 text-gray-900",children:"\xb1"}),(0,ra.jsx)(b,{onClick:()=>f("/"),className:"bg-orange-100 hover:bg-orange-200 text-orange-900",children:"\xf7"}),(0,ra.jsx)(b,{onClick:()=>p(7),children:"7"}),(0,ra.jsx)(b,{onClick:()=>p(8),children:"8"}),(0,ra.jsx)(b,{onClick:()=>p(9),children:"9"}),(0,ra.jsx)(b,{onClick:()=>f("*"),className:"bg-orange-100 hover:bg-orange-200 text-orange-900",children:"\xd7"}),(0,ra.jsx)(b,{onClick:()=>p(4),children:"4"}),(0,ra.jsx)(b,{onClick:()=>p(5),children:"5"}),(0,ra.jsx)(b,{onClick:()=>p(6),children:"6"}),(0,ra.jsx)(b,{onClick:()=>f("-"),className:"bg-orange-100 hover:bg-orange-200 text-orange-900",children:"\u2212"}),(0,ra.jsx)(b,{onClick:()=>p(1),children:"1"}),(0,ra.jsx)(b,{onClick:()=>p(2),children:"2"}),(0,ra.jsx)(b,{onClick:()=>p(3),children:"3"}),(0,ra.jsx)(b,{onClick:()=>f("+"),className:"bg-orange-100 hover:bg-orange-200 text-orange-900",children:"+"}),(0,ra.jsx)(b,{onClick:()=>p(0),colSpan:2,children:"0"}),(0,ra.jsx)(b,{onClick:()=>{u?(i("0."),d(!1)):-1===a.indexOf(".")&&i(a+".")},children:"."}),(0,ra.jsx)(b,{onClick:()=>f("="),className:"bg-blue-600 hover:bg-blue-700 text-white",children:"="})]})}),(0,ra.jsxs)("div",{className:"p-3 bg-gray-50 border-t text-xs text-gray-600",children:[(0,ra.jsx)("strong",{children:"Note:"})," Calculator results are for reference. Show your working in the answer box."]})]})};class ha{constructor(e,t,r){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=e,this.start=t,this.end=r}static range(e,t){return t?e&&e.loc&&t.loc&&e.loc.lexer===t.loc.lexer?new ha(e.loc.lexer,e.loc.start,t.loc.end):null:e&&e.loc}}class ma{constructor(e,t){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=e,this.loc=t}range(e,t){return new ma(t,ha.range(this,e))}}class pa{constructor(e,t){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var r,n,a="KaTeX parse error: "+e,i=t&&t.loc;if(i&&i.start<=i.end){var o=i.lexer.input;r=i.start,n=i.end,r===o.length?a+=" at end of input: ":a+=" at position "+(r+1)+": ";var s=o.slice(r,n).replace(/[^]/g,"$&\u0332");a+=(r>15?"\u2026"+o.slice(r-15,r):o.slice(0,r))+s+(n+15<o.length?o.slice(n,n+15)+"\u2026":o.slice(n))}var l=new Error(a);return l.name="ParseError",l.__proto__=pa.prototype,l.position=r,null!=r&&null!=n&&(l.length=n-r),l.rawMessage=e,l}}pa.prototype.__proto__=Error.prototype;var fa=/([A-Z])/g,ga={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},va=/[&><"']/g;var ya=function e(t){return"ordgroup"===t.type||"color"===t.type?1===t.body.length?e(t.body[0]):t:"font"===t.type?e(t.body):t},ba={deflt:function(e,t){return void 0===e?t:e},escape:function(e){return String(e).replace(va,e=>ga[e])},hyphenate:function(e){return e.replace(fa,"-$1").toLowerCase()},getBaseElem:ya,isCharacterBox:function(e){var t=ya(e);return"mathord"===t.type||"textord"===t.type||"atom"===t.type},protocolFromUrl:function(e){var t=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(e);return t?":"!==t[2]?null:/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(t[1])?t[1].toLowerCase():null:"_relative"}},xa={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:e=>"#"+e},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(e,t)=>(t.push(e),t)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:e=>Math.max(0,e),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:e=>Math.max(0,e),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:e=>Math.max(0,e),cli:"-e, --max-expand <n>",cliProcessor:e=>"Infinity"===e?1/0:parseInt(e)},globalGroup:{type:"boolean",cli:!1}};function wa(e){if(e.default)return e.default;var t=e.type,r=Array.isArray(t)?t[0]:t;if("string"!==typeof r)return r.enum[0];switch(r){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class ka{constructor(e){for(var t in this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,e=e||{},xa)if(xa.hasOwnProperty(t)){var r=xa[t];this[t]=void 0!==e[t]?r.processor?r.processor(e[t]):e[t]:wa(r)}}reportNonstrict(e,t,r){var n=this.strict;if("function"===typeof n&&(n=n(e,t,r)),n&&"ignore"!==n){if(!0===n||"error"===n)throw new pa("LaTeX-incompatible input and strict mode is set to 'error': "+t+" ["+e+"]",r);"warn"===n?"undefined"!==typeof console&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+t+" ["+e+"]"):"undefined"!==typeof console&&console.warn("LaTeX-incompatible input and strict mode is set to unrecognized '"+n+"': "+t+" ["+e+"]")}}useStrictBehavior(e,t,r){var n=this.strict;if("function"===typeof n)try{n=n(e,t,r)}catch(a){n="error"}return!(!n||"ignore"===n)&&(!0===n||"error"===n||("warn"===n?("undefined"!==typeof console&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+t+" ["+e+"]"),!1):("undefined"!==typeof console&&console.warn("LaTeX-incompatible input and strict mode is set to unrecognized '"+n+"': "+t+" ["+e+"]"),!1)))}isTrusted(e){if(e.url&&!e.protocol){var t=ba.protocolFromUrl(e.url);if(null==t)return!1;e.protocol=t}var r="function"===typeof this.trust?this.trust(e):this.trust;return Boolean(r)}}class ja{constructor(e,t,r){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=e,this.size=t,this.cramped=r}sup(){return Sa[Ca[this.id]]}sub(){return Sa[Na[this.id]]}fracNum(){return Sa[_a[this.id]]}fracDen(){return Sa[Aa[this.id]]}cramp(){return Sa[Ta[this.id]]}text(){return Sa[Ea[this.id]]}isTight(){return this.size>=2}}var Sa=[new ja(0,0,!1),new ja(1,0,!0),new ja(2,1,!1),new ja(3,1,!0),new ja(4,2,!1),new ja(5,2,!0),new ja(6,3,!1),new ja(7,3,!0)],Ca=[4,5,4,5,6,7,6,7],Na=[5,5,5,5,7,7,7,7],_a=[2,3,4,5,6,7,6,7],Aa=[3,3,5,5,7,7,7,7],Ta=[1,1,3,3,5,5,7,7],Ea=[0,1,2,3,2,3,2,3],Oa={DISPLAY:Sa[0],TEXT:Sa[2],SCRIPT:Sa[4],SCRIPTSCRIPT:Sa[6]},Pa=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];var Ia=[];function Ma(e){for(var t=0;t<Ia.length;t+=2)if(e>=Ia[t]&&e<=Ia[t+1])return!0;return!1}Pa.forEach(e=>e.blocks.forEach(e=>Ia.push(...e)));var Ra=80,Da={doubleleftarrow:"M262 157\nl10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3\n 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28\n 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5\nc2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5\n 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87\n-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7\n-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z\nm8 0v40h399730v-40zm0 194v40h399730v-40z",doublerightarrow:"M399738 392l\n-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5\n 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88\n-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68\n-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18\n-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782\nc-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3\n-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z",leftarrow:"M400000 241H110l3-3c68.7-52.7 113.7-120\n 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8\n-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247\nc-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208\n 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3\n 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202\n l-3-3h399890zM100 241v40h399900v-40z",leftbrace:"M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117\n-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7\n 5-6 9-10 13-.7 1-7.3 1-20 1H6z",leftbraceunder:"M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13\n 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688\n 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7\n-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z",leftgroup:"M400000 80\nH435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0\n 435 0h399565z",leftgroupunder:"M400000 262\nH435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219\n 435 219h399565z",leftharpoon:"M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3\n-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5\n-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7\n-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z",leftharpoonplus:"M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5\n 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3\n-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7\n-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z\nm0 0v40h400000v-40z",leftharpoondown:"M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333\n 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5\n 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667\n-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z",leftharpoondownplus:"M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12\n 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7\n-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0\nv40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z",lefthook:"M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5\n-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3\n-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21\n 71.5 23h399859zM103 281v-40h399897v40z",leftlinesegment:"M40 281 V428 H0 V94 H40 V241 H400000 v40z\nM40 281 V428 H0 V94 H40 V241 H400000 v40z",leftmapsto:"M40 281 V448H0V74H40V241H400000v40z\nM40 281 V448H0V74H40V241H400000v40z",leftToFrom:"M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23\n-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8\nc28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3\n 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z",longequal:"M0 50 h400000 v40H0z m0 194h40000v40H0z\nM0 50 h400000 v40H0z m0 194h40000v40H0z",midbrace:"M200428 334\nc-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14\n-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7\n 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11\n 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z",midbraceunder:"M199572 214\nc100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14\n 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3\n 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0\n-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z",oiintSize1:"M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6\n-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z\nm368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8\n60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z",oiintSize2:"M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8\n-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z\nm502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2\nc0 110 84 276 504 276s502.4-166 502.4-276z",oiiintSize1:"M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6\n-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z\nm525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0\n85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z",oiiintSize2:"M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8\n-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z\nm770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1\nc0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z",rightarrow:"M0 241v40h399891c-47.3 35.3-84 78-110 128\n-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20\n 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7\n 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85\n-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n 151.7 139 205zm0 0v40h399900v-40z",rightbrace:"M400000 542l\n-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5\ns-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1\nc124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z",rightbraceunder:"M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3\n 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237\n-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z",rightgroup:"M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0\n 3-1 3-3v-38c-76-158-257-219-435-219H0z",rightgroupunder:"M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18\n 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z",rightharpoon:"M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3\n-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2\n-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58\n 69.2 92 94.5zm0 0v40h399900v-40z",rightharpoonplus:"M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11\n-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7\n 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z\nm0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z",rightharpoondown:"M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8\n 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5\n-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95\n-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z",rightharpoondownplus:"M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8\n 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3\n 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3\n-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z\nm0-194v40h400000v-40zm0 0v40h400000v-40z",righthook:"M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3\n 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0\n-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21\n 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z",rightlinesegment:"M399960 241 V94 h40 V428 h-40 V281 H0 v-40z\nM399960 241 V94 h40 V428 h-40 V281 H0 v-40z",rightToFrom:"M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23\n 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32\n-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142\n-167z M100 147v40h399900v-40zM0 341v40h399900v-40z",twoheadleftarrow:"M0 167c68 40\n 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69\n-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3\n-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19\n-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101\n 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z",twoheadrightarrow:"M400000 167\nc-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3\n 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42\n 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333\n-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70\n 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z",tilde1:"M200 55.538c-77 0-168 73.953-177 73.953-3 0-7\n-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0\n 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0\n 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128\n-68.267.847-113-73.952-191-73.952z",tilde2:"M344 55.266c-142 0-300.638 81.316-311.5 86.418\n-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9\n 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114\nc1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751\n 181.476 676 181.476c-149 0-189-126.21-332-126.21z",tilde3:"M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457\n-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0\n 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697\n 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696\n -338 0-409-156.573-744-156.573z",tilde4:"M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345\n-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409\n 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9\n 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409\n -175.236-744-175.236z",vec:"M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z",widehat1:"M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22\nc-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z",widehat2:"M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widehat3:"M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widehat4:"M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widecheck1:"M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,\n-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z",widecheck2:"M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",widecheck3:"M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",widecheck4:"M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",baraboveleftarrow:"M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202\nc4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5\nc-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130\ns-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47\n121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6\ns2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11\nc0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z\nM100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z",rightarrowabovebar:"M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32\n-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0\n13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39\n-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5\n-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z",baraboveshortleftharpoon:"M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11\nc1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17\nc2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21\nc-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40\nc-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z\nM0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z",rightharpoonaboveshortbar:"M0,241 l0,40c399126,0,399993,0,399993,0\nc4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,\n-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6\nc-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z\nM0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z",shortbaraboveleftharpoon:"M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11\nc1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,\n1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,\n-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z\nM93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z",shortrightharpoonabovebar:"M53,241l0,40c398570,0,399437,0,399437,0\nc4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,\n-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6\nc-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z\nM500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z"};class La{constructor(e){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=e,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(e){return this.classes.includes(e)}toNode(){for(var e=document.createDocumentFragment(),t=0;t<this.children.length;t++)e.appendChild(this.children[t].toNode());return e}toMarkup(){for(var e="",t=0;t<this.children.length;t++)e+=this.children[t].toMarkup();return e}toText(){return this.children.map(e=>e.toText()).join("")}}var za={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},qa={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},Ba={"\xc5":"A","\xd0":"D","\xde":"o","\xe5":"a","\xf0":"d","\xfe":"o","\u0410":"A","\u0411":"B","\u0412":"B","\u0413":"F","\u0414":"A","\u0415":"E","\u0416":"K","\u0417":"3","\u0418":"N","\u0419":"N","\u041a":"K","\u041b":"N","\u041c":"M","\u041d":"H","\u041e":"O","\u041f":"N","\u0420":"P","\u0421":"C","\u0422":"T","\u0423":"y","\u0424":"O","\u0425":"X","\u0426":"U","\u0427":"h","\u0428":"W","\u0429":"W","\u042a":"B","\u042b":"X","\u042c":"B","\u042d":"3","\u042e":"X","\u042f":"R","\u0430":"a","\u0431":"b","\u0432":"a","\u0433":"r","\u0434":"y","\u0435":"e","\u0436":"m","\u0437":"e","\u0438":"n","\u0439":"n","\u043a":"n","\u043b":"n","\u043c":"m","\u043d":"n","\u043e":"o","\u043f":"n","\u0440":"p","\u0441":"c","\u0442":"o","\u0443":"y","\u0444":"b","\u0445":"x","\u0446":"n","\u0447":"n","\u0448":"w","\u0449":"w","\u044a":"a","\u044b":"m","\u044c":"a","\u044d":"e","\u044e":"m","\u044f":"r"};function Fa(e,t,r){if(!za[t])throw new Error("Font metrics not found for font: "+t+".");var n=e.charCodeAt(0),a=za[t][n];if(!a&&e[0]in Ba&&(n=Ba[e[0]].charCodeAt(0),a=za[t][n]),a||"text"!==r||Ma(n)&&(a=za[t][77]),a)return{depth:a[0],height:a[1],italic:a[2],skew:a[3],width:a[4]}}var Ua={};var Ha=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],Wa=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],Ka=function(e,t){return t.size<2?e:Ha[e-1][t.size-1]};class Va{constructor(e){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=e.style,this.color=e.color,this.size=e.size||Va.BASESIZE,this.textSize=e.textSize||this.size,this.phantom=!!e.phantom,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.sizeMultiplier=Wa[this.size-1],this.maxSize=e.maxSize,this.minRuleThickness=e.minRuleThickness,this._fontMetrics=void 0}extend(e){var t={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return new Va(t)}havingStyle(e){return this.style===e?this:this.extend({style:e,size:Ka(this.textSize,e)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(e){return this.size===e&&this.textSize===e?this:this.extend({style:this.style.text(),size:e,textSize:e,sizeMultiplier:Wa[e-1]})}havingBaseStyle(e){e=e||this.style.text();var t=Ka(Va.BASESIZE,e);return this.size===t&&this.textSize===Va.BASESIZE&&this.style===e?this:this.extend({style:e,size:t})}havingBaseSizing(){var e;switch(this.style.id){case 4:case 5:e=3;break;case 6:case 7:e=1;break;default:e=6}return this.extend({style:this.style.text(),size:e})}withColor(e){return this.extend({color:e})}withPhantom(){return this.extend({phantom:!0})}withFont(e){return this.extend({font:e})}withTextFontFamily(e){return this.extend({fontFamily:e,font:""})}withTextFontWeight(e){return this.extend({fontWeight:e,font:""})}withTextFontShape(e){return this.extend({fontShape:e,font:""})}sizingClasses(e){return e.size!==this.size?["sizing","reset-size"+e.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==Va.BASESIZE?["sizing","reset-size"+this.size,"size"+Va.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=function(e){var t;if(!Ua[t=e>=5?0:e>=3?1:2]){var r=Ua[t]={cssEmPerMu:qa.quad[t]/18};for(var n in qa)qa.hasOwnProperty(n)&&(r[n]=qa[n][t])}return Ua[t]}(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}Va.BASESIZE=6;var Ga={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:1.00375,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:1.00375},Qa={ex:!0,em:!0,mu:!0},Ya=function(e){return"string"!==typeof e&&(e=e.unit),e in Ga||e in Qa||"ex"===e},$a=function(e,t){var r;if(e.unit in Ga)r=Ga[e.unit]/t.fontMetrics().ptPerEm/t.sizeMultiplier;else if("mu"===e.unit)r=t.fontMetrics().cssEmPerMu;else{var n;if(n=t.style.isTight()?t.havingStyle(t.style.text()):t,"ex"===e.unit)r=n.fontMetrics().xHeight;else{if("em"!==e.unit)throw new pa("Invalid unit: '"+e.unit+"'");r=n.fontMetrics().quad}n!==t&&(r*=n.sizeMultiplier/t.sizeMultiplier)}return Math.min(e.number*r,t.maxSize)},Ja=function(e){return+e.toFixed(4)+"em"},Xa=function(e){return e.filter(e=>e).join(" ")},Za=function(e,t,r){if(this.classes=e||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=r||{},t){t.style.isTight()&&this.classes.push("mtight");var n=t.getColor();n&&(this.style.color=n)}},ei=function(e){var t=document.createElement(e);for(var r in t.className=Xa(this.classes),this.style)this.style.hasOwnProperty(r)&&(t.style[r]=this.style[r]);for(var n in this.attributes)this.attributes.hasOwnProperty(n)&&t.setAttribute(n,this.attributes[n]);for(var a=0;a<this.children.length;a++)t.appendChild(this.children[a].toNode());return t},ti=/[\s"'>/=\x00-\x1f]/,ri=function(e){var t="<"+e;this.classes.length&&(t+=' class="'+ba.escape(Xa(this.classes))+'"');var r="";for(var n in this.style)this.style.hasOwnProperty(n)&&(r+=ba.hyphenate(n)+":"+this.style[n]+";");for(var a in r&&(t+=' style="'+ba.escape(r)+'"'),this.attributes)if(this.attributes.hasOwnProperty(a)){if(ti.test(a))throw new pa("Invalid attribute name '"+a+"'");t+=" "+a+'="'+ba.escape(this.attributes[a])+'"'}t+=">";for(var i=0;i<this.children.length;i++)t+=this.children[i].toMarkup();return t+="</"+e+">"};class ni{constructor(e,t,r,n){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,Za.call(this,e,r,n),this.children=t||[]}setAttribute(e,t){this.attributes[e]=t}hasClass(e){return this.classes.includes(e)}toNode(){return ei.call(this,"span")}toMarkup(){return ri.call(this,"span")}}class ai{constructor(e,t,r,n){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,Za.call(this,t,n),this.children=r||[],this.setAttribute("href",e)}setAttribute(e,t){this.attributes[e]=t}hasClass(e){return this.classes.includes(e)}toNode(){return ei.call(this,"a")}toMarkup(){return ri.call(this,"a")}}class ii{constructor(e,t,r){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=t,this.src=e,this.classes=["mord"],this.style=r}hasClass(e){return this.classes.includes(e)}toNode(){var e=document.createElement("img");for(var t in e.src=this.src,e.alt=this.alt,e.className="mord",this.style)this.style.hasOwnProperty(t)&&(e.style[t]=this.style[t]);return e}toMarkup(){var e='<img src="'+ba.escape(this.src)+'" alt="'+ba.escape(this.alt)+'"',t="";for(var r in this.style)this.style.hasOwnProperty(r)&&(t+=ba.hyphenate(r)+":"+this.style[r]+";");return t&&(e+=' style="'+ba.escape(t)+'"'),e+="'/>"}}var oi={"\xee":"\u0131\u0302","\xef":"\u0131\u0308","\xed":"\u0131\u0301","\xec":"\u0131\u0300"};class si{constructor(e,t,r,n,a,i,o,s){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=e,this.height=t||0,this.depth=r||0,this.italic=n||0,this.skew=a||0,this.width=i||0,this.classes=o||[],this.style=s||{},this.maxFontSize=0;var l=function(e){for(var t=0;t<Pa.length;t++)for(var r=Pa[t],n=0;n<r.blocks.length;n++){var a=r.blocks[n];if(e>=a[0]&&e<=a[1])return r.name}return null}(this.text.charCodeAt(0));l&&this.classes.push(l+"_fallback"),/[\xee\xef\xed\xec]/.test(this.text)&&(this.text=oi[this.text])}hasClass(e){return this.classes.includes(e)}toNode(){var e=document.createTextNode(this.text),t=null;for(var r in this.italic>0&&((t=document.createElement("span")).style.marginRight=Ja(this.italic)),this.classes.length>0&&((t=t||document.createElement("span")).className=Xa(this.classes)),this.style)this.style.hasOwnProperty(r)&&((t=t||document.createElement("span")).style[r]=this.style[r]);return t?(t.appendChild(e),t):e}toMarkup(){var e=!1,t="<span";this.classes.length&&(e=!0,t+=' class="',t+=ba.escape(Xa(this.classes)),t+='"');var r="";for(var n in this.italic>0&&(r+="margin-right:"+this.italic+"em;"),this.style)this.style.hasOwnProperty(n)&&(r+=ba.hyphenate(n)+":"+this.style[n]+";");r&&(e=!0,t+=' style="'+ba.escape(r)+'"');var a=ba.escape(this.text);return e?(t+=">",t+=a,t+="</span>"):a}}class li{constructor(e,t){this.children=void 0,this.attributes=void 0,this.children=e||[],this.attributes=t||{}}toNode(){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&e.setAttribute(t,this.attributes[t]);for(var r=0;r<this.children.length;r++)e.appendChild(this.children[r].toNode());return e}toMarkup(){var e='<svg xmlns="http://www.w3.org/2000/svg"';for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="'+ba.escape(this.attributes[t])+'"');e+=">";for(var r=0;r<this.children.length;r++)e+=this.children[r].toMarkup();return e+="</svg>"}}class ci{constructor(e,t){this.pathName=void 0,this.alternate=void 0,this.pathName=e,this.alternate=t}toNode(){var e=document.createElementNS("http://www.w3.org/2000/svg","path");return this.alternate?e.setAttribute("d",this.alternate):e.setAttribute("d",Da[this.pathName]),e}toMarkup(){return this.alternate?'<path d="'+ba.escape(this.alternate)+'"/>':'<path d="'+ba.escape(Da[this.pathName])+'"/>'}}class ui{constructor(e){this.attributes=void 0,this.attributes=e||{}}toNode(){var e=document.createElementNS("http://www.w3.org/2000/svg","line");for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&e.setAttribute(t,this.attributes[t]);return e}toMarkup(){var e="<line";for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="'+ba.escape(this.attributes[t])+'"');return e+="/>"}}function di(e){if(e instanceof si)return e;throw new Error("Expected symbolNode but got "+String(e)+".")}var hi={bin:1,close:1,inner:1,open:1,punct:1,rel:1},mi={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},pi={math:{},text:{}};function fi(e,t,r,n,a,i){pi[e][a]={font:t,group:r,replace:n},i&&n&&(pi[e][n]=pi[e][a])}var gi="math",vi="text",yi="main",bi="ams",xi="accent-token",wi="bin",ki="close",ji="inner",Si="mathord",Ci="op-token",Ni="open",_i="punct",Ai="rel",Ti="spacing",Ei="textord";fi(gi,yi,Ai,"\u2261","\\equiv",!0),fi(gi,yi,Ai,"\u227a","\\prec",!0),fi(gi,yi,Ai,"\u227b","\\succ",!0),fi(gi,yi,Ai,"\u223c","\\sim",!0),fi(gi,yi,Ai,"\u22a5","\\perp"),fi(gi,yi,Ai,"\u2aaf","\\preceq",!0),fi(gi,yi,Ai,"\u2ab0","\\succeq",!0),fi(gi,yi,Ai,"\u2243","\\simeq",!0),fi(gi,yi,Ai,"\u2223","\\mid",!0),fi(gi,yi,Ai,"\u226a","\\ll",!0),fi(gi,yi,Ai,"\u226b","\\gg",!0),fi(gi,yi,Ai,"\u224d","\\asymp",!0),fi(gi,yi,Ai,"\u2225","\\parallel"),fi(gi,yi,Ai,"\u22c8","\\bowtie",!0),fi(gi,yi,Ai,"\u2323","\\smile",!0),fi(gi,yi,Ai,"\u2291","\\sqsubseteq",!0),fi(gi,yi,Ai,"\u2292","\\sqsupseteq",!0),fi(gi,yi,Ai,"\u2250","\\doteq",!0),fi(gi,yi,Ai,"\u2322","\\frown",!0),fi(gi,yi,Ai,"\u220b","\\ni",!0),fi(gi,yi,Ai,"\u221d","\\propto",!0),fi(gi,yi,Ai,"\u22a2","\\vdash",!0),fi(gi,yi,Ai,"\u22a3","\\dashv",!0),fi(gi,yi,Ai,"\u220b","\\owns"),fi(gi,yi,_i,".","\\ldotp"),fi(gi,yi,_i,"\u22c5","\\cdotp"),fi(gi,yi,Ei,"#","\\#"),fi(vi,yi,Ei,"#","\\#"),fi(gi,yi,Ei,"&","\\&"),fi(vi,yi,Ei,"&","\\&"),fi(gi,yi,Ei,"\u2135","\\aleph",!0),fi(gi,yi,Ei,"\u2200","\\forall",!0),fi(gi,yi,Ei,"\u210f","\\hbar",!0),fi(gi,yi,Ei,"\u2203","\\exists",!0),fi(gi,yi,Ei,"\u2207","\\nabla",!0),fi(gi,yi,Ei,"\u266d","\\flat",!0),fi(gi,yi,Ei,"\u2113","\\ell",!0),fi(gi,yi,Ei,"\u266e","\\natural",!0),fi(gi,yi,Ei,"\u2663","\\clubsuit",!0),fi(gi,yi,Ei,"\u2118","\\wp",!0),fi(gi,yi,Ei,"\u266f","\\sharp",!0),fi(gi,yi,Ei,"\u2662","\\diamondsuit",!0),fi(gi,yi,Ei,"\u211c","\\Re",!0),fi(gi,yi,Ei,"\u2661","\\heartsuit",!0),fi(gi,yi,Ei,"\u2111","\\Im",!0),fi(gi,yi,Ei,"\u2660","\\spadesuit",!0),fi(gi,yi,Ei,"\xa7","\\S",!0),fi(vi,yi,Ei,"\xa7","\\S"),fi(gi,yi,Ei,"\xb6","\\P",!0),fi(vi,yi,Ei,"\xb6","\\P"),fi(gi,yi,Ei,"\u2020","\\dag"),fi(vi,yi,Ei,"\u2020","\\dag"),fi(vi,yi,Ei,"\u2020","\\textdagger"),fi(gi,yi,Ei,"\u2021","\\ddag"),fi(vi,yi,Ei,"\u2021","\\ddag"),fi(vi,yi,Ei,"\u2021","\\textdaggerdbl"),fi(gi,yi,ki,"\u23b1","\\rmoustache",!0),fi(gi,yi,Ni,"\u23b0","\\lmoustache",!0),fi(gi,yi,ki,"\u27ef","\\rgroup",!0),fi(gi,yi,Ni,"\u27ee","\\lgroup",!0),fi(gi,yi,wi,"\u2213","\\mp",!0),fi(gi,yi,wi,"\u2296","\\ominus",!0),fi(gi,yi,wi,"\u228e","\\uplus",!0),fi(gi,yi,wi,"\u2293","\\sqcap",!0),fi(gi,yi,wi,"\u2217","\\ast"),fi(gi,yi,wi,"\u2294","\\sqcup",!0),fi(gi,yi,wi,"\u25ef","\\bigcirc",!0),fi(gi,yi,wi,"\u2219","\\bullet",!0),fi(gi,yi,wi,"\u2021","\\ddagger"),fi(gi,yi,wi,"\u2240","\\wr",!0),fi(gi,yi,wi,"\u2a3f","\\amalg"),fi(gi,yi,wi,"&","\\And"),fi(gi,yi,Ai,"\u27f5","\\longleftarrow",!0),fi(gi,yi,Ai,"\u21d0","\\Leftarrow",!0),fi(gi,yi,Ai,"\u27f8","\\Longleftarrow",!0),fi(gi,yi,Ai,"\u27f6","\\longrightarrow",!0),fi(gi,yi,Ai,"\u21d2","\\Rightarrow",!0),fi(gi,yi,Ai,"\u27f9","\\Longrightarrow",!0),fi(gi,yi,Ai,"\u2194","\\leftrightarrow",!0),fi(gi,yi,Ai,"\u27f7","\\longleftrightarrow",!0),fi(gi,yi,Ai,"\u21d4","\\Leftrightarrow",!0),fi(gi,yi,Ai,"\u27fa","\\Longleftrightarrow",!0),fi(gi,yi,Ai,"\u21a6","\\mapsto",!0),fi(gi,yi,Ai,"\u27fc","\\longmapsto",!0),fi(gi,yi,Ai,"\u2197","\\nearrow",!0),fi(gi,yi,Ai,"\u21a9","\\hookleftarrow",!0),fi(gi,yi,Ai,"\u21aa","\\hookrightarrow",!0),fi(gi,yi,Ai,"\u2198","\\searrow",!0),fi(gi,yi,Ai,"\u21bc","\\leftharpoonup",!0),fi(gi,yi,Ai,"\u21c0","\\rightharpoonup",!0),fi(gi,yi,Ai,"\u2199","\\swarrow",!0),fi(gi,yi,Ai,"\u21bd","\\leftharpoondown",!0),fi(gi,yi,Ai,"\u21c1","\\rightharpoondown",!0),fi(gi,yi,Ai,"\u2196","\\nwarrow",!0),fi(gi,yi,Ai,"\u21cc","\\rightleftharpoons",!0),fi(gi,bi,Ai,"\u226e","\\nless",!0),fi(gi,bi,Ai,"\ue010","\\@nleqslant"),fi(gi,bi,Ai,"\ue011","\\@nleqq"),fi(gi,bi,Ai,"\u2a87","\\lneq",!0),fi(gi,bi,Ai,"\u2268","\\lneqq",!0),fi(gi,bi,Ai,"\ue00c","\\@lvertneqq"),fi(gi,bi,Ai,"\u22e6","\\lnsim",!0),fi(gi,bi,Ai,"\u2a89","\\lnapprox",!0),fi(gi,bi,Ai,"\u2280","\\nprec",!0),fi(gi,bi,Ai,"\u22e0","\\npreceq",!0),fi(gi,bi,Ai,"\u22e8","\\precnsim",!0),fi(gi,bi,Ai,"\u2ab9","\\precnapprox",!0),fi(gi,bi,Ai,"\u2241","\\nsim",!0),fi(gi,bi,Ai,"\ue006","\\@nshortmid"),fi(gi,bi,Ai,"\u2224","\\nmid",!0),fi(gi,bi,Ai,"\u22ac","\\nvdash",!0),fi(gi,bi,Ai,"\u22ad","\\nvDash",!0),fi(gi,bi,Ai,"\u22ea","\\ntriangleleft"),fi(gi,bi,Ai,"\u22ec","\\ntrianglelefteq",!0),fi(gi,bi,Ai,"\u228a","\\subsetneq",!0),fi(gi,bi,Ai,"\ue01a","\\@varsubsetneq"),fi(gi,bi,Ai,"\u2acb","\\subsetneqq",!0),fi(gi,bi,Ai,"\ue017","\\@varsubsetneqq"),fi(gi,bi,Ai,"\u226f","\\ngtr",!0),fi(gi,bi,Ai,"\ue00f","\\@ngeqslant"),fi(gi,bi,Ai,"\ue00e","\\@ngeqq"),fi(gi,bi,Ai,"\u2a88","\\gneq",!0),fi(gi,bi,Ai,"\u2269","\\gneqq",!0),fi(gi,bi,Ai,"\ue00d","\\@gvertneqq"),fi(gi,bi,Ai,"\u22e7","\\gnsim",!0),fi(gi,bi,Ai,"\u2a8a","\\gnapprox",!0),fi(gi,bi,Ai,"\u2281","\\nsucc",!0),fi(gi,bi,Ai,"\u22e1","\\nsucceq",!0),fi(gi,bi,Ai,"\u22e9","\\succnsim",!0),fi(gi,bi,Ai,"\u2aba","\\succnapprox",!0),fi(gi,bi,Ai,"\u2246","\\ncong",!0),fi(gi,bi,Ai,"\ue007","\\@nshortparallel"),fi(gi,bi,Ai,"\u2226","\\nparallel",!0),fi(gi,bi,Ai,"\u22af","\\nVDash",!0),fi(gi,bi,Ai,"\u22eb","\\ntriangleright"),fi(gi,bi,Ai,"\u22ed","\\ntrianglerighteq",!0),fi(gi,bi,Ai,"\ue018","\\@nsupseteqq"),fi(gi,bi,Ai,"\u228b","\\supsetneq",!0),fi(gi,bi,Ai,"\ue01b","\\@varsupsetneq"),fi(gi,bi,Ai,"\u2acc","\\supsetneqq",!0),fi(gi,bi,Ai,"\ue019","\\@varsupsetneqq"),fi(gi,bi,Ai,"\u22ae","\\nVdash",!0),fi(gi,bi,Ai,"\u2ab5","\\precneqq",!0),fi(gi,bi,Ai,"\u2ab6","\\succneqq",!0),fi(gi,bi,Ai,"\ue016","\\@nsubseteqq"),fi(gi,bi,wi,"\u22b4","\\unlhd"),fi(gi,bi,wi,"\u22b5","\\unrhd"),fi(gi,bi,Ai,"\u219a","\\nleftarrow",!0),fi(gi,bi,Ai,"\u219b","\\nrightarrow",!0),fi(gi,bi,Ai,"\u21cd","\\nLeftarrow",!0),fi(gi,bi,Ai,"\u21cf","\\nRightarrow",!0),fi(gi,bi,Ai,"\u21ae","\\nleftrightarrow",!0),fi(gi,bi,Ai,"\u21ce","\\nLeftrightarrow",!0),fi(gi,bi,Ai,"\u25b3","\\vartriangle"),fi(gi,bi,Ei,"\u210f","\\hslash"),fi(gi,bi,Ei,"\u25bd","\\triangledown"),fi(gi,bi,Ei,"\u25ca","\\lozenge"),fi(gi,bi,Ei,"\u24c8","\\circledS"),fi(gi,bi,Ei,"\xae","\\circledR"),fi(vi,bi,Ei,"\xae","\\circledR"),fi(gi,bi,Ei,"\u2221","\\measuredangle",!0),fi(gi,bi,Ei,"\u2204","\\nexists"),fi(gi,bi,Ei,"\u2127","\\mho"),fi(gi,bi,Ei,"\u2132","\\Finv",!0),fi(gi,bi,Ei,"\u2141","\\Game",!0),fi(gi,bi,Ei,"\u2035","\\backprime"),fi(gi,bi,Ei,"\u25b2","\\blacktriangle"),fi(gi,bi,Ei,"\u25bc","\\blacktriangledown"),fi(gi,bi,Ei,"\u25a0","\\blacksquare"),fi(gi,bi,Ei,"\u29eb","\\blacklozenge"),fi(gi,bi,Ei,"\u2605","\\bigstar"),fi(gi,bi,Ei,"\u2222","\\sphericalangle",!0),fi(gi,bi,Ei,"\u2201","\\complement",!0),fi(gi,bi,Ei,"\xf0","\\eth",!0),fi(vi,yi,Ei,"\xf0","\xf0"),fi(gi,bi,Ei,"\u2571","\\diagup"),fi(gi,bi,Ei,"\u2572","\\diagdown"),fi(gi,bi,Ei,"\u25a1","\\square"),fi(gi,bi,Ei,"\u25a1","\\Box"),fi(gi,bi,Ei,"\u25ca","\\Diamond"),fi(gi,bi,Ei,"\xa5","\\yen",!0),fi(vi,bi,Ei,"\xa5","\\yen",!0),fi(gi,bi,Ei,"\u2713","\\checkmark",!0),fi(vi,bi,Ei,"\u2713","\\checkmark"),fi(gi,bi,Ei,"\u2136","\\beth",!0),fi(gi,bi,Ei,"\u2138","\\daleth",!0),fi(gi,bi,Ei,"\u2137","\\gimel",!0),fi(gi,bi,Ei,"\u03dd","\\digamma",!0),fi(gi,bi,Ei,"\u03f0","\\varkappa"),fi(gi,bi,Ni,"\u250c","\\@ulcorner",!0),fi(gi,bi,ki,"\u2510","\\@urcorner",!0),fi(gi,bi,Ni,"\u2514","\\@llcorner",!0),fi(gi,bi,ki,"\u2518","\\@lrcorner",!0),fi(gi,bi,Ai,"\u2266","\\leqq",!0),fi(gi,bi,Ai,"\u2a7d","\\leqslant",!0),fi(gi,bi,Ai,"\u2a95","\\eqslantless",!0),fi(gi,bi,Ai,"\u2272","\\lesssim",!0),fi(gi,bi,Ai,"\u2a85","\\lessapprox",!0),fi(gi,bi,Ai,"\u224a","\\approxeq",!0),fi(gi,bi,wi,"\u22d6","\\lessdot"),fi(gi,bi,Ai,"\u22d8","\\lll",!0),fi(gi,bi,Ai,"\u2276","\\lessgtr",!0),fi(gi,bi,Ai,"\u22da","\\lesseqgtr",!0),fi(gi,bi,Ai,"\u2a8b","\\lesseqqgtr",!0),fi(gi,bi,Ai,"\u2251","\\doteqdot"),fi(gi,bi,Ai,"\u2253","\\risingdotseq",!0),fi(gi,bi,Ai,"\u2252","\\fallingdotseq",!0),fi(gi,bi,Ai,"\u223d","\\backsim",!0),fi(gi,bi,Ai,"\u22cd","\\backsimeq",!0),fi(gi,bi,Ai,"\u2ac5","\\subseteqq",!0),fi(gi,bi,Ai,"\u22d0","\\Subset",!0),fi(gi,bi,Ai,"\u228f","\\sqsubset",!0),fi(gi,bi,Ai,"\u227c","\\preccurlyeq",!0),fi(gi,bi,Ai,"\u22de","\\curlyeqprec",!0),fi(gi,bi,Ai,"\u227e","\\precsim",!0),fi(gi,bi,Ai,"\u2ab7","\\precapprox",!0),fi(gi,bi,Ai,"\u22b2","\\vartriangleleft"),fi(gi,bi,Ai,"\u22b4","\\trianglelefteq"),fi(gi,bi,Ai,"\u22a8","\\vDash",!0),fi(gi,bi,Ai,"\u22aa","\\Vvdash",!0),fi(gi,bi,Ai,"\u2323","\\smallsmile"),fi(gi,bi,Ai,"\u2322","\\smallfrown"),fi(gi,bi,Ai,"\u224f","\\bumpeq",!0),fi(gi,bi,Ai,"\u224e","\\Bumpeq",!0),fi(gi,bi,Ai,"\u2267","\\geqq",!0),fi(gi,bi,Ai,"\u2a7e","\\geqslant",!0),fi(gi,bi,Ai,"\u2a96","\\eqslantgtr",!0),fi(gi,bi,Ai,"\u2273","\\gtrsim",!0),fi(gi,bi,Ai,"\u2a86","\\gtrapprox",!0),fi(gi,bi,wi,"\u22d7","\\gtrdot"),fi(gi,bi,Ai,"\u22d9","\\ggg",!0),fi(gi,bi,Ai,"\u2277","\\gtrless",!0),fi(gi,bi,Ai,"\u22db","\\gtreqless",!0),fi(gi,bi,Ai,"\u2a8c","\\gtreqqless",!0),fi(gi,bi,Ai,"\u2256","\\eqcirc",!0),fi(gi,bi,Ai,"\u2257","\\circeq",!0),fi(gi,bi,Ai,"\u225c","\\triangleq",!0),fi(gi,bi,Ai,"\u223c","\\thicksim"),fi(gi,bi,Ai,"\u2248","\\thickapprox"),fi(gi,bi,Ai,"\u2ac6","\\supseteqq",!0),fi(gi,bi,Ai,"\u22d1","\\Supset",!0),fi(gi,bi,Ai,"\u2290","\\sqsupset",!0),fi(gi,bi,Ai,"\u227d","\\succcurlyeq",!0),fi(gi,bi,Ai,"\u22df","\\curlyeqsucc",!0),fi(gi,bi,Ai,"\u227f","\\succsim",!0),fi(gi,bi,Ai,"\u2ab8","\\succapprox",!0),fi(gi,bi,Ai,"\u22b3","\\vartriangleright"),fi(gi,bi,Ai,"\u22b5","\\trianglerighteq"),fi(gi,bi,Ai,"\u22a9","\\Vdash",!0),fi(gi,bi,Ai,"\u2223","\\shortmid"),fi(gi,bi,Ai,"\u2225","\\shortparallel"),fi(gi,bi,Ai,"\u226c","\\between",!0),fi(gi,bi,Ai,"\u22d4","\\pitchfork",!0),fi(gi,bi,Ai,"\u221d","\\varpropto"),fi(gi,bi,Ai,"\u25c0","\\blacktriangleleft"),fi(gi,bi,Ai,"\u2234","\\therefore",!0),fi(gi,bi,Ai,"\u220d","\\backepsilon"),fi(gi,bi,Ai,"\u25b6","\\blacktriangleright"),fi(gi,bi,Ai,"\u2235","\\because",!0),fi(gi,bi,Ai,"\u22d8","\\llless"),fi(gi,bi,Ai,"\u22d9","\\gggtr"),fi(gi,bi,wi,"\u22b2","\\lhd"),fi(gi,bi,wi,"\u22b3","\\rhd"),fi(gi,bi,Ai,"\u2242","\\eqsim",!0),fi(gi,yi,Ai,"\u22c8","\\Join"),fi(gi,bi,Ai,"\u2251","\\Doteq",!0),fi(gi,bi,wi,"\u2214","\\dotplus",!0),fi(gi,bi,wi,"\u2216","\\smallsetminus"),fi(gi,bi,wi,"\u22d2","\\Cap",!0),fi(gi,bi,wi,"\u22d3","\\Cup",!0),fi(gi,bi,wi,"\u2a5e","\\doublebarwedge",!0),fi(gi,bi,wi,"\u229f","\\boxminus",!0),fi(gi,bi,wi,"\u229e","\\boxplus",!0),fi(gi,bi,wi,"\u22c7","\\divideontimes",!0),fi(gi,bi,wi,"\u22c9","\\ltimes",!0),fi(gi,bi,wi,"\u22ca","\\rtimes",!0),fi(gi,bi,wi,"\u22cb","\\leftthreetimes",!0),fi(gi,bi,wi,"\u22cc","\\rightthreetimes",!0),fi(gi,bi,wi,"\u22cf","\\curlywedge",!0),fi(gi,bi,wi,"\u22ce","\\curlyvee",!0),fi(gi,bi,wi,"\u229d","\\circleddash",!0),fi(gi,bi,wi,"\u229b","\\circledast",!0),fi(gi,bi,wi,"\u22c5","\\centerdot"),fi(gi,bi,wi,"\u22ba","\\intercal",!0),fi(gi,bi,wi,"\u22d2","\\doublecap"),fi(gi,bi,wi,"\u22d3","\\doublecup"),fi(gi,bi,wi,"\u22a0","\\boxtimes",!0),fi(gi,bi,Ai,"\u21e2","\\dashrightarrow",!0),fi(gi,bi,Ai,"\u21e0","\\dashleftarrow",!0),fi(gi,bi,Ai,"\u21c7","\\leftleftarrows",!0),fi(gi,bi,Ai,"\u21c6","\\leftrightarrows",!0),fi(gi,bi,Ai,"\u21da","\\Lleftarrow",!0),fi(gi,bi,Ai,"\u219e","\\twoheadleftarrow",!0),fi(gi,bi,Ai,"\u21a2","\\leftarrowtail",!0),fi(gi,bi,Ai,"\u21ab","\\looparrowleft",!0),fi(gi,bi,Ai,"\u21cb","\\leftrightharpoons",!0),fi(gi,bi,Ai,"\u21b6","\\curvearrowleft",!0),fi(gi,bi,Ai,"\u21ba","\\circlearrowleft",!0),fi(gi,bi,Ai,"\u21b0","\\Lsh",!0),fi(gi,bi,Ai,"\u21c8","\\upuparrows",!0),fi(gi,bi,Ai,"\u21bf","\\upharpoonleft",!0),fi(gi,bi,Ai,"\u21c3","\\downharpoonleft",!0),fi(gi,yi,Ai,"\u22b6","\\origof",!0),fi(gi,yi,Ai,"\u22b7","\\imageof",!0),fi(gi,bi,Ai,"\u22b8","\\multimap",!0),fi(gi,bi,Ai,"\u21ad","\\leftrightsquigarrow",!0),fi(gi,bi,Ai,"\u21c9","\\rightrightarrows",!0),fi(gi,bi,Ai,"\u21c4","\\rightleftarrows",!0),fi(gi,bi,Ai,"\u21a0","\\twoheadrightarrow",!0),fi(gi,bi,Ai,"\u21a3","\\rightarrowtail",!0),fi(gi,bi,Ai,"\u21ac","\\looparrowright",!0),fi(gi,bi,Ai,"\u21b7","\\curvearrowright",!0),fi(gi,bi,Ai,"\u21bb","\\circlearrowright",!0),fi(gi,bi,Ai,"\u21b1","\\Rsh",!0),fi(gi,bi,Ai,"\u21ca","\\downdownarrows",!0),fi(gi,bi,Ai,"\u21be","\\upharpoonright",!0),fi(gi,bi,Ai,"\u21c2","\\downharpoonright",!0),fi(gi,bi,Ai,"\u21dd","\\rightsquigarrow",!0),fi(gi,bi,Ai,"\u21dd","\\leadsto"),fi(gi,bi,Ai,"\u21db","\\Rrightarrow",!0),fi(gi,bi,Ai,"\u21be","\\restriction"),fi(gi,yi,Ei,"\u2018","`"),fi(gi,yi,Ei,"$","\\$"),fi(vi,yi,Ei,"$","\\$"),fi(vi,yi,Ei,"$","\\textdollar"),fi(gi,yi,Ei,"%","\\%"),fi(vi,yi,Ei,"%","\\%"),fi(gi,yi,Ei,"_","\\_"),fi(vi,yi,Ei,"_","\\_"),fi(vi,yi,Ei,"_","\\textunderscore"),fi(gi,yi,Ei,"\u2220","\\angle",!0),fi(gi,yi,Ei,"\u221e","\\infty",!0),fi(gi,yi,Ei,"\u2032","\\prime"),fi(gi,yi,Ei,"\u25b3","\\triangle"),fi(gi,yi,Ei,"\u0393","\\Gamma",!0),fi(gi,yi,Ei,"\u0394","\\Delta",!0),fi(gi,yi,Ei,"\u0398","\\Theta",!0),fi(gi,yi,Ei,"\u039b","\\Lambda",!0),fi(gi,yi,Ei,"\u039e","\\Xi",!0),fi(gi,yi,Ei,"\u03a0","\\Pi",!0),fi(gi,yi,Ei,"\u03a3","\\Sigma",!0),fi(gi,yi,Ei,"\u03a5","\\Upsilon",!0),fi(gi,yi,Ei,"\u03a6","\\Phi",!0),fi(gi,yi,Ei,"\u03a8","\\Psi",!0),fi(gi,yi,Ei,"\u03a9","\\Omega",!0),fi(gi,yi,Ei,"A","\u0391"),fi(gi,yi,Ei,"B","\u0392"),fi(gi,yi,Ei,"E","\u0395"),fi(gi,yi,Ei,"Z","\u0396"),fi(gi,yi,Ei,"H","\u0397"),fi(gi,yi,Ei,"I","\u0399"),fi(gi,yi,Ei,"K","\u039a"),fi(gi,yi,Ei,"M","\u039c"),fi(gi,yi,Ei,"N","\u039d"),fi(gi,yi,Ei,"O","\u039f"),fi(gi,yi,Ei,"P","\u03a1"),fi(gi,yi,Ei,"T","\u03a4"),fi(gi,yi,Ei,"X","\u03a7"),fi(gi,yi,Ei,"\xac","\\neg",!0),fi(gi,yi,Ei,"\xac","\\lnot"),fi(gi,yi,Ei,"\u22a4","\\top"),fi(gi,yi,Ei,"\u22a5","\\bot"),fi(gi,yi,Ei,"\u2205","\\emptyset"),fi(gi,bi,Ei,"\u2205","\\varnothing"),fi(gi,yi,Si,"\u03b1","\\alpha",!0),fi(gi,yi,Si,"\u03b2","\\beta",!0),fi(gi,yi,Si,"\u03b3","\\gamma",!0),fi(gi,yi,Si,"\u03b4","\\delta",!0),fi(gi,yi,Si,"\u03f5","\\epsilon",!0),fi(gi,yi,Si,"\u03b6","\\zeta",!0),fi(gi,yi,Si,"\u03b7","\\eta",!0),fi(gi,yi,Si,"\u03b8","\\theta",!0),fi(gi,yi,Si,"\u03b9","\\iota",!0),fi(gi,yi,Si,"\u03ba","\\kappa",!0),fi(gi,yi,Si,"\u03bb","\\lambda",!0),fi(gi,yi,Si,"\u03bc","\\mu",!0),fi(gi,yi,Si,"\u03bd","\\nu",!0),fi(gi,yi,Si,"\u03be","\\xi",!0),fi(gi,yi,Si,"\u03bf","\\omicron",!0),fi(gi,yi,Si,"\u03c0","\\pi",!0),fi(gi,yi,Si,"\u03c1","\\rho",!0),fi(gi,yi,Si,"\u03c3","\\sigma",!0),fi(gi,yi,Si,"\u03c4","\\tau",!0),fi(gi,yi,Si,"\u03c5","\\upsilon",!0),fi(gi,yi,Si,"\u03d5","\\phi",!0),fi(gi,yi,Si,"\u03c7","\\chi",!0),fi(gi,yi,Si,"\u03c8","\\psi",!0),fi(gi,yi,Si,"\u03c9","\\omega",!0),fi(gi,yi,Si,"\u03b5","\\varepsilon",!0),fi(gi,yi,Si,"\u03d1","\\vartheta",!0),fi(gi,yi,Si,"\u03d6","\\varpi",!0),fi(gi,yi,Si,"\u03f1","\\varrho",!0),fi(gi,yi,Si,"\u03c2","\\varsigma",!0),fi(gi,yi,Si,"\u03c6","\\varphi",!0),fi(gi,yi,wi,"\u2217","*",!0),fi(gi,yi,wi,"+","+"),fi(gi,yi,wi,"\u2212","-",!0),fi(gi,yi,wi,"\u22c5","\\cdot",!0),fi(gi,yi,wi,"\u2218","\\circ",!0),fi(gi,yi,wi,"\xf7","\\div",!0),fi(gi,yi,wi,"\xb1","\\pm",!0),fi(gi,yi,wi,"\xd7","\\times",!0),fi(gi,yi,wi,"\u2229","\\cap",!0),fi(gi,yi,wi,"\u222a","\\cup",!0),fi(gi,yi,wi,"\u2216","\\setminus",!0),fi(gi,yi,wi,"\u2227","\\land"),fi(gi,yi,wi,"\u2228","\\lor"),fi(gi,yi,wi,"\u2227","\\wedge",!0),fi(gi,yi,wi,"\u2228","\\vee",!0),fi(gi,yi,Ei,"\u221a","\\surd"),fi(gi,yi,Ni,"\u27e8","\\langle",!0),fi(gi,yi,Ni,"\u2223","\\lvert"),fi(gi,yi,Ni,"\u2225","\\lVert"),fi(gi,yi,ki,"?","?"),fi(gi,yi,ki,"!","!"),fi(gi,yi,ki,"\u27e9","\\rangle",!0),fi(gi,yi,ki,"\u2223","\\rvert"),fi(gi,yi,ki,"\u2225","\\rVert"),fi(gi,yi,Ai,"=","="),fi(gi,yi,Ai,":",":"),fi(gi,yi,Ai,"\u2248","\\approx",!0),fi(gi,yi,Ai,"\u2245","\\cong",!0),fi(gi,yi,Ai,"\u2265","\\ge"),fi(gi,yi,Ai,"\u2265","\\geq",!0),fi(gi,yi,Ai,"\u2190","\\gets"),fi(gi,yi,Ai,">","\\gt",!0),fi(gi,yi,Ai,"\u2208","\\in",!0),fi(gi,yi,Ai,"\ue020","\\@not"),fi(gi,yi,Ai,"\u2282","\\subset",!0),fi(gi,yi,Ai,"\u2283","\\supset",!0),fi(gi,yi,Ai,"\u2286","\\subseteq",!0),fi(gi,yi,Ai,"\u2287","\\supseteq",!0),fi(gi,bi,Ai,"\u2288","\\nsubseteq",!0),fi(gi,bi,Ai,"\u2289","\\nsupseteq",!0),fi(gi,yi,Ai,"\u22a8","\\models"),fi(gi,yi,Ai,"\u2190","\\leftarrow",!0),fi(gi,yi,Ai,"\u2264","\\le"),fi(gi,yi,Ai,"\u2264","\\leq",!0),fi(gi,yi,Ai,"<","\\lt",!0),fi(gi,yi,Ai,"\u2192","\\rightarrow",!0),fi(gi,yi,Ai,"\u2192","\\to"),fi(gi,bi,Ai,"\u2271","\\ngeq",!0),fi(gi,bi,Ai,"\u2270","\\nleq",!0),fi(gi,yi,Ti,"\xa0","\\ "),fi(gi,yi,Ti,"\xa0","\\space"),fi(gi,yi,Ti,"\xa0","\\nobreakspace"),fi(vi,yi,Ti,"\xa0","\\ "),fi(vi,yi,Ti,"\xa0"," "),fi(vi,yi,Ti,"\xa0","\\space"),fi(vi,yi,Ti,"\xa0","\\nobreakspace"),fi(gi,yi,Ti,null,"\\nobreak"),fi(gi,yi,Ti,null,"\\allowbreak"),fi(gi,yi,_i,",",","),fi(gi,yi,_i,";",";"),fi(gi,bi,wi,"\u22bc","\\barwedge",!0),fi(gi,bi,wi,"\u22bb","\\veebar",!0),fi(gi,yi,wi,"\u2299","\\odot",!0),fi(gi,yi,wi,"\u2295","\\oplus",!0),fi(gi,yi,wi,"\u2297","\\otimes",!0),fi(gi,yi,Ei,"\u2202","\\partial",!0),fi(gi,yi,wi,"\u2298","\\oslash",!0),fi(gi,bi,wi,"\u229a","\\circledcirc",!0),fi(gi,bi,wi,"\u22a1","\\boxdot",!0),fi(gi,yi,wi,"\u25b3","\\bigtriangleup"),fi(gi,yi,wi,"\u25bd","\\bigtriangledown"),fi(gi,yi,wi,"\u2020","\\dagger"),fi(gi,yi,wi,"\u22c4","\\diamond"),fi(gi,yi,wi,"\u22c6","\\star"),fi(gi,yi,wi,"\u25c3","\\triangleleft"),fi(gi,yi,wi,"\u25b9","\\triangleright"),fi(gi,yi,Ni,"{","\\{"),fi(vi,yi,Ei,"{","\\{"),fi(vi,yi,Ei,"{","\\textbraceleft"),fi(gi,yi,ki,"}","\\}"),fi(vi,yi,Ei,"}","\\}"),fi(vi,yi,Ei,"}","\\textbraceright"),fi(gi,yi,Ni,"{","\\lbrace"),fi(gi,yi,ki,"}","\\rbrace"),fi(gi,yi,Ni,"[","\\lbrack",!0),fi(vi,yi,Ei,"[","\\lbrack",!0),fi(gi,yi,ki,"]","\\rbrack",!0),fi(vi,yi,Ei,"]","\\rbrack",!0),fi(gi,yi,Ni,"(","\\lparen",!0),fi(gi,yi,ki,")","\\rparen",!0),fi(vi,yi,Ei,"<","\\textless",!0),fi(vi,yi,Ei,">","\\textgreater",!0),fi(gi,yi,Ni,"\u230a","\\lfloor",!0),fi(gi,yi,ki,"\u230b","\\rfloor",!0),fi(gi,yi,Ni,"\u2308","\\lceil",!0),fi(gi,yi,ki,"\u2309","\\rceil",!0),fi(gi,yi,Ei,"\\","\\backslash"),fi(gi,yi,Ei,"\u2223","|"),fi(gi,yi,Ei,"\u2223","\\vert"),fi(vi,yi,Ei,"|","\\textbar",!0),fi(gi,yi,Ei,"\u2225","\\|"),fi(gi,yi,Ei,"\u2225","\\Vert"),fi(vi,yi,Ei,"\u2225","\\textbardbl"),fi(vi,yi,Ei,"~","\\textasciitilde"),fi(vi,yi,Ei,"\\","\\textbackslash"),fi(vi,yi,Ei,"^","\\textasciicircum"),fi(gi,yi,Ai,"\u2191","\\uparrow",!0),fi(gi,yi,Ai,"\u21d1","\\Uparrow",!0),fi(gi,yi,Ai,"\u2193","\\downarrow",!0),fi(gi,yi,Ai,"\u21d3","\\Downarrow",!0),fi(gi,yi,Ai,"\u2195","\\updownarrow",!0),fi(gi,yi,Ai,"\u21d5","\\Updownarrow",!0),fi(gi,yi,Ci,"\u2210","\\coprod"),fi(gi,yi,Ci,"\u22c1","\\bigvee"),fi(gi,yi,Ci,"\u22c0","\\bigwedge"),fi(gi,yi,Ci,"\u2a04","\\biguplus"),fi(gi,yi,Ci,"\u22c2","\\bigcap"),fi(gi,yi,Ci,"\u22c3","\\bigcup"),fi(gi,yi,Ci,"\u222b","\\int"),fi(gi,yi,Ci,"\u222b","\\intop"),fi(gi,yi,Ci,"\u222c","\\iint"),fi(gi,yi,Ci,"\u222d","\\iiint"),fi(gi,yi,Ci,"\u220f","\\prod"),fi(gi,yi,Ci,"\u2211","\\sum"),fi(gi,yi,Ci,"\u2a02","\\bigotimes"),fi(gi,yi,Ci,"\u2a01","\\bigoplus"),fi(gi,yi,Ci,"\u2a00","\\bigodot"),fi(gi,yi,Ci,"\u222e","\\oint"),fi(gi,yi,Ci,"\u222f","\\oiint"),fi(gi,yi,Ci,"\u2230","\\oiiint"),fi(gi,yi,Ci,"\u2a06","\\bigsqcup"),fi(gi,yi,Ci,"\u222b","\\smallint"),fi(vi,yi,ji,"\u2026","\\textellipsis"),fi(gi,yi,ji,"\u2026","\\mathellipsis"),fi(vi,yi,ji,"\u2026","\\ldots",!0),fi(gi,yi,ji,"\u2026","\\ldots",!0),fi(gi,yi,ji,"\u22ef","\\@cdots",!0),fi(gi,yi,ji,"\u22f1","\\ddots",!0),fi(gi,yi,Ei,"\u22ee","\\varvdots"),fi(vi,yi,Ei,"\u22ee","\\varvdots"),fi(gi,yi,xi,"\u02ca","\\acute"),fi(gi,yi,xi,"\u02cb","\\grave"),fi(gi,yi,xi,"\xa8","\\ddot"),fi(gi,yi,xi,"~","\\tilde"),fi(gi,yi,xi,"\u02c9","\\bar"),fi(gi,yi,xi,"\u02d8","\\breve"),fi(gi,yi,xi,"\u02c7","\\check"),fi(gi,yi,xi,"^","\\hat"),fi(gi,yi,xi,"\u20d7","\\vec"),fi(gi,yi,xi,"\u02d9","\\dot"),fi(gi,yi,xi,"\u02da","\\mathring"),fi(gi,yi,Si,"\ue131","\\@imath"),fi(gi,yi,Si,"\ue237","\\@jmath"),fi(gi,yi,Ei,"\u0131","\u0131"),fi(gi,yi,Ei,"\u0237","\u0237"),fi(vi,yi,Ei,"\u0131","\\i",!0),fi(vi,yi,Ei,"\u0237","\\j",!0),fi(vi,yi,Ei,"\xdf","\\ss",!0),fi(vi,yi,Ei,"\xe6","\\ae",!0),fi(vi,yi,Ei,"\u0153","\\oe",!0),fi(vi,yi,Ei,"\xf8","\\o",!0),fi(vi,yi,Ei,"\xc6","\\AE",!0),fi(vi,yi,Ei,"\u0152","\\OE",!0),fi(vi,yi,Ei,"\xd8","\\O",!0),fi(vi,yi,xi,"\u02ca","\\'"),fi(vi,yi,xi,"\u02cb","\\`"),fi(vi,yi,xi,"\u02c6","\\^"),fi(vi,yi,xi,"\u02dc","\\~"),fi(vi,yi,xi,"\u02c9","\\="),fi(vi,yi,xi,"\u02d8","\\u"),fi(vi,yi,xi,"\u02d9","\\."),fi(vi,yi,xi,"\xb8","\\c"),fi(vi,yi,xi,"\u02da","\\r"),fi(vi,yi,xi,"\u02c7","\\v"),fi(vi,yi,xi,"\xa8",'\\"'),fi(vi,yi,xi,"\u02dd","\\H"),fi(vi,yi,xi,"\u25ef","\\textcircled");var Oi={"--":!0,"---":!0,"``":!0,"''":!0};fi(vi,yi,Ei,"\u2013","--",!0),fi(vi,yi,Ei,"\u2013","\\textendash"),fi(vi,yi,Ei,"\u2014","---",!0),fi(vi,yi,Ei,"\u2014","\\textemdash"),fi(vi,yi,Ei,"\u2018","`",!0),fi(vi,yi,Ei,"\u2018","\\textquoteleft"),fi(vi,yi,Ei,"\u2019","'",!0),fi(vi,yi,Ei,"\u2019","\\textquoteright"),fi(vi,yi,Ei,"\u201c","``",!0),fi(vi,yi,Ei,"\u201c","\\textquotedblleft"),fi(vi,yi,Ei,"\u201d","''",!0),fi(vi,yi,Ei,"\u201d","\\textquotedblright"),fi(gi,yi,Ei,"\xb0","\\degree",!0),fi(vi,yi,Ei,"\xb0","\\degree"),fi(vi,yi,Ei,"\xb0","\\textdegree",!0),fi(gi,yi,Ei,"\xa3","\\pounds"),fi(gi,yi,Ei,"\xa3","\\mathsterling",!0),fi(vi,yi,Ei,"\xa3","\\pounds"),fi(vi,yi,Ei,"\xa3","\\textsterling",!0),fi(gi,bi,Ei,"\u2720","\\maltese"),fi(vi,bi,Ei,"\u2720","\\maltese");for(var Pi='0123456789/@."',Ii=0;Ii<14;Ii++){var Mi=Pi.charAt(Ii);fi(gi,yi,Ei,Mi,Mi)}for(var Ri='0123456789!@*()-=+";:?/.,',Di=0;Di<25;Di++){var Li=Ri.charAt(Di);fi(vi,yi,Ei,Li,Li)}for(var zi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",qi=0;qi<52;qi++){var Bi=zi.charAt(qi);fi(gi,yi,Si,Bi,Bi),fi(vi,yi,Ei,Bi,Bi)}fi(gi,bi,Ei,"C","\u2102"),fi(vi,bi,Ei,"C","\u2102"),fi(gi,bi,Ei,"H","\u210d"),fi(vi,bi,Ei,"H","\u210d"),fi(gi,bi,Ei,"N","\u2115"),fi(vi,bi,Ei,"N","\u2115"),fi(gi,bi,Ei,"P","\u2119"),fi(vi,bi,Ei,"P","\u2119"),fi(gi,bi,Ei,"Q","\u211a"),fi(vi,bi,Ei,"Q","\u211a"),fi(gi,bi,Ei,"R","\u211d"),fi(vi,bi,Ei,"R","\u211d"),fi(gi,bi,Ei,"Z","\u2124"),fi(vi,bi,Ei,"Z","\u2124"),fi(gi,yi,Si,"h","\u210e"),fi(vi,yi,Si,"h","\u210e");for(var Fi="",Ui=0;Ui<52;Ui++){var Hi=zi.charAt(Ui);fi(gi,yi,Si,Hi,Fi=String.fromCharCode(55349,56320+Ui)),fi(vi,yi,Ei,Hi,Fi),fi(gi,yi,Si,Hi,Fi=String.fromCharCode(55349,56372+Ui)),fi(vi,yi,Ei,Hi,Fi),fi(gi,yi,Si,Hi,Fi=String.fromCharCode(55349,56424+Ui)),fi(vi,yi,Ei,Hi,Fi),fi(gi,yi,Si,Hi,Fi=String.fromCharCode(55349,56580+Ui)),fi(vi,yi,Ei,Hi,Fi),fi(gi,yi,Si,Hi,Fi=String.fromCharCode(55349,56684+Ui)),fi(vi,yi,Ei,Hi,Fi),fi(gi,yi,Si,Hi,Fi=String.fromCharCode(55349,56736+Ui)),fi(vi,yi,Ei,Hi,Fi),fi(gi,yi,Si,Hi,Fi=String.fromCharCode(55349,56788+Ui)),fi(vi,yi,Ei,Hi,Fi),fi(gi,yi,Si,Hi,Fi=String.fromCharCode(55349,56840+Ui)),fi(vi,yi,Ei,Hi,Fi),fi(gi,yi,Si,Hi,Fi=String.fromCharCode(55349,56944+Ui)),fi(vi,yi,Ei,Hi,Fi),Ui<26&&(fi(gi,yi,Si,Hi,Fi=String.fromCharCode(55349,56632+Ui)),fi(vi,yi,Ei,Hi,Fi),fi(gi,yi,Si,Hi,Fi=String.fromCharCode(55349,56476+Ui)),fi(vi,yi,Ei,Hi,Fi))}fi(gi,yi,Si,"k",Fi=String.fromCharCode(55349,56668)),fi(vi,yi,Ei,"k",Fi);for(var Wi=0;Wi<10;Wi++){var Ki=Wi.toString();fi(gi,yi,Si,Ki,Fi=String.fromCharCode(55349,57294+Wi)),fi(vi,yi,Ei,Ki,Fi),fi(gi,yi,Si,Ki,Fi=String.fromCharCode(55349,57314+Wi)),fi(vi,yi,Ei,Ki,Fi),fi(gi,yi,Si,Ki,Fi=String.fromCharCode(55349,57324+Wi)),fi(vi,yi,Ei,Ki,Fi),fi(gi,yi,Si,Ki,Fi=String.fromCharCode(55349,57334+Wi)),fi(vi,yi,Ei,Ki,Fi)}for(var Vi="\xd0\xde\xfe",Gi=0;Gi<3;Gi++){var Qi=Vi.charAt(Gi);fi(gi,yi,Si,Qi,Qi),fi(vi,yi,Ei,Qi,Qi)}var Yi=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],$i=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],Ji=function(e,t,r){return pi[r][e]&&pi[r][e].replace&&(e=pi[r][e].replace),{value:e,metrics:Fa(e,t,r)}},Xi=function(e,t,r,n,a){var i,o=Ji(e,t,r),s=o.metrics;if(e=o.value,s){var l=s.italic;("text"===r||n&&"mathit"===n.font)&&(l=0),i=new si(e,s.height,s.depth,l,s.skew,s.width,a)}else"undefined"!==typeof console&&console.warn("No character metrics for '"+e+"' in style '"+t+"' and mode '"+r+"'"),i=new si(e,0,0,0,0,0,a);if(n){i.maxFontSize=n.sizeMultiplier,n.style.isTight()&&i.classes.push("mtight");var c=n.getColor();c&&(i.style.color=c)}return i},Zi=(e,t)=>{if(Xa(e.classes)!==Xa(t.classes)||e.skew!==t.skew||e.maxFontSize!==t.maxFontSize)return!1;if(1===e.classes.length){var r=e.classes[0];if("mbin"===r||"mord"===r)return!1}for(var n in e.style)if(e.style.hasOwnProperty(n)&&e.style[n]!==t.style[n])return!1;for(var a in t.style)if(t.style.hasOwnProperty(a)&&e.style[a]!==t.style[a])return!1;return!0},eo=function(e){for(var t=0,r=0,n=0,a=0;a<e.children.length;a++){var i=e.children[a];i.height>t&&(t=i.height),i.depth>r&&(r=i.depth),i.maxFontSize>n&&(n=i.maxFontSize)}e.height=t,e.depth=r,e.maxFontSize=n},to=function(e,t,r,n){var a=new ni(e,t,r,n);return eo(a),a},ro=(e,t,r,n)=>new ni(e,t,r,n),no=function(e){var t=new La(e);return eo(t),t},ao=function(e,t,r){var n="";switch(e){case"amsrm":n="AMS";break;case"textrm":n="Main";break;case"textsf":n="SansSerif";break;case"texttt":n="Typewriter";break;default:n=e}return n+"-"+("textbf"===t&&"textit"===r?"BoldItalic":"textbf"===t?"Bold":"textit"===t?"Italic":"Regular")},io={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},oo={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},so={fontMap:io,makeSymbol:Xi,mathsym:function(e,t,r,n){return void 0===n&&(n=[]),"boldsymbol"===r.font&&Ji(e,"Main-Bold",t).metrics?Xi(e,"Main-Bold",t,r,n.concat(["mathbf"])):"\\"===e||"main"===pi[t][e].font?Xi(e,"Main-Regular",t,r,n):Xi(e,"AMS-Regular",t,r,n.concat(["amsrm"]))},makeSpan:to,makeSvgSpan:ro,makeLineSpan:function(e,t,r){var n=to([e],[],t);return n.height=Math.max(r||t.fontMetrics().defaultRuleThickness,t.minRuleThickness),n.style.borderBottomWidth=Ja(n.height),n.maxFontSize=1,n},makeAnchor:function(e,t,r,n){var a=new ai(e,t,r,n);return eo(a),a},makeFragment:no,wrapFragment:function(e,t){return e instanceof La?to([],[e],t):e},makeVList:function(e,t){for(var{children:r,depth:n}=function(e){if("individualShift"===e.positionType){for(var t=e.children,r=[t[0]],n=-t[0].shift-t[0].elem.depth,a=n,i=1;i<t.length;i++){var o=-t[i].shift-a-t[i].elem.depth,s=o-(t[i-1].elem.height+t[i-1].elem.depth);a+=o,r.push({type:"kern",size:s}),r.push(t[i])}return{children:r,depth:n}}var l;if("top"===e.positionType){for(var c=e.positionData,u=0;u<e.children.length;u++){var d=e.children[u];c-="kern"===d.type?d.size:d.elem.height+d.elem.depth}l=c}else if("bottom"===e.positionType)l=-e.positionData;else{var h=e.children[0];if("elem"!==h.type)throw new Error('First child must have type "elem".');if("shift"===e.positionType)l=-h.elem.depth-e.positionData;else{if("firstBaseline"!==e.positionType)throw new Error("Invalid positionType "+e.positionType+".");l=-h.elem.depth}}return{children:e.children,depth:l}}(e),a=0,i=0;i<r.length;i++){var o=r[i];if("elem"===o.type){var s=o.elem;a=Math.max(a,s.maxFontSize,s.height)}}a+=2;var l=to(["pstrut"],[]);l.style.height=Ja(a);for(var c=[],u=n,d=n,h=n,m=0;m<r.length;m++){var p=r[m];if("kern"===p.type)h+=p.size;else{var f=p.elem,g=p.wrapperClasses||[],v=p.wrapperStyle||{},y=to(g,[l,f],void 0,v);y.style.top=Ja(-a-h-f.depth),p.marginLeft&&(y.style.marginLeft=p.marginLeft),p.marginRight&&(y.style.marginRight=p.marginRight),c.push(y),h+=f.height+f.depth}u=Math.min(u,h),d=Math.max(d,h)}var b,x=to(["vlist"],c);if(x.style.height=Ja(d),u<0){var w=to([],[]),k=to(["vlist"],[w]);k.style.height=Ja(-u);var j=to(["vlist-s"],[new si("\u200b")]);b=[to(["vlist-r"],[x,j]),to(["vlist-r"],[k])]}else b=[to(["vlist-r"],[x])];var S=to(["vlist-t"],b);return 2===b.length&&S.classes.push("vlist-t2"),S.height=d,S.depth=-u,S},makeOrd:function(e,t,r){var n=e.mode,a=e.text,i=["mord"],o="math"===n||"text"===n&&t.font,s=o?t.font:t.fontFamily,l="",c="";if(55349===a.charCodeAt(0)&&([l,c]=function(e,t){var r=1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536,n="math"===t?0:1;if(119808<=r&&r<120484){var a=Math.floor((r-119808)/26);return[Yi[a][2],Yi[a][n]]}if(120782<=r&&r<=120831){var i=Math.floor((r-120782)/10);return[$i[i][2],$i[i][n]]}if(120485===r||120486===r)return[Yi[0][2],Yi[0][n]];if(120486<r&&r<120782)return["",""];throw new pa("Unsupported character: "+e)}(a,n)),l.length>0)return Xi(a,l,n,t,i.concat(c));if(s){var u,d;if("boldsymbol"===s){var h=function(e,t,r,n,a){return"textord"!==a&&Ji(e,"Math-BoldItalic",t).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}}(a,n,0,0,r);u=h.fontName,d=[h.fontClass]}else o?(u=io[s].fontName,d=[s]):(u=ao(s,t.fontWeight,t.fontShape),d=[s,t.fontWeight,t.fontShape]);if(Ji(a,u,n).metrics)return Xi(a,u,n,t,i.concat(d));if(Oi.hasOwnProperty(a)&&"Typewriter"===u.slice(0,10)){for(var m=[],p=0;p<a.length;p++)m.push(Xi(a[p],u,n,t,i.concat(d)));return no(m)}}if("mathord"===r)return Xi(a,"Math-Italic",n,t,i.concat(["mathnormal"]));if("textord"===r){var f=pi[n][a]&&pi[n][a].font;if("ams"===f){var g=ao("amsrm",t.fontWeight,t.fontShape);return Xi(a,g,n,t,i.concat("amsrm",t.fontWeight,t.fontShape))}if("main"!==f&&f){var v=ao(f,t.fontWeight,t.fontShape);return Xi(a,v,n,t,i.concat(v,t.fontWeight,t.fontShape))}var y=ao("textrm",t.fontWeight,t.fontShape);return Xi(a,y,n,t,i.concat(t.fontWeight,t.fontShape))}throw new Error("unexpected type: "+r+" in makeOrd")},makeGlue:(e,t)=>{var r=to(["mspace"],[],t),n=$a(e,t);return r.style.marginRight=Ja(n),r},staticSvg:function(e,t){var[r,n,a]=oo[e],i=new ci(r),o=new li([i],{width:Ja(n),height:Ja(a),style:"width:"+Ja(n),viewBox:"0 0 "+1e3*n+" "+1e3*a,preserveAspectRatio:"xMinYMin"}),s=ro(["overlay"],[o],t);return s.height=a,s.style.height=Ja(a),s.style.width=Ja(n),s},svgData:oo,tryCombineChars:e=>{for(var t=0;t<e.length-1;t++){var r=e[t],n=e[t+1];r instanceof si&&n instanceof si&&Zi(r,n)&&(r.text+=n.text,r.height=Math.max(r.height,n.height),r.depth=Math.max(r.depth,n.depth),r.italic=n.italic,e.splice(t+1,1),t--)}return e}},lo={number:3,unit:"mu"},co={number:4,unit:"mu"},uo={number:5,unit:"mu"},ho={mord:{mop:lo,mbin:co,mrel:uo,minner:lo},mop:{mord:lo,mop:lo,mrel:uo,minner:lo},mbin:{mord:co,mop:co,mopen:co,minner:co},mrel:{mord:uo,mop:uo,mopen:uo,minner:uo},mopen:{},mclose:{mop:lo,mbin:co,mrel:uo,minner:lo},mpunct:{mord:lo,mop:lo,mrel:uo,mopen:lo,mclose:lo,mpunct:lo,minner:lo},minner:{mord:lo,mop:lo,mbin:co,mrel:uo,mopen:lo,mpunct:lo,minner:lo}},mo={mord:{mop:lo},mop:{mord:lo,mop:lo},mbin:{},mrel:{},mopen:{},mclose:{mop:lo},mpunct:{},minner:{mop:lo}},po={},fo={},go={};function vo(e){for(var{type:t,names:r,props:n,handler:a,htmlBuilder:i,mathmlBuilder:o}=e,s={type:t,numArgs:n.numArgs,argTypes:n.argTypes,allowedInArgument:!!n.allowedInArgument,allowedInText:!!n.allowedInText,allowedInMath:void 0===n.allowedInMath||n.allowedInMath,numOptionalArgs:n.numOptionalArgs||0,infix:!!n.infix,primitive:!!n.primitive,handler:a},l=0;l<r.length;++l)po[r[l]]=s;t&&(i&&(fo[t]=i),o&&(go[t]=o))}function yo(e){var{type:t,htmlBuilder:r,mathmlBuilder:n}=e;vo({type:t,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:r,mathmlBuilder:n})}var bo=function(e){return"ordgroup"===e.type&&1===e.body.length?e.body[0]:e},xo=function(e){return"ordgroup"===e.type?e.body:[e]},wo=so.makeSpan,ko=["leftmost","mbin","mopen","mrel","mop","mpunct"],jo=["rightmost","mrel","mclose","mpunct"],So={display:Oa.DISPLAY,text:Oa.TEXT,script:Oa.SCRIPT,scriptscript:Oa.SCRIPTSCRIPT},Co={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},No=function(e,t,r,n){void 0===n&&(n=[null,null]);for(var a=[],i=0;i<e.length;i++){var o=Po(e[i],t);if(o instanceof La){var s=o.children;a.push(...s)}else a.push(o)}if(so.tryCombineChars(a),!r)return a;var l=t;if(1===e.length){var c=e[0];"sizing"===c.type?l=t.havingSize(c.size):"styling"===c.type&&(l=t.havingStyle(So[c.style]))}var u=wo([n[0]||"leftmost"],[],t),d=wo([n[1]||"rightmost"],[],t),h="root"===r;return _o(a,(e,t)=>{var r=t.classes[0],n=e.classes[0];"mbin"===r&&jo.includes(n)?t.classes[0]="mord":"mbin"===n&&ko.includes(r)&&(e.classes[0]="mord")},{node:u},d,h),_o(a,(e,t)=>{var r=Eo(t),n=Eo(e),a=r&&n?e.hasClass("mtight")?mo[r][n]:ho[r][n]:null;if(a)return so.makeGlue(a,l)},{node:u},d,h),a},_o=function e(t,r,n,a,i){a&&t.push(a);for(var o=0;o<t.length;o++){var s=t[o],l=Ao(s);if(l)e(l.children,r,n,null,i);else{var c=!s.hasClass("mspace");if(c){var u=r(s,n.node);u&&(n.insertAfter?n.insertAfter(u):(t.unshift(u),o++))}c?n.node=s:i&&s.hasClass("newline")&&(n.node=wo(["leftmost"])),n.insertAfter=(e=>r=>{t.splice(e+1,0,r),o++})(o)}}a&&t.pop()},Ao=function(e){return e instanceof La||e instanceof ai||e instanceof ni&&e.hasClass("enclosing")?e:null},To=function e(t,r){var n=Ao(t);if(n){var a=n.children;if(a.length){if("right"===r)return e(a[a.length-1],"right");if("left"===r)return e(a[0],"left")}}return t},Eo=function(e,t){return e?(t&&(e=To(e,t)),Co[e.classes[0]]||null):null},Oo=function(e,t){var r=["nulldelimiter"].concat(e.baseSizingClasses());return wo(t.concat(r))},Po=function(e,t,r){if(!e)return wo();if(fo[e.type]){var n=fo[e.type](e,t);if(r&&t.size!==r.size){n=wo(t.sizingClasses(r),[n],t);var a=t.sizeMultiplier/r.sizeMultiplier;n.height*=a,n.depth*=a}return n}throw new pa("Got group of unknown type: '"+e.type+"'")};function Io(e,t){var r=wo(["base"],e,t),n=wo(["strut"]);return n.style.height=Ja(r.height+r.depth),r.depth&&(n.style.verticalAlign=Ja(-r.depth)),r.children.unshift(n),r}function Mo(e,t){var r=null;1===e.length&&"tag"===e[0].type&&(r=e[0].tag,e=e[0].body);var n,a=No(e,t,"root");2===a.length&&a[1].hasClass("tag")&&(n=a.pop());for(var i,o=[],s=[],l=0;l<a.length;l++)if(s.push(a[l]),a[l].hasClass("mbin")||a[l].hasClass("mrel")||a[l].hasClass("allowbreak")){for(var c=!1;l<a.length-1&&a[l+1].hasClass("mspace")&&!a[l+1].hasClass("newline");)l++,s.push(a[l]),a[l].hasClass("nobreak")&&(c=!0);c||(o.push(Io(s,t)),s=[])}else a[l].hasClass("newline")&&(s.pop(),s.length>0&&(o.push(Io(s,t)),s=[]),o.push(a[l]));s.length>0&&o.push(Io(s,t)),r?((i=Io(No(r,t,!0))).classes=["tag"],o.push(i)):n&&o.push(n);var u=wo(["katex-html"],o);if(u.setAttribute("aria-hidden","true"),i){var d=i.children[0];d.style.height=Ja(u.height+u.depth),u.depth&&(d.style.verticalAlign=Ja(-u.depth))}return u}function Ro(e){return new La(e)}class Do{constructor(e,t,r){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=e,this.attributes={},this.children=t||[],this.classes=r||[]}setAttribute(e,t){this.attributes[e]=t}getAttribute(e){return this.attributes[e]}toNode(){var e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&e.setAttribute(t,this.attributes[t]);this.classes.length>0&&(e.className=Xa(this.classes));for(var r=0;r<this.children.length;r++)if(this.children[r]instanceof Lo&&this.children[r+1]instanceof Lo){for(var n=this.children[r].toText()+this.children[++r].toText();this.children[r+1]instanceof Lo;)n+=this.children[++r].toText();e.appendChild(new Lo(n).toNode())}else e.appendChild(this.children[r].toNode());return e}toMarkup(){var e="<"+this.type;for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="',e+=ba.escape(this.attributes[t]),e+='"');this.classes.length>0&&(e+=' class ="'+ba.escape(Xa(this.classes))+'"'),e+=">";for(var r=0;r<this.children.length;r++)e+=this.children[r].toMarkup();return e+="</"+this.type+">"}toText(){return this.children.map(e=>e.toText()).join("")}}class Lo{constructor(e){this.text=void 0,this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return ba.escape(this.toText())}toText(){return this.text}}var zo={MathNode:Do,TextNode:Lo,SpaceNode:class{constructor(e){this.width=void 0,this.character=void 0,this.width=e,this.character=e>=.05555&&e<=.05556?"\u200a":e>=.1666&&e<=.1667?"\u2009":e>=.2222&&e<=.2223?"\u2005":e>=.2777&&e<=.2778?"\u2005\u200a":e>=-.05556&&e<=-.05555?"\u200a\u2063":e>=-.1667&&e<=-.1666?"\u2009\u2063":e>=-.2223&&e<=-.2222?"\u205f\u2063":e>=-.2778&&e<=-.2777?"\u2005\u2063":null}toNode(){if(this.character)return document.createTextNode(this.character);var e=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return e.setAttribute("width",Ja(this.width)),e}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+Ja(this.width)+'"/>'}toText(){return this.character?this.character:" "}},newDocumentFragment:Ro},qo=function(e,t,r){return!pi[t][e]||!pi[t][e].replace||55349===e.charCodeAt(0)||Oi.hasOwnProperty(e)&&r&&(r.fontFamily&&"tt"===r.fontFamily.slice(4,6)||r.font&&"tt"===r.font.slice(4,6))||(e=pi[t][e].replace),new zo.TextNode(e)},Bo=function(e){return 1===e.length?e[0]:new zo.MathNode("mrow",e)},Fo=function(e,t){if("texttt"===t.fontFamily)return"monospace";if("textsf"===t.fontFamily)return"textit"===t.fontShape&&"textbf"===t.fontWeight?"sans-serif-bold-italic":"textit"===t.fontShape?"sans-serif-italic":"textbf"===t.fontWeight?"bold-sans-serif":"sans-serif";if("textit"===t.fontShape&&"textbf"===t.fontWeight)return"bold-italic";if("textit"===t.fontShape)return"italic";if("textbf"===t.fontWeight)return"bold";var r=t.font;if(!r||"mathnormal"===r)return null;var n=e.mode;if("mathit"===r)return"italic";if("boldsymbol"===r)return"textord"===e.type?"bold":"bold-italic";if("mathbf"===r)return"bold";if("mathbb"===r)return"double-struck";if("mathsfit"===r)return"sans-serif-italic";if("mathfrak"===r)return"fraktur";if("mathscr"===r||"mathcal"===r)return"script";if("mathsf"===r)return"sans-serif";if("mathtt"===r)return"monospace";var a=e.text;return["\\imath","\\jmath"].includes(a)?null:(pi[n][a]&&pi[n][a].replace&&(a=pi[n][a].replace),Fa(a,so.fontMap[r].fontName,n)?so.fontMap[r].variant:null)};function Uo(e){if(!e)return!1;if("mi"===e.type&&1===e.children.length){var t=e.children[0];return t instanceof Lo&&"."===t.text}if("mo"===e.type&&1===e.children.length&&"true"===e.getAttribute("separator")&&"0em"===e.getAttribute("lspace")&&"0em"===e.getAttribute("rspace")){var r=e.children[0];return r instanceof Lo&&","===r.text}return!1}var Ho=function(e,t,r){if(1===e.length){var n=Ko(e[0],t);return r&&n instanceof Do&&"mo"===n.type&&(n.setAttribute("lspace","0em"),n.setAttribute("rspace","0em")),[n]}for(var a,i=[],o=0;o<e.length;o++){var s=Ko(e[o],t);if(s instanceof Do&&a instanceof Do){if("mtext"===s.type&&"mtext"===a.type&&s.getAttribute("mathvariant")===a.getAttribute("mathvariant")){a.children.push(...s.children);continue}if("mn"===s.type&&"mn"===a.type){a.children.push(...s.children);continue}if(Uo(s)&&"mn"===a.type){a.children.push(...s.children);continue}if("mn"===s.type&&Uo(a))s.children=[...a.children,...s.children],i.pop();else if(("msup"===s.type||"msub"===s.type)&&s.children.length>=1&&("mn"===a.type||Uo(a))){var l=s.children[0];l instanceof Do&&"mn"===l.type&&(l.children=[...a.children,...l.children],i.pop())}else if("mi"===a.type&&1===a.children.length){var c=a.children[0];if(c instanceof Lo&&"\u0338"===c.text&&("mo"===s.type||"mi"===s.type||"mn"===s.type)){var u=s.children[0];u instanceof Lo&&u.text.length>0&&(u.text=u.text.slice(0,1)+"\u0338"+u.text.slice(1),i.pop())}}}i.push(s),a=s}return i},Wo=function(e,t,r){return Bo(Ho(e,t,r))},Ko=function(e,t){if(!e)return new zo.MathNode("mrow");if(go[e.type])return go[e.type](e,t);throw new pa("Got group of unknown type: '"+e.type+"'")};function Vo(e,t,r,n,a){var i,o=Ho(e,r);i=1===o.length&&o[0]instanceof Do&&["mrow","mtable"].includes(o[0].type)?o[0]:new zo.MathNode("mrow",o);var s=new zo.MathNode("annotation",[new zo.TextNode(t)]);s.setAttribute("encoding","application/x-tex");var l=new zo.MathNode("semantics",[i,s]),c=new zo.MathNode("math",[l]);c.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),n&&c.setAttribute("display","block");var u=a?"katex":"katex-mathml";return so.makeSpan([u],[c])}var Go=function(e){return new Va({style:e.displayMode?Oa.DISPLAY:Oa.TEXT,maxSize:e.maxSize,minRuleThickness:e.minRuleThickness})},Qo=function(e,t){if(t.displayMode){var r=["katex-display"];t.leqno&&r.push("leqno"),t.fleqn&&r.push("fleqn"),e=so.makeSpan(r,[e])}return e},Yo={widehat:"^",widecheck:"\u02c7",widetilde:"~",utilde:"~",overleftarrow:"\u2190",underleftarrow:"\u2190",xleftarrow:"\u2190",overrightarrow:"\u2192",underrightarrow:"\u2192",xrightarrow:"\u2192",underbrace:"\u23df",overbrace:"\u23de",overgroup:"\u23e0",undergroup:"\u23e1",overleftrightarrow:"\u2194",underleftrightarrow:"\u2194",xleftrightarrow:"\u2194",Overrightarrow:"\u21d2",xRightarrow:"\u21d2",overleftharpoon:"\u21bc",xleftharpoonup:"\u21bc",overrightharpoon:"\u21c0",xrightharpoonup:"\u21c0",xLeftarrow:"\u21d0",xLeftrightarrow:"\u21d4",xhookleftarrow:"\u21a9",xhookrightarrow:"\u21aa",xmapsto:"\u21a6",xrightharpoondown:"\u21c1",xleftharpoondown:"\u21bd",xrightleftharpoons:"\u21cc",xleftrightharpoons:"\u21cb",xtwoheadleftarrow:"\u219e",xtwoheadrightarrow:"\u21a0",xlongequal:"=",xtofrom:"\u21c4",xrightleftarrows:"\u21c4",xrightequilibrium:"\u21cc",xleftequilibrium:"\u21cb","\\cdrightarrow":"\u2192","\\cdleftarrow":"\u2190","\\cdlongequal":"="},$o={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},Jo=function(e,t,r,n,a){var i,o=e.height+e.depth+r+n;if(/fbox|color|angl/.test(t)){if(i=so.makeSpan(["stretchy",t],[],a),"fbox"===t){var s=a.color&&a.getColor();s&&(i.style.borderColor=s)}}else{var l=[];/^[bx]cancel$/.test(t)&&l.push(new ui({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(t)&&l.push(new ui({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var c=new li(l,{width:"100%",height:Ja(o)});i=so.makeSvgSpan([],[c],a)}return i.height=o,i.style.height=Ja(o),i},Xo=function(e){var t=new zo.MathNode("mo",[new zo.TextNode(Yo[e.replace(/^\\/,"")])]);return t.setAttribute("stretchy","true"),t},Zo=function(e,t){var{span:r,minWidth:n,height:a}=function(){var r=4e5,n=e.label.slice(1);if(["widehat","widecheck","widetilde","utilde"].includes(n)){var a,i,o,s="ordgroup"===(m=e.base).type?m.body.length:1;if(s>5)"widehat"===n||"widecheck"===n?(a=420,r=2364,o=.42,i=n+"4"):(a=312,r=2340,o=.34,i="tilde4");else{var l=[1,1,2,2,3,3][s];"widehat"===n||"widecheck"===n?(r=[0,1062,2364,2364,2364][l],a=[0,239,300,360,420][l],o=[0,.24,.3,.3,.36,.42][l],i=n+l):(r=[0,600,1033,2339,2340][l],a=[0,260,286,306,312][l],o=[0,.26,.286,.3,.306,.34][l],i="tilde"+l)}var c=new ci(i),u=new li([c],{width:"100%",height:Ja(o),viewBox:"0 0 "+r+" "+a,preserveAspectRatio:"none"});return{span:so.makeSvgSpan([],[u],t),minWidth:0,height:o}}var d,h,m,p=[],f=$o[n],[g,v,y]=f,b=y/1e3,x=g.length;if(1===x)d=["hide-tail"],h=[f[3]];else if(2===x)d=["halfarrow-left","halfarrow-right"],h=["xMinYMin","xMaxYMin"];else{if(3!==x)throw new Error("Correct katexImagesData or update code here to support\n                    "+x+" children.");d=["brace-left","brace-center","brace-right"],h=["xMinYMin","xMidYMin","xMaxYMin"]}for(var w=0;w<x;w++){var k=new ci(g[w]),j=new li([k],{width:"400em",height:Ja(b),viewBox:"0 0 "+r+" "+y,preserveAspectRatio:h[w]+" slice"}),S=so.makeSvgSpan([d[w]],[j],t);if(1===x)return{span:S,minWidth:v,height:b};S.style.height=Ja(b),p.push(S)}return{span:so.makeSpan(["stretchy"],p,t),minWidth:v,height:b}}();return r.height=a,r.style.height=Ja(a),n>0&&(r.style.minWidth=Ja(n)),r};function es(e,t){if(!e||e.type!==t)throw new Error("Expected node of type "+t+", but got "+(e?"node of type "+e.type:String(e)));return e}function ts(e){var t=rs(e);if(!t)throw new Error("Expected node of symbol group type, but got "+(e?"node of type "+e.type:String(e)));return t}function rs(e){return e&&("atom"===e.type||mi.hasOwnProperty(e.type))?e:null}var ns=(e,t)=>{var r,n,a;e&&"supsub"===e.type?(r=(n=es(e.base,"accent")).base,e.base=r,a=function(e){if(e instanceof ni)return e;throw new Error("Expected span<HtmlDomNode> but got "+String(e)+".")}(Po(e,t)),e.base=n):r=(n=es(e,"accent")).base;var i=Po(r,t.havingCrampedStyle()),o=0;if(n.isShifty&&ba.isCharacterBox(r)){var s=ba.getBaseElem(r);o=di(Po(s,t.havingCrampedStyle())).skew}var l,c="\\c"===n.label,u=c?i.height+i.depth:Math.min(i.height,t.fontMetrics().xHeight);if(n.isStretchy)l=Zo(n,t),l=so.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i},{type:"elem",elem:l,wrapperClasses:["svg-align"],wrapperStyle:o>0?{width:"calc(100% - "+Ja(2*o)+")",marginLeft:Ja(2*o)}:void 0}]},t);else{var d,h;"\\vec"===n.label?(d=so.staticSvg("vec",t),h=so.svgData.vec[1]):((d=di(d=so.makeOrd({mode:n.mode,text:n.label},t,"textord"))).italic=0,h=d.width,c&&(u+=d.depth)),l=so.makeSpan(["accent-body"],[d]);var m="\\textcircled"===n.label;m&&(l.classes.push("accent-full"),u=i.height);var p=o;m||(p-=h/2),l.style.left=Ja(p),"\\textcircled"===n.label&&(l.style.top=".2em"),l=so.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i},{type:"kern",size:-u},{type:"elem",elem:l}]},t)}var f=so.makeSpan(["mord","accent"],[l],t);return a?(a.children[0]=f,a.height=Math.max(f.height,a.height),a.classes[0]="mord",a):f},as=(e,t)=>{var r=e.isStretchy?Xo(e.label):new zo.MathNode("mo",[qo(e.label,e.mode)]),n=new zo.MathNode("mover",[Ko(e.base,t),r]);return n.setAttribute("accent","true"),n},is=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(e=>"\\"+e).join("|"));vo({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(e,t)=>{var r=bo(t[0]),n=!is.test(e.funcName),a=!n||"\\widehat"===e.funcName||"\\widetilde"===e.funcName||"\\widecheck"===e.funcName;return{type:"accent",mode:e.parser.mode,label:e.funcName,isStretchy:n,isShifty:a,base:r}},htmlBuilder:ns,mathmlBuilder:as}),vo({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(e,t)=>{var r=t[0],n=e.parser.mode;return"math"===n&&(e.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+e.funcName+" works only in text mode"),n="text"),{type:"accent",mode:n,label:e.funcName,isStretchy:!1,isShifty:!0,base:r}},htmlBuilder:ns,mathmlBuilder:as}),vo({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(e,t)=>{var{parser:r,funcName:n}=e,a=t[0];return{type:"accentUnder",mode:r.mode,label:n,base:a}},htmlBuilder:(e,t)=>{var r=Po(e.base,t),n=Zo(e,t),a="\\utilde"===e.label?.12:0,i=so.makeVList({positionType:"top",positionData:r.height,children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:a},{type:"elem",elem:r}]},t);return so.makeSpan(["mord","accentunder"],[i],t)},mathmlBuilder:(e,t)=>{var r=Xo(e.label),n=new zo.MathNode("munder",[Ko(e.base,t),r]);return n.setAttribute("accentunder","true"),n}});var os=e=>{var t=new zo.MathNode("mpadded",e?[e]:[]);return t.setAttribute("width","+0.6em"),t.setAttribute("lspace","0.3em"),t};vo({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(e,t,r){var{parser:n,funcName:a}=e;return{type:"xArrow",mode:n.mode,label:a,body:t[0],below:r[0]}},htmlBuilder(e,t){var r,n=t.style,a=t.havingStyle(n.sup()),i=so.wrapFragment(Po(e.body,a,t),t),o="\\x"===e.label.slice(0,2)?"x":"cd";i.classes.push(o+"-arrow-pad"),e.below&&(a=t.havingStyle(n.sub()),(r=so.wrapFragment(Po(e.below,a,t),t)).classes.push(o+"-arrow-pad"));var s,l=Zo(e,t),c=-t.fontMetrics().axisHeight+.5*l.height,u=-t.fontMetrics().axisHeight-.5*l.height-.111;if((i.depth>.25||"\\xleftequilibrium"===e.label)&&(u-=i.depth),r){var d=-t.fontMetrics().axisHeight+r.height+.5*l.height+.111;s=so.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:u},{type:"elem",elem:l,shift:c},{type:"elem",elem:r,shift:d}]},t)}else s=so.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:u},{type:"elem",elem:l,shift:c}]},t);return s.children[0].children[0].children[1].classes.push("svg-align"),so.makeSpan(["mrel","x-arrow"],[s],t)},mathmlBuilder(e,t){var r,n=Xo(e.label);if(n.setAttribute("minsize","x"===e.label.charAt(0)?"1.75em":"3.0em"),e.body){var a=os(Ko(e.body,t));if(e.below){var i=os(Ko(e.below,t));r=new zo.MathNode("munderover",[n,i,a])}else r=new zo.MathNode("mover",[n,a])}else if(e.below){var o=os(Ko(e.below,t));r=new zo.MathNode("munder",[n,o])}else r=os(),r=new zo.MathNode("mover",[n,r]);return r}});var ss=so.makeSpan;function ls(e,t){var r=No(e.body,t,!0);return ss([e.mclass],r,t)}function cs(e,t){var r,n=Ho(e.body,t);return"minner"===e.mclass?r=new zo.MathNode("mpadded",n):"mord"===e.mclass?e.isCharacterBox?(r=n[0]).type="mi":r=new zo.MathNode("mi",n):(e.isCharacterBox?(r=n[0]).type="mo":r=new zo.MathNode("mo",n),"mbin"===e.mclass?(r.attributes.lspace="0.22em",r.attributes.rspace="0.22em"):"mpunct"===e.mclass?(r.attributes.lspace="0em",r.attributes.rspace="0.17em"):"mopen"===e.mclass||"mclose"===e.mclass?(r.attributes.lspace="0em",r.attributes.rspace="0em"):"minner"===e.mclass&&(r.attributes.lspace="0.0556em",r.attributes.width="+0.1111em")),r}vo({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(e,t){var{parser:r,funcName:n}=e,a=t[0];return{type:"mclass",mode:r.mode,mclass:"m"+n.slice(5),body:xo(a),isCharacterBox:ba.isCharacterBox(a)}},htmlBuilder:ls,mathmlBuilder:cs});var us=e=>{var t="ordgroup"===e.type&&e.body.length?e.body[0]:e;return"atom"!==t.type||"bin"!==t.family&&"rel"!==t.family?"mord":"m"+t.family};vo({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(e,t){var{parser:r}=e;return{type:"mclass",mode:r.mode,mclass:us(t[0]),body:xo(t[1]),isCharacterBox:ba.isCharacterBox(t[1])}}}),vo({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(e,t){var r,{parser:n,funcName:a}=e,i=t[1],o=t[0];r="\\stackrel"!==a?us(i):"mrel";var s={type:"op",mode:i.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:"\\stackrel"!==a,body:xo(i)},l={type:"supsub",mode:o.mode,base:s,sup:"\\underset"===a?null:o,sub:"\\underset"===a?o:null};return{type:"mclass",mode:n.mode,mclass:r,body:[l],isCharacterBox:ba.isCharacterBox(l)}},htmlBuilder:ls,mathmlBuilder:cs}),vo({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(e,t){var{parser:r}=e;return{type:"pmb",mode:r.mode,mclass:us(t[0]),body:xo(t[0])}},htmlBuilder(e,t){var r=No(e.body,t,!0),n=so.makeSpan([e.mclass],r,t);return n.style.textShadow="0.02em 0.01em 0.04px",n},mathmlBuilder(e,t){var r=Ho(e.body,t),n=new zo.MathNode("mstyle",r);return n.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),n}});var ds={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},hs=()=>({type:"styling",body:[],mode:"math",style:"display"}),ms=e=>"textord"===e.type&&"@"===e.text,ps=(e,t)=>("mathord"===e.type||"atom"===e.type)&&e.text===t;function fs(e,t,r){var n=ds[e];switch(n){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return r.callFunction(n,[t[0]],[t[1]]);case"\\uparrow":case"\\downarrow":var a={type:"atom",text:n,mode:"math",family:"rel"},i={type:"ordgroup",mode:"math",body:[r.callFunction("\\\\cdleft",[t[0]],[]),r.callFunction("\\Big",[a],[]),r.callFunction("\\\\cdright",[t[1]],[])]};return r.callFunction("\\\\cdparent",[i],[]);case"\\\\cdlongequal":return r.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":return r.callFunction("\\Big",[{type:"textord",text:"\\Vert",mode:"math"}],[]);default:return{type:"textord",text:" ",mode:"math"}}}vo({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(e,t){var{parser:r,funcName:n}=e;return{type:"cdlabel",mode:r.mode,side:n.slice(4),label:t[0]}},htmlBuilder(e,t){var r=t.havingStyle(t.style.sup()),n=so.wrapFragment(Po(e.label,r,t),t);return n.classes.push("cd-label-"+e.side),n.style.bottom=Ja(.8-n.depth),n.height=0,n.depth=0,n},mathmlBuilder(e,t){var r=new zo.MathNode("mrow",[Ko(e.label,t)]);return(r=new zo.MathNode("mpadded",[r])).setAttribute("width","0"),"left"===e.side&&r.setAttribute("lspace","-1width"),r.setAttribute("voffset","0.7em"),(r=new zo.MathNode("mstyle",[r])).setAttribute("displaystyle","false"),r.setAttribute("scriptlevel","1"),r}}),vo({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(e,t){var{parser:r}=e;return{type:"cdlabelparent",mode:r.mode,fragment:t[0]}},htmlBuilder(e,t){var r=so.wrapFragment(Po(e.fragment,t),t);return r.classes.push("cd-vert-arrow"),r},mathmlBuilder:(e,t)=>new zo.MathNode("mrow",[Ko(e.fragment,t)])}),vo({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(e,t){for(var{parser:r}=e,n=es(t[0],"ordgroup").body,a="",i=0;i<n.length;i++){a+=es(n[i],"textord").text}var o,s=parseInt(a);if(isNaN(s))throw new pa("\\@char has non-numeric argument "+a);if(s<0||s>=1114111)throw new pa("\\@char with invalid code point "+a);return s<=65535?o=String.fromCharCode(s):(s-=65536,o=String.fromCharCode(55296+(s>>10),56320+(1023&s))),{type:"textord",mode:r.mode,text:o}}});var gs=(e,t)=>{var r=No(e.body,t.withColor(e.color),!1);return so.makeFragment(r)},vs=(e,t)=>{var r=Ho(e.body,t.withColor(e.color)),n=new zo.MathNode("mstyle",r);return n.setAttribute("mathcolor",e.color),n};vo({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(e,t){var{parser:r}=e,n=es(t[0],"color-token").color,a=t[1];return{type:"color",mode:r.mode,color:n,body:xo(a)}},htmlBuilder:gs,mathmlBuilder:vs}),vo({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(e,t){var{parser:r,breakOnTokenText:n}=e,a=es(t[0],"color-token").color;r.gullet.macros.set("\\current@color",a);var i=r.parseExpression(!0,n);return{type:"color",mode:r.mode,color:a,body:i}},htmlBuilder:gs,mathmlBuilder:vs}),vo({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(e,t,r){var{parser:n}=e,a="["===n.gullet.future().text?n.parseSizeGroup(!0):null,i=!n.settings.displayMode||!n.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:n.mode,newLine:i,size:a&&es(a,"size").value}},htmlBuilder(e,t){var r=so.makeSpan(["mspace"],[],t);return e.newLine&&(r.classes.push("newline"),e.size&&(r.style.marginTop=Ja($a(e.size,t)))),r},mathmlBuilder(e,t){var r=new zo.MathNode("mspace");return e.newLine&&(r.setAttribute("linebreak","newline"),e.size&&r.setAttribute("height",Ja($a(e.size,t)))),r}});var ys={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},bs=e=>{var t=e.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(t))throw new pa("Expected a control sequence",e);return t},xs=(e,t,r,n)=>{var a=e.gullet.macros.get(r.text);null==a&&(r.noexpand=!0,a={tokens:[r],numArgs:0,unexpandable:!e.gullet.isExpandable(r.text)}),e.gullet.macros.set(t,a,n)};vo({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(e){var{parser:t,funcName:r}=e;t.consumeSpaces();var n=t.fetch();if(ys[n.text])return"\\global"!==r&&"\\\\globallong"!==r||(n.text=ys[n.text]),es(t.parseFunction(),"internal");throw new pa("Invalid token after macro prefix",n)}}),vo({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:r}=e,n=t.gullet.popToken(),a=n.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(a))throw new pa("Expected a control sequence",n);for(var i,o=0,s=[[]];"{"!==t.gullet.future().text;)if("#"===(n=t.gullet.popToken()).text){if("{"===t.gullet.future().text){i=t.gullet.future(),s[o].push("{");break}if(n=t.gullet.popToken(),!/^[1-9]$/.test(n.text))throw new pa('Invalid argument number "'+n.text+'"');if(parseInt(n.text)!==o+1)throw new pa('Argument number "'+n.text+'" out of order');o++,s.push([])}else{if("EOF"===n.text)throw new pa("Expected a macro definition");s[o].push(n.text)}var{tokens:l}=t.gullet.consumeArg();return i&&l.unshift(i),"\\edef"!==r&&"\\xdef"!==r||(l=t.gullet.expandTokens(l)).reverse(),t.gullet.macros.set(a,{tokens:l,numArgs:o,delimiters:s},r===ys[r]),{type:"internal",mode:t.mode}}}),vo({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:r}=e,n=bs(t.gullet.popToken());t.gullet.consumeSpaces();var a=(e=>{var t=e.gullet.popToken();return"="===t.text&&" "===(t=e.gullet.popToken()).text&&(t=e.gullet.popToken()),t})(t);return xs(t,n,a,"\\\\globallet"===r),{type:"internal",mode:t.mode}}}),vo({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:r}=e,n=bs(t.gullet.popToken()),a=t.gullet.popToken(),i=t.gullet.popToken();return xs(t,n,i,"\\\\globalfuture"===r),t.gullet.pushToken(i),t.gullet.pushToken(a),{type:"internal",mode:t.mode}}});var ws=function(e,t,r){var n=Fa(pi.math[e]&&pi.math[e].replace||e,t,r);if(!n)throw new Error("Unsupported symbol "+e+" and font size "+t+".");return n},ks=function(e,t,r,n){var a=r.havingBaseStyle(t),i=so.makeSpan(n.concat(a.sizingClasses(r)),[e],r),o=a.sizeMultiplier/r.sizeMultiplier;return i.height*=o,i.depth*=o,i.maxFontSize=a.sizeMultiplier,i},js=function(e,t,r){var n=t.havingBaseStyle(r),a=(1-t.sizeMultiplier/n.sizeMultiplier)*t.fontMetrics().axisHeight;e.classes.push("delimcenter"),e.style.top=Ja(a),e.height-=a,e.depth+=a},Ss=function(e,t,r,n,a,i){var o=function(e,t,r,n){return so.makeSymbol(e,"Size"+t+"-Regular",r,n)}(e,t,a,n),s=ks(so.makeSpan(["delimsizing","size"+t],[o],n),Oa.TEXT,n,i);return r&&js(s,n,Oa.TEXT),s},Cs=function(e,t,r){var n;return n="Size1-Regular"===t?"delim-size1":"delim-size4",{type:"elem",elem:so.makeSpan(["delimsizinginner",n],[so.makeSpan([],[so.makeSymbol(e,t,r)])])}},Ns=function(e,t,r){var n=za["Size4-Regular"][e.charCodeAt(0)]?za["Size4-Regular"][e.charCodeAt(0)][4]:za["Size1-Regular"][e.charCodeAt(0)][4],a=new ci("inner",function(e,t){switch(e){case"\u239c":return"M291 0 H417 V"+t+" H291z M291 0 H417 V"+t+" H291z";case"\u2223":return"M145 0 H188 V"+t+" H145z M145 0 H188 V"+t+" H145z";case"\u2225":return"M145 0 H188 V"+t+" H145z M145 0 H188 V"+t+" H145zM367 0 H410 V"+t+" H367z M367 0 H410 V"+t+" H367z";case"\u239f":return"M457 0 H583 V"+t+" H457z M457 0 H583 V"+t+" H457z";case"\u23a2":return"M319 0 H403 V"+t+" H319z M319 0 H403 V"+t+" H319z";case"\u23a5":return"M263 0 H347 V"+t+" H263z M263 0 H347 V"+t+" H263z";case"\u23aa":return"M384 0 H504 V"+t+" H384z M384 0 H504 V"+t+" H384z";case"\u23d0":return"M312 0 H355 V"+t+" H312z M312 0 H355 V"+t+" H312z";case"\u2016":return"M257 0 H300 V"+t+" H257z M257 0 H300 V"+t+" H257zM478 0 H521 V"+t+" H478z M478 0 H521 V"+t+" H478z";default:return""}}(e,Math.round(1e3*t))),i=new li([a],{width:Ja(n),height:Ja(t),style:"width:"+Ja(n),viewBox:"0 0 "+1e3*n+" "+Math.round(1e3*t),preserveAspectRatio:"xMinYMin"}),o=so.makeSvgSpan([],[i],r);return o.height=t,o.style.height=Ja(t),o.style.width=Ja(n),{type:"elem",elem:o}},_s={type:"kern",size:-.008},As=["|","\\lvert","\\rvert","\\vert"],Ts=["\\|","\\lVert","\\rVert","\\Vert"],Es=function(e,t,r,n,a,i){var o,s,l,c,u="",d=0;o=l=c=e,s=null;var h="Size1-Regular";"\\uparrow"===e?l=c="\u23d0":"\\Uparrow"===e?l=c="\u2016":"\\downarrow"===e?o=l="\u23d0":"\\Downarrow"===e?o=l="\u2016":"\\updownarrow"===e?(o="\\uparrow",l="\u23d0",c="\\downarrow"):"\\Updownarrow"===e?(o="\\Uparrow",l="\u2016",c="\\Downarrow"):As.includes(e)?(l="\u2223",u="vert",d=333):Ts.includes(e)?(l="\u2225",u="doublevert",d=556):"["===e||"\\lbrack"===e?(o="\u23a1",l="\u23a2",c="\u23a3",h="Size4-Regular",u="lbrack",d=667):"]"===e||"\\rbrack"===e?(o="\u23a4",l="\u23a5",c="\u23a6",h="Size4-Regular",u="rbrack",d=667):"\\lfloor"===e||"\u230a"===e?(l=o="\u23a2",c="\u23a3",h="Size4-Regular",u="lfloor",d=667):"\\lceil"===e||"\u2308"===e?(o="\u23a1",l=c="\u23a2",h="Size4-Regular",u="lceil",d=667):"\\rfloor"===e||"\u230b"===e?(l=o="\u23a5",c="\u23a6",h="Size4-Regular",u="rfloor",d=667):"\\rceil"===e||"\u2309"===e?(o="\u23a4",l=c="\u23a5",h="Size4-Regular",u="rceil",d=667):"("===e||"\\lparen"===e?(o="\u239b",l="\u239c",c="\u239d",h="Size4-Regular",u="lparen",d=875):")"===e||"\\rparen"===e?(o="\u239e",l="\u239f",c="\u23a0",h="Size4-Regular",u="rparen",d=875):"\\{"===e||"\\lbrace"===e?(o="\u23a7",s="\u23a8",c="\u23a9",l="\u23aa",h="Size4-Regular"):"\\}"===e||"\\rbrace"===e?(o="\u23ab",s="\u23ac",c="\u23ad",l="\u23aa",h="Size4-Regular"):"\\lgroup"===e||"\u27ee"===e?(o="\u23a7",c="\u23a9",l="\u23aa",h="Size4-Regular"):"\\rgroup"===e||"\u27ef"===e?(o="\u23ab",c="\u23ad",l="\u23aa",h="Size4-Regular"):"\\lmoustache"===e||"\u23b0"===e?(o="\u23a7",c="\u23ad",l="\u23aa",h="Size4-Regular"):"\\rmoustache"!==e&&"\u23b1"!==e||(o="\u23ab",c="\u23a9",l="\u23aa",h="Size4-Regular");var m=ws(o,h,a),p=m.height+m.depth,f=ws(l,h,a),g=f.height+f.depth,v=ws(c,h,a),y=v.height+v.depth,b=0,x=1;if(null!==s){var w=ws(s,h,a);b=w.height+w.depth,x=2}var k=p+y+b,j=k+Math.max(0,Math.ceil((t-k)/(x*g)))*x*g,S=n.fontMetrics().axisHeight;r&&(S*=n.sizeMultiplier);var C=j/2-S,N=[];if(u.length>0){var _=j-p-y,A=Math.round(1e3*j),T=function(e,t){switch(e){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+t+" v1759 h347 v-84\nH403z M403 1759 V0 H319 V1759 v"+t+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+t+" v1759 H0 v84 H347z\nM347 1759 V0 H263 V1759 v"+t+" v1759 h84z";case"vert":return"M145 15 v585 v"+t+" v585 c2.667,10,9.667,15,21,15\nc10,0,16.667,-5,20,-15 v-585 v"+-t+" v-585 c-2.667,-10,-9.667,-15,-21,-15\nc-10,0,-16.667,5,-20,15z M188 15 H145 v585 v"+t+" v585 h43z";case"doublevert":return"M145 15 v585 v"+t+" v585 c2.667,10,9.667,15,21,15\nc10,0,16.667,-5,20,-15 v-585 v"+-t+" v-585 c-2.667,-10,-9.667,-15,-21,-15\nc-10,0,-16.667,5,-20,15z M188 15 H145 v585 v"+t+" v585 h43z\nM367 15 v585 v"+t+" v585 c2.667,10,9.667,15,21,15\nc10,0,16.667,-5,20,-15 v-585 v"+-t+" v-585 c-2.667,-10,-9.667,-15,-21,-15\nc-10,0,-16.667,5,-20,15z M410 15 H367 v585 v"+t+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+t+" v1715 h263 v84 H319z\nMM319 602 V0 H403 V602 v"+t+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+t+" v1799 H0 v-84 H319z\nMM319 602 V0 H403 V602 v"+t+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+t+" v602 h84z\nM403 1759 V0 H319 V1759 v"+t+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+t+" v602 h84z\nM347 1759 V0 h-84 V1759 v"+t+" v602 h84z";case"lparen":return"M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1\nc-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,\n-36,557 l0,"+(t+84)+"c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,\n949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9\nc0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,\n-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189\nl0,-"+(t+92)+"c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,\n-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z";case"rparen":return"M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,\n63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5\nc11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,"+(t+9)+"\nc-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664\nc-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11\nc0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17\nc242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558\nl0,-"+(t+144)+"c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,\n-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z";default:throw new Error("Unknown stretchy delimiter.")}}(u,Math.round(1e3*_)),E=new ci(u,T),O=(d/1e3).toFixed(3)+"em",P=(A/1e3).toFixed(3)+"em",I=new li([E],{width:O,height:P,viewBox:"0 0 "+d+" "+A}),M=so.makeSvgSpan([],[I],n);M.height=A/1e3,M.style.width=O,M.style.height=P,N.push({type:"elem",elem:M})}else{if(N.push(Cs(c,h,a)),N.push(_s),null===s){var R=j-p-y+.016;N.push(Ns(l,R,n))}else{var D=(j-p-y-b)/2+.016;N.push(Ns(l,D,n)),N.push(_s),N.push(Cs(s,h,a)),N.push(_s),N.push(Ns(l,D,n))}N.push(_s),N.push(Cs(o,h,a))}var L=n.havingBaseStyle(Oa.TEXT),z=so.makeVList({positionType:"bottom",positionData:C,children:N},L);return ks(so.makeSpan(["delimsizing","mult"],[z],L),Oa.TEXT,n,i)},Os=.08,Ps=function(e,t,r,n,a){var i=function(e,t,r){t*=1e3;var n="";switch(e){case"sqrtMain":n=function(e,t){return"M95,"+(622+e+t)+"\nc-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14\nc0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54\nc44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10\ns173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429\nc69,-144,104.5,-217.7,106.5,-221\nl"+e/2.075+" -"+e+"\nc5.3,-9.3,12,-14,20,-14\nH400000v"+(40+e)+"H845.2724\ns-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7\nc-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z\nM"+(834+e)+" "+t+"h400000v"+(40+e)+"h-400000z"}(t,Ra);break;case"sqrtSize1":n=function(e,t){return"M263,"+(601+e+t)+"c0.7,0,18,39.7,52,119\nc34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120\nc340,-704.7,510.7,-1060.3,512,-1067\nl"+e/2.084+" -"+e+"\nc4.7,-7.3,11,-11,19,-11\nH40000v"+(40+e)+"H1012.3\ns-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232\nc-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1\ns-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26\nc-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z\nM"+(1001+e)+" "+t+"h400000v"+(40+e)+"h-400000z"}(t,Ra);break;case"sqrtSize2":n=function(e,t){return"M983 "+(10+e+t)+"\nl"+e/3.13+" -"+e+"\nc4,-6.7,10,-10,18,-10 H400000v"+(40+e)+"\nH1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7\ns-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744\nc-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30\nc26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722\nc56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5\nc53.7,-170.3,84.5,-266.8,92.5,-289.5z\nM"+(1001+e)+" "+t+"h400000v"+(40+e)+"h-400000z"}(t,Ra);break;case"sqrtSize3":n=function(e,t){return"M424,"+(2398+e+t)+"\nc-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514\nc0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20\ns-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121\ns209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081\nl"+e/4.223+" -"+e+"c4,-6.7,10,-10,18,-10 H400000\nv"+(40+e)+"H1014.6\ns-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185\nc-2,6,-10,9,-24,9\nc-8,0,-12,-0.7,-12,-2z M"+(1001+e)+" "+t+"\nh400000v"+(40+e)+"h-400000z"}(t,Ra);break;case"sqrtSize4":n=function(e,t){return"M473,"+(2713+e+t)+"\nc339.3,-1799.3,509.3,-2700,510,-2702 l"+e/5.298+" -"+e+"\nc3.3,-7.3,9.3,-11,18,-11 H400000v"+(40+e)+"H1017.7\ns-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9\nc-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200\nc0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26\ns76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,\n606zM"+(1001+e)+" "+t+"h400000v"+(40+e)+"H1017.7z"}(t,Ra);break;case"sqrtTall":n=function(e,t,r){return"M702 "+(e+t)+"H400000"+(40+e)+"\nH742v"+(r-54-t-e)+"l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1\nh-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170\nc-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667\n219 661 l218 661zM702 "+t+"H400000v"+(40+e)+"H742z"}(t,Ra,r)}return n}(e,n,r),o=new ci(e,i),s=new li([o],{width:"400em",height:Ja(t),viewBox:"0 0 400000 "+r,preserveAspectRatio:"xMinYMin slice"});return so.makeSvgSpan(["hide-tail"],[s],a)},Is=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","\u230a","\u230b","\\lceil","\\rceil","\u2308","\u2309","\\surd"],Ms=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","\u27ee","\u27ef","\\lmoustache","\\rmoustache","\u23b0","\u23b1"],Rs=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],Ds=[0,1.2,1.8,2.4,3],Ls=[{type:"small",style:Oa.SCRIPTSCRIPT},{type:"small",style:Oa.SCRIPT},{type:"small",style:Oa.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],zs=[{type:"small",style:Oa.SCRIPTSCRIPT},{type:"small",style:Oa.SCRIPT},{type:"small",style:Oa.TEXT},{type:"stack"}],qs=[{type:"small",style:Oa.SCRIPTSCRIPT},{type:"small",style:Oa.SCRIPT},{type:"small",style:Oa.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],Bs=function(e){if("small"===e.type)return"Main-Regular";if("large"===e.type)return"Size"+e.size+"-Regular";if("stack"===e.type)return"Size4-Regular";throw new Error("Add support for delim type '"+e.type+"' here.")},Fs=function(e,t,r,n){for(var a=Math.min(2,3-n.style.size);a<r.length&&"stack"!==r[a].type;a++){var i=ws(e,Bs(r[a]),"math"),o=i.height+i.depth;if("small"===r[a].type&&(o*=n.havingBaseStyle(r[a].style).sizeMultiplier),o>t)return r[a]}return r[r.length-1]},Us=function(e,t,r,n,a,i){var o;"<"===e||"\\lt"===e||"\u27e8"===e?e="\\langle":">"!==e&&"\\gt"!==e&&"\u27e9"!==e||(e="\\rangle"),o=Rs.includes(e)?Ls:Is.includes(e)?qs:zs;var s=Fs(e,t,o,n);return"small"===s.type?function(e,t,r,n,a,i){var o=so.makeSymbol(e,"Main-Regular",a,n),s=ks(o,t,n,i);return r&&js(s,n,t),s}(e,s.style,r,n,a,i):"large"===s.type?Ss(e,s.size,r,n,a,i):Es(e,t,r,n,a,i)},Hs={sqrtImage:function(e,t){var r,n,a=t.havingBaseSizing(),i=Fs("\\surd",e*a.sizeMultiplier,qs,a),o=a.sizeMultiplier,s=Math.max(0,t.minRuleThickness-t.fontMetrics().sqrtRuleThickness),l=0,c=0,u=0;return"small"===i.type?(e<1?o=1:e<1.4&&(o=.7),c=(1+s)/o,(r=Ps("sqrtMain",l=(1+s+Os)/o,u=1e3+1e3*s+80,s,t)).style.minWidth="0.853em",n=.833/o):"large"===i.type?(u=1080*Ds[i.size],c=(Ds[i.size]+s)/o,l=(Ds[i.size]+s+Os)/o,(r=Ps("sqrtSize"+i.size,l,u,s,t)).style.minWidth="1.02em",n=1/o):(l=e+s+Os,c=e+s,u=Math.floor(1e3*e+s)+80,(r=Ps("sqrtTall",l,u,s,t)).style.minWidth="0.742em",n=1.056),r.height=c,r.style.height=Ja(l),{span:r,advanceWidth:n,ruleWidth:(t.fontMetrics().sqrtRuleThickness+s)*o}},sizedDelim:function(e,t,r,n,a){if("<"===e||"\\lt"===e||"\u27e8"===e?e="\\langle":">"!==e&&"\\gt"!==e&&"\u27e9"!==e||(e="\\rangle"),Is.includes(e)||Rs.includes(e))return Ss(e,t,!1,r,n,a);if(Ms.includes(e))return Es(e,Ds[t],!1,r,n,a);throw new pa("Illegal delimiter: '"+e+"'")},sizeToMaxHeight:Ds,customSizedDelim:Us,leftRightDelim:function(e,t,r,n,a,i){var o=n.fontMetrics().axisHeight*n.sizeMultiplier,s=5/n.fontMetrics().ptPerEm,l=Math.max(t-o,r+o),c=Math.max(l/500*901,2*l-s);return Us(e,c,!0,n,a,i)}},Ws={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},Ks=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","\u230a","\u230b","\\lceil","\\rceil","\u2308","\u2309","<",">","\\langle","\u27e8","\\rangle","\u27e9","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","\u27ee","\u27ef","\\lmoustache","\\rmoustache","\u23b0","\u23b1","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function Vs(e,t){var r=rs(e);if(r&&Ks.includes(r.text))return r;throw new pa(r?"Invalid delimiter '"+r.text+"' after '"+t.funcName+"'":"Invalid delimiter type '"+e.type+"'",e)}function Gs(e){if(!e.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}vo({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(e,t)=>{var r=Vs(t[0],e);return{type:"delimsizing",mode:e.parser.mode,size:Ws[e.funcName].size,mclass:Ws[e.funcName].mclass,delim:r.text}},htmlBuilder:(e,t)=>"."===e.delim?so.makeSpan([e.mclass]):Hs.sizedDelim(e.delim,e.size,t,e.mode,[e.mclass]),mathmlBuilder:e=>{var t=[];"."!==e.delim&&t.push(qo(e.delim,e.mode));var r=new zo.MathNode("mo",t);"mopen"===e.mclass||"mclose"===e.mclass?r.setAttribute("fence","true"):r.setAttribute("fence","false"),r.setAttribute("stretchy","true");var n=Ja(Hs.sizeToMaxHeight[e.size]);return r.setAttribute("minsize",n),r.setAttribute("maxsize",n),r}}),vo({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var r=e.parser.gullet.macros.get("\\current@color");if(r&&"string"!==typeof r)throw new pa("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:e.parser.mode,delim:Vs(t[0],e).text,color:r}}}),vo({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var r=Vs(t[0],e),n=e.parser;++n.leftrightDepth;var a=n.parseExpression(!1);--n.leftrightDepth,n.expect("\\right",!1);var i=es(n.parseFunction(),"leftright-right");return{type:"leftright",mode:n.mode,body:a,left:r.text,right:i.delim,rightColor:i.color}},htmlBuilder:(e,t)=>{Gs(e);for(var r,n,a=No(e.body,t,!0,["mopen","mclose"]),i=0,o=0,s=!1,l=0;l<a.length;l++)a[l].isMiddle?s=!0:(i=Math.max(a[l].height,i),o=Math.max(a[l].depth,o));if(i*=t.sizeMultiplier,o*=t.sizeMultiplier,r="."===e.left?Oo(t,["mopen"]):Hs.leftRightDelim(e.left,i,o,t,e.mode,["mopen"]),a.unshift(r),s)for(var c=1;c<a.length;c++){var u=a[c].isMiddle;u&&(a[c]=Hs.leftRightDelim(u.delim,i,o,u.options,e.mode,[]))}if("."===e.right)n=Oo(t,["mclose"]);else{var d=e.rightColor?t.withColor(e.rightColor):t;n=Hs.leftRightDelim(e.right,i,o,d,e.mode,["mclose"])}return a.push(n),so.makeSpan(["minner"],a,t)},mathmlBuilder:(e,t)=>{Gs(e);var r=Ho(e.body,t);if("."!==e.left){var n=new zo.MathNode("mo",[qo(e.left,e.mode)]);n.setAttribute("fence","true"),r.unshift(n)}if("."!==e.right){var a=new zo.MathNode("mo",[qo(e.right,e.mode)]);a.setAttribute("fence","true"),e.rightColor&&a.setAttribute("mathcolor",e.rightColor),r.push(a)}return Bo(r)}}),vo({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var r=Vs(t[0],e);if(!e.parser.leftrightDepth)throw new pa("\\middle without preceding \\left",r);return{type:"middle",mode:e.parser.mode,delim:r.text}},htmlBuilder:(e,t)=>{var r;if("."===e.delim)r=Oo(t,[]);else{r=Hs.sizedDelim(e.delim,1,t,e.mode,[]);var n={delim:e.delim,options:t};r.isMiddle=n}return r},mathmlBuilder:(e,t)=>{var r="\\vert"===e.delim||"|"===e.delim?qo("|","text"):qo(e.delim,e.mode),n=new zo.MathNode("mo",[r]);return n.setAttribute("fence","true"),n.setAttribute("lspace","0.05em"),n.setAttribute("rspace","0.05em"),n}});var Qs=(e,t)=>{var r,n,a,i=so.wrapFragment(Po(e.body,t),t),o=e.label.slice(1),s=t.sizeMultiplier,l=0,c=ba.isCharacterBox(e.body);if("sout"===o)(r=so.makeSpan(["stretchy","sout"])).height=t.fontMetrics().defaultRuleThickness/s,l=-.5*t.fontMetrics().xHeight;else if("phase"===o){var u=$a({number:.6,unit:"pt"},t),d=$a({number:.35,unit:"ex"},t);s/=t.havingBaseSizing().sizeMultiplier;var h=i.height+i.depth+u+d;i.style.paddingLeft=Ja(h/2+u);var m=Math.floor(1e3*h*s),p="M400000 "+(n=m)+" H0 L"+n/2+" 0 l65 45 L145 "+(n-80)+" H400000z",f=new li([new ci("phase",p)],{width:"400em",height:Ja(m/1e3),viewBox:"0 0 400000 "+m,preserveAspectRatio:"xMinYMin slice"});(r=so.makeSvgSpan(["hide-tail"],[f],t)).style.height=Ja(h),l=i.depth+u+d}else{/cancel/.test(o)?c||i.classes.push("cancel-pad"):"angl"===o?i.classes.push("anglpad"):i.classes.push("boxpad");var g=0,v=0,y=0;/box/.test(o)?(y=Math.max(t.fontMetrics().fboxrule,t.minRuleThickness),v=g=t.fontMetrics().fboxsep+("colorbox"===o?0:y)):"angl"===o?(g=4*(y=Math.max(t.fontMetrics().defaultRuleThickness,t.minRuleThickness)),v=Math.max(0,.25-i.depth)):v=g=c?.2:0,r=Jo(i,o,g,v,t),/fbox|boxed|fcolorbox/.test(o)?(r.style.borderStyle="solid",r.style.borderWidth=Ja(y)):"angl"===o&&.049!==y&&(r.style.borderTopWidth=Ja(y),r.style.borderRightWidth=Ja(y)),l=i.depth+v,e.backgroundColor&&(r.style.backgroundColor=e.backgroundColor,e.borderColor&&(r.style.borderColor=e.borderColor))}if(e.backgroundColor)a=so.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:l},{type:"elem",elem:i,shift:0}]},t);else{var b=/cancel|phase/.test(o)?["svg-align"]:[];a=so.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:0},{type:"elem",elem:r,shift:l,wrapperClasses:b}]},t)}return/cancel/.test(o)&&(a.height=i.height,a.depth=i.depth),/cancel/.test(o)&&!c?so.makeSpan(["mord","cancel-lap"],[a],t):so.makeSpan(["mord"],[a],t)},Ys=(e,t)=>{var r=0,n=new zo.MathNode(e.label.indexOf("colorbox")>-1?"mpadded":"menclose",[Ko(e.body,t)]);switch(e.label){case"\\cancel":n.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":n.setAttribute("notation","downdiagonalstrike");break;case"\\phase":n.setAttribute("notation","phasorangle");break;case"\\sout":n.setAttribute("notation","horizontalstrike");break;case"\\fbox":n.setAttribute("notation","box");break;case"\\angl":n.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(r=t.fontMetrics().fboxsep*t.fontMetrics().ptPerEm,n.setAttribute("width","+"+2*r+"pt"),n.setAttribute("height","+"+2*r+"pt"),n.setAttribute("lspace",r+"pt"),n.setAttribute("voffset",r+"pt"),"\\fcolorbox"===e.label){var a=Math.max(t.fontMetrics().fboxrule,t.minRuleThickness);n.setAttribute("style","border: "+a+"em solid "+String(e.borderColor))}break;case"\\xcancel":n.setAttribute("notation","updiagonalstrike downdiagonalstrike")}return e.backgroundColor&&n.setAttribute("mathbackground",e.backgroundColor),n};vo({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(e,t,r){var{parser:n,funcName:a}=e,i=es(t[0],"color-token").color,o=t[1];return{type:"enclose",mode:n.mode,label:a,backgroundColor:i,body:o}},htmlBuilder:Qs,mathmlBuilder:Ys}),vo({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(e,t,r){var{parser:n,funcName:a}=e,i=es(t[0],"color-token").color,o=es(t[1],"color-token").color,s=t[2];return{type:"enclose",mode:n.mode,label:a,backgroundColor:o,borderColor:i,body:s}},htmlBuilder:Qs,mathmlBuilder:Ys}),vo({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(e,t){var{parser:r}=e;return{type:"enclose",mode:r.mode,label:"\\fbox",body:t[0]}}}),vo({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(e,t){var{parser:r,funcName:n}=e,a=t[0];return{type:"enclose",mode:r.mode,label:n,body:a}},htmlBuilder:Qs,mathmlBuilder:Ys}),vo({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(e,t){var{parser:r}=e;return{type:"enclose",mode:r.mode,label:"\\angl",body:t[0]}}});var $s={};function Js(e){for(var{type:t,names:r,props:n,handler:a,htmlBuilder:i,mathmlBuilder:o}=e,s={type:t,numArgs:n.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:a},l=0;l<r.length;++l)$s[r[l]]=s;i&&(fo[t]=i),o&&(go[t]=o)}var Xs={};function Zs(e,t){Xs[e]=t}function el(e){var t=[];e.consumeSpaces();var r=e.fetch().text;for("\\relax"===r&&(e.consume(),e.consumeSpaces(),r=e.fetch().text);"\\hline"===r||"\\hdashline"===r;)e.consume(),t.push("\\hdashline"===r),e.consumeSpaces(),r=e.fetch().text;return t}var tl=e=>{if(!e.parser.settings.displayMode)throw new pa("{"+e.envName+"} can be used only in display mode.")};function rl(e){if(-1===e.indexOf("ed"))return-1===e.indexOf("*")}function nl(e,t,r){var{hskipBeforeAndAfter:n,addJot:a,cols:i,arraystretch:o,colSeparationType:s,autoTag:l,singleRow:c,emptySingleRow:u,maxNumCols:d,leqno:h}=t;if(e.gullet.beginGroup(),c||e.gullet.macros.set("\\cr","\\\\\\relax"),!o){var m=e.gullet.expandMacroAsText("\\arraystretch");if(null==m)o=1;else if(!(o=parseFloat(m))||o<0)throw new pa("Invalid \\arraystretch: "+m)}e.gullet.beginGroup();var p=[],f=[p],g=[],v=[],y=null!=l?[]:void 0;function b(){l&&e.gullet.macros.set("\\@eqnsw","1",!0)}function x(){y&&(e.gullet.macros.get("\\df@tag")?(y.push(e.subparse([new ma("\\df@tag")])),e.gullet.macros.set("\\df@tag",void 0,!0)):y.push(Boolean(l)&&"1"===e.gullet.macros.get("\\@eqnsw")))}for(b(),v.push(el(e));;){var w=e.parseExpression(!1,c?"\\end":"\\\\");e.gullet.endGroup(),e.gullet.beginGroup(),w={type:"ordgroup",mode:e.mode,body:w},r&&(w={type:"styling",mode:e.mode,style:r,body:[w]}),p.push(w);var k=e.fetch().text;if("&"===k){if(d&&p.length===d){if(c||s)throw new pa("Too many tab characters: &",e.nextToken);e.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}e.consume()}else{if("\\end"===k){x(),1===p.length&&"styling"===w.type&&0===w.body[0].body.length&&(f.length>1||!u)&&f.pop(),v.length<f.length+1&&v.push([]);break}if("\\\\"!==k)throw new pa("Expected & or \\\\ or \\cr or \\end",e.nextToken);e.consume();var j=void 0;" "!==e.gullet.future().text&&(j=e.parseSizeGroup(!0)),g.push(j?j.value:null),x(),v.push(el(e)),p=[],f.push(p),b()}}return e.gullet.endGroup(),e.gullet.endGroup(),{type:"array",mode:e.mode,addJot:a,arraystretch:o,body:f,cols:i,rowGaps:g,hskipBeforeAndAfter:n,hLinesBeforeRow:v,colSeparationType:s,tags:y,leqno:h}}function al(e){return"d"===e.slice(0,1)?"display":"text"}var il=function(e,t){var r,n,a=e.body.length,i=e.hLinesBeforeRow,o=0,s=new Array(a),l=[],c=Math.max(t.fontMetrics().arrayRuleWidth,t.minRuleThickness),u=1/t.fontMetrics().ptPerEm,d=5*u;e.colSeparationType&&"small"===e.colSeparationType&&(d=t.havingStyle(Oa.SCRIPT).sizeMultiplier/t.sizeMultiplier*.2778);var h="CD"===e.colSeparationType?$a({number:3,unit:"ex"},t):12*u,m=3*u,p=e.arraystretch*h,f=.7*p,g=.3*p,v=0;function y(e){for(var t=0;t<e.length;++t)t>0&&(v+=.25),l.push({pos:v,isDashed:e[t]})}for(y(i[0]),r=0;r<e.body.length;++r){var b=e.body[r],x=f,w=g;o<b.length&&(o=b.length);var k=new Array(b.length);for(n=0;n<b.length;++n){var j=Po(b[n],t);w<j.depth&&(w=j.depth),x<j.height&&(x=j.height),k[n]=j}var S=e.rowGaps[r],C=0;S&&(C=$a(S,t))>0&&(w<(C+=g)&&(w=C),C=0),e.addJot&&(w+=m),k.height=x,k.depth=w,v+=x,k.pos=v,v+=w+C,s[r]=k,y(i[r+1])}var N,_,A=v/2+t.fontMetrics().axisHeight,T=e.cols||[],E=[],O=[];if(e.tags&&e.tags.some(e=>e))for(r=0;r<a;++r){var P=s[r],I=P.pos-A,M=e.tags[r],R=void 0;(R=!0===M?so.makeSpan(["eqn-num"],[],t):!1===M?so.makeSpan([],[],t):so.makeSpan([],No(M,t,!0),t)).depth=P.depth,R.height=P.height,O.push({type:"elem",elem:R,shift:I})}for(n=0,_=0;n<o||_<T.length;++n,++_){for(var D=T[_]||{},L=!0;"separator"===D.type;){if(L||((N=so.makeSpan(["arraycolsep"],[])).style.width=Ja(t.fontMetrics().doubleRuleSep),E.push(N)),"|"!==D.separator&&":"!==D.separator)throw new pa("Invalid separator type: "+D.separator);var z="|"===D.separator?"solid":"dashed",q=so.makeSpan(["vertical-separator"],[],t);q.style.height=Ja(v),q.style.borderRightWidth=Ja(c),q.style.borderRightStyle=z,q.style.margin="0 "+Ja(-c/2);var B=v-A;B&&(q.style.verticalAlign=Ja(-B)),E.push(q),D=T[++_]||{},L=!1}if(!(n>=o)){var F=void 0;(n>0||e.hskipBeforeAndAfter)&&0!==(F=ba.deflt(D.pregap,d))&&((N=so.makeSpan(["arraycolsep"],[])).style.width=Ja(F),E.push(N));var U=[];for(r=0;r<a;++r){var H=s[r],W=H[n];if(W){var K=H.pos-A;W.depth=H.depth,W.height=H.height,U.push({type:"elem",elem:W,shift:K})}}U=so.makeVList({positionType:"individualShift",children:U},t),U=so.makeSpan(["col-align-"+(D.align||"c")],[U]),E.push(U),(n<o-1||e.hskipBeforeAndAfter)&&0!==(F=ba.deflt(D.postgap,d))&&((N=so.makeSpan(["arraycolsep"],[])).style.width=Ja(F),E.push(N))}}if(s=so.makeSpan(["mtable"],E),l.length>0){for(var V=so.makeLineSpan("hline",t,c),G=so.makeLineSpan("hdashline",t,c),Q=[{type:"elem",elem:s,shift:0}];l.length>0;){var Y=l.pop(),$=Y.pos-A;Y.isDashed?Q.push({type:"elem",elem:G,shift:$}):Q.push({type:"elem",elem:V,shift:$})}s=so.makeVList({positionType:"individualShift",children:Q},t)}if(0===O.length)return so.makeSpan(["mord"],[s],t);var J=so.makeVList({positionType:"individualShift",children:O},t);return J=so.makeSpan(["tag"],[J],t),so.makeFragment([s,J])},ol={c:"center ",l:"left ",r:"right "},sl=function(e,t){for(var r=[],n=new zo.MathNode("mtd",[],["mtr-glue"]),a=new zo.MathNode("mtd",[],["mml-eqn-num"]),i=0;i<e.body.length;i++){for(var o=e.body[i],s=[],l=0;l<o.length;l++)s.push(new zo.MathNode("mtd",[Ko(o[l],t)]));e.tags&&e.tags[i]&&(s.unshift(n),s.push(n),e.leqno?s.unshift(a):s.push(a)),r.push(new zo.MathNode("mtr",s))}var c=new zo.MathNode("mtable",r),u=.5===e.arraystretch?.1:.16+e.arraystretch-1+(e.addJot?.09:0);c.setAttribute("rowspacing",Ja(u));var d="",h="";if(e.cols&&e.cols.length>0){var m=e.cols,p="",f=!1,g=0,v=m.length;"separator"===m[0].type&&(d+="top ",g=1),"separator"===m[m.length-1].type&&(d+="bottom ",v-=1);for(var y=g;y<v;y++)"align"===m[y].type?(h+=ol[m[y].align],f&&(p+="none "),f=!0):"separator"===m[y].type&&f&&(p+="|"===m[y].separator?"solid ":"dashed ",f=!1);c.setAttribute("columnalign",h.trim()),/[sd]/.test(p)&&c.setAttribute("columnlines",p.trim())}if("align"===e.colSeparationType){for(var b=e.cols||[],x="",w=1;w<b.length;w++)x+=w%2?"0em ":"1em ";c.setAttribute("columnspacing",x.trim())}else"alignat"===e.colSeparationType||"gather"===e.colSeparationType?c.setAttribute("columnspacing","0em"):"small"===e.colSeparationType?c.setAttribute("columnspacing","0.2778em"):"CD"===e.colSeparationType?c.setAttribute("columnspacing","0.5em"):c.setAttribute("columnspacing","1em");var k="",j=e.hLinesBeforeRow;d+=j[0].length>0?"left ":"",d+=j[j.length-1].length>0?"right ":"";for(var S=1;S<j.length-1;S++)k+=0===j[S].length?"none ":j[S][0]?"dashed ":"solid ";return/[sd]/.test(k)&&c.setAttribute("rowlines",k.trim()),""!==d&&(c=new zo.MathNode("menclose",[c])).setAttribute("notation",d.trim()),e.arraystretch&&e.arraystretch<1&&(c=new zo.MathNode("mstyle",[c])).setAttribute("scriptlevel","1"),c},ll=function(e,t){-1===e.envName.indexOf("ed")&&tl(e);var r,n=[],a=e.envName.indexOf("at")>-1?"alignat":"align",i="split"===e.envName,o=nl(e.parser,{cols:n,addJot:!0,autoTag:i?void 0:rl(e.envName),emptySingleRow:!0,colSeparationType:a,maxNumCols:i?2:void 0,leqno:e.parser.settings.leqno},"display"),s=0,l={type:"ordgroup",mode:e.mode,body:[]};if(t[0]&&"ordgroup"===t[0].type){for(var c="",u=0;u<t[0].body.length;u++){c+=es(t[0].body[u],"textord").text}r=Number(c),s=2*r}var d=!s;o.body.forEach(function(e){for(var t=1;t<e.length;t+=2){var n=es(e[t],"styling");es(n.body[0],"ordgroup").body.unshift(l)}if(d)s<e.length&&(s=e.length);else{var a=e.length/2;if(r<a)throw new pa("Too many math in a row: expected "+r+", but got "+a,e[0])}});for(var h=0;h<s;++h){var m="r",p=0;h%2===1?m="l":h>0&&d&&(p=1),n[h]={type:"align",align:m,pregap:p,postgap:0}}return o.colSeparationType=d?"align":"alignat",o};Js({type:"array",names:["array","darray"],props:{numArgs:1},handler(e,t){var r=(rs(t[0])?[t[0]]:es(t[0],"ordgroup").body).map(function(e){var t=ts(e).text;if(-1!=="lcr".indexOf(t))return{type:"align",align:t};if("|"===t)return{type:"separator",separator:"|"};if(":"===t)return{type:"separator",separator:":"};throw new pa("Unknown column alignment: "+t,e)}),n={cols:r,hskipBeforeAndAfter:!0,maxNumCols:r.length};return nl(e.parser,n,al(e.envName))},htmlBuilder:il,mathmlBuilder:sl}),Js({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(e){var t={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[e.envName.replace("*","")],r="c",n={hskipBeforeAndAfter:!1,cols:[{type:"align",align:r}]};if("*"===e.envName.charAt(e.envName.length-1)){var a=e.parser;if(a.consumeSpaces(),"["===a.fetch().text){if(a.consume(),a.consumeSpaces(),r=a.fetch().text,-1==="lcr".indexOf(r))throw new pa("Expected l or c or r",a.nextToken);a.consume(),a.consumeSpaces(),a.expect("]"),a.consume(),n.cols=[{type:"align",align:r}]}}var i=nl(e.parser,n,al(e.envName)),o=Math.max(0,...i.body.map(e=>e.length));return i.cols=new Array(o).fill({type:"align",align:r}),t?{type:"leftright",mode:e.mode,body:[i],left:t[0],right:t[1],rightColor:void 0}:i},htmlBuilder:il,mathmlBuilder:sl}),Js({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(e){var t=nl(e.parser,{arraystretch:.5},"script");return t.colSeparationType="small",t},htmlBuilder:il,mathmlBuilder:sl}),Js({type:"array",names:["subarray"],props:{numArgs:1},handler(e,t){var r=(rs(t[0])?[t[0]]:es(t[0],"ordgroup").body).map(function(e){var t=ts(e).text;if(-1!=="lc".indexOf(t))return{type:"align",align:t};throw new pa("Unknown column alignment: "+t,e)});if(r.length>1)throw new pa("{subarray} can contain only one column");var n={cols:r,hskipBeforeAndAfter:!1,arraystretch:.5};if((n=nl(e.parser,n,"script")).body.length>0&&n.body[0].length>1)throw new pa("{subarray} can contain only one column");return n},htmlBuilder:il,mathmlBuilder:sl}),Js({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(e){var t=nl(e.parser,{arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},al(e.envName));return{type:"leftright",mode:e.mode,body:[t],left:e.envName.indexOf("r")>-1?".":"\\{",right:e.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:il,mathmlBuilder:sl}),Js({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:ll,htmlBuilder:il,mathmlBuilder:sl}),Js({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(e){["gather","gather*"].includes(e.envName)&&tl(e);var t={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:rl(e.envName),emptySingleRow:!0,leqno:e.parser.settings.leqno};return nl(e.parser,t,"display")},htmlBuilder:il,mathmlBuilder:sl}),Js({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:ll,htmlBuilder:il,mathmlBuilder:sl}),Js({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(e){tl(e);var t={autoTag:rl(e.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:e.parser.settings.leqno};return nl(e.parser,t,"display")},htmlBuilder:il,mathmlBuilder:sl}),Js({type:"array",names:["CD"],props:{numArgs:0},handler:e=>(tl(e),function(e){var t=[];for(e.gullet.beginGroup(),e.gullet.macros.set("\\cr","\\\\\\relax"),e.gullet.beginGroup();;){t.push(e.parseExpression(!1,"\\\\")),e.gullet.endGroup(),e.gullet.beginGroup();var r=e.fetch().text;if("&"!==r&&"\\\\"!==r){if("\\end"===r){0===t[t.length-1].length&&t.pop();break}throw new pa("Expected \\\\ or \\cr or \\end",e.nextToken)}e.consume()}for(var n=[],a=[n],i=0;i<t.length;i++){for(var o=t[i],s=hs(),l=0;l<o.length;l++)if(ms(o[l])){n.push(s);var c=ts(o[l+=1]).text,u=new Array(2);if(u[0]={type:"ordgroup",mode:"math",body:[]},u[1]={type:"ordgroup",mode:"math",body:[]},"=|.".indexOf(c)>-1);else{if(!("<>AV".indexOf(c)>-1))throw new pa('Expected one of "<>AV=|." after @',o[l]);for(var d=0;d<2;d++){for(var h=!0,m=l+1;m<o.length;m++){if(ps(o[m],c)){h=!1,l=m;break}if(ms(o[m]))throw new pa("Missing a "+c+" character to complete a CD arrow.",o[m]);u[d].body.push(o[m])}if(h)throw new pa("Missing a "+c+" character to complete a CD arrow.",o[l])}}var p={type:"styling",body:[fs(c,u,e)],mode:"math",style:"display"};n.push(p),s=hs()}else s.body.push(o[l]);i%2===0?n.push(s):n.shift(),n=[],a.push(n)}return e.gullet.endGroup(),e.gullet.endGroup(),{type:"array",mode:"math",body:a,arraystretch:1,addJot:!0,rowGaps:[null],cols:new Array(a[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25}),colSeparationType:"CD",hLinesBeforeRow:new Array(a.length+1).fill([])}}(e.parser)),htmlBuilder:il,mathmlBuilder:sl}),Zs("\\nonumber","\\gdef\\@eqnsw{0}"),Zs("\\notag","\\nonumber"),vo({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(e,t){throw new pa(e.funcName+" valid only within array environment")}});var cl=$s;vo({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(e,t){var{parser:r,funcName:n}=e,a=t[0];if("ordgroup"!==a.type)throw new pa("Invalid environment name",a);for(var i="",o=0;o<a.body.length;++o)i+=es(a.body[o],"textord").text;if("\\begin"===n){if(!cl.hasOwnProperty(i))throw new pa("No such environment: "+i,a);var s=cl[i],{args:l,optArgs:c}=r.parseArguments("\\begin{"+i+"}",s),u={mode:r.mode,envName:i,parser:r},d=s.handler(u,l,c);r.expect("\\end",!1);var h=r.nextToken,m=es(r.parseFunction(),"environment");if(m.name!==i)throw new pa("Mismatch: \\begin{"+i+"} matched by \\end{"+m.name+"}",h);return d}return{type:"environment",mode:r.mode,name:i,nameGroup:a}}});var ul=(e,t)=>{var r=e.font,n=t.withFont(r);return Po(e.body,n)},dl=(e,t)=>{var r=e.font,n=t.withFont(r);return Ko(e.body,n)},hl={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};vo({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(e,t)=>{var{parser:r,funcName:n}=e,a=bo(t[0]),i=n;return i in hl&&(i=hl[i]),{type:"font",mode:r.mode,font:i.slice(1),body:a}},htmlBuilder:ul,mathmlBuilder:dl}),vo({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(e,t)=>{var{parser:r}=e,n=t[0],a=ba.isCharacterBox(n);return{type:"mclass",mode:r.mode,mclass:us(n),body:[{type:"font",mode:r.mode,font:"boldsymbol",body:n}],isCharacterBox:a}}}),vo({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(e,t)=>{var{parser:r,funcName:n,breakOnTokenText:a}=e,{mode:i}=r,o=r.parseExpression(!0,a);return{type:"font",mode:i,font:"math"+n.slice(1),body:{type:"ordgroup",mode:r.mode,body:o}}},htmlBuilder:ul,mathmlBuilder:dl});var ml=(e,t)=>{var r=t;return"display"===e?r=r.id>=Oa.SCRIPT.id?r.text():Oa.DISPLAY:"text"===e&&r.size===Oa.DISPLAY.size?r=Oa.TEXT:"script"===e?r=Oa.SCRIPT:"scriptscript"===e&&(r=Oa.SCRIPTSCRIPT),r},pl=(e,t)=>{var r,n=ml(e.size,t.style),a=n.fracNum(),i=n.fracDen();r=t.havingStyle(a);var o=Po(e.numer,r,t);if(e.continued){var s=8.5/t.fontMetrics().ptPerEm,l=3.5/t.fontMetrics().ptPerEm;o.height=o.height<s?s:o.height,o.depth=o.depth<l?l:o.depth}r=t.havingStyle(i);var c,u,d,h,m,p,f,g,v,y,b=Po(e.denom,r,t);if(e.hasBarLine?(e.barSize?(u=$a(e.barSize,t),c=so.makeLineSpan("frac-line",t,u)):c=so.makeLineSpan("frac-line",t),u=c.height,d=c.height):(c=null,u=0,d=t.fontMetrics().defaultRuleThickness),n.size===Oa.DISPLAY.size||"display"===e.size?(h=t.fontMetrics().num1,m=u>0?3*d:7*d,p=t.fontMetrics().denom1):(u>0?(h=t.fontMetrics().num2,m=d):(h=t.fontMetrics().num3,m=3*d),p=t.fontMetrics().denom2),c){var x=t.fontMetrics().axisHeight;h-o.depth-(x+.5*u)<m&&(h+=m-(h-o.depth-(x+.5*u))),x-.5*u-(b.height-p)<m&&(p+=m-(x-.5*u-(b.height-p)));var w=-(x-.5*u);f=so.makeVList({positionType:"individualShift",children:[{type:"elem",elem:b,shift:p},{type:"elem",elem:c,shift:w},{type:"elem",elem:o,shift:-h}]},t)}else{var k=h-o.depth-(b.height-p);k<m&&(h+=.5*(m-k),p+=.5*(m-k)),f=so.makeVList({positionType:"individualShift",children:[{type:"elem",elem:b,shift:p},{type:"elem",elem:o,shift:-h}]},t)}return r=t.havingStyle(n),f.height*=r.sizeMultiplier/t.sizeMultiplier,f.depth*=r.sizeMultiplier/t.sizeMultiplier,g=n.size===Oa.DISPLAY.size?t.fontMetrics().delim1:n.size===Oa.SCRIPTSCRIPT.size?t.havingStyle(Oa.SCRIPT).fontMetrics().delim2:t.fontMetrics().delim2,v=null==e.leftDelim?Oo(t,["mopen"]):Hs.customSizedDelim(e.leftDelim,g,!0,t.havingStyle(n),e.mode,["mopen"]),y=e.continued?so.makeSpan([]):null==e.rightDelim?Oo(t,["mclose"]):Hs.customSizedDelim(e.rightDelim,g,!0,t.havingStyle(n),e.mode,["mclose"]),so.makeSpan(["mord"].concat(r.sizingClasses(t)),[v,so.makeSpan(["mfrac"],[f]),y],t)},fl=(e,t)=>{var r=new zo.MathNode("mfrac",[Ko(e.numer,t),Ko(e.denom,t)]);if(e.hasBarLine){if(e.barSize){var n=$a(e.barSize,t);r.setAttribute("linethickness",Ja(n))}}else r.setAttribute("linethickness","0px");var a=ml(e.size,t.style);if(a.size!==t.style.size){r=new zo.MathNode("mstyle",[r]);var i=a.size===Oa.DISPLAY.size?"true":"false";r.setAttribute("displaystyle",i),r.setAttribute("scriptlevel","0")}if(null!=e.leftDelim||null!=e.rightDelim){var o=[];if(null!=e.leftDelim){var s=new zo.MathNode("mo",[new zo.TextNode(e.leftDelim.replace("\\",""))]);s.setAttribute("fence","true"),o.push(s)}if(o.push(r),null!=e.rightDelim){var l=new zo.MathNode("mo",[new zo.TextNode(e.rightDelim.replace("\\",""))]);l.setAttribute("fence","true"),o.push(l)}return Bo(o)}return r};vo({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(e,t)=>{var r,{parser:n,funcName:a}=e,i=t[0],o=t[1],s=null,l=null,c="auto";switch(a){case"\\dfrac":case"\\frac":case"\\tfrac":r=!0;break;case"\\\\atopfrac":r=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":r=!1,s="(",l=")";break;case"\\\\bracefrac":r=!1,s="\\{",l="\\}";break;case"\\\\brackfrac":r=!1,s="[",l="]";break;default:throw new Error("Unrecognized genfrac command")}switch(a){case"\\dfrac":case"\\dbinom":c="display";break;case"\\tfrac":case"\\tbinom":c="text"}return{type:"genfrac",mode:n.mode,continued:!1,numer:i,denom:o,hasBarLine:r,leftDelim:s,rightDelim:l,size:c,barSize:null}},htmlBuilder:pl,mathmlBuilder:fl}),vo({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(e,t)=>{var{parser:r,funcName:n}=e,a=t[0],i=t[1];return{type:"genfrac",mode:r.mode,continued:!0,numer:a,denom:i,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}}),vo({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(e){var t,{parser:r,funcName:n,token:a}=e;switch(n){case"\\over":t="\\frac";break;case"\\choose":t="\\binom";break;case"\\atop":t="\\\\atopfrac";break;case"\\brace":t="\\\\bracefrac";break;case"\\brack":t="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:r.mode,replaceWith:t,token:a}}});var gl=["display","text","script","scriptscript"],vl=function(e){var t=null;return e.length>0&&(t="."===(t=e)?null:t),t};vo({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(e,t){var r,{parser:n}=e,a=t[4],i=t[5],o=bo(t[0]),s="atom"===o.type&&"open"===o.family?vl(o.text):null,l=bo(t[1]),c="atom"===l.type&&"close"===l.family?vl(l.text):null,u=es(t[2],"size"),d=null;r=!!u.isBlank||(d=u.value).number>0;var h="auto",m=t[3];if("ordgroup"===m.type){if(m.body.length>0){var p=es(m.body[0],"textord");h=gl[Number(p.text)]}}else m=es(m,"textord"),h=gl[Number(m.text)];return{type:"genfrac",mode:n.mode,numer:a,denom:i,continued:!1,hasBarLine:r,barSize:d,leftDelim:s,rightDelim:c,size:h}},htmlBuilder:pl,mathmlBuilder:fl}),vo({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(e,t){var{parser:r,funcName:n,token:a}=e;return{type:"infix",mode:r.mode,replaceWith:"\\\\abovefrac",size:es(t[0],"size").value,token:a}}}),vo({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(e,t)=>{var{parser:r,funcName:n}=e,a=t[0],i=function(e){if(!e)throw new Error("Expected non-null, but got "+String(e));return e}(es(t[1],"infix").size),o=t[2],s=i.number>0;return{type:"genfrac",mode:r.mode,numer:a,denom:o,continued:!1,hasBarLine:s,barSize:i,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:pl,mathmlBuilder:fl});var yl=(e,t)=>{var r,n,a=t.style;"supsub"===e.type?(r=e.sup?Po(e.sup,t.havingStyle(a.sup()),t):Po(e.sub,t.havingStyle(a.sub()),t),n=es(e.base,"horizBrace")):n=es(e,"horizBrace");var i,o=Po(n.base,t.havingBaseStyle(Oa.DISPLAY)),s=Zo(n,t);if(n.isOver?(i=so.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:o},{type:"kern",size:.1},{type:"elem",elem:s}]},t)).children[0].children[0].children[1].classes.push("svg-align"):(i=so.makeVList({positionType:"bottom",positionData:o.depth+.1+s.height,children:[{type:"elem",elem:s},{type:"kern",size:.1},{type:"elem",elem:o}]},t)).children[0].children[0].children[0].classes.push("svg-align"),r){var l=so.makeSpan(["mord",n.isOver?"mover":"munder"],[i],t);i=n.isOver?so.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:l},{type:"kern",size:.2},{type:"elem",elem:r}]},t):so.makeVList({positionType:"bottom",positionData:l.depth+.2+r.height+r.depth,children:[{type:"elem",elem:r},{type:"kern",size:.2},{type:"elem",elem:l}]},t)}return so.makeSpan(["mord",n.isOver?"mover":"munder"],[i],t)};vo({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(e,t){var{parser:r,funcName:n}=e;return{type:"horizBrace",mode:r.mode,label:n,isOver:/^\\over/.test(n),base:t[0]}},htmlBuilder:yl,mathmlBuilder:(e,t)=>{var r=Xo(e.label);return new zo.MathNode(e.isOver?"mover":"munder",[Ko(e.base,t),r])}}),vo({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,n=t[1],a=es(t[0],"url").url;return r.settings.isTrusted({command:"\\href",url:a})?{type:"href",mode:r.mode,href:a,body:xo(n)}:r.formatUnsupportedCmd("\\href")},htmlBuilder:(e,t)=>{var r=No(e.body,t,!1);return so.makeAnchor(e.href,[],r,t)},mathmlBuilder:(e,t)=>{var r=Wo(e.body,t);return r instanceof Do||(r=new Do("mrow",[r])),r.setAttribute("href",e.href),r}}),vo({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,n=es(t[0],"url").url;if(!r.settings.isTrusted({command:"\\url",url:n}))return r.formatUnsupportedCmd("\\url");for(var a=[],i=0;i<n.length;i++){var o=n[i];"~"===o&&(o="\\textasciitilde"),a.push({type:"textord",mode:"text",text:o})}var s={type:"text",mode:r.mode,font:"\\texttt",body:a};return{type:"href",mode:r.mode,href:n,body:xo(s)}}}),vo({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(e,t){var{parser:r}=e;return{type:"hbox",mode:r.mode,body:xo(t[0])}},htmlBuilder(e,t){var r=No(e.body,t,!1);return so.makeFragment(r)},mathmlBuilder:(e,t)=>new zo.MathNode("mrow",Ho(e.body,t))}),vo({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(e,t)=>{var r,{parser:n,funcName:a,token:i}=e,o=es(t[0],"raw").string,s=t[1];n.settings.strict&&n.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var l={};switch(a){case"\\htmlClass":l.class=o,r={command:"\\htmlClass",class:o};break;case"\\htmlId":l.id=o,r={command:"\\htmlId",id:o};break;case"\\htmlStyle":l.style=o,r={command:"\\htmlStyle",style:o};break;case"\\htmlData":for(var c=o.split(","),u=0;u<c.length;u++){var d=c[u],h=d.indexOf("=");if(h<0)throw new pa("\\htmlData key/value '"+d+"' missing equals sign");var m=d.slice(0,h),p=d.slice(h+1);l["data-"+m.trim()]=p}r={command:"\\htmlData",attributes:l};break;default:throw new Error("Unrecognized html command")}return n.settings.isTrusted(r)?{type:"html",mode:n.mode,attributes:l,body:xo(s)}:n.formatUnsupportedCmd(a)},htmlBuilder:(e,t)=>{var r=No(e.body,t,!1),n=["enclosing"];e.attributes.class&&n.push(...e.attributes.class.trim().split(/\s+/));var a=so.makeSpan(n,r,t);for(var i in e.attributes)"class"!==i&&e.attributes.hasOwnProperty(i)&&a.setAttribute(i,e.attributes[i]);return a},mathmlBuilder:(e,t)=>Wo(e.body,t)}),vo({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e;return{type:"htmlmathml",mode:r.mode,html:xo(t[0]),mathml:xo(t[1])}},htmlBuilder:(e,t)=>{var r=No(e.html,t,!1);return so.makeFragment(r)},mathmlBuilder:(e,t)=>Wo(e.mathml,t)});var bl=function(e){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))return{number:+e,unit:"bp"};var t=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);if(!t)throw new pa("Invalid size: '"+e+"' in \\includegraphics");var r={number:+(t[1]+t[2]),unit:t[3]};if(!Ya(r))throw new pa("Invalid unit: '"+r.unit+"' in \\includegraphics.");return r};vo({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(e,t,r)=>{var{parser:n}=e,a={number:0,unit:"em"},i={number:.9,unit:"em"},o={number:0,unit:"em"},s="";if(r[0])for(var l=es(r[0],"raw").string.split(","),c=0;c<l.length;c++){var u=l[c].split("=");if(2===u.length){var d=u[1].trim();switch(u[0].trim()){case"alt":s=d;break;case"width":a=bl(d);break;case"height":i=bl(d);break;case"totalheight":o=bl(d);break;default:throw new pa("Invalid key: '"+u[0]+"' in \\includegraphics.")}}}var h=es(t[0],"url").url;return""===s&&(s=(s=(s=h).replace(/^.*[\\/]/,"")).substring(0,s.lastIndexOf("."))),n.settings.isTrusted({command:"\\includegraphics",url:h})?{type:"includegraphics",mode:n.mode,alt:s,width:a,height:i,totalheight:o,src:h}:n.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(e,t)=>{var r=$a(e.height,t),n=0;e.totalheight.number>0&&(n=$a(e.totalheight,t)-r);var a=0;e.width.number>0&&(a=$a(e.width,t));var i={height:Ja(r+n)};a>0&&(i.width=Ja(a)),n>0&&(i.verticalAlign=Ja(-n));var o=new ii(e.src,e.alt,i);return o.height=r,o.depth=n,o},mathmlBuilder:(e,t)=>{var r=new zo.MathNode("mglyph",[]);r.setAttribute("alt",e.alt);var n=$a(e.height,t),a=0;if(e.totalheight.number>0&&(a=$a(e.totalheight,t)-n,r.setAttribute("valign",Ja(-a))),r.setAttribute("height",Ja(n+a)),e.width.number>0){var i=$a(e.width,t);r.setAttribute("width",Ja(i))}return r.setAttribute("src",e.src),r}}),vo({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(e,t){var{parser:r,funcName:n}=e,a=es(t[0],"size");if(r.settings.strict){var i="m"===n[1],o="mu"===a.value.unit;i?(o||r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" supports only mu units, not "+a.value.unit+" units"),"math"!==r.mode&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" works only in math mode")):o&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" doesn't support mu units")}return{type:"kern",mode:r.mode,dimension:a.value}},htmlBuilder:(e,t)=>so.makeGlue(e.dimension,t),mathmlBuilder(e,t){var r=$a(e.dimension,t);return new zo.SpaceNode(r)}}),vo({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r,funcName:n}=e,a=t[0];return{type:"lap",mode:r.mode,alignment:n.slice(5),body:a}},htmlBuilder:(e,t)=>{var r;"clap"===e.alignment?(r=so.makeSpan([],[Po(e.body,t)]),r=so.makeSpan(["inner"],[r],t)):r=so.makeSpan(["inner"],[Po(e.body,t)]);var n=so.makeSpan(["fix"],[]),a=so.makeSpan([e.alignment],[r,n],t),i=so.makeSpan(["strut"]);return i.style.height=Ja(a.height+a.depth),a.depth&&(i.style.verticalAlign=Ja(-a.depth)),a.children.unshift(i),a=so.makeSpan(["thinbox"],[a],t),so.makeSpan(["mord","vbox"],[a],t)},mathmlBuilder:(e,t)=>{var r=new zo.MathNode("mpadded",[Ko(e.body,t)]);if("rlap"!==e.alignment){var n="llap"===e.alignment?"-1":"-0.5";r.setAttribute("lspace",n+"width")}return r.setAttribute("width","0px"),r}}),vo({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(e,t){var{funcName:r,parser:n}=e,a=n.mode;n.switchMode("math");var i="\\("===r?"\\)":"$",o=n.parseExpression(!1,i);return n.expect(i),n.switchMode(a),{type:"styling",mode:n.mode,style:"text",body:o}}}),vo({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(e,t){throw new pa("Mismatched "+e.funcName)}});var xl=(e,t)=>{switch(t.style.size){case Oa.DISPLAY.size:return e.display;case Oa.TEXT.size:return e.text;case Oa.SCRIPT.size:return e.script;case Oa.SCRIPTSCRIPT.size:return e.scriptscript;default:return e.text}};vo({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(e,t)=>{var{parser:r}=e;return{type:"mathchoice",mode:r.mode,display:xo(t[0]),text:xo(t[1]),script:xo(t[2]),scriptscript:xo(t[3])}},htmlBuilder:(e,t)=>{var r=xl(e,t),n=No(r,t,!1);return so.makeFragment(n)},mathmlBuilder:(e,t)=>{var r=xl(e,t);return Wo(r,t)}});var wl=(e,t,r,n,a,i,o)=>{e=so.makeSpan([],[e]);var s,l,c,u=r&&ba.isCharacterBox(r);if(t){var d=Po(t,n.havingStyle(a.sup()),n);l={elem:d,kern:Math.max(n.fontMetrics().bigOpSpacing1,n.fontMetrics().bigOpSpacing3-d.depth)}}if(r){var h=Po(r,n.havingStyle(a.sub()),n);s={elem:h,kern:Math.max(n.fontMetrics().bigOpSpacing2,n.fontMetrics().bigOpSpacing4-h.height)}}if(l&&s){var m=n.fontMetrics().bigOpSpacing5+s.elem.height+s.elem.depth+s.kern+e.depth+o;c=so.makeVList({positionType:"bottom",positionData:m,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:s.elem,marginLeft:Ja(-i)},{type:"kern",size:s.kern},{type:"elem",elem:e},{type:"kern",size:l.kern},{type:"elem",elem:l.elem,marginLeft:Ja(i)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else if(s){var p=e.height-o;c=so.makeVList({positionType:"top",positionData:p,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:s.elem,marginLeft:Ja(-i)},{type:"kern",size:s.kern},{type:"elem",elem:e}]},n)}else{if(!l)return e;var f=e.depth+o;c=so.makeVList({positionType:"bottom",positionData:f,children:[{type:"elem",elem:e},{type:"kern",size:l.kern},{type:"elem",elem:l.elem,marginLeft:Ja(i)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}var g=[c];if(s&&0!==i&&!u){var v=so.makeSpan(["mspace"],[],n);v.style.marginRight=Ja(i),g.unshift(v)}return so.makeSpan(["mop","op-limits"],g,n)},kl=["\\smallint"],jl=(e,t)=>{var r,n,a,i=!1;"supsub"===e.type?(r=e.sup,n=e.sub,a=es(e.base,"op"),i=!0):a=es(e,"op");var o,s=t.style,l=!1;if(s.size===Oa.DISPLAY.size&&a.symbol&&!kl.includes(a.name)&&(l=!0),a.symbol){var c=l?"Size2-Regular":"Size1-Regular",u="";if("\\oiint"!==a.name&&"\\oiiint"!==a.name||(u=a.name.slice(1),a.name="oiint"===u?"\\iint":"\\iiint"),o=so.makeSymbol(a.name,c,"math",t,["mop","op-symbol",l?"large-op":"small-op"]),u.length>0){var d=o.italic,h=so.staticSvg(u+"Size"+(l?"2":"1"),t);o=so.makeVList({positionType:"individualShift",children:[{type:"elem",elem:o,shift:0},{type:"elem",elem:h,shift:l?.08:0}]},t),a.name="\\"+u,o.classes.unshift("mop"),o.italic=d}}else if(a.body){var m=No(a.body,t,!0);1===m.length&&m[0]instanceof si?(o=m[0]).classes[0]="mop":o=so.makeSpan(["mop"],m,t)}else{for(var p=[],f=1;f<a.name.length;f++)p.push(so.mathsym(a.name[f],a.mode,t));o=so.makeSpan(["mop"],p,t)}var g=0,v=0;return(o instanceof si||"\\oiint"===a.name||"\\oiiint"===a.name)&&!a.suppressBaseShift&&(g=(o.height-o.depth)/2-t.fontMetrics().axisHeight,v=o.italic),i?wl(o,r,n,t,s,v,g):(g&&(o.style.position="relative",o.style.top=Ja(g)),o)},Sl=(e,t)=>{var r;if(e.symbol)r=new Do("mo",[qo(e.name,e.mode)]),kl.includes(e.name)&&r.setAttribute("largeop","false");else if(e.body)r=new Do("mo",Ho(e.body,t));else{r=new Do("mi",[new Lo(e.name.slice(1))]);var n=new Do("mo",[qo("\u2061","text")]);r=e.parentIsSupSub?new Do("mrow",[r,n]):Ro([r,n])}return r},Cl={"\u220f":"\\prod","\u2210":"\\coprod","\u2211":"\\sum","\u22c0":"\\bigwedge","\u22c1":"\\bigvee","\u22c2":"\\bigcap","\u22c3":"\\bigcup","\u2a00":"\\bigodot","\u2a01":"\\bigoplus","\u2a02":"\\bigotimes","\u2a04":"\\biguplus","\u2a06":"\\bigsqcup"};vo({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","\u220f","\u2210","\u2211","\u22c0","\u22c1","\u22c2","\u22c3","\u2a00","\u2a01","\u2a02","\u2a04","\u2a06"],props:{numArgs:0},handler:(e,t)=>{var{parser:r,funcName:n}=e,a=n;return 1===a.length&&(a=Cl[a]),{type:"op",mode:r.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:a}},htmlBuilder:jl,mathmlBuilder:Sl}),vo({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var{parser:r}=e,n=t[0];return{type:"op",mode:r.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:xo(n)}},htmlBuilder:jl,mathmlBuilder:Sl});var Nl={"\u222b":"\\int","\u222c":"\\iint","\u222d":"\\iiint","\u222e":"\\oint","\u222f":"\\oiint","\u2230":"\\oiiint"};vo({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(e){var{parser:t,funcName:r}=e;return{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:jl,mathmlBuilder:Sl}),vo({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(e){var{parser:t,funcName:r}=e;return{type:"op",mode:t.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:jl,mathmlBuilder:Sl}),vo({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","\u222b","\u222c","\u222d","\u222e","\u222f","\u2230"],props:{numArgs:0,allowedInArgument:!0},handler(e){var{parser:t,funcName:r}=e,n=r;return 1===n.length&&(n=Nl[n]),{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:n}},htmlBuilder:jl,mathmlBuilder:Sl});var _l=(e,t)=>{var r,n,a,i,o=!1;if("supsub"===e.type?(r=e.sup,n=e.sub,a=es(e.base,"operatorname"),o=!0):a=es(e,"operatorname"),a.body.length>0){for(var s=a.body.map(e=>{var t=e.text;return"string"===typeof t?{type:"textord",mode:e.mode,text:t}:e}),l=No(s,t.withFont("mathrm"),!0),c=0;c<l.length;c++){var u=l[c];u instanceof si&&(u.text=u.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}i=so.makeSpan(["mop"],l,t)}else i=so.makeSpan(["mop"],[],t);return o?wl(i,r,n,t,t.style,0,0):i};function Al(e,t,r){for(var n=No(e,t,!1),a=t.sizeMultiplier/r.sizeMultiplier,i=0;i<n.length;i++){var o=n[i].classes.indexOf("sizing");o<0?Array.prototype.push.apply(n[i].classes,t.sizingClasses(r)):n[i].classes[o+1]==="reset-size"+t.size&&(n[i].classes[o+1]="reset-size"+r.size),n[i].height*=a,n[i].depth*=a}return so.makeFragment(n)}vo({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(e,t)=>{var{parser:r,funcName:n}=e,a=t[0];return{type:"operatorname",mode:r.mode,body:xo(a),alwaysHandleSupSub:"\\operatornamewithlimits"===n,limits:!1,parentIsSupSub:!1}},htmlBuilder:_l,mathmlBuilder:(e,t)=>{for(var r=Ho(e.body,t.withFont("mathrm")),n=!0,a=0;a<r.length;a++){var i=r[a];if(i instanceof zo.SpaceNode);else if(i instanceof zo.MathNode)switch(i.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":var o=i.children[0];1===i.children.length&&o instanceof zo.TextNode?o.text=o.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):n=!1;break;default:n=!1}else n=!1}if(n){var s=r.map(e=>e.toText()).join("");r=[new zo.TextNode(s)]}var l=new zo.MathNode("mi",r);l.setAttribute("mathvariant","normal");var c=new zo.MathNode("mo",[qo("\u2061","text")]);return e.parentIsSupSub?new zo.MathNode("mrow",[l,c]):zo.newDocumentFragment([l,c])}}),Zs("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@"),yo({type:"ordgroup",htmlBuilder:(e,t)=>e.semisimple?so.makeFragment(No(e.body,t,!1)):so.makeSpan(["mord"],No(e.body,t,!0),t),mathmlBuilder:(e,t)=>Wo(e.body,t,!0)}),vo({type:"overline",names:["\\overline"],props:{numArgs:1},handler(e,t){var{parser:r}=e,n=t[0];return{type:"overline",mode:r.mode,body:n}},htmlBuilder(e,t){var r=Po(e.body,t.havingCrampedStyle()),n=so.makeLineSpan("overline-line",t),a=t.fontMetrics().defaultRuleThickness,i=so.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r},{type:"kern",size:3*a},{type:"elem",elem:n},{type:"kern",size:a}]},t);return so.makeSpan(["mord","overline"],[i],t)},mathmlBuilder(e,t){var r=new zo.MathNode("mo",[new zo.TextNode("\u203e")]);r.setAttribute("stretchy","true");var n=new zo.MathNode("mover",[Ko(e.body,t),r]);return n.setAttribute("accent","true"),n}}),vo({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,n=t[0];return{type:"phantom",mode:r.mode,body:xo(n)}},htmlBuilder:(e,t)=>{var r=No(e.body,t.withPhantom(),!1);return so.makeFragment(r)},mathmlBuilder:(e,t)=>{var r=Ho(e.body,t);return new zo.MathNode("mphantom",r)}}),vo({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,n=t[0];return{type:"hphantom",mode:r.mode,body:n}},htmlBuilder:(e,t)=>{var r=so.makeSpan([],[Po(e.body,t.withPhantom())]);if(r.height=0,r.depth=0,r.children)for(var n=0;n<r.children.length;n++)r.children[n].height=0,r.children[n].depth=0;return r=so.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},t),so.makeSpan(["mord"],[r],t)},mathmlBuilder:(e,t)=>{var r=Ho(xo(e.body),t),n=new zo.MathNode("mphantom",r),a=new zo.MathNode("mpadded",[n]);return a.setAttribute("height","0px"),a.setAttribute("depth","0px"),a}}),vo({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,n=t[0];return{type:"vphantom",mode:r.mode,body:n}},htmlBuilder:(e,t)=>{var r=so.makeSpan(["inner"],[Po(e.body,t.withPhantom())]),n=so.makeSpan(["fix"],[]);return so.makeSpan(["mord","rlap"],[r,n],t)},mathmlBuilder:(e,t)=>{var r=Ho(xo(e.body),t),n=new zo.MathNode("mphantom",r),a=new zo.MathNode("mpadded",[n]);return a.setAttribute("width","0px"),a}}),vo({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(e,t){var{parser:r}=e,n=es(t[0],"size").value,a=t[1];return{type:"raisebox",mode:r.mode,dy:n,body:a}},htmlBuilder(e,t){var r=Po(e.body,t),n=$a(e.dy,t);return so.makeVList({positionType:"shift",positionData:-n,children:[{type:"elem",elem:r}]},t)},mathmlBuilder(e,t){var r=new zo.MathNode("mpadded",[Ko(e.body,t)]),n=e.dy.number+e.dy.unit;return r.setAttribute("voffset",n),r}}),vo({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(e){var{parser:t}=e;return{type:"internal",mode:t.mode}}}),vo({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(e,t,r){var{parser:n}=e,a=r[0],i=es(t[0],"size"),o=es(t[1],"size");return{type:"rule",mode:n.mode,shift:a&&es(a,"size").value,width:i.value,height:o.value}},htmlBuilder(e,t){var r=so.makeSpan(["mord","rule"],[],t),n=$a(e.width,t),a=$a(e.height,t),i=e.shift?$a(e.shift,t):0;return r.style.borderRightWidth=Ja(n),r.style.borderTopWidth=Ja(a),r.style.bottom=Ja(i),r.width=n,r.height=a+i,r.depth=-i,r.maxFontSize=1.125*a*t.sizeMultiplier,r},mathmlBuilder(e,t){var r=$a(e.width,t),n=$a(e.height,t),a=e.shift?$a(e.shift,t):0,i=t.color&&t.getColor()||"black",o=new zo.MathNode("mspace");o.setAttribute("mathbackground",i),o.setAttribute("width",Ja(r)),o.setAttribute("height",Ja(n));var s=new zo.MathNode("mpadded",[o]);return a>=0?s.setAttribute("height",Ja(a)):(s.setAttribute("height",Ja(a)),s.setAttribute("depth",Ja(-a))),s.setAttribute("voffset",Ja(a)),s}});var Tl=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"];vo({type:"sizing",names:Tl,props:{numArgs:0,allowedInText:!0},handler:(e,t)=>{var{breakOnTokenText:r,funcName:n,parser:a}=e,i=a.parseExpression(!1,r);return{type:"sizing",mode:a.mode,size:Tl.indexOf(n)+1,body:i}},htmlBuilder:(e,t)=>{var r=t.havingSize(e.size);return Al(e.body,r,t)},mathmlBuilder:(e,t)=>{var r=t.havingSize(e.size),n=Ho(e.body,r),a=new zo.MathNode("mstyle",n);return a.setAttribute("mathsize",Ja(r.sizeMultiplier)),a}}),vo({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(e,t,r)=>{var{parser:n}=e,a=!1,i=!1,o=r[0]&&es(r[0],"ordgroup");if(o)for(var s="",l=0;l<o.body.length;++l){if("t"===(s=o.body[l].text))a=!0;else{if("b"!==s){a=!1,i=!1;break}i=!0}}else a=!0,i=!0;var c=t[0];return{type:"smash",mode:n.mode,body:c,smashHeight:a,smashDepth:i}},htmlBuilder:(e,t)=>{var r=so.makeSpan([],[Po(e.body,t)]);if(!e.smashHeight&&!e.smashDepth)return r;if(e.smashHeight&&(r.height=0,r.children))for(var n=0;n<r.children.length;n++)r.children[n].height=0;if(e.smashDepth&&(r.depth=0,r.children))for(var a=0;a<r.children.length;a++)r.children[a].depth=0;var i=so.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},t);return so.makeSpan(["mord"],[i],t)},mathmlBuilder:(e,t)=>{var r=new zo.MathNode("mpadded",[Ko(e.body,t)]);return e.smashHeight&&r.setAttribute("height","0px"),e.smashDepth&&r.setAttribute("depth","0px"),r}}),vo({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(e,t,r){var{parser:n}=e,a=r[0],i=t[0];return{type:"sqrt",mode:n.mode,body:i,index:a}},htmlBuilder(e,t){var r=Po(e.body,t.havingCrampedStyle());0===r.height&&(r.height=t.fontMetrics().xHeight),r=so.wrapFragment(r,t);var n=t.fontMetrics().defaultRuleThickness,a=n;t.style.id<Oa.TEXT.id&&(a=t.fontMetrics().xHeight);var i=n+a/4,o=r.height+r.depth+i+n,{span:s,ruleWidth:l,advanceWidth:c}=Hs.sqrtImage(o,t),u=s.height-l;u>r.height+r.depth+i&&(i=(i+u-r.height-r.depth)/2);var d=s.height-r.height-i-l;r.style.paddingLeft=Ja(c);var h=so.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:-(r.height+d)},{type:"elem",elem:s},{type:"kern",size:l}]},t);if(e.index){var m=t.havingStyle(Oa.SCRIPTSCRIPT),p=Po(e.index,m,t),f=.6*(h.height-h.depth),g=so.makeVList({positionType:"shift",positionData:-f,children:[{type:"elem",elem:p}]},t),v=so.makeSpan(["root"],[g]);return so.makeSpan(["mord","sqrt"],[v,h],t)}return so.makeSpan(["mord","sqrt"],[h],t)},mathmlBuilder(e,t){var{body:r,index:n}=e;return n?new zo.MathNode("mroot",[Ko(r,t),Ko(n,t)]):new zo.MathNode("msqrt",[Ko(r,t)])}});var El={display:Oa.DISPLAY,text:Oa.TEXT,script:Oa.SCRIPT,scriptscript:Oa.SCRIPTSCRIPT};vo({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e,t){var{breakOnTokenText:r,funcName:n,parser:a}=e,i=a.parseExpression(!0,r),o=n.slice(1,n.length-5);return{type:"styling",mode:a.mode,style:o,body:i}},htmlBuilder(e,t){var r=El[e.style],n=t.havingStyle(r).withFont("");return Al(e.body,n,t)},mathmlBuilder(e,t){var r=El[e.style],n=t.havingStyle(r),a=Ho(e.body,n),i=new zo.MathNode("mstyle",a),o={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]}[e.style];return i.setAttribute("scriptlevel",o[0]),i.setAttribute("displaystyle",o[1]),i}});yo({type:"supsub",htmlBuilder(e,t){var r=function(e,t){var r=e.base;return r?"op"===r.type?r.limits&&(t.style.size===Oa.DISPLAY.size||r.alwaysHandleSupSub)?jl:null:"operatorname"===r.type?r.alwaysHandleSupSub&&(t.style.size===Oa.DISPLAY.size||r.limits)?_l:null:"accent"===r.type?ba.isCharacterBox(r.base)?ns:null:"horizBrace"===r.type&&!e.sub===r.isOver?yl:null:null}(e,t);if(r)return r(e,t);var n,a,i,{base:o,sup:s,sub:l}=e,c=Po(o,t),u=t.fontMetrics(),d=0,h=0,m=o&&ba.isCharacterBox(o);if(s){var p=t.havingStyle(t.style.sup());n=Po(s,p,t),m||(d=c.height-p.fontMetrics().supDrop*p.sizeMultiplier/t.sizeMultiplier)}if(l){var f=t.havingStyle(t.style.sub());a=Po(l,f,t),m||(h=c.depth+f.fontMetrics().subDrop*f.sizeMultiplier/t.sizeMultiplier)}i=t.style===Oa.DISPLAY?u.sup1:t.style.cramped?u.sup3:u.sup2;var g,v=t.sizeMultiplier,y=Ja(.5/u.ptPerEm/v),b=null;if(a){var x=e.base&&"op"===e.base.type&&e.base.name&&("\\oiint"===e.base.name||"\\oiiint"===e.base.name);(c instanceof si||x)&&(b=Ja(-c.italic))}if(n&&a){d=Math.max(d,i,n.depth+.25*u.xHeight),h=Math.max(h,u.sub2);var w=4*u.defaultRuleThickness;if(d-n.depth-(a.height-h)<w){h=w-(d-n.depth)+a.height;var k=.8*u.xHeight-(d-n.depth);k>0&&(d+=k,h-=k)}var j=[{type:"elem",elem:a,shift:h,marginRight:y,marginLeft:b},{type:"elem",elem:n,shift:-d,marginRight:y}];g=so.makeVList({positionType:"individualShift",children:j},t)}else if(a){h=Math.max(h,u.sub1,a.height-.8*u.xHeight);var S=[{type:"elem",elem:a,marginLeft:b,marginRight:y}];g=so.makeVList({positionType:"shift",positionData:h,children:S},t)}else{if(!n)throw new Error("supsub must have either sup or sub.");d=Math.max(d,i,n.depth+.25*u.xHeight),g=so.makeVList({positionType:"shift",positionData:-d,children:[{type:"elem",elem:n,marginRight:y}]},t)}var C=Eo(c,"right")||"mord";return so.makeSpan([C],[c,so.makeSpan(["msupsub"],[g])],t)},mathmlBuilder(e,t){var r,n=!1;e.base&&"horizBrace"===e.base.type&&!!e.sup===e.base.isOver&&(n=!0,r=e.base.isOver),!e.base||"op"!==e.base.type&&"operatorname"!==e.base.type||(e.base.parentIsSupSub=!0);var a,i=[Ko(e.base,t)];if(e.sub&&i.push(Ko(e.sub,t)),e.sup&&i.push(Ko(e.sup,t)),n)a=r?"mover":"munder";else if(e.sub)if(e.sup){var o=e.base;a=o&&"op"===o.type&&o.limits&&t.style===Oa.DISPLAY||o&&"operatorname"===o.type&&o.alwaysHandleSupSub&&(t.style===Oa.DISPLAY||o.limits)?"munderover":"msubsup"}else{var s=e.base;a=s&&"op"===s.type&&s.limits&&(t.style===Oa.DISPLAY||s.alwaysHandleSupSub)||s&&"operatorname"===s.type&&s.alwaysHandleSupSub&&(s.limits||t.style===Oa.DISPLAY)?"munder":"msub"}else{var l=e.base;a=l&&"op"===l.type&&l.limits&&(t.style===Oa.DISPLAY||l.alwaysHandleSupSub)||l&&"operatorname"===l.type&&l.alwaysHandleSupSub&&(l.limits||t.style===Oa.DISPLAY)?"mover":"msup"}return new zo.MathNode(a,i)}}),yo({type:"atom",htmlBuilder:(e,t)=>so.mathsym(e.text,e.mode,t,["m"+e.family]),mathmlBuilder(e,t){var r=new zo.MathNode("mo",[qo(e.text,e.mode)]);if("bin"===e.family){var n=Fo(e,t);"bold-italic"===n&&r.setAttribute("mathvariant",n)}else"punct"===e.family?r.setAttribute("separator","true"):"open"!==e.family&&"close"!==e.family||r.setAttribute("stretchy","false");return r}});var Ol={mi:"italic",mn:"normal",mtext:"normal"};yo({type:"mathord",htmlBuilder:(e,t)=>so.makeOrd(e,t,"mathord"),mathmlBuilder(e,t){var r=new zo.MathNode("mi",[qo(e.text,e.mode,t)]),n=Fo(e,t)||"italic";return n!==Ol[r.type]&&r.setAttribute("mathvariant",n),r}}),yo({type:"textord",htmlBuilder:(e,t)=>so.makeOrd(e,t,"textord"),mathmlBuilder(e,t){var r,n=qo(e.text,e.mode,t),a=Fo(e,t)||"normal";return r="text"===e.mode?new zo.MathNode("mtext",[n]):/[0-9]/.test(e.text)?new zo.MathNode("mn",[n]):"\\prime"===e.text?new zo.MathNode("mo",[n]):new zo.MathNode("mi",[n]),a!==Ol[r.type]&&r.setAttribute("mathvariant",a),r}});var Pl={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},Il={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};yo({type:"spacing",htmlBuilder(e,t){if(Il.hasOwnProperty(e.text)){var r=Il[e.text].className||"";if("text"===e.mode){var n=so.makeOrd(e,t,"textord");return n.classes.push(r),n}return so.makeSpan(["mspace",r],[so.mathsym(e.text,e.mode,t)],t)}if(Pl.hasOwnProperty(e.text))return so.makeSpan(["mspace",Pl[e.text]],[],t);throw new pa('Unknown type of space "'+e.text+'"')},mathmlBuilder(e,t){if(!Il.hasOwnProperty(e.text)){if(Pl.hasOwnProperty(e.text))return new zo.MathNode("mspace");throw new pa('Unknown type of space "'+e.text+'"')}return new zo.MathNode("mtext",[new zo.TextNode("\xa0")])}});var Ml=()=>{var e=new zo.MathNode("mtd",[]);return e.setAttribute("width","50%"),e};yo({type:"tag",mathmlBuilder(e,t){var r=new zo.MathNode("mtable",[new zo.MathNode("mtr",[Ml(),new zo.MathNode("mtd",[Wo(e.body,t)]),Ml(),new zo.MathNode("mtd",[Wo(e.tag,t)])])]);return r.setAttribute("width","100%"),r}});var Rl={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},Dl={"\\textbf":"textbf","\\textmd":"textmd"},Ll={"\\textit":"textit","\\textup":"textup"},zl=(e,t)=>{var r=e.font;return r?Rl[r]?t.withTextFontFamily(Rl[r]):Dl[r]?t.withTextFontWeight(Dl[r]):"\\emph"===r?"textit"===t.fontShape?t.withTextFontShape("textup"):t.withTextFontShape("textit"):t.withTextFontShape(Ll[r]):t};vo({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(e,t){var{parser:r,funcName:n}=e,a=t[0];return{type:"text",mode:r.mode,body:xo(a),font:n}},htmlBuilder(e,t){var r=zl(e,t),n=No(e.body,r,!0);return so.makeSpan(["mord","text"],n,r)},mathmlBuilder(e,t){var r=zl(e,t);return Wo(e.body,r)}}),vo({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(e,t){var{parser:r}=e;return{type:"underline",mode:r.mode,body:t[0]}},htmlBuilder(e,t){var r=Po(e.body,t),n=so.makeLineSpan("underline-line",t),a=t.fontMetrics().defaultRuleThickness,i=so.makeVList({positionType:"top",positionData:r.height,children:[{type:"kern",size:a},{type:"elem",elem:n},{type:"kern",size:3*a},{type:"elem",elem:r}]},t);return so.makeSpan(["mord","underline"],[i],t)},mathmlBuilder(e,t){var r=new zo.MathNode("mo",[new zo.TextNode("\u203e")]);r.setAttribute("stretchy","true");var n=new zo.MathNode("munder",[Ko(e.body,t),r]);return n.setAttribute("accentunder","true"),n}}),vo({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(e,t){var{parser:r}=e;return{type:"vcenter",mode:r.mode,body:t[0]}},htmlBuilder(e,t){var r=Po(e.body,t),n=t.fontMetrics().axisHeight,a=.5*(r.height-n-(r.depth+n));return so.makeVList({positionType:"shift",positionData:a,children:[{type:"elem",elem:r}]},t)},mathmlBuilder:(e,t)=>new zo.MathNode("mpadded",[Ko(e.body,t)],["vcenter"])}),vo({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(e,t,r){throw new pa("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(e,t){for(var r=ql(e),n=[],a=t.havingStyle(t.style.text()),i=0;i<r.length;i++){var o=r[i];"~"===o&&(o="\\textasciitilde"),n.push(so.makeSymbol(o,"Typewriter-Regular",e.mode,a,["mord","texttt"]))}return so.makeSpan(["mord","text"].concat(a.sizingClasses(t)),so.tryCombineChars(n),a)},mathmlBuilder(e,t){var r=new zo.TextNode(ql(e)),n=new zo.MathNode("mtext",[r]);return n.setAttribute("mathvariant","monospace"),n}});var ql=e=>e.body.replace(/ /g,e.star?"\u2423":"\xa0"),Bl=po,Fl="[ \r\n\t]",Ul="(\\\\[a-zA-Z@]+)"+Fl+"*",Hl="[\u0300-\u036f]",Wl=new RegExp(Hl+"+$"),Kl="("+Fl+"+)|\\\\(\n|[ \r\t]+\n?)[ \r\t]*|([!-\\[\\]-\u2027\u202a-\ud7ff\uf900-\uffff]"+Hl+"*|[\ud800-\udbff][\udc00-\udfff]"+Hl+"*|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5|"+Ul+"|\\\\[^\ud800-\udfff])";class Vl{constructor(e,t){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=e,this.settings=t,this.tokenRegex=new RegExp(Kl,"g"),this.catcodes={"%":14,"~":13}}setCatcode(e,t){this.catcodes[e]=t}lex(){var e=this.input,t=this.tokenRegex.lastIndex;if(t===e.length)return new ma("EOF",new ha(this,t,t));var r=this.tokenRegex.exec(e);if(null===r||r.index!==t)throw new pa("Unexpected character: '"+e[t]+"'",new ma(e[t],new ha(this,t,t+1)));var n=r[6]||r[3]||(r[2]?"\\ ":" ");if(14===this.catcodes[n]){var a=e.indexOf("\n",this.tokenRegex.lastIndex);return-1===a?(this.tokenRegex.lastIndex=e.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=a+1,this.lex()}return new ma(n,new ha(this,t,this.tokenRegex.lastIndex))}}class Gl{constructor(e,t){void 0===e&&(e={}),void 0===t&&(t={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=t,this.builtins=e,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(0===this.undefStack.length)throw new pa("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var e=this.undefStack.pop();for(var t in e)e.hasOwnProperty(t)&&(null==e[t]?delete this.current[t]:this.current[t]=e[t])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(e){return this.current.hasOwnProperty(e)||this.builtins.hasOwnProperty(e)}get(e){return this.current.hasOwnProperty(e)?this.current[e]:this.builtins[e]}set(e,t,r){if(void 0===r&&(r=!1),r){for(var n=0;n<this.undefStack.length;n++)delete this.undefStack[n][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=t)}else{var a=this.undefStack[this.undefStack.length-1];a&&!a.hasOwnProperty(e)&&(a[e]=this.current[e])}null==t?delete this.current[e]:this.current[e]=t}}var Ql=Xs;Zs("\\noexpand",function(e){var t=e.popToken();return e.isExpandable(t.text)&&(t.noexpand=!0,t.treatAsRelax=!0),{tokens:[t],numArgs:0}}),Zs("\\expandafter",function(e){var t=e.popToken();return e.expandOnce(!0),{tokens:[t],numArgs:0}}),Zs("\\@firstoftwo",function(e){return{tokens:e.consumeArgs(2)[0],numArgs:0}}),Zs("\\@secondoftwo",function(e){return{tokens:e.consumeArgs(2)[1],numArgs:0}}),Zs("\\@ifnextchar",function(e){var t=e.consumeArgs(3);e.consumeSpaces();var r=e.future();return 1===t[0].length&&t[0][0].text===r.text?{tokens:t[1],numArgs:0}:{tokens:t[2],numArgs:0}}),Zs("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}"),Zs("\\TextOrMath",function(e){var t=e.consumeArgs(2);return"text"===e.mode?{tokens:t[0],numArgs:0}:{tokens:t[1],numArgs:0}});var Yl={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};Zs("\\char",function(e){var t,r=e.popToken(),n="";if("'"===r.text)t=8,r=e.popToken();else if('"'===r.text)t=16,r=e.popToken();else if("`"===r.text)if("\\"===(r=e.popToken()).text[0])n=r.text.charCodeAt(1);else{if("EOF"===r.text)throw new pa("\\char` missing argument");n=r.text.charCodeAt(0)}else t=10;if(t){if(null==(n=Yl[r.text])||n>=t)throw new pa("Invalid base-"+t+" digit "+r.text);for(var a;null!=(a=Yl[e.future().text])&&a<t;)n*=t,n+=a,e.popToken()}return"\\@char{"+n+"}"});var $l=(e,t,r,n)=>{var a=e.consumeArg().tokens;if(1!==a.length)throw new pa("\\newcommand's first argument must be a macro name");var i=a[0].text,o=e.isDefined(i);if(o&&!t)throw new pa("\\newcommand{"+i+"} attempting to redefine "+i+"; use \\renewcommand");if(!o&&!r)throw new pa("\\renewcommand{"+i+"} when command "+i+" does not yet exist; use \\newcommand");var s=0;if(1===(a=e.consumeArg().tokens).length&&"["===a[0].text){for(var l="",c=e.expandNextToken();"]"!==c.text&&"EOF"!==c.text;)l+=c.text,c=e.expandNextToken();if(!l.match(/^\s*[0-9]+\s*$/))throw new pa("Invalid number of arguments: "+l);s=parseInt(l),a=e.consumeArg().tokens}return o&&n||e.macros.set(i,{tokens:a,numArgs:s}),""};Zs("\\newcommand",e=>$l(e,!1,!0,!1)),Zs("\\renewcommand",e=>$l(e,!0,!1,!1)),Zs("\\providecommand",e=>$l(e,!0,!0,!0)),Zs("\\message",e=>{var t=e.consumeArgs(1)[0];return console.log(t.reverse().map(e=>e.text).join("")),""}),Zs("\\errmessage",e=>{var t=e.consumeArgs(1)[0];return console.error(t.reverse().map(e=>e.text).join("")),""}),Zs("\\show",e=>{var t=e.popToken(),r=t.text;return console.log(t,e.macros.get(r),Bl[r],pi.math[r],pi.text[r]),""}),Zs("\\bgroup","{"),Zs("\\egroup","}"),Zs("~","\\nobreakspace"),Zs("\\lq","`"),Zs("\\rq","'"),Zs("\\aa","\\r a"),Zs("\\AA","\\r A"),Zs("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`\xa9}"),Zs("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}"),Zs("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`\xae}"),Zs("\u212c","\\mathscr{B}"),Zs("\u2130","\\mathscr{E}"),Zs("\u2131","\\mathscr{F}"),Zs("\u210b","\\mathscr{H}"),Zs("\u2110","\\mathscr{I}"),Zs("\u2112","\\mathscr{L}"),Zs("\u2133","\\mathscr{M}"),Zs("\u211b","\\mathscr{R}"),Zs("\u212d","\\mathfrak{C}"),Zs("\u210c","\\mathfrak{H}"),Zs("\u2128","\\mathfrak{Z}"),Zs("\\Bbbk","\\Bbb{k}"),Zs("\xb7","\\cdotp"),Zs("\\llap","\\mathllap{\\textrm{#1}}"),Zs("\\rlap","\\mathrlap{\\textrm{#1}}"),Zs("\\clap","\\mathclap{\\textrm{#1}}"),Zs("\\mathstrut","\\vphantom{(}"),Zs("\\underbar","\\underline{\\text{#1}}"),Zs("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}'),Zs("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`\u2260}}"),Zs("\\ne","\\neq"),Zs("\u2260","\\neq"),Zs("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`\u2209}}"),Zs("\u2209","\\notin"),Zs("\u2258","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`\u2258}}"),Zs("\u2259","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`\u2258}}"),Zs("\u225a","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`\u225a}}"),Zs("\u225b","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`\u225b}}"),Zs("\u225d","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`\u225d}}"),Zs("\u225e","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`\u225e}}"),Zs("\u225f","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`\u225f}}"),Zs("\u27c2","\\perp"),Zs("\u203c","\\mathclose{!\\mkern-0.8mu!}"),Zs("\u220c","\\notni"),Zs("\u231c","\\ulcorner"),Zs("\u231d","\\urcorner"),Zs("\u231e","\\llcorner"),Zs("\u231f","\\lrcorner"),Zs("\xa9","\\copyright"),Zs("\xae","\\textregistered"),Zs("\ufe0f","\\textregistered"),Zs("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}'),Zs("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}'),Zs("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}'),Zs("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}'),Zs("\\vdots","{\\varvdots\\rule{0pt}{15pt}}"),Zs("\u22ee","\\vdots"),Zs("\\varGamma","\\mathit{\\Gamma}"),Zs("\\varDelta","\\mathit{\\Delta}"),Zs("\\varTheta","\\mathit{\\Theta}"),Zs("\\varLambda","\\mathit{\\Lambda}"),Zs("\\varXi","\\mathit{\\Xi}"),Zs("\\varPi","\\mathit{\\Pi}"),Zs("\\varSigma","\\mathit{\\Sigma}"),Zs("\\varUpsilon","\\mathit{\\Upsilon}"),Zs("\\varPhi","\\mathit{\\Phi}"),Zs("\\varPsi","\\mathit{\\Psi}"),Zs("\\varOmega","\\mathit{\\Omega}"),Zs("\\substack","\\begin{subarray}{c}#1\\end{subarray}"),Zs("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax"),Zs("\\boxed","\\fbox{$\\displaystyle{#1}$}"),Zs("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;"),Zs("\\implies","\\DOTSB\\;\\Longrightarrow\\;"),Zs("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;"),Zs("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}"),Zs("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var Jl={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};Zs("\\dots",function(e){var t="\\dotso",r=e.expandAfterFuture().text;return r in Jl?t=Jl[r]:("\\not"===r.slice(0,4)||r in pi.math&&["bin","rel"].includes(pi.math[r].group))&&(t="\\dotsb"),t});var Xl={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};Zs("\\dotso",function(e){return e.future().text in Xl?"\\ldots\\,":"\\ldots"}),Zs("\\dotsc",function(e){var t=e.future().text;return t in Xl&&","!==t?"\\ldots\\,":"\\ldots"}),Zs("\\cdots",function(e){return e.future().text in Xl?"\\@cdots\\,":"\\@cdots"}),Zs("\\dotsb","\\cdots"),Zs("\\dotsm","\\cdots"),Zs("\\dotsi","\\!\\cdots"),Zs("\\dotsx","\\ldots\\,"),Zs("\\DOTSI","\\relax"),Zs("\\DOTSB","\\relax"),Zs("\\DOTSX","\\relax"),Zs("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax"),Zs("\\,","\\tmspace+{3mu}{.1667em}"),Zs("\\thinspace","\\,"),Zs("\\>","\\mskip{4mu}"),Zs("\\:","\\tmspace+{4mu}{.2222em}"),Zs("\\medspace","\\:"),Zs("\\;","\\tmspace+{5mu}{.2777em}"),Zs("\\thickspace","\\;"),Zs("\\!","\\tmspace-{3mu}{.1667em}"),Zs("\\negthinspace","\\!"),Zs("\\negmedspace","\\tmspace-{4mu}{.2222em}"),Zs("\\negthickspace","\\tmspace-{5mu}{.277em}"),Zs("\\enspace","\\kern.5em "),Zs("\\enskip","\\hskip.5em\\relax"),Zs("\\quad","\\hskip1em\\relax"),Zs("\\qquad","\\hskip2em\\relax"),Zs("\\tag","\\@ifstar\\tag@literal\\tag@paren"),Zs("\\tag@paren","\\tag@literal{({#1})}"),Zs("\\tag@literal",e=>{if(e.macros.get("\\df@tag"))throw new pa("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"}),Zs("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}"),Zs("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)"),Zs("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}"),Zs("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1"),Zs("\\newline","\\\\\\relax"),Zs("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var Zl=Ja(za["Main-Regular"]["T".charCodeAt(0)][1]-.7*za["Main-Regular"]["A".charCodeAt(0)][1]);Zs("\\LaTeX","\\textrm{\\html@mathml{L\\kern-.36em\\raisebox{"+Zl+"}{\\scriptstyle A}\\kern-.15em\\TeX}{LaTeX}}"),Zs("\\KaTeX","\\textrm{\\html@mathml{K\\kern-.17em\\raisebox{"+Zl+"}{\\scriptstyle A}\\kern-.15em\\TeX}{KaTeX}}"),Zs("\\hspace","\\@ifstar\\@hspacer\\@hspace"),Zs("\\@hspace","\\hskip #1\\relax"),Zs("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax"),Zs("\\ordinarycolon",":"),Zs("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}"),Zs("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}'),Zs("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}'),Zs("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}'),Zs("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}'),Zs("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}'),Zs("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}'),Zs("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}'),Zs("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}'),Zs("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}'),Zs("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}'),Zs("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}'),Zs("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}'),Zs("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}'),Zs("\u2237","\\dblcolon"),Zs("\u2239","\\eqcolon"),Zs("\u2254","\\coloneqq"),Zs("\u2255","\\eqqcolon"),Zs("\u2a74","\\Coloneqq"),Zs("\\ratio","\\vcentcolon"),Zs("\\coloncolon","\\dblcolon"),Zs("\\colonequals","\\coloneqq"),Zs("\\coloncolonequals","\\Coloneqq"),Zs("\\equalscolon","\\eqqcolon"),Zs("\\equalscoloncolon","\\Eqqcolon"),Zs("\\colonminus","\\coloneq"),Zs("\\coloncolonminus","\\Coloneq"),Zs("\\minuscolon","\\eqcolon"),Zs("\\minuscoloncolon","\\Eqcolon"),Zs("\\coloncolonapprox","\\Colonapprox"),Zs("\\coloncolonsim","\\Colonsim"),Zs("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),Zs("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}"),Zs("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),Zs("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}"),Zs("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`\u220c}}"),Zs("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}"),Zs("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}"),Zs("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}"),Zs("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}"),Zs("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}"),Zs("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}"),Zs("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}"),Zs("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}"),Zs("\\gvertneqq","\\html@mathml{\\@gvertneqq}{\u2269}"),Zs("\\lvertneqq","\\html@mathml{\\@lvertneqq}{\u2268}"),Zs("\\ngeqq","\\html@mathml{\\@ngeqq}{\u2271}"),Zs("\\ngeqslant","\\html@mathml{\\@ngeqslant}{\u2271}"),Zs("\\nleqq","\\html@mathml{\\@nleqq}{\u2270}"),Zs("\\nleqslant","\\html@mathml{\\@nleqslant}{\u2270}"),Zs("\\nshortmid","\\html@mathml{\\@nshortmid}{\u2224}"),Zs("\\nshortparallel","\\html@mathml{\\@nshortparallel}{\u2226}"),Zs("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{\u2288}"),Zs("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{\u2289}"),Zs("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{\u228a}"),Zs("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{\u2acb}"),Zs("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{\u228b}"),Zs("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{\u2acc}"),Zs("\\imath","\\html@mathml{\\@imath}{\u0131}"),Zs("\\jmath","\\html@mathml{\\@jmath}{\u0237}"),Zs("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`\u27e6}}"),Zs("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`\u27e7}}"),Zs("\u27e6","\\llbracket"),Zs("\u27e7","\\rrbracket"),Zs("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`\u2983}}"),Zs("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`\u2984}}"),Zs("\u2983","\\lBrace"),Zs("\u2984","\\rBrace"),Zs("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`\u29b5}}"),Zs("\u29b5","\\minuso"),Zs("\\darr","\\downarrow"),Zs("\\dArr","\\Downarrow"),Zs("\\Darr","\\Downarrow"),Zs("\\lang","\\langle"),Zs("\\rang","\\rangle"),Zs("\\uarr","\\uparrow"),Zs("\\uArr","\\Uparrow"),Zs("\\Uarr","\\Uparrow"),Zs("\\N","\\mathbb{N}"),Zs("\\R","\\mathbb{R}"),Zs("\\Z","\\mathbb{Z}"),Zs("\\alef","\\aleph"),Zs("\\alefsym","\\aleph"),Zs("\\Alpha","\\mathrm{A}"),Zs("\\Beta","\\mathrm{B}"),Zs("\\bull","\\bullet"),Zs("\\Chi","\\mathrm{X}"),Zs("\\clubs","\\clubsuit"),Zs("\\cnums","\\mathbb{C}"),Zs("\\Complex","\\mathbb{C}"),Zs("\\Dagger","\\ddagger"),Zs("\\diamonds","\\diamondsuit"),Zs("\\empty","\\emptyset"),Zs("\\Epsilon","\\mathrm{E}"),Zs("\\Eta","\\mathrm{H}"),Zs("\\exist","\\exists"),Zs("\\harr","\\leftrightarrow"),Zs("\\hArr","\\Leftrightarrow"),Zs("\\Harr","\\Leftrightarrow"),Zs("\\hearts","\\heartsuit"),Zs("\\image","\\Im"),Zs("\\infin","\\infty"),Zs("\\Iota","\\mathrm{I}"),Zs("\\isin","\\in"),Zs("\\Kappa","\\mathrm{K}"),Zs("\\larr","\\leftarrow"),Zs("\\lArr","\\Leftarrow"),Zs("\\Larr","\\Leftarrow"),Zs("\\lrarr","\\leftrightarrow"),Zs("\\lrArr","\\Leftrightarrow"),Zs("\\Lrarr","\\Leftrightarrow"),Zs("\\Mu","\\mathrm{M}"),Zs("\\natnums","\\mathbb{N}"),Zs("\\Nu","\\mathrm{N}"),Zs("\\Omicron","\\mathrm{O}"),Zs("\\plusmn","\\pm"),Zs("\\rarr","\\rightarrow"),Zs("\\rArr","\\Rightarrow"),Zs("\\Rarr","\\Rightarrow"),Zs("\\real","\\Re"),Zs("\\reals","\\mathbb{R}"),Zs("\\Reals","\\mathbb{R}"),Zs("\\Rho","\\mathrm{P}"),Zs("\\sdot","\\cdot"),Zs("\\sect","\\S"),Zs("\\spades","\\spadesuit"),Zs("\\sub","\\subset"),Zs("\\sube","\\subseteq"),Zs("\\supe","\\supseteq"),Zs("\\Tau","\\mathrm{T}"),Zs("\\thetasym","\\vartheta"),Zs("\\weierp","\\wp"),Zs("\\Zeta","\\mathrm{Z}"),Zs("\\argmin","\\DOTSB\\operatorname*{arg\\,min}"),Zs("\\argmax","\\DOTSB\\operatorname*{arg\\,max}"),Zs("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits"),Zs("\\bra","\\mathinner{\\langle{#1}|}"),Zs("\\ket","\\mathinner{|{#1}\\rangle}"),Zs("\\braket","\\mathinner{\\langle{#1}\\rangle}"),Zs("\\Bra","\\left\\langle#1\\right|"),Zs("\\Ket","\\left|#1\\right\\rangle");var ec=e=>t=>{var r=t.consumeArg().tokens,n=t.consumeArg().tokens,a=t.consumeArg().tokens,i=t.consumeArg().tokens,o=t.macros.get("|"),s=t.macros.get("\\|");t.macros.beginGroup();var l=t=>r=>{e&&(r.macros.set("|",o),a.length&&r.macros.set("\\|",s));var i=t;!t&&a.length&&("|"===r.future().text&&(r.popToken(),i=!0));return{tokens:i?a:n,numArgs:0}};t.macros.set("|",l(!1)),a.length&&t.macros.set("\\|",l(!0));var c=t.consumeArg().tokens,u=t.expandTokens([...i,...c,...r]);return t.macros.endGroup(),{tokens:u.reverse(),numArgs:0}};Zs("\\bra@ket",ec(!1)),Zs("\\bra@set",ec(!0)),Zs("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}"),Zs("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}"),Zs("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}"),Zs("\\angln","{\\angl n}"),Zs("\\blue","\\textcolor{##6495ed}{#1}"),Zs("\\orange","\\textcolor{##ffa500}{#1}"),Zs("\\pink","\\textcolor{##ff00af}{#1}"),Zs("\\red","\\textcolor{##df0030}{#1}"),Zs("\\green","\\textcolor{##28ae7b}{#1}"),Zs("\\gray","\\textcolor{gray}{#1}"),Zs("\\purple","\\textcolor{##9d38bd}{#1}"),Zs("\\blueA","\\textcolor{##ccfaff}{#1}"),Zs("\\blueB","\\textcolor{##80f6ff}{#1}"),Zs("\\blueC","\\textcolor{##63d9ea}{#1}"),Zs("\\blueD","\\textcolor{##11accd}{#1}"),Zs("\\blueE","\\textcolor{##0c7f99}{#1}"),Zs("\\tealA","\\textcolor{##94fff5}{#1}"),Zs("\\tealB","\\textcolor{##26edd5}{#1}"),Zs("\\tealC","\\textcolor{##01d1c1}{#1}"),Zs("\\tealD","\\textcolor{##01a995}{#1}"),Zs("\\tealE","\\textcolor{##208170}{#1}"),Zs("\\greenA","\\textcolor{##b6ffb0}{#1}"),Zs("\\greenB","\\textcolor{##8af281}{#1}"),Zs("\\greenC","\\textcolor{##74cf70}{#1}"),Zs("\\greenD","\\textcolor{##1fab54}{#1}"),Zs("\\greenE","\\textcolor{##0d923f}{#1}"),Zs("\\goldA","\\textcolor{##ffd0a9}{#1}"),Zs("\\goldB","\\textcolor{##ffbb71}{#1}"),Zs("\\goldC","\\textcolor{##ff9c39}{#1}"),Zs("\\goldD","\\textcolor{##e07d10}{#1}"),Zs("\\goldE","\\textcolor{##a75a05}{#1}"),Zs("\\redA","\\textcolor{##fca9a9}{#1}"),Zs("\\redB","\\textcolor{##ff8482}{#1}"),Zs("\\redC","\\textcolor{##f9685d}{#1}"),Zs("\\redD","\\textcolor{##e84d39}{#1}"),Zs("\\redE","\\textcolor{##bc2612}{#1}"),Zs("\\maroonA","\\textcolor{##ffbde0}{#1}"),Zs("\\maroonB","\\textcolor{##ff92c6}{#1}"),Zs("\\maroonC","\\textcolor{##ed5fa6}{#1}"),Zs("\\maroonD","\\textcolor{##ca337c}{#1}"),Zs("\\maroonE","\\textcolor{##9e034e}{#1}"),Zs("\\purpleA","\\textcolor{##ddd7ff}{#1}"),Zs("\\purpleB","\\textcolor{##c6b9fc}{#1}"),Zs("\\purpleC","\\textcolor{##aa87ff}{#1}"),Zs("\\purpleD","\\textcolor{##7854ab}{#1}"),Zs("\\purpleE","\\textcolor{##543b78}{#1}"),Zs("\\mintA","\\textcolor{##f5f9e8}{#1}"),Zs("\\mintB","\\textcolor{##edf2df}{#1}"),Zs("\\mintC","\\textcolor{##e0e5cc}{#1}"),Zs("\\grayA","\\textcolor{##f6f7f7}{#1}"),Zs("\\grayB","\\textcolor{##f0f1f2}{#1}"),Zs("\\grayC","\\textcolor{##e3e5e6}{#1}"),Zs("\\grayD","\\textcolor{##d6d8da}{#1}"),Zs("\\grayE","\\textcolor{##babec2}{#1}"),Zs("\\grayF","\\textcolor{##888d93}{#1}"),Zs("\\grayG","\\textcolor{##626569}{#1}"),Zs("\\grayH","\\textcolor{##3b3e40}{#1}"),Zs("\\grayI","\\textcolor{##21242c}{#1}"),Zs("\\kaBlue","\\textcolor{##314453}{#1}"),Zs("\\kaGreen","\\textcolor{##71B307}{#1}");var tc={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class rc{constructor(e,t,r){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=t,this.expansionCount=0,this.feed(e),this.macros=new Gl(Ql,t.macros),this.mode=r,this.stack=[]}feed(e){this.lexer=new Vl(e,this.settings)}switchMode(e){this.mode=e}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return 0===this.stack.length&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(e){this.stack.push(e)}pushTokens(e){this.stack.push(...e)}scanArgument(e){var t,r,n;if(e){if(this.consumeSpaces(),"["!==this.future().text)return null;t=this.popToken(),({tokens:n,end:r}=this.consumeArg(["]"]))}else({tokens:n,start:t,end:r}=this.consumeArg());return this.pushToken(new ma("EOF",r.loc)),this.pushTokens(n),new ma("",ha.range(t,r))}consumeSpaces(){for(;;){if(" "!==this.future().text)break;this.stack.pop()}}consumeArg(e){var t=[],r=e&&e.length>0;r||this.consumeSpaces();var n,a=this.future(),i=0,o=0;do{if(n=this.popToken(),t.push(n),"{"===n.text)++i;else if("}"===n.text){if(-1===--i)throw new pa("Extra }",n)}else if("EOF"===n.text)throw new pa("Unexpected end of input in a macro argument, expected '"+(e&&r?e[o]:"}")+"'",n);if(e&&r)if((0===i||1===i&&"{"===e[o])&&n.text===e[o]){if(++o===e.length){t.splice(-o,o);break}}else o=0}while(0!==i||r);return"{"===a.text&&"}"===t[t.length-1].text&&(t.pop(),t.shift()),t.reverse(),{tokens:t,start:a,end:n}}consumeArgs(e,t){if(t){if(t.length!==e+1)throw new pa("The length of delimiters doesn't match the number of args!");for(var r=t[0],n=0;n<r.length;n++){var a=this.popToken();if(r[n]!==a.text)throw new pa("Use of the macro doesn't match its definition",a)}}for(var i=[],o=0;o<e;o++)i.push(this.consumeArg(t&&t[o+1]).tokens);return i}countExpansion(e){if(this.expansionCount+=e,this.expansionCount>this.settings.maxExpand)throw new pa("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(e){var t=this.popToken(),r=t.text,n=t.noexpand?null:this._getExpansion(r);if(null==n||e&&n.unexpandable){if(e&&null==n&&"\\"===r[0]&&!this.isDefined(r))throw new pa("Undefined control sequence: "+r);return this.pushToken(t),!1}this.countExpansion(1);var a=n.tokens,i=this.consumeArgs(n.numArgs,n.delimiters);if(n.numArgs)for(var o=(a=a.slice()).length-1;o>=0;--o){var s=a[o];if("#"===s.text){if(0===o)throw new pa("Incomplete placeholder at end of macro body",s);if("#"===(s=a[--o]).text)a.splice(o+1,1);else{if(!/^[1-9]$/.test(s.text))throw new pa("Not a valid argument number",s);a.splice(o,2,...i[+s.text-1])}}}return this.pushTokens(a),a.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(!1===this.expandOnce()){var e=this.stack.pop();return e.treatAsRelax&&(e.text="\\relax"),e}throw new Error}expandMacro(e){return this.macros.has(e)?this.expandTokens([new ma(e)]):void 0}expandTokens(e){var t=[],r=this.stack.length;for(this.pushTokens(e);this.stack.length>r;)if(!1===this.expandOnce(!0)){var n=this.stack.pop();n.treatAsRelax&&(n.noexpand=!1,n.treatAsRelax=!1),t.push(n)}return this.countExpansion(t.length),t}expandMacroAsText(e){var t=this.expandMacro(e);return t?t.map(e=>e.text).join(""):t}_getExpansion(e){var t=this.macros.get(e);if(null==t)return t;if(1===e.length){var r=this.lexer.catcodes[e];if(null!=r&&13!==r)return}var n="function"===typeof t?t(this):t;if("string"===typeof n){var a=0;if(-1!==n.indexOf("#"))for(var i=n.replace(/##/g,"");-1!==i.indexOf("#"+(a+1));)++a;for(var o=new Vl(n,this.settings),s=[],l=o.lex();"EOF"!==l.text;)s.push(l),l=o.lex();return s.reverse(),{tokens:s,numArgs:a}}return n}isDefined(e){return this.macros.has(e)||Bl.hasOwnProperty(e)||pi.math.hasOwnProperty(e)||pi.text.hasOwnProperty(e)||tc.hasOwnProperty(e)}isExpandable(e){var t=this.macros.get(e);return null!=t?"string"===typeof t||"function"===typeof t||!t.unexpandable:Bl.hasOwnProperty(e)&&!Bl[e].primitive}}var nc=/^[\u208a\u208b\u208c\u208d\u208e\u2080\u2081\u2082\u2083\u2084\u2085\u2086\u2087\u2088\u2089\u2090\u2091\u2095\u1d62\u2c7c\u2096\u2097\u2098\u2099\u2092\u209a\u1d63\u209b\u209c\u1d64\u1d65\u2093\u1d66\u1d67\u1d68\u1d69\u1d6a]/,ac=Object.freeze({"\u208a":"+","\u208b":"-","\u208c":"=","\u208d":"(","\u208e":")","\u2080":"0","\u2081":"1","\u2082":"2","\u2083":"3","\u2084":"4","\u2085":"5","\u2086":"6","\u2087":"7","\u2088":"8","\u2089":"9","\u2090":"a","\u2091":"e","\u2095":"h","\u1d62":"i","\u2c7c":"j","\u2096":"k","\u2097":"l","\u2098":"m","\u2099":"n","\u2092":"o","\u209a":"p","\u1d63":"r","\u209b":"s","\u209c":"t","\u1d64":"u","\u1d65":"v","\u2093":"x","\u1d66":"\u03b2","\u1d67":"\u03b3","\u1d68":"\u03c1","\u1d69":"\u03d5","\u1d6a":"\u03c7","\u207a":"+","\u207b":"-","\u207c":"=","\u207d":"(","\u207e":")","\u2070":"0","\xb9":"1","\xb2":"2","\xb3":"3","\u2074":"4","\u2075":"5","\u2076":"6","\u2077":"7","\u2078":"8","\u2079":"9","\u1d2c":"A","\u1d2e":"B","\u1d30":"D","\u1d31":"E","\u1d33":"G","\u1d34":"H","\u1d35":"I","\u1d36":"J","\u1d37":"K","\u1d38":"L","\u1d39":"M","\u1d3a":"N","\u1d3c":"O","\u1d3e":"P","\u1d3f":"R","\u1d40":"T","\u1d41":"U","\u2c7d":"V","\u1d42":"W","\u1d43":"a","\u1d47":"b","\u1d9c":"c","\u1d48":"d","\u1d49":"e","\u1da0":"f","\u1d4d":"g","\u02b0":"h","\u2071":"i","\u02b2":"j","\u1d4f":"k","\u02e1":"l","\u1d50":"m","\u207f":"n","\u1d52":"o","\u1d56":"p","\u02b3":"r","\u02e2":"s","\u1d57":"t","\u1d58":"u","\u1d5b":"v","\u02b7":"w","\u02e3":"x","\u02b8":"y","\u1dbb":"z","\u1d5d":"\u03b2","\u1d5e":"\u03b3","\u1d5f":"\u03b4","\u1d60":"\u03d5","\u1d61":"\u03c7","\u1dbf":"\u03b8"}),ic={"\u0301":{text:"\\'",math:"\\acute"},"\u0300":{text:"\\`",math:"\\grave"},"\u0308":{text:'\\"',math:"\\ddot"},"\u0303":{text:"\\~",math:"\\tilde"},"\u0304":{text:"\\=",math:"\\bar"},"\u0306":{text:"\\u",math:"\\breve"},"\u030c":{text:"\\v",math:"\\check"},"\u0302":{text:"\\^",math:"\\hat"},"\u0307":{text:"\\.",math:"\\dot"},"\u030a":{text:"\\r",math:"\\mathring"},"\u030b":{text:"\\H"},"\u0327":{text:"\\c"}},oc={"\xe1":"a\u0301","\xe0":"a\u0300","\xe4":"a\u0308","\u01df":"a\u0308\u0304","\xe3":"a\u0303","\u0101":"a\u0304","\u0103":"a\u0306","\u1eaf":"a\u0306\u0301","\u1eb1":"a\u0306\u0300","\u1eb5":"a\u0306\u0303","\u01ce":"a\u030c","\xe2":"a\u0302","\u1ea5":"a\u0302\u0301","\u1ea7":"a\u0302\u0300","\u1eab":"a\u0302\u0303","\u0227":"a\u0307","\u01e1":"a\u0307\u0304","\xe5":"a\u030a","\u01fb":"a\u030a\u0301","\u1e03":"b\u0307","\u0107":"c\u0301","\u1e09":"c\u0327\u0301","\u010d":"c\u030c","\u0109":"c\u0302","\u010b":"c\u0307","\xe7":"c\u0327","\u010f":"d\u030c","\u1e0b":"d\u0307","\u1e11":"d\u0327","\xe9":"e\u0301","\xe8":"e\u0300","\xeb":"e\u0308","\u1ebd":"e\u0303","\u0113":"e\u0304","\u1e17":"e\u0304\u0301","\u1e15":"e\u0304\u0300","\u0115":"e\u0306","\u1e1d":"e\u0327\u0306","\u011b":"e\u030c","\xea":"e\u0302","\u1ebf":"e\u0302\u0301","\u1ec1":"e\u0302\u0300","\u1ec5":"e\u0302\u0303","\u0117":"e\u0307","\u0229":"e\u0327","\u1e1f":"f\u0307","\u01f5":"g\u0301","\u1e21":"g\u0304","\u011f":"g\u0306","\u01e7":"g\u030c","\u011d":"g\u0302","\u0121":"g\u0307","\u0123":"g\u0327","\u1e27":"h\u0308","\u021f":"h\u030c","\u0125":"h\u0302","\u1e23":"h\u0307","\u1e29":"h\u0327","\xed":"i\u0301","\xec":"i\u0300","\xef":"i\u0308","\u1e2f":"i\u0308\u0301","\u0129":"i\u0303","\u012b":"i\u0304","\u012d":"i\u0306","\u01d0":"i\u030c","\xee":"i\u0302","\u01f0":"j\u030c","\u0135":"j\u0302","\u1e31":"k\u0301","\u01e9":"k\u030c","\u0137":"k\u0327","\u013a":"l\u0301","\u013e":"l\u030c","\u013c":"l\u0327","\u1e3f":"m\u0301","\u1e41":"m\u0307","\u0144":"n\u0301","\u01f9":"n\u0300","\xf1":"n\u0303","\u0148":"n\u030c","\u1e45":"n\u0307","\u0146":"n\u0327","\xf3":"o\u0301","\xf2":"o\u0300","\xf6":"o\u0308","\u022b":"o\u0308\u0304","\xf5":"o\u0303","\u1e4d":"o\u0303\u0301","\u1e4f":"o\u0303\u0308","\u022d":"o\u0303\u0304","\u014d":"o\u0304","\u1e53":"o\u0304\u0301","\u1e51":"o\u0304\u0300","\u014f":"o\u0306","\u01d2":"o\u030c","\xf4":"o\u0302","\u1ed1":"o\u0302\u0301","\u1ed3":"o\u0302\u0300","\u1ed7":"o\u0302\u0303","\u022f":"o\u0307","\u0231":"o\u0307\u0304","\u0151":"o\u030b","\u1e55":"p\u0301","\u1e57":"p\u0307","\u0155":"r\u0301","\u0159":"r\u030c","\u1e59":"r\u0307","\u0157":"r\u0327","\u015b":"s\u0301","\u1e65":"s\u0301\u0307","\u0161":"s\u030c","\u1e67":"s\u030c\u0307","\u015d":"s\u0302","\u1e61":"s\u0307","\u015f":"s\u0327","\u1e97":"t\u0308","\u0165":"t\u030c","\u1e6b":"t\u0307","\u0163":"t\u0327","\xfa":"u\u0301","\xf9":"u\u0300","\xfc":"u\u0308","\u01d8":"u\u0308\u0301","\u01dc":"u\u0308\u0300","\u01d6":"u\u0308\u0304","\u01da":"u\u0308\u030c","\u0169":"u\u0303","\u1e79":"u\u0303\u0301","\u016b":"u\u0304","\u1e7b":"u\u0304\u0308","\u016d":"u\u0306","\u01d4":"u\u030c","\xfb":"u\u0302","\u016f":"u\u030a","\u0171":"u\u030b","\u1e7d":"v\u0303","\u1e83":"w\u0301","\u1e81":"w\u0300","\u1e85":"w\u0308","\u0175":"w\u0302","\u1e87":"w\u0307","\u1e98":"w\u030a","\u1e8d":"x\u0308","\u1e8b":"x\u0307","\xfd":"y\u0301","\u1ef3":"y\u0300","\xff":"y\u0308","\u1ef9":"y\u0303","\u0233":"y\u0304","\u0177":"y\u0302","\u1e8f":"y\u0307","\u1e99":"y\u030a","\u017a":"z\u0301","\u017e":"z\u030c","\u1e91":"z\u0302","\u017c":"z\u0307","\xc1":"A\u0301","\xc0":"A\u0300","\xc4":"A\u0308","\u01de":"A\u0308\u0304","\xc3":"A\u0303","\u0100":"A\u0304","\u0102":"A\u0306","\u1eae":"A\u0306\u0301","\u1eb0":"A\u0306\u0300","\u1eb4":"A\u0306\u0303","\u01cd":"A\u030c","\xc2":"A\u0302","\u1ea4":"A\u0302\u0301","\u1ea6":"A\u0302\u0300","\u1eaa":"A\u0302\u0303","\u0226":"A\u0307","\u01e0":"A\u0307\u0304","\xc5":"A\u030a","\u01fa":"A\u030a\u0301","\u1e02":"B\u0307","\u0106":"C\u0301","\u1e08":"C\u0327\u0301","\u010c":"C\u030c","\u0108":"C\u0302","\u010a":"C\u0307","\xc7":"C\u0327","\u010e":"D\u030c","\u1e0a":"D\u0307","\u1e10":"D\u0327","\xc9":"E\u0301","\xc8":"E\u0300","\xcb":"E\u0308","\u1ebc":"E\u0303","\u0112":"E\u0304","\u1e16":"E\u0304\u0301","\u1e14":"E\u0304\u0300","\u0114":"E\u0306","\u1e1c":"E\u0327\u0306","\u011a":"E\u030c","\xca":"E\u0302","\u1ebe":"E\u0302\u0301","\u1ec0":"E\u0302\u0300","\u1ec4":"E\u0302\u0303","\u0116":"E\u0307","\u0228":"E\u0327","\u1e1e":"F\u0307","\u01f4":"G\u0301","\u1e20":"G\u0304","\u011e":"G\u0306","\u01e6":"G\u030c","\u011c":"G\u0302","\u0120":"G\u0307","\u0122":"G\u0327","\u1e26":"H\u0308","\u021e":"H\u030c","\u0124":"H\u0302","\u1e22":"H\u0307","\u1e28":"H\u0327","\xcd":"I\u0301","\xcc":"I\u0300","\xcf":"I\u0308","\u1e2e":"I\u0308\u0301","\u0128":"I\u0303","\u012a":"I\u0304","\u012c":"I\u0306","\u01cf":"I\u030c","\xce":"I\u0302","\u0130":"I\u0307","\u0134":"J\u0302","\u1e30":"K\u0301","\u01e8":"K\u030c","\u0136":"K\u0327","\u0139":"L\u0301","\u013d":"L\u030c","\u013b":"L\u0327","\u1e3e":"M\u0301","\u1e40":"M\u0307","\u0143":"N\u0301","\u01f8":"N\u0300","\xd1":"N\u0303","\u0147":"N\u030c","\u1e44":"N\u0307","\u0145":"N\u0327","\xd3":"O\u0301","\xd2":"O\u0300","\xd6":"O\u0308","\u022a":"O\u0308\u0304","\xd5":"O\u0303","\u1e4c":"O\u0303\u0301","\u1e4e":"O\u0303\u0308","\u022c":"O\u0303\u0304","\u014c":"O\u0304","\u1e52":"O\u0304\u0301","\u1e50":"O\u0304\u0300","\u014e":"O\u0306","\u01d1":"O\u030c","\xd4":"O\u0302","\u1ed0":"O\u0302\u0301","\u1ed2":"O\u0302\u0300","\u1ed6":"O\u0302\u0303","\u022e":"O\u0307","\u0230":"O\u0307\u0304","\u0150":"O\u030b","\u1e54":"P\u0301","\u1e56":"P\u0307","\u0154":"R\u0301","\u0158":"R\u030c","\u1e58":"R\u0307","\u0156":"R\u0327","\u015a":"S\u0301","\u1e64":"S\u0301\u0307","\u0160":"S\u030c","\u1e66":"S\u030c\u0307","\u015c":"S\u0302","\u1e60":"S\u0307","\u015e":"S\u0327","\u0164":"T\u030c","\u1e6a":"T\u0307","\u0162":"T\u0327","\xda":"U\u0301","\xd9":"U\u0300","\xdc":"U\u0308","\u01d7":"U\u0308\u0301","\u01db":"U\u0308\u0300","\u01d5":"U\u0308\u0304","\u01d9":"U\u0308\u030c","\u0168":"U\u0303","\u1e78":"U\u0303\u0301","\u016a":"U\u0304","\u1e7a":"U\u0304\u0308","\u016c":"U\u0306","\u01d3":"U\u030c","\xdb":"U\u0302","\u016e":"U\u030a","\u0170":"U\u030b","\u1e7c":"V\u0303","\u1e82":"W\u0301","\u1e80":"W\u0300","\u1e84":"W\u0308","\u0174":"W\u0302","\u1e86":"W\u0307","\u1e8c":"X\u0308","\u1e8a":"X\u0307","\xdd":"Y\u0301","\u1ef2":"Y\u0300","\u0178":"Y\u0308","\u1ef8":"Y\u0303","\u0232":"Y\u0304","\u0176":"Y\u0302","\u1e8e":"Y\u0307","\u0179":"Z\u0301","\u017d":"Z\u030c","\u1e90":"Z\u0302","\u017b":"Z\u0307","\u03ac":"\u03b1\u0301","\u1f70":"\u03b1\u0300","\u1fb1":"\u03b1\u0304","\u1fb0":"\u03b1\u0306","\u03ad":"\u03b5\u0301","\u1f72":"\u03b5\u0300","\u03ae":"\u03b7\u0301","\u1f74":"\u03b7\u0300","\u03af":"\u03b9\u0301","\u1f76":"\u03b9\u0300","\u03ca":"\u03b9\u0308","\u0390":"\u03b9\u0308\u0301","\u1fd2":"\u03b9\u0308\u0300","\u1fd1":"\u03b9\u0304","\u1fd0":"\u03b9\u0306","\u03cc":"\u03bf\u0301","\u1f78":"\u03bf\u0300","\u03cd":"\u03c5\u0301","\u1f7a":"\u03c5\u0300","\u03cb":"\u03c5\u0308","\u03b0":"\u03c5\u0308\u0301","\u1fe2":"\u03c5\u0308\u0300","\u1fe1":"\u03c5\u0304","\u1fe0":"\u03c5\u0306","\u03ce":"\u03c9\u0301","\u1f7c":"\u03c9\u0300","\u038e":"\u03a5\u0301","\u1fea":"\u03a5\u0300","\u03ab":"\u03a5\u0308","\u1fe9":"\u03a5\u0304","\u1fe8":"\u03a5\u0306","\u038f":"\u03a9\u0301","\u1ffa":"\u03a9\u0300"};class sc{constructor(e,t){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new rc(e,t,this.mode),this.settings=t,this.leftrightDepth=0}expect(e,t){if(void 0===t&&(t=!0),this.fetch().text!==e)throw new pa("Expected '"+e+"', got '"+this.fetch().text+"'",this.fetch());t&&this.consume()}consume(){this.nextToken=null}fetch(){return null==this.nextToken&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(e){this.mode=e,this.gullet.switchMode(e)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var e=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),e}finally{this.gullet.endGroups()}}subparse(e){var t=this.nextToken;this.consume(),this.gullet.pushToken(new ma("}")),this.gullet.pushTokens(e);var r=this.parseExpression(!1);return this.expect("}"),this.nextToken=t,r}parseExpression(e,t){for(var r=[];;){"math"===this.mode&&this.consumeSpaces();var n=this.fetch();if(-1!==sc.endOfExpression.indexOf(n.text))break;if(t&&n.text===t)break;if(e&&Bl[n.text]&&Bl[n.text].infix)break;var a=this.parseAtom(t);if(!a)break;"internal"!==a.type&&r.push(a)}return"text"===this.mode&&this.formLigatures(r),this.handleInfixNodes(r)}handleInfixNodes(e){for(var t,r=-1,n=0;n<e.length;n++)if("infix"===e[n].type){if(-1!==r)throw new pa("only one infix operator per group",e[n].token);r=n,t=e[n].replaceWith}if(-1!==r&&t){var a,i,o=e.slice(0,r),s=e.slice(r+1);return a=1===o.length&&"ordgroup"===o[0].type?o[0]:{type:"ordgroup",mode:this.mode,body:o},i=1===s.length&&"ordgroup"===s[0].type?s[0]:{type:"ordgroup",mode:this.mode,body:s},["\\\\abovefrac"===t?this.callFunction(t,[a,e[r],i],[]):this.callFunction(t,[a,i],[])]}return e}handleSupSubscript(e){var t,r=this.fetch(),n=r.text;this.consume(),this.consumeSpaces();do{var a;t=this.parseGroup(e)}while("internal"===(null==(a=t)?void 0:a.type));if(!t)throw new pa("Expected group after '"+n+"'",r);return t}formatUnsupportedCmd(e){for(var t=[],r=0;r<e.length;r++)t.push({type:"textord",mode:"text",text:e[r]});var n={type:"text",mode:this.mode,body:t};return{type:"color",mode:this.mode,color:this.settings.errorColor,body:[n]}}parseAtom(e){var t,r,n=this.parseGroup("atom",e);if("internal"===(null==n?void 0:n.type))return n;if("text"===this.mode)return n;for(;;){this.consumeSpaces();var a=this.fetch();if("\\limits"===a.text||"\\nolimits"===a.text){if(n&&"op"===n.type){var i="\\limits"===a.text;n.limits=i,n.alwaysHandleSupSub=!0}else{if(!n||"operatorname"!==n.type)throw new pa("Limit controls must follow a math operator",a);n.alwaysHandleSupSub&&(n.limits="\\limits"===a.text)}this.consume()}else if("^"===a.text){if(t)throw new pa("Double superscript",a);t=this.handleSupSubscript("superscript")}else if("_"===a.text){if(r)throw new pa("Double subscript",a);r=this.handleSupSubscript("subscript")}else if("'"===a.text){if(t)throw new pa("Double superscript",a);var o={type:"textord",mode:this.mode,text:"\\prime"},s=[o];for(this.consume();"'"===this.fetch().text;)s.push(o),this.consume();"^"===this.fetch().text&&s.push(this.handleSupSubscript("superscript")),t={type:"ordgroup",mode:this.mode,body:s}}else{if(!ac[a.text])break;var l=nc.test(a.text),c=[];for(c.push(new ma(ac[a.text])),this.consume();;){var u=this.fetch().text;if(!ac[u])break;if(nc.test(u)!==l)break;c.unshift(new ma(ac[u])),this.consume()}var d=this.subparse(c);l?r={type:"ordgroup",mode:"math",body:d}:t={type:"ordgroup",mode:"math",body:d}}}return t||r?{type:"supsub",mode:this.mode,base:n,sup:t,sub:r}:n}parseFunction(e,t){var r=this.fetch(),n=r.text,a=Bl[n];if(!a)return null;if(this.consume(),t&&"atom"!==t&&!a.allowedInArgument)throw new pa("Got function '"+n+"' with no arguments"+(t?" as "+t:""),r);if("text"===this.mode&&!a.allowedInText)throw new pa("Can't use function '"+n+"' in text mode",r);if("math"===this.mode&&!1===a.allowedInMath)throw new pa("Can't use function '"+n+"' in math mode",r);var{args:i,optArgs:o}=this.parseArguments(n,a);return this.callFunction(n,i,o,r,e)}callFunction(e,t,r,n,a){var i={funcName:e,parser:this,token:n,breakOnTokenText:a},o=Bl[e];if(o&&o.handler)return o.handler(i,t,r);throw new pa("No function handler for "+e)}parseArguments(e,t){var r=t.numArgs+t.numOptionalArgs;if(0===r)return{args:[],optArgs:[]};for(var n=[],a=[],i=0;i<r;i++){var o=t.argTypes&&t.argTypes[i],s=i<t.numOptionalArgs;(t.primitive&&null==o||"sqrt"===t.type&&1===i&&null==a[0])&&(o="primitive");var l=this.parseGroupOfType("argument to '"+e+"'",o,s);if(s)a.push(l);else{if(null==l)throw new pa("Null argument, please report this as a bug");n.push(l)}}return{args:n,optArgs:a}}parseGroupOfType(e,t,r){switch(t){case"color":return this.parseColorGroup(r);case"size":return this.parseSizeGroup(r);case"url":return this.parseUrlGroup(r);case"math":case"text":return this.parseArgumentGroup(r,t);case"hbox":var n=this.parseArgumentGroup(r,"text");return null!=n?{type:"styling",mode:n.mode,body:[n],style:"text"}:null;case"raw":var a=this.parseStringGroup("raw",r);return null!=a?{type:"raw",mode:"text",string:a.text}:null;case"primitive":if(r)throw new pa("A primitive argument cannot be optional");var i=this.parseGroup(e);if(null==i)throw new pa("Expected group as "+e,this.fetch());return i;case"original":case null:case void 0:return this.parseArgumentGroup(r);default:throw new pa("Unknown group type as "+e,this.fetch())}}consumeSpaces(){for(;" "===this.fetch().text;)this.consume()}parseStringGroup(e,t){var r=this.gullet.scanArgument(t);if(null==r)return null;for(var n,a="";"EOF"!==(n=this.fetch()).text;)a+=n.text,this.consume();return this.consume(),r.text=a,r}parseRegexGroup(e,t){for(var r,n=this.fetch(),a=n,i="";"EOF"!==(r=this.fetch()).text&&e.test(i+r.text);)i+=(a=r).text,this.consume();if(""===i)throw new pa("Invalid "+t+": '"+n.text+"'",n);return n.range(a,i)}parseColorGroup(e){var t=this.parseStringGroup("color",e);if(null==t)return null;var r=/^(#[a-f0-9]{3,4}|#[a-f0-9]{6}|#[a-f0-9]{8}|[a-f0-9]{6}|[a-z]+)$/i.exec(t.text);if(!r)throw new pa("Invalid color: '"+t.text+"'",t);var n=r[0];return/^[0-9a-f]{6}$/i.test(n)&&(n="#"+n),{type:"color-token",mode:this.mode,color:n}}parseSizeGroup(e){var t,r=!1;if(this.gullet.consumeSpaces(),!(t=e||"{"===this.gullet.future().text?this.parseStringGroup("size",e):this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size")))return null;e||0!==t.text.length||(t.text="0pt",r=!0);var n=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(t.text);if(!n)throw new pa("Invalid size: '"+t.text+"'",t);var a={number:+(n[1]+n[2]),unit:n[3]};if(!Ya(a))throw new pa("Invalid unit: '"+a.unit+"'",t);return{type:"size",mode:this.mode,value:a,isBlank:r}}parseUrlGroup(e){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var t=this.parseStringGroup("url",e);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),null==t)return null;var r=t.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:r}}parseArgumentGroup(e,t){var r=this.gullet.scanArgument(e);if(null==r)return null;var n=this.mode;t&&this.switchMode(t),this.gullet.beginGroup();var a=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var i={type:"ordgroup",mode:this.mode,loc:r.loc,body:a};return t&&this.switchMode(n),i}parseGroup(e,t){var r,n=this.fetch(),a=n.text;if("{"===a||"\\begingroup"===a){this.consume();var i="{"===a?"}":"\\endgroup";this.gullet.beginGroup();var o=this.parseExpression(!1,i),s=this.fetch();this.expect(i),this.gullet.endGroup(),r={type:"ordgroup",mode:this.mode,loc:ha.range(n,s),body:o,semisimple:"\\begingroup"===a||void 0}}else if(null==(r=this.parseFunction(t,e)||this.parseSymbol())&&"\\"===a[0]&&!tc.hasOwnProperty(a)){if(this.settings.throwOnError)throw new pa("Undefined control sequence: "+a,n);r=this.formatUnsupportedCmd(a),this.consume()}return r}formLigatures(e){for(var t=e.length-1,r=0;r<t;++r){var n=e[r],a=n.text;"-"===a&&"-"===e[r+1].text&&(r+1<t&&"-"===e[r+2].text?(e.splice(r,3,{type:"textord",mode:"text",loc:ha.range(n,e[r+2]),text:"---"}),t-=2):(e.splice(r,2,{type:"textord",mode:"text",loc:ha.range(n,e[r+1]),text:"--"}),t-=1)),"'"!==a&&"`"!==a||e[r+1].text!==a||(e.splice(r,2,{type:"textord",mode:"text",loc:ha.range(n,e[r+1]),text:a+a}),t-=1)}}parseSymbol(){var e=this.fetch(),t=e.text;if(/^\\verb[^a-zA-Z]/.test(t)){this.consume();var r=t.slice(5),n="*"===r.charAt(0);if(n&&(r=r.slice(1)),r.length<2||r.charAt(0)!==r.slice(-1))throw new pa("\\verb assertion failed --\n                    please report what input caused this bug");return{type:"verb",mode:"text",body:r=r.slice(1,-1),star:n}}oc.hasOwnProperty(t[0])&&!pi[this.mode][t[0]]&&(this.settings.strict&&"math"===this.mode&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+t[0]+'" used in math mode',e),t=oc[t[0]]+t.slice(1));var a,i=Wl.exec(t);if(i&&("i"===(t=t.substring(0,i.index))?t="\u0131":"j"===t&&(t="\u0237")),pi[this.mode][t]){this.settings.strict&&"math"===this.mode&&Vi.indexOf(t)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+t[0]+'" used in math mode',e);var o,s=pi[this.mode][t].group,l=ha.range(e);if(hi.hasOwnProperty(s)){var c=s;o={type:"atom",mode:this.mode,family:c,loc:l,text:t}}else o={type:s,mode:this.mode,loc:l,text:t};a=o}else{if(!(t.charCodeAt(0)>=128))return null;this.settings.strict&&(Ma(t.charCodeAt(0))?"math"===this.mode&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+t[0]+'" used in math mode',e):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+t[0]+'" ('+t.charCodeAt(0)+")",e)),a={type:"textord",mode:"text",loc:ha.range(e),text:t}}if(this.consume(),i)for(var u=0;u<i[0].length;u++){var d=i[0][u];if(!ic[d])throw new pa("Unknown accent ' "+d+"'",e);var h=ic[d][this.mode]||ic[d].text;if(!h)throw new pa("Accent "+d+" unsupported in "+this.mode+" mode",e);a={type:"accent",mode:this.mode,loc:ha.range(e),label:h,isStretchy:!1,isShifty:!0,base:a}}return a}}sc.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var lc=function(e,t){if(!("string"===typeof e||e instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var r=new sc(e,t);delete r.gullet.macros.current["\\df@tag"];var n=r.parse();if(delete r.gullet.macros.current["\\current@color"],delete r.gullet.macros.current["\\color"],r.gullet.macros.get("\\df@tag")){if(!t.displayMode)throw new pa("\\tag works only in display equations");n=[{type:"tag",mode:"text",body:n,tag:r.subparse([new ma("\\df@tag")])}]}return n};"undefined"!==typeof document&&"CSS1Compat"!==document.compatMode&&("undefined"!==typeof console&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."));var cc=function(e,t,r){if(r.throwOnError||!(e instanceof pa))throw e;var n=so.makeSpan(["katex-error"],[new si(t)]);return n.setAttribute("title",e.toString()),n.setAttribute("style","color:"+r.errorColor),n},uc=function(e,t){var r=new ka(t);try{return function(e,t,r){var n,a=Go(r);if("mathml"===r.output)return Vo(e,t,a,r.displayMode,!0);if("html"===r.output){var i=Mo(e,a);n=so.makeSpan(["katex"],[i])}else{var o=Vo(e,t,a,r.displayMode,!1),s=Mo(e,a);n=so.makeSpan(["katex"],[o,s])}return Qo(n,r)}(lc(e,r),e,r)}catch(n){return cc(n,e,r)}},dc=function(e,t){return uc(e,t).toMarkup()};const hc=e=>{let{text:t,block:n=!1,inline:a=!1}=e;if(!t)return null;if("string"!==typeof t)return console.error("LaTeXRenderer: text prop must be a string, received:",typeof t,t),(0,ra.jsx)("span",{className:"text-red-600",children:"Error: Invalid content type"});return(0,ra.jsx)("div",{className:n?"latex-block":"latex-inline",children:(e=>{if(!e||"string"!==typeof e)return"";return e.split(/(\$\$[\s\S]*?\$\$)/g).map((e,t)=>{if(e.startsWith("$$")&&e.endsWith("$$")){const r=e.slice(2,-2).trim();try{const e=dc(r,{displayMode:!0,throwOnError:!1,trust:!0});return(0,ra.jsx)("div",{dangerouslySetInnerHTML:{__html:e},className:"my-2"},t)}catch(OX){return(0,ra.jsx)("span",{className:"text-red-600",children:e},t)}}return e.split(/(\$[^$]+?\$)/g).map((e,n)=>{if(e.startsWith("$")&&e.endsWith("$")&&e.length>2){const r=e.slice(1,-1);try{const e=dc(r,{displayMode:!1,throwOnError:!1,trust:!0});return(0,ra.jsx)("span",{dangerouslySetInnerHTML:{__html:e}},"".concat(t,"-").concat(n))}catch(OX){return(0,ra.jsx)("span",{className:"text-red-600",children:e},"".concat(t,"-").concat(n))}}return e.split("\n").map((e,a,i)=>(0,ra.jsxs)(r.Fragment,{children:[e,a<i.length-1&&(0,ra.jsx)("br",{})]},"".concat(t,"-").concat(n,"-").concat(a)))})})})(t)})},mc=e=>{let{questionId:t,initialValue:n="",onChange:a,readOnly:i=!1}=e;const[o,s]=(0,r.useState)(!1),[l,c]=(0,r.useState)(n),[u,d]=(0,r.useState)(!1),[h,m]=(0,r.useState)(null),p=r.useRef(null);(0,r.useEffect)(()=>{const e=setTimeout(()=>{l!==n&&(a(l),m((new Date).toLocaleTimeString()))},2e3);return()=>clearTimeout(e)},[l,a,n]);const f=e=>{c(l+({step:"\n\n**Step X:**\n",given:"\n\n**Given:**\n",working:"\n\n**Working:**\n",answer:"\n\n**Answer:**\n"}[e]||"\n\n"))};return i?(0,ra.jsxs)("div",{className:"bg-gray-50 border border-gray-300 rounded-lg p-4",children:[(0,ra.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Working Shown:"}),(0,ra.jsx)("div",{className:"prose prose-sm max-w-none",children:(0,ra.jsx)(hc,{text:l||"No working shown"})})]}):(0,ra.jsxs)("div",{className:"border border-gray-300 rounded-lg overflow-hidden",children:[(0,ra.jsxs)("button",{onClick:()=>s(!o),className:"w-full flex items-center justify-between px-4 py-3 bg-gray-50 hover:bg-gray-100 transition-colors",children:[(0,ra.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ra.jsx)("span",{className:"text-lg",children:"\ud83d\udcdd"}),(0,ra.jsx)("span",{className:"font-medium text-gray-900",children:"Show Your Working"}),l&&!o&&(0,ra.jsxs)("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded",children:[l.length," characters"]})]}),(0,ra.jsxs)("div",{className:"flex items-center gap-2",children:[h&&o&&(0,ra.jsxs)("span",{className:"text-xs text-green-600",children:["\u2713 Saved ",h]}),(0,ra.jsx)("svg",{className:"w-5 h-5 text-gray-500 transition-transform ".concat(o?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]})]}),o&&(0,ra.jsxs)("div",{className:"p-4 bg-white border-t",children:[(0,ra.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:(0,ra.jsxs)("p",{className:"text-sm text-blue-900",children:[(0,ra.jsx)("strong",{children:"\ud83d\udca1 Tip:"})," Show your working to get partial credit even if your final answer isn't perfect! You can use math symbols and LaTeX formatting here too."]})}),(0,ra.jsxs)("div",{className:"flex gap-2 mb-3 flex-wrap",children:[(0,ra.jsx)("button",{onClick:()=>f("step"),className:"text-xs px-3 py-1 bg-gray-100 hover:bg-gray-200 rounded border border-gray-300",children:"+ Step"}),(0,ra.jsx)("button",{onClick:()=>f("given"),className:"text-xs px-3 py-1 bg-gray-100 hover:bg-gray-200 rounded border border-gray-300",children:"+ Given"}),(0,ra.jsx)("button",{onClick:()=>f("working"),className:"text-xs px-3 py-1 bg-gray-100 hover:bg-gray-200 rounded border border-gray-300",children:"+ Working"}),(0,ra.jsx)("button",{onClick:()=>f("answer"),className:"text-xs px-3 py-1 bg-gray-100 hover:bg-gray-200 rounded border border-gray-300",children:"+ Answer"}),(0,ra.jsx)("div",{className:"flex-1"}),(0,ra.jsx)("button",{onClick:()=>d(!u),className:"text-xs px-3 py-1 rounded border ".concat(u?"bg-blue-100 border-blue-300 text-blue-700":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"),children:"\ud83d\udd22 Symbols"}),l&&(0,ra.jsx)("button",{onClick:()=>{window.confirm("Clear all working?")&&(c(""),a(""))},className:"text-xs px-3 py-1 bg-white hover:bg-red-50 rounded border border-gray-300 text-red-600",children:"Clear"})]}),(0,ra.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Type your working:"}),(0,ra.jsx)("textarea",{ref:p,value:l,onChange:e=>c(e.target.value),placeholder:"Show your steps, formulas, and calculations here... Example:\nGiven: x + 5 = 15\nWorking: x = 15 - 5\nAnswer: x = 10 Use $ for maths: $x^2 + 3x - 10 = 0$",className:"w-full h-64 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none font-mono text-sm","data-testid":"working-input-".concat(t)})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Preview (how it will appear):"}),(0,ra.jsx)("div",{className:"h-64 px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 overflow-y-auto",children:l?(0,ra.jsx)(hc,{text:l}):(0,ra.jsx)("p",{className:"text-gray-400 text-sm",children:"Your working preview will appear here..."})})]})]}),u&&(0,ra.jsx)("div",{className:"mt-4 animate-slideDown",children:(0,ra.jsx)(ua,{onInsert:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const r=p.current;if(!r)return;const n=r.selectionStart,a=r.selectionEnd,i=l.substring(0,n),o=l.substring(a);c(i+e+o),setTimeout(()=>{const a=n+e.length+(t||0);r.focus(),r.setSelectionRange(a,a)},0)},onClose:()=>d(!1)})}),(0,ra.jsxs)("div",{className:"mt-4 text-xs text-gray-600 bg-gray-50 p-3 rounded",children:[(0,ra.jsx)("p",{className:"font-medium mb-1",children:"Marking Guide:"}),(0,ra.jsxs)("ul",{className:"list-disc list-inside space-y-1",children:[(0,ra.jsx)("li",{children:"Show each step clearly - you can earn marks even if your final answer is wrong"}),(0,ra.jsx)("li",{children:"Write formulas before substituting numbers"}),(0,ra.jsx)("li",{children:"Use the section buttons to organize your work"}),(0,ra.jsx)("li",{children:"Check your units and significant figures"}),(0,ra.jsx)("li",{children:"Use math symbols ($x^2$) for better clarity"})]})]})]})]})},pc=e=>{let{questionId:t,answerType:n="text",value:a="",onChange:i,calculatorAllowed:o=!1,scientificCalculatorAllowed:s=!1,placeholder:l="Type your answer here...",showWorkingValue:c="",onShowWorkingChange:u=null,enableScratchpad:d=!0}=e;const[h,m]=(0,r.useState)("text"),[p,f]=(0,r.useState)(!1),[g,v]=(0,r.useState)(!1),[y,b]=(0,r.useState)(0),x=(0,r.useRef)(null);(0,r.useEffect)(()=>{a&&a.includes("$")&&"text"!==n&&m("maths")},[a,n]);const w="maths"===n||"mixed"===n||"numeric"===n;return(0,ra.jsxs)("div",{className:"space-y-3",children:[(0,ra.jsxs)("div",{className:"flex items-center justify-between gap-2 flex-wrap",children:[(0,ra.jsxs)("div",{className:"flex items-center gap-2",children:[w&&(0,ra.jsxs)("div",{className:"flex items-center gap-1 bg-gray-100 rounded-lg p-1",children:[(0,ra.jsx)("button",{onClick:()=>m("text"),className:"px-3 py-1 text-sm font-medium rounded ".concat("text"===h?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"),children:"Text"}),(0,ra.jsx)("button",{onClick:()=>m("maths"),className:"px-3 py-1 text-sm font-medium rounded ".concat("maths"===h?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"),children:"Maths"})]}),(0,ra.jsxs)("span",{className:"text-xs px-2 py-1 bg-blue-50 text-blue-700 rounded",children:["text"===n&&"\ud83d\udcdd Text","maths"===n&&"\ud83d\udd22 Maths","mixed"===n&&"\ud83d\udcd0 Mixed","numeric"===n&&"\ud83d\udd22 Numeric"]})]}),(0,ra.jsxs)("div",{className:"flex items-center gap-2",children:[w&&"maths"===h&&(0,ra.jsx)("button",{onClick:()=>f(!p),className:"px-3 py-1 text-sm font-medium rounded border ".concat(p?"bg-blue-100 border-blue-300 text-blue-700":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"),title:"Toggle maths keyboard",children:"\ud83d\udd22 Keyboard"}),o&&(0,ra.jsx)("button",{onClick:()=>v(!g),className:"px-3 py-1 text-sm font-medium rounded border ".concat(g?"bg-green-100 border-green-300 text-green-700":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"),title:"Toggle calculator",children:"\ud83e\uddee Calculator"}),a&&(0,ra.jsx)("button",{onClick:()=>{window.confirm("Clear your answer?")&&i("")},className:"px-3 py-1 text-sm font-medium rounded border bg-white border-gray-300 text-red-600 hover:bg-red-50",title:"Clear answer",children:"Clear"})]})]}),(0,ra.jsx)("div",{className:"border-2 border-gray-300 rounded-lg focus-within:border-blue-500 transition-colors",children:(0,ra.jsx)("textarea",{ref:x,value:a,onChange:e=>{const t=e.target.value;i(t),b(e.target.selectionStart)},placeholder:"maths"===h?"Type your answer. Use $ for maths symbols (e.g., $x^2$)":l,className:"w-full px-4 py-3 rounded-lg resize-none focus:outline-none min-h-[120px] font-mono","data-testid":"answer-input-".concat(t)})}),w&&"maths"===h&&a&&(0,ra.jsxs)("div",{className:"border border-blue-200 bg-blue-50 rounded-lg p-4",children:[(0,ra.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,ra.jsx)("p",{className:"text-xs font-medium text-blue-900",children:"Preview:"}),(0,ra.jsx)("span",{className:"text-xs text-blue-700",children:"This is how your answer will appear"})]}),(0,ra.jsx)("div",{className:"bg-white p-3 rounded border border-blue-200 min-h-[60px]",children:(0,ra.jsx)(hc,{text:a})})]}),p&&w&&"maths"===h&&(0,ra.jsx)("div",{className:"animate-slideDown",children:(0,ra.jsx)(ua,{onInsert:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const r=x.current;if(!r)return;const n=r.selectionStart,o=r.selectionEnd,s=a.substring(0,n),l=a.substring(o);i(s+e+l),setTimeout(()=>{const a=n+e.length+(t||0);r.focus(),r.setSelectionRange(a,a)},0)},onClose:()=>f(!1)})}),g&&o&&(0,ra.jsx)("div",{className:"animate-slideDown",children:(0,ra.jsx)(da,{mode:s?"scientific":"basic",onClose:()=>v(!1)})}),w&&"maths"===h&&(0,ra.jsxs)("div",{className:"text-xs text-gray-600 bg-gray-50 p-3 rounded",children:[(0,ra.jsx)("p",{className:"font-medium mb-1",children:"Quick tips:"}),(0,ra.jsxs)("ul",{className:"list-disc list-inside space-y-1",children:[(0,ra.jsxs)("li",{children:["Use $ for inline maths: ",(0,ra.jsx)("code",{className:"bg-white px-1 rounded",children:"$x^2$"})," displays as x\xb2"]}),(0,ra.jsx)("li",{children:"Use the keyboard below for symbols and fractions"}),(0,ra.jsx)("li",{children:"Your answer will be marked as shown in the preview"}),o&&(0,ra.jsx)("li",{children:"Use the calculator for calculations, but show your working!"})]})]}),d&&u&&(0,ra.jsx)("div",{className:"mt-4",children:(0,ra.jsx)(mc,{questionId:t,initialValue:c,onChange:u})})]})},fc=e=>{let{isOpen:t,onClose:n}=e;const[a,i]=(0,r.useState)("algebra"),[o,s]=(0,r.useState)(""),[l,c]=(0,r.useState)([]),u={algebra:[{name:"Quadratic Formula",formula:"x = \\frac{-b \\pm \\sqrt{b^2-4ac}}{2a}",description:"Solves ax\xb2 + bx + c = 0"},{name:"Difference of Squares",formula:"a^2 - b^2 = (a+b)(a-b)",description:"Factoring pattern"},{name:"Perfect Square",formula:"(a \\pm b)^2 = a^2 \\pm 2ab + b^2",description:"Expansion formula"},{name:"Sum of Cubes",formula:"a^3 + b^3 = (a+b)(a^2-ab+b^2)",description:"Factoring cubes"},{name:"Difference of Cubes",formula:"a^3 - b^3 = (a-b)(a^2+ab+b^2)",description:"Factoring cubes"},{name:"Binomial Theorem",formula:"(a+b)^n = \\sum_{k=0}^{n} \\binom{n}{k} a^{n-k}b^k",description:"Expansion of (a+b)\u207f"}],geometry:[{name:"Area of Circle",formula:"A = \\pi r^2",description:"r = radius"},{name:"Circumference",formula:"C = 2\\pi r",description:"Circle perimeter"},{name:"Area of Triangle",formula:"A = \\frac{1}{2}bh",description:"b = base, h = height"},{name:"Pythagorean Theorem",formula:"a^2 + b^2 = c^2",description:"Right triangle"},{name:"Area of Trapezoid",formula:"A = \\frac{1}{2}(b_1 + b_2)h",description:"Parallel sides b\u2081, b\u2082"},{name:"Volume of Sphere",formula:"V = \\frac{4}{3}\\pi r^3",description:"Sphere volume"},{name:"Surface Area of Sphere",formula:"SA = 4\\pi r^2",description:"Sphere surface"},{name:"Volume of Cylinder",formula:"V = \\pi r^2 h",description:"Cylinder volume"}],trigonometry:[{name:"Sine Rule",formula:"\\frac{a}{\\sin A} = \\frac{b}{\\sin B} = \\frac{c}{\\sin C}",description:"For any triangle"},{name:"Cosine Rule",formula:"c^2 = a^2 + b^2 - 2ab\\cos C",description:"For any triangle"},{name:"Area of Triangle",formula:"A = \\frac{1}{2}ab\\sin C",description:"Using two sides and angle"},{name:"Pythagorean Identity",formula:"\\sin^2\\theta + \\cos^2\\theta = 1",description:"Fundamental identity"},{name:"Tan Identity",formula:"\\tan\\theta = \\frac{\\sin\\theta}{\\cos\\theta}",description:"Tangent definition"},{name:"Double Angle (Sin)",formula:"\\sin(2\\theta) = 2\\sin\\theta\\cos\\theta",description:"Double angle formula"},{name:"Double Angle (Cos)",formula:"\\cos(2\\theta) = \\cos^2\\theta - \\sin^2\\theta",description:"Double angle formula"}],calculus:[{name:"Power Rule",formula:"\\frac{d}{dx}(x^n) = nx^{n-1}",description:"Differentiation"},{name:"Product Rule",formula:"\\frac{d}{dx}(uv) = u\\frac{dv}{dx} + v\\frac{du}{dx}",description:"Differentiation"},{name:"Quotient Rule",formula:"\\frac{d}{dx}\\left(\\frac{u}{v}\\right) = \\frac{v\\frac{du}{dx} - u\\frac{dv}{dx}}{v^2}",description:"Differentiation"},{name:"Chain Rule",formula:"\\frac{dy}{dx} = \\frac{dy}{du} \\cdot \\frac{du}{dx}",description:"Composite functions"},{name:"Integration Power Rule",formula:"\\int x^n dx = \\frac{x^{n+1}}{n+1} + C",description:"n \u2260 -1"},{name:"Integration by Parts",formula:"\\int u dv = uv - \\int v du",description:"Integration technique"}],physics:[{name:"Force",formula:"F = ma",description:"Newton's 2nd Law"},{name:"Kinetic Energy",formula:"KE = \\frac{1}{2}mv^2",description:"Energy of motion"},{name:"Potential Energy",formula:"PE = mgh",description:"Gravitational potential"},{name:"Power",formula:"P = \\frac{W}{t} = Fv",description:"Rate of work"},{name:"Momentum",formula:"p = mv",description:"Linear momentum"},{name:"Ohm's Law",formula:"V = IR",description:"Voltage, current, resistance"},{name:"Wave Speed",formula:"v = f\\lambda",description:"Frequency \xd7 wavelength"},{name:"Density",formula:"\\rho = \\frac{m}{V}",description:"Mass per unit volume"}]},d={algebra:"\ud83d\udcd0 Algebra",geometry:"\ud83d\udccf Geometry",trigonometry:"\ud83d\udcca Trigonometry",calculus:"\u222b Calculus",physics:"\u26a1 Physics"},h=(e,t)=>l.includes("".concat(e,"-").concat(t)),m=o?Object.entries(u).reduce((e,t)=>{let[r,n]=t;const a=n.filter(e=>e.name.toLowerCase().includes(o.toLowerCase())||e.description.toLowerCase().includes(o.toLowerCase()));return a.length>0&&(e[r]=a),e},{}):{[a]:u[a]};return t?(0,ra.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,ra.jsxs)("div",{className:"bg-white rounded-lg shadow-2xl max-w-4xl w-full max-h-[90vh] flex flex-col",children:[(0,ra.jsxs)("div",{className:"p-4 border-b flex justify-between items-center bg-gradient-to-r from-blue-500 to-purple-600",children:[(0,ra.jsx)("h2",{className:"text-xl font-bold text-white",children:"\ud83d\udcda Formula Sheet"}),(0,ra.jsx)("button",{onClick:n,className:"text-white hover:bg-white hover:bg-opacity-20 rounded-full p-2 transition-colors",children:(0,ra.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),(0,ra.jsx)("div",{className:"p-4 border-b bg-gray-50",children:(0,ra.jsxs)("div",{className:"relative",children:[(0,ra.jsx)("input",{type:"text",placeholder:"Search formulas...",value:o,onChange:e=>s(e.target.value),className:"w-full px-4 py-2 pl-10 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),(0,ra.jsx)("svg",{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})}),!o&&(0,ra.jsx)("div",{className:"flex border-b overflow-x-auto bg-gray-50",children:Object.entries(d).map(e=>{let[t,r]=e;return(0,ra.jsx)("button",{onClick:()=>i(t),className:"px-4 py-3 font-medium whitespace-nowrap transition-colors ".concat(a===t?"bg-white text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),children:r},t)})}),(0,ra.jsx)("div",{className:"flex-1 overflow-y-auto p-4",children:Object.entries(m).map(e=>{let[t,r]=e;return(0,ra.jsxs)("div",{className:"mb-6",children:[o&&(0,ra.jsx)("h3",{className:"text-lg font-semibold mb-3 text-gray-700",children:d[t]}),(0,ra.jsx)("div",{className:"space-y-3",children:r.map((e,r)=>(0,ra.jsxs)("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow ".concat(h(t,r)?"bg-yellow-50 border-yellow-300":"bg-white"),children:[(0,ra.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,ra.jsx)("h4",{className:"font-semibold text-gray-900",children:e.name}),(0,ra.jsx)("button",{onClick:()=>((e,t)=>{const r="".concat(e,"-").concat(t);l.includes(r)?c(l.filter(e=>e!==r)):c([...l,r])})(t,r),className:"text-xl transition-transform hover:scale-110 ".concat(h(t,r)?"text-yellow-500":"text-gray-300 hover:text-yellow-400"),title:h(t,r)?"Unpin":"Pin formula",children:"\ud83d\udccc"})]}),(0,ra.jsx)("div",{className:"bg-gray-50 p-3 rounded mb-2 overflow-x-auto",children:(0,ra.jsx)(hc,{latex:e.formula})}),(0,ra.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]},r))})]},t)})}),(0,ra.jsx)("div",{className:"p-4 border-t bg-gray-50 text-center",children:(0,ra.jsx)("p",{className:"text-sm text-gray-600",children:"\ud83d\udca1 Tip: Pin frequently used formulas with \ud83d\udccc for quick access"})})]})}):null};var gc=__webpack_require__(2419);const vc=e=>{let{onSubmit:t,maxSteps:n=10}=e;const[a,i]=(0,r.useState)([{id:1,description:"",calculation:"",explanation:"",isCorrect:null}]),[o,s]=(0,r.useState)(0),[l,c]=(0,r.useState)(!1),[d,h]=(0,r.useState)(null),[m,p]=(0,r.useState)(!0),f=(e,t,r)=>{const n=[...a];n[e][t]=r,i(n)},g=e=>!0===e.isCorrect?"\u2705":!1===e.isCorrect?"\u274c":"\ud83d\udcdd";return(0,ra.jsxs)("div",{className:"space-y-4",children:[(0,ra.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ra.jsx)("h3",{className:"text-lg font-semibold",children:"\ud83d\udccb Step-by-Step Solution"}),(0,ra.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ra.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,ra.jsx)("input",{type:"checkbox",checked:m,onChange:e=>p(e.target.checked),className:"w-4 h-4"}),(0,ra.jsx)("span",{children:"Show Preview"})]}),(0,ra.jsx)("button",{onClick:()=>{a.length<n&&(i([...a,{id:a.length+1,description:"",calculation:"",explanation:"",isCorrect:null}]),s(a.length))},disabled:a.length>=n,className:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-sm",children:"+ Add Step"})]})]}),(0,ra.jsx)("div",{className:"flex gap-2 overflow-x-auto pb-2",children:a.map((e,t)=>(0,ra.jsxs)("button",{onClick:()=>s(t),className:"px-4 py-2 rounded-lg font-medium whitespace-nowrap transition-colors ".concat(o===t?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[g(e)," Step ",e.id]},e.id))}),(0,ra.jsxs)("div",{className:"border-2 rounded-lg p-4 ".concat((e=>!0===e.isCorrect?"border-green-300 bg-green-50":!1===e.isCorrect?"border-red-300 bg-red-50":"border-gray-300 bg-white")(a[o])),children:[(0,ra.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,ra.jsxs)("h4",{className:"font-semibold text-gray-900",children:[g(a[o])," Step ",a[o].id]}),a.length>1&&(0,ra.jsx)("button",{onClick:()=>(e=>{if(a.length>1){const t=a.filter((t,r)=>r!==e),r=t.map((e,t)=>u(u({},e),{},{id:t+1}));i(r),o>=t.length&&s(t.length-1)}})(o),className:"text-red-600 hover:text-red-700 text-sm font-medium",children:"Remove"})]}),(0,ra.jsxs)("div",{className:"mb-3",children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"What are you doing in this step?"}),(0,ra.jsx)("input",{type:"text",value:a[o].description,onChange:e=>f(o,"description",e.target.value),placeholder:"e.g., Expand brackets, Collect like terms, Solve for x",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,ra.jsxs)("div",{className:"mb-3",children:[(0,ra.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Your calculation"}),(0,ra.jsx)("button",{onClick:()=>(h({stepIndex:o,field:"calculation"}),void c(!0)),className:"text-xs text-blue-600 hover:text-blue-700 font-medium",children:"\ud83d\udd22 Math Keyboard"})]}),(0,ra.jsx)("textarea",{value:a[o].calculation,onChange:e=>f(o,"calculation",e.target.value),placeholder:"Enter your mathematical work here (use $ for LaTeX, e.g., $x^2 + 2x + 1$)",rows:3,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 font-mono text-sm"})]}),m&&a[o].calculation&&(0,ra.jsxs)("div",{className:"mb-3 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[(0,ra.jsx)("p",{className:"text-xs font-medium text-blue-700 mb-1",children:"Preview:"}),(0,ra.jsx)("div",{className:"bg-white p-2 rounded",children:(0,ra.jsx)(hc,{latex:a[o].calculation})})]}),(0,ra.jsxs)("div",{className:"mb-3",children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Explain your working (optional)"}),(0,ra.jsx)("textarea",{value:a[o].explanation,onChange:e=>f(o,"explanation",e.target.value),placeholder:"Explain why you did this step...",rows:2,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),null!==a[o].isCorrect&&(0,ra.jsxs)("div",{className:"p-3 rounded-lg ".concat(a[o].isCorrect?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:[(0,ra.jsx)("p",{className:"font-medium",children:a[o].isCorrect?"\u2705 This step is correct!":"\u274c This step has an error"}),a[o].feedback&&(0,ra.jsx)("p",{className:"text-sm mt-1",children:a[o].feedback})]})]}),(0,ra.jsxs)("div",{className:"flex gap-2",children:[(0,ra.jsx)("button",{onClick:()=>{const e=[...a];e[o].description="Given",i(e)},className:"px-3 py-1 bg-gray-100 text-gray-700 rounded hover:bg-gray-200 text-sm",children:"+ Given"}),(0,ra.jsx)("button",{onClick:()=>{const e=[...a];e[o].description="Substitute values",i(e)},className:"px-3 py-1 bg-gray-100 text-gray-700 rounded hover:bg-gray-200 text-sm",children:"+ Substitute"}),(0,ra.jsx)("button",{onClick:()=>{const e=[...a];e[o].description="Simplify",i(e)},className:"px-3 py-1 bg-gray-100 text-gray-700 rounded hover:bg-gray-200 text-sm",children:"+ Simplify"}),(0,ra.jsx)("button",{onClick:()=>{const e=[...a];e[o].description="Final answer",i(e)},className:"px-3 py-1 bg-gray-100 text-gray-700 rounded hover:bg-gray-200 text-sm",children:"+ Final Answer"})]}),(0,ra.jsxs)("div",{className:"border rounded-lg p-4 bg-gray-50",children:[(0,ra.jsx)("h4",{className:"font-semibold mb-2",children:"Solution Summary"}),(0,ra.jsx)("div",{className:"space-y-2 text-sm",children:a.map((e,t)=>(0,ra.jsxs)("div",{className:"flex items-start gap-2",children:[(0,ra.jsxs)("span",{className:"font-medium text-gray-600",children:["Step ",e.id,":"]}),(0,ra.jsx)("span",{className:"text-gray-700",children:e.description||"(No description)"})]},e.id))})]}),(0,ra.jsx)("button",{onClick:()=>{const e=a.map(e=>({stepNumber:e.id,description:e.description,calculation:e.calculation,explanation:e.explanation}));t(e)},className:"w-full px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium",children:"Submit Solution for Checking"}),l&&(0,ra.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,ra.jsx)("div",{className:"bg-white rounded-lg shadow-2xl max-w-2xl w-full",children:(0,ra.jsx)(ua,{onInsert:(e,t)=>{if(d){const{stepIndex:t,field:r}=d,n=a[t][r];f(t,r,n+e)}},onClose:()=>c(!1)})})})]})},yc={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_BACKEND_URL+"/api",bc=()=>{const{attemptId:e}=Se(),t=je(),[n,a]=(0,r.useState)(null),[i,o]=(0,r.useState)(null),[s,l]=(0,r.useState)(null),[c,u]=(0,r.useState)(""),[d,h]=(0,r.useState)(""),[m,p]=(0,r.useState)(!0),[f,g]=(0,r.useState)(!1),[v,y]=(0,r.useState)(null),[b,x]=(0,r.useState)(!1),[w,k]=(0,r.useState)(null),[j,S]=(0,r.useState)(!1),[C,N]=(0,r.useState)(!0),[_,A]=(0,r.useState)(!0),[T,E]=(0,r.useState)(0),[O,P]=(0,r.useState)(!1),[I,M]=(0,r.useState)(""),[R,D]=(0,r.useState)(!1),[L,z]=(0,r.useState)(!1),[q,B]=(0,r.useState)(!1),[F,U]=(0,r.useState)(null),[H,W]=(0,r.useState)(!1),[K,V]=(0,r.useState)(null);(0,r.useEffect)(()=>{Q()},[e]),(0,r.useEffect)(()=>{(()=>{const e=!!(document.documentElement.requestFullscreen||document.documentElement.webkitRequestFullscreen||document.documentElement.msRequestFullscreen);try{if(window.self!==window.top)return A(!1),void N(!1)}catch(OX){return A(!1),void N(!1)}A(e),e||N(!1)})()},[]);const G=async()=>{try{const e=document.documentElement;e.requestFullscreen?await e.requestFullscreen():e.webkitRequestFullscreen?await e.webkitRequestFullscreen():e.msRequestFullscreen&&await e.msRequestFullscreen(),S(!0),N(!1)}catch(t){console.error("Fullscreen request failed:",t),A(!1),N(!1),ta.post("".concat(yc,"/public/attempt/").concat(e,"/log-security-event"),{event_type:"fullscreen_not_supported"}).catch(e=>console.error("Failed to log security event:",e))}};(0,r.useEffect)(()=>{if(b||!_)return;const r=()=>{const r=!!(document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement),n=j;S(r),!n||r||b||R||(async()=>{const r=T+1;E(r),await ta.post("".concat(yc,"/public/attempt/").concat(e,"/log-security-event"),{event_type:"fullscreen_exit",exit_count:r}).catch(e=>console.error("Failed to log security event:",e)),r>=3?(D(!0),M("You have exited fullscreen 3 times. Your assessment will be automatically submitted."),P(!0),setTimeout(async()=>{try{await ta.post("".concat(yc,"/public/attempt/").concat(e,"/submit"),{answer_text:c,reason:"fullscreen_violation"}),t("/")}catch(r){console.error("Auto-submit failed:",r),t("/")}},3e3)):2===r?(M("Warning ".concat(r,"/3: This is your FINAL warning! Exiting fullscreen one more time will automatically submit your assessment and log you out.")),P(!0),N(!0)):(M("Warning ".concat(r,"/3: You have exited fullscreen mode. This has been logged. You have ").concat(3-r," warning(s) remaining before automatic submission.")),P(!0),N(!0))})()};return document.addEventListener("fullscreenchange",r),document.addEventListener("webkitfullscreenchange",r),document.addEventListener("msfullscreenchange",r),()=>{document.removeEventListener("fullscreenchange",r),document.removeEventListener("webkitfullscreenchange",r),document.removeEventListener("msfullscreenchange",r)}},[e,b]),(0,r.useEffect)(()=>{if(!e||b||!c)return;const t=setInterval(async()=>{try{(await ta.post("".concat(yc,"/public/attempt/").concat(e,"/autosave"),{answer_text:c})).data.success&&k((new Date).toLocaleTimeString())}catch(t){console.error("Autosave failed:",t)}},15e3);return()=>clearInterval(t)},[e,c,b]),(0,r.useEffect)(()=>{if(b)return;const t=()=>{document.hidden&&ta.post("".concat(yc,"/public/attempt/").concat(e,"/log-security-event"),{event_type:"tab_hidden"}).catch(e=>console.error("Failed to log security event:",e))},r=()=>{ta.post("".concat(yc,"/public/attempt/").concat(e,"/log-security-event"),{event_type:"window_blur"}).catch(e=>console.error("Failed to log security event:",e))};return document.addEventListener("visibilitychange",t),window.addEventListener("blur",r),()=>{document.removeEventListener("visibilitychange",t),window.removeEventListener("blur",r)}},[e,b]),(0,r.useEffect)(()=>{if(null===i||void 0===i||!i.duration_minutes||null===i||void 0===i||!i.started_at||b)return;const e=new Date(i.started_at),t=60*i.duration_minutes*1e3,r=e.getTime()+t,n=Date.now(),a=r-n;if(!(a>0))return void Y(!0);y(Math.floor(a/1e3));const o=setInterval(()=>{const e=Date.now(),t=r-e;t<=0?(clearInterval(o),Y(!0)):y(Math.floor(t/1e3))},1e3);return()=>clearInterval(o)},[i,b]);const Q=async()=>{try{const t=await ta.get("".concat(yc,"/public/attempt/").concat(e));a(t.data.attempt),o(t.data.assessment),l(t.data.question),"marked"===t.data.attempt.status&&x(!0),p(!1)}catch(t){console.error("Error loading attempt:",t),p(!1)}},Y=async function(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0]||!f){g(!0);try{const t={answer_text:c,show_working:d};F&&(t.graph_data={mode:F.mode,equation:F.equation,points:F.points,image:F.image}),K&&K.length>0&&(t.step_by_step=K,t.is_step_by_step=!0);const r=await ta.post("".concat(yc,"/public/attempt/").concat(e,"/submit"),t);a(r.data.attempt),x(!0)}catch(n){var t,r;alert((null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||"Failed to submit"),g(!1)}}};if(m)return(0,ra.jsx)("div",{className:"flex items-center justify-center min-h-screen","data-testid":"loading-attempt",children:"Loading..."});if(!n||!s)return(0,ra.jsx)("div",{className:"flex items-center justify-center min-h-screen","data-testid":"attempt-not-found",children:"Attempt not found"});if(b&&"marked"===n.status){return n.feedback_released||!1?(0,ra.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6",children:(0,ra.jsxs)("div",{className:"max-w-3xl mx-auto bg-white rounded-2xl shadow-xl p-8","data-testid":"feedback-container",children:[(0,ra.jsxs)("div",{className:"text-center mb-6",children:[(0,ra.jsx)("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,ra.jsx)("svg",{className:"w-10 h-10 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),(0,ra.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 mb-2","data-testid":"feedback-title",children:["Feedback for ",n.student_name]}),(0,ra.jsx)("p",{className:"text-gray-600",children:"Your answer has been marked"})]}),(0,ra.jsxs)("div",{className:"space-y-6",children:[(0,ra.jsxs)("div",{className:"bg-blue-50 p-6 rounded-lg",children:[(0,ra.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Your Score"}),(0,ra.jsxs)("p",{className:"text-4xl font-bold text-blue-600","data-testid":"feedback-score",children:[n.score,"/",s.max_marks]})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2","data-testid":"www-title",children:"What Went Well"}),(0,ra.jsx)("p",{className:"text-gray-700","data-testid":"www-content",children:n.www})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2","data-testid":"next-steps-title",children:"Next Steps"}),(0,ra.jsx)("p",{className:"text-gray-700","data-testid":"next-steps-content",children:n.next_steps})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2","data-testid":"overall-title",children:"Overall Feedback"}),(0,ra.jsx)("p",{className:"text-gray-700","data-testid":"overall-content",children:n.overall_feedback})]}),n.step_feedback&&n.step_feedback.step_feedback&&(0,ra.jsxs)("div",{className:"border-t pt-6",children:[(0,ra.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"\ud83d\udccb Step-by-Step Feedback"}),(0,ra.jsx)("div",{className:"space-y-3",children:n.step_feedback.step_feedback.map((e,t)=>(0,ra.jsx)("div",{className:"border-l-4 p-4 rounded ".concat(!0===e.isCorrect?"bg-green-50 border-green-500":!1===e.isCorrect?"bg-red-50 border-red-500":"bg-yellow-50 border-yellow-500"),children:(0,ra.jsxs)("div",{className:"flex items-start gap-2",children:[(0,ra.jsxs)("span",{className:"font-semibold text-gray-900",children:[!0===e.isCorrect?"\u2705":!1===e.isCorrect?"\u274c":"\u26a0\ufe0f","Step ",e.stepNumber,":"]}),(0,ra.jsxs)("div",{className:"flex-1",children:[(0,ra.jsx)("p",{className:"text-sm text-gray-700",children:e.feedback}),void 0!==e.marks&&(0,ra.jsxs)("p",{className:"text-xs text-gray-600 mt-1",children:["Marks: ",e.marks]})]})]})},t))})]}),n.pdf_url&&(0,ra.jsx)("div",{className:"pt-4",children:(0,ra.jsxs)("a",{href:"".concat(yc,"/public/attempt/").concat(e,"/download-pdf"),download:!0,className:"w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-blue-700 transition-colors flex items-center justify-center gap-2","data-testid":"download-pdf-btn",children:[(0,ra.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Download Feedback PDF"]})})]})]})}):(0,ra.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6",children:(0,ra.jsx)("div",{className:"max-w-3xl mx-auto bg-white rounded-2xl shadow-xl p-8","data-testid":"submission-confirmation",children:(0,ra.jsxs)("div",{className:"text-center",children:[(0,ra.jsx)("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,ra.jsx)("svg",{className:"w-10 h-10 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),(0,ra.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Submission Received!"}),(0,ra.jsxs)("p",{className:"text-lg text-gray-600 mb-6",children:["Thank you, ",n.student_name]}),(0,ra.jsxs)("div",{className:"bg-blue-50 p-6 rounded-lg",children:[(0,ra.jsx)("p",{className:"text-gray-700",children:"Your answer has been submitted successfully and is being reviewed by your teacher."}),(0,ra.jsx)("p",{className:"text-gray-700 mt-4",children:"Your teacher will review your work and release feedback when ready. Please check back later or wait for your teacher to share the results with you."})]})]})})})}return O?(0,ra.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50","data-testid":"warning-modal",children:(0,ra.jsxs)("div",{className:"bg-white rounded-2xl p-8 max-w-md mx-4 text-center",children:[(0,ra.jsx)("div",{className:"w-16 h-16 ".concat(R?"bg-red-100":"bg-yellow-100"," rounded-full flex items-center justify-center mx-auto mb-4"),children:(0,ra.jsx)("svg",{className:"w-8 h-8 ".concat(R?"text-red-600":"text-yellow-600"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,ra.jsx)("h2",{className:"text-2xl font-bold ".concat(R?"text-red-600":"text-yellow-600"," mb-2"),children:R?"Assessment Terminated":"Security Warning"}),(0,ra.jsx)("p",{className:"text-gray-700 mb-6",children:I}),!R&&(0,ra.jsx)("button",{onClick:()=>{P(!1),G()},className:"w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-blue-700 transition-colors","data-testid":"acknowledge-warning-btn",children:"I Understand - Return to Fullscreen"}),R&&(0,ra.jsx)("p",{className:"text-sm text-gray-500",children:"Redirecting in 3 seconds..."})]})}):C&&!b&&_?(0,ra.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50","data-testid":"fullscreen-prompt",children:(0,ra.jsxs)("div",{className:"bg-white rounded-2xl p-8 max-w-md mx-4 text-center",children:[(0,ra.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,ra.jsx)("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})}),(0,ra.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Fullscreen Required"}),(0,ra.jsx)("p",{className:"text-gray-600 mb-6",children:"This assessment must be taken in fullscreen mode to ensure exam integrity. Please click the button below to enter fullscreen."}),T>0&&(0,ra.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:(0,ra.jsxs)("p",{className:"text-sm text-red-800",children:[(0,ra.jsxs)("strong",{children:["Warnings: ",T,"/3"]})," - ",3-T," attempt(s) remaining before automatic submission."]})}),(0,ra.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:(0,ra.jsxs)("p",{className:"text-sm text-yellow-800",children:[(0,ra.jsx)("strong",{children:"Note:"})," Exiting fullscreen 3 times will automatically submit your assessment and log you out."]})}),(0,ra.jsx)("button",{onClick:G,className:"w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-blue-700 transition-colors","data-testid":"enter-fullscreen-btn",children:"Enter Fullscreen Mode"})]})}):(0,ra.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6",onCopy:e=>e.preventDefault(),onCut:e=>e.preventDefault(),onPaste:e=>e.preventDefault(),onContextMenu:e=>e.preventDefault(),onKeyDown:e=>{(e.ctrlKey||e.metaKey)&&["c","v","x","p"].includes(e.key.toLowerCase())&&e.preventDefault(),"Escape"===e.key&&e.preventDefault()},children:(0,ra.jsxs)("div",{className:"max-w-3xl mx-auto bg-white rounded-2xl shadow-xl p-8","data-testid":"attempt-container",children:[(0,ra.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,ra.jsxs)("div",{children:[(0,ra.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-1","data-testid":"attempt-title",children:s.subject}),(0,ra.jsxs)("p",{className:"text-gray-600 text-sm",children:["Marks: ",s.max_marks]})]}),null!==v&&(0,ra.jsx)("div",{className:"text-2xl font-bold ".concat(v<60?"text-red-600":"text-blue-600"),"data-testid":"timer",children:(e=>{const t=Math.floor(e/60),r=e%60;return"".concat(t,":").concat(r.toString().padStart(2,"0"))})(v)})]}),(0,ra.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg mb-6",children:[(0,ra.jsx)("p",{className:"font-medium text-gray-900 mb-2",children:"Question:"}),(0,ra.jsx)("div",{className:"text-gray-700 select-none","data-testid":"question-text",children:(0,ra.jsx)(hc,{text:s.question_text})})]}),(0,ra.jsxs)("div",{className:"mb-6 flex flex-wrap gap-2",children:[(0,ra.jsx)("button",{onClick:()=>z(!0),className:"px-4 py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors font-medium text-sm flex items-center gap-2",children:"\ud83d\udcda Formula Sheet"}),("maths"===s.answer_type||"mixed"===s.answer_type)&&(0,ra.jsxs)(ra.Fragment,{children:[(0,ra.jsxs)("button",{onClick:()=>B(!q),className:"px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors font-medium text-sm flex items-center gap-2",children:["\ud83d\udcca ",q?"Hide":"Show"," Graph Plotter"]}),(0,ra.jsxs)("button",{onClick:()=>W(!H),className:"px-4 py-2 rounded-lg transition-colors font-medium text-sm flex items-center gap-2 ".concat(H?"bg-green-600 text-white hover:bg-green-700":"bg-green-100 text-green-700 hover:bg-green-200"),children:["\ud83d\udccb ",H?"\u2713 Using":"Use"," Step-by-Step Mode"]})]})]}),q&&(0,ra.jsx)("div",{className:"mb-6",children:(0,ra.jsx)(gc.A,{onSave:e=>{U(e),B(!1),alert("Graph saved! It will be submitted with your answer.")},initialData:F})}),(0,ra.jsx)("div",{className:"mb-6",children:H?(0,ra.jsxs)(ra.Fragment,{children:[(0,ra.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Step-by-Step Solution"}),w&&(0,ra.jsxs)("span",{className:"text-xs text-green-600",children:["\u2713 Auto-saved at ",w]})]}),(0,ra.jsx)(vc,{onSubmit:e=>{V(e);const t=e.map((e,t)=>"Step ".concat(e.stepNumber,": ").concat(e.description,"\n").concat(e.calculation)).join("\n\n");u(t)},maxSteps:10})]}):(0,ra.jsxs)(ra.Fragment,{children:[(0,ra.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700","data-testid":"answer-label",children:"Your Answer"}),w&&(0,ra.jsxs)("span",{className:"text-xs text-green-600","data-testid":"autosave-status",children:["\u2713 Auto-saved at ",w]})]}),(0,ra.jsx)(pc,{questionId:s.id,answerType:s.answer_type||"text",value:c,onChange:u,calculatorAllowed:s.calculator_allowed||!1,scientificCalculatorAllowed:s.calculator_allowed||!1,placeholder:"Type your answer here...",showWorkingValue:d,onShowWorkingChange:h,enableScratchpad:!0})]})}),(0,ra.jsx)("button",{"data-testid":"submit-answer-btn",onClick:()=>Y(!1),className:"w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50",disabled:f||!c.trim(),children:f?"Submitting...":H?"Submit Step-by-Step Solution":"Submit Answer"}),L&&(0,ra.jsx)(fc,{isOpen:L,onClose:()=>z(!1)})]})})},xc={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_BACKEND_URL+"/api",wc=e=>{let{user:t}=e;const[n,a]=(0,r.useState)(null),[i,o]=(0,r.useState)(!0),s=je();(0,r.useEffect)(()=>{l()},[]);const l=async()=>{try{const e=await ta.get("".concat(xc,"/teacher/dashboard"));a(e.data),o(!1)}catch(e){console.error("Error loading stats:",e),o(!1)}};return i?(0,ra.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:"Loading..."}):(0,ra.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,ra.jsx)("nav",{className:"bg-white shadow-sm border-b",children:(0,ra.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-4 flex justify-between items-center",children:[(0,ra.jsxs)("div",{className:"flex items-center gap-6",children:[(0,ra.jsx)("h1",{className:"text-2xl font-bold text-blue-600","data-testid":"nav-title",children:"BlueAI"}),(0,ra.jsxs)("div",{className:"flex gap-4",children:[(0,ra.jsx)("button",{onClick:()=>s("/teacher/dashboard"),className:"text-gray-700 hover:text-blue-600","data-testid":"nav-dashboard",children:"Dashboard"}),(0,ra.jsx)("button",{onClick:()=>s("/teacher/questions"),className:"text-gray-700 hover:text-blue-600","data-testid":"nav-questions",children:"Questions"}),(0,ra.jsx)("button",{onClick:()=>s("/teacher/assessments"),className:"text-gray-700 hover:text-blue-600","data-testid":"nav-assessments",children:"Assessments"}),(0,ra.jsx)("button",{onClick:()=>s("/teacher/classes"),className:"text-gray-700 hover:text-blue-600","data-testid":"nav-classes",children:"Classes"}),(0,ra.jsx)("button",{onClick:()=>s("/teacher/analytics"),className:"text-gray-700 hover:text-blue-600","data-testid":"nav-analytics",children:"Analytics"}),"admin"===t.role&&(0,ra.jsx)("button",{onClick:()=>s("/admin/dashboard"),className:"text-gray-700 hover:text-blue-600","data-testid":"nav-admin",children:"Admin"})]})]}),(0,ra.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ra.jsx)("button",{onClick:()=>s("/teacher/profile"),className:"text-gray-700 hover:text-blue-600","data-testid":"nav-profile",children:(0,ra.jsxs)("span",{className:"flex items-center gap-1",children:[(0,ra.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),t.name]})}),(0,ra.jsx)("button",{onClick:async()=>{try{await ta.post("".concat(xc,"/auth/logout")),s("/login")}catch(e){console.error("Logout error:",e)}},className:"text-red-600 hover:text-red-700","data-testid":"logout-btn",children:"Logout"})]})]})}),(0,ra.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[(0,ra.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-8","data-testid":"dashboard-title",children:"Dashboard"}),(0,ra.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,ra.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow","data-testid":"stat-assessments",children:[(0,ra.jsx)("p",{className:"text-gray-600 text-sm mb-1",children:"Total Assessments"}),(0,ra.jsx)("p",{className:"text-3xl font-bold text-blue-600",children:(null===n||void 0===n?void 0:n.total_assessments)||0})]}),(0,ra.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow","data-testid":"stat-submissions",children:[(0,ra.jsx)("p",{className:"text-gray-600 text-sm mb-1",children:"Total Submissions"}),(0,ra.jsx)("p",{className:"text-3xl font-bold text-blue-600",children:(null===n||void 0===n?void 0:n.total_submissions)||0})]}),(0,ra.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow","data-testid":"stat-marked",children:[(0,ra.jsx)("p",{className:"text-gray-600 text-sm mb-1",children:"Marked"}),(0,ra.jsx)("p",{className:"text-3xl font-bold text-green-600",children:(null===n||void 0===n?void 0:n.marked)||0})]}),(0,ra.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow","data-testid":"stat-unmarked",children:[(0,ra.jsx)("p",{className:"text-gray-600 text-sm mb-1",children:"Unmarked"}),(0,ra.jsx)("p",{className:"text-3xl font-bold text-orange-600",children:(null===n||void 0===n?void 0:n.unmarked)||0})]})]}),(0,ra.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,ra.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Quick Actions"}),(0,ra.jsxs)("div",{className:"flex gap-4 flex-wrap",children:[(0,ra.jsx)("button",{onClick:()=>s("/teacher/questions"),className:"bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700","data-testid":"create-question-btn",children:"Create Question"}),(0,ra.jsx)("button",{onClick:()=>s("/teacher/assessments"),className:"bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700","data-testid":"create-assessment-btn",children:"Create Assessment"}),(0,ra.jsx)("button",{onClick:()=>s("/teacher/ocr-upload"),className:"bg-purple-600 text-white py-2 px-4 rounded-lg hover:bg-purple-700","data-testid":"ocr-upload-btn",children:"\ud83d\udcc4 Upload Script (OCR)"})]})]})]})]})},kc=e=>{let{onInsert:t,onClose:n}=e;const[a,i]=(0,r.useState)("basic");return(0,ra.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,ra.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[80vh] overflow-y-auto",children:[(0,ra.jsxs)("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center",children:[(0,ra.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Math Keyboard"}),(0,ra.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600","data-testid":"close-math-keyboard",children:(0,ra.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),(0,ra.jsx)("div",{className:"border-b px-6",children:(0,ra.jsx)("div",{className:"flex gap-2 overflow-x-auto",children:[{id:"basic",label:"Basic"},{id:"advanced",label:"Advanced"},{id:"comparison",label:"Comparison"},{id:"greek",label:"Greek"},{id:"vectors",label:"Vectors"},{id:"chemistry",label:"Chemistry"}].map(e=>(0,ra.jsx)("button",{onClick:()=>i(e.id),className:"px-4 py-2 text-sm font-medium border-b-2 whitespace-nowrap ".concat(a===e.id?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-blue-600"),children:e.label},e.id))})}),(0,ra.jsxs)("div",{className:"p-6",children:[(0,ra.jsx)("div",{className:"grid grid-cols-4 sm:grid-cols-6 gap-2",children:{basic:[{label:"x\xb2",latex:"^2"},{label:"x\u207f",latex:"^{}"},{label:"\u221a",latex:"\\sqrt{}"},{label:"\u221b",latex:"\\sqrt[3]{}"},{label:"\u207f\u221a",latex:"\\sqrt[n]{}"},{label:"/",latex:"\\frac{}{}"},{label:"\xd7",latex:"\\times"},{label:"\xf7",latex:"\\div"},{label:"\xb1",latex:"\\pm"},{label:"\u221e",latex:"\\infty"},{label:"\u03c0",latex:"\\pi"},{label:"\xb0",latex:"^\\circ"}],advanced:[{label:"sin",latex:"\\sin("},{label:"cos",latex:"\\cos("},{label:"tan",latex:"\\tan("},{label:"log",latex:"\\log("},{label:"ln",latex:"\\ln("},{label:"e",latex:"e"},{label:"\u2211",latex:"\\sum_{}^{}"},{label:"\u222b",latex:"\\int"},{label:"\u2202",latex:"\\partial"},{label:"lim",latex:"\\lim_{x \\to }"},{label:"d/dx",latex:"\\frac{d}{dx}"},{label:"\xd710\u207f",latex:"\\times 10^{}"}],comparison:[{label:"=",latex:"="},{label:"\u2260",latex:"\\neq"},{label:"<",latex:"<"},{label:">",latex:">"},{label:"\u2264",latex:"\\le"},{label:"\u2265",latex:"\\ge"},{label:"\u2248",latex:"\\approx"},{label:"\u2261",latex:"\\equiv"},{label:"\u221d",latex:"\\propto"},{label:"\u2192",latex:"\\rightarrow"},{label:"\u21cc",latex:"\\rightleftharpoons"},{label:"\u2234",latex:"\\therefore"}],greek:[{label:"\u03b1",latex:"\\alpha"},{label:"\u03b2",latex:"\\beta"},{label:"\u03b3",latex:"\\gamma"},{label:"\u03b4",latex:"\\delta"},{label:"\u03b5",latex:"\\epsilon"},{label:"\u03b8",latex:"\\theta"},{label:"\u03bb",latex:"\\lambda"},{label:"\u03bc",latex:"\\mu"},{label:"\u03c0",latex:"\\pi"},{label:"\u03c3",latex:"\\sigma"},{label:"\u03c4",latex:"\\tau"},{label:"\u03c6",latex:"\\phi"},{label:"\u03a9",latex:"\\Omega"},{label:"\u0394",latex:"\\Delta"},{label:"\u03a3",latex:"\\Sigma"},{label:"\u03a6",latex:"\\Phi"}],vectors:[{label:"v\u20d7",latex:"\\vec{v}"},{label:"(a b)",latex:"\\begin{pmatrix} a \\\\ b \\end{pmatrix}"},{label:"(a b c)",latex:"\\begin{pmatrix} a \\\\ b \\\\ c \\end{pmatrix}"},{label:"|v|",latex:"|\\vec{v}|"},{label:"i^",latex:"\\hat{i}"},{label:"j^",latex:"\\hat{j}"},{label:"k^",latex:"\\hat{k}"},{label:"\u22c5",latex:"\\cdot"},{label:"\xd7",latex:"\\times"}],chemistry:[{label:"H\u2082O",latex:"H_2O"},{label:"CO\u2082",latex:"CO_2"},{label:"H\u2082SO\u2084",latex:"H_2SO_4"},{label:"CH\u2084",latex:"CH_4"},{label:"subscript",latex:"_{}"},{label:"superscript",latex:"^{}"},{label:"\u21cc",latex:"\\rightleftharpoons"},{label:"\u2192",latex:"\\rightarrow"},{label:"\u0394",latex:"\\Delta"},{label:"[...]",latex:"[...]"}]}[a].map((e,r)=>(0,ra.jsx)("button",{onClick:()=>{return r=e.latex,void t("$".concat(r,"$"));var r},className:"px-4 py-3 bg-gray-100 hover:bg-blue-100 rounded-lg text-center font-medium transition-colors",title:e.latex,"data-testid":"math-symbol-".concat(e.label),children:e.label},r))}),(0,ra.jsx)("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:(0,ra.jsxs)("p",{className:"text-sm text-gray-700",children:[(0,ra.jsx)("span",{className:"font-medium",children:"Tip:"})," Click any symbol to insert LaTeX code. Use $...$ for inline math or $$...$$ for display math."]})})]})]})})},jc="".concat(window.location.origin,"/api"),Sc=e=>{let{user:t,onQuestionsGenerated:n}=e;const[a,i]=(0,r.useState)({subject:"Maths",key_stage:"KS4",exam_board:"AQA",tier:"Higher",topic:"",subtopic:"",difficulty:"Medium",question_type:"Short answer",marks:4,num_questions:1,include_latex:!0,include_diagrams:"none",calculator_allowed:!1,strictness:"strict",command_words:"",question_context:"mock exam"}),[o,s]=(0,r.useState)(!1),[l,c]=(0,r.useState)([]),[d,h]=(0,r.useState)(new Set),[m,p]=(0,r.useState)(""),[f,g]=(0,r.useState)(!1),[v,y]=(0,r.useState)(null),b=(e,t)=>{if(i(r=>u(u({},r),{},{[e]:t})),"subject"===e){const r=["Maths","Physics","Chemistry","Combined Science"];i(n=>u(u({},n),{},{[e]:t,include_latex:r.includes(t)}))}};return(0,ra.jsxs)("div",{className:"space-y-6",children:[(0,ra.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,ra.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,ra.jsxs)("div",{children:[(0,ra.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"AI Question Generator"}),(0,ra.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Generate curriculum-aligned questions with professional mark schemes"})]}),(0,ra.jsx)("div",{className:"text-right",children:(0,ra.jsx)("span",{className:"inline-block px-3 py-1 bg-purple-100 text-purple-700 text-xs font-medium rounded-full",children:"Phase 2 \u2728"})})]}),(0,ra.jsxs)("div",{className:"mb-6 p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg border border-blue-200",children:[(0,ra.jsx)("h4",{className:"text-sm font-semibold text-blue-900 mb-2",children:"\u2728 Enhanced Features:"}),(0,ra.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 text-xs text-blue-800",children:[(0,ra.jsxs)("div",{children:[(0,ra.jsx)("span",{className:"font-medium",children:"\ud83d\udccb Subject-Specific Templates"}),(0,ra.jsx)("p",{className:"text-blue-700",children:"Mark schemes follow exam board standards"})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("span",{className:"font-medium",children:"\ud83d\udcd0 Diagram Generation"}),(0,ra.jsx)("p",{className:"text-blue-700",children:"Auto-generated diagram prompts for visual questions"})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("span",{className:"font-medium",children:"\u2b50 Quality Scoring"}),(0,ra.jsx)("p",{className:"text-blue-700",children:"AI-powered quality assessment on 6 criteria"})]})]})]}),(0,ra.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject"}),(0,ra.jsx)("select",{value:a.subject,onChange:e=>b("subject",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg","data-testid":"ai-subject",children:["Maths","Physics","Chemistry","Biology","Combined Science","English Lang","English Lit","Geography","History"].map(e=>(0,ra.jsx)("option",{value:e,children:e},e))})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Key Stage"}),(0,ra.jsx)("select",{value:a.key_stage,onChange:e=>b("key_stage",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg","data-testid":"ai-key-stage",children:["KS3","KS4","KS5"].map(e=>(0,ra.jsx)("option",{value:e,children:e},e))})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Exam Board"}),(0,ra.jsx)("select",{value:a.exam_board,onChange:e=>b("exam_board",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg","data-testid":"ai-exam-board",children:["AQA","Edexcel","OCR","WJEC"].map(e=>(0,ra.jsx)("option",{value:e,children:e},e))})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tier"}),(0,ra.jsx)("select",{value:a.tier,onChange:e=>b("tier",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg","data-testid":"ai-tier",children:["Foundation","Higher","N/A"].map(e=>(0,ra.jsx)("option",{value:e,children:e},e))})]}),(0,ra.jsxs)("div",{className:"md:col-span-2",children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Topic *"}),(0,ra.jsxs)("div",{className:"flex gap-2",children:[(0,ra.jsx)("input",{type:"text",value:a.topic,onChange:e=>b("topic",e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg",placeholder:"e.g., Quadratic equations","data-testid":"ai-topic"}),(0,ra.jsx)("button",{onClick:()=>(y("topic"),void g(!0)),className:"px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg",title:"Math Keyboard",children:"\ud835\udc53(\ud835\udc65)"})]})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subtopic (optional)"}),(0,ra.jsx)("input",{type:"text",value:a.subtopic,onChange:e=>b("subtopic",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"e.g., Factorising","data-testid":"ai-subtopic"})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Difficulty"}),(0,ra.jsx)("select",{value:a.difficulty,onChange:e=>b("difficulty",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg","data-testid":"ai-difficulty",children:["Easy","Medium","Hard"].map(e=>(0,ra.jsx)("option",{value:e,children:e},e))})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Question Type"}),(0,ra.jsx)("select",{value:a.question_type,onChange:e=>b("question_type",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg","data-testid":"ai-question-type",children:["Short answer","Structured calculation","Derivation","Graph/Diagram-based","Explain/describe","Extended response","Data interpretation"].map(e=>(0,ra.jsx)("option",{value:e,children:e},e))})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Marks (1-20)"}),(0,ra.jsx)("input",{type:"number",min:"1",max:"20",value:a.marks,onChange:e=>b("marks",parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg","data-testid":"ai-marks"})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number of Questions"}),(0,ra.jsx)("input",{type:"number",min:"1",max:"10",value:a.num_questions,onChange:e=>b("num_questions",parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg","data-testid":"ai-num-questions"})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Include Diagrams"}),(0,ra.jsx)("select",{value:a.include_diagrams,onChange:e=>b("include_diagrams",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg","data-testid":"ai-diagrams",children:[{value:"none",label:"None"},{value:"description",label:"Include description"},{value:"prompt",label:"Generate diagram prompt"}].map(e=>(0,ra.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),(0,ra.jsxs)("div",{className:"flex flex-wrap gap-4 mt-4",children:[(0,ra.jsxs)("label",{className:"flex items-center gap-2",children:[(0,ra.jsx)("input",{type:"checkbox",checked:a.include_latex,onChange:e=>b("include_latex",e.target.checked),className:"rounded","data-testid":"ai-latex"}),(0,ra.jsx)("span",{className:"text-sm text-gray-700",children:"Include LaTeX formatting"})]}),(0,ra.jsxs)("label",{className:"flex items-center gap-2",children:[(0,ra.jsx)("input",{type:"checkbox",checked:a.calculator_allowed,onChange:e=>b("calculator_allowed",e.target.checked),className:"rounded","data-testid":"ai-calculator"}),(0,ra.jsx)("span",{className:"text-sm text-gray-700",children:"Calculator allowed"})]})]}),(0,ra.jsxs)("div",{className:"mt-4",children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Command Words (optional, comma-separated)"}),(0,ra.jsx)("input",{type:"text",value:a.command_words,onChange:e=>b("command_words",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"e.g., Calculate, Explain, Evaluate","data-testid":"ai-command-words"})]}),(0,ra.jsx)("div",{className:"mt-6",children:(0,ra.jsx)("button",{onClick:async()=>{if(a.topic.trim()){s(!0),p("");try{const e=(await ta.post("".concat(jc,"/teacher/questions/ai-generate"),a)).data.questions||[];c(e),h(new Set)}catch(r){var e,t;p((null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||"Failed to generate questions. Please try again.")}finally{s(!1)}}else p("Please enter a topic")},disabled:o||!a.topic.trim(),className:"w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50","data-testid":"generate-btn",children:o?"Generating...":"Generate Questions"})}),m&&(0,ra.jsx)("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,ra.jsx)("p",{className:"text-red-700",children:m})})]}),l.length>0&&(0,ra.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,ra.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,ra.jsxs)("h3",{className:"text-xl font-semibold text-gray-900",children:["Generated Questions (",l.length,")"]}),(0,ra.jsxs)("button",{onClick:async()=>{const e=l.filter((e,t)=>d.has(t));try{for(const r of e){var t;await ta.post("".concat(jc,"/teacher/questions"),{subject:r.subject,exam_type:"".concat(r.key_stage," ").concat(r.exam_board," ").concat(r.tier),topic:(null===(t=r.topic_tags)||void 0===t?void 0:t.join(", "))||a.topic,question_text:r.question_text,max_marks:r.marks_total,mark_scheme:"string"===typeof r.mark_scheme?r.mark_scheme:JSON.stringify(r.mark_scheme),source:"ai_generated",key_stage:r.key_stage,exam_board:r.exam_board,tier:r.tier,question_title:r.question_title,topic_tags:r.topic_tags,mark_scheme_json:Array.isArray(r.mark_scheme)?r.mark_scheme:null,model_answer:r.model_answer,common_mistakes:r.common_mistakes,keywords:r.keywords,diagram_prompt:r.diagram_prompt,quality_score:r.quality_score,quality_notes:r.quality_notes,calculator_allowed:r.calculator_allowed||a.calculator_allowed})}n(),c([]),h(new Set)}catch(r){p("Failed to save questions")}},disabled:0===d.size,className:"bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 disabled:opacity-50","data-testid":"save-selected-btn",children:["Save Selected (",d.size,")"]})]}),(0,ra.jsx)("div",{className:"space-y-6",children:l.map((e,t)=>(0,ra.jsx)("div",{className:"border rounded-lg p-4","data-testid":"generated-question-".concat(t),children:(0,ra.jsxs)("div",{className:"flex items-start gap-3 mb-3",children:[(0,ra.jsx)("input",{type:"checkbox",checked:d.has(t),onChange:()=>(e=>{h(t=>{const r=new Set(t);return r.has(e)?r.delete(e):r.add(e),r})})(t),className:"mt-1","data-testid":"select-question-".concat(t)}),(0,ra.jsxs)("div",{className:"flex-1",children:[(0,ra.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,ra.jsx)("h4",{className:"font-semibold text-gray-900",children:e.question_title||"Question ".concat(t+1)}),(0,ra.jsxs)("span",{className:"text-sm text-gray-600",children:[e.marks_total," marks"]})]}),(0,ra.jsxs)("div",{className:"mb-3",children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Question Text"}),(0,ra.jsx)("textarea",{value:e.question_text,onChange:e=>((e,t,r)=>{c(n=>{const a=[...n];return a[e]=u(u({},a[e]),{},{[t]:r}),a})})(t,"question_text",e.target.value),rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm mb-2"}),(0,ra.jsxs)("div",{className:"bg-gray-50 p-3 rounded border border-gray-200",children:[(0,ra.jsx)("p",{className:"text-xs text-gray-600 mb-1 font-medium",children:"Preview:"}),(0,ra.jsx)(hc,{text:e.question_text})]})]}),(0,ra.jsxs)("div",{className:"mb-3",children:[(0,ra.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Mark Scheme:"}),(0,ra.jsx)("div",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded",children:Array.isArray(e.mark_scheme)&&e.mark_scheme.length>0?(0,ra.jsx)("ul",{className:"list-disc list-inside space-y-1",children:e.mark_scheme.map((e,t)=>(0,ra.jsxs)("li",{children:[(0,ra.jsxs)("span",{className:"font-medium",children:["M",e.mark,":"]})," ",(0,ra.jsx)(hc,{text:e.point||""})]},t))}):(0,ra.jsx)(hc,{text:e.mark_scheme||"No mark scheme available"})})]}),e.model_answer&&(0,ra.jsxs)("div",{className:"mb-3",children:[(0,ra.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Model Answer:"}),(0,ra.jsx)("div",{className:"text-sm text-gray-600 bg-green-50 p-3 rounded",children:(0,ra.jsx)(hc,{text:e.model_answer})})]}),void 0!==e.quality_score&&(0,ra.jsx)("div",{className:"flex items-center gap-3 mb-3",children:(0,ra.jsxs)("div",{className:"flex-1",children:[(0,ra.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,ra.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Quality Score:"}),(0,ra.jsxs)("span",{className:"text-lg font-bold ".concat(e.quality_score>=85?"text-green-600":e.quality_score>=70?"text-blue-600":e.quality_score>=55?"text-yellow-600":"text-red-600"),children:[e.quality_score,"/100"]})]}),(0,ra.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,ra.jsx)("div",{className:"h-2 rounded-full ".concat(e.quality_score>=85?"bg-green-600":e.quality_score>=70?"bg-blue-600":e.quality_score>=55?"bg-yellow-600":"bg-red-600"),style:{width:"".concat(e.quality_score,"%")}})})]})}),e.quality_notes&&Array.isArray(e.quality_notes)&&e.quality_notes.length>0&&(0,ra.jsxs)("div",{className:"mb-3 p-3 bg-blue-50 rounded border border-blue-200",children:[(0,ra.jsx)("p",{className:"text-xs font-medium text-blue-900 mb-1",children:"Quality Assessment:"}),(0,ra.jsx)("ul",{className:"text-xs text-blue-800 space-y-1",children:e.quality_notes.map((e,t)=>(0,ra.jsx)("li",{children:e},t))})]}),e.diagram_prompt&&(0,ra.jsxs)("div",{className:"mb-3 p-3 bg-purple-50 rounded border border-purple-200",children:[(0,ra.jsx)("p",{className:"text-sm font-medium text-purple-900 mb-1",children:"\ud83d\udcd0 Diagram Required:"}),(0,ra.jsx)("p",{className:"text-sm text-purple-800",children:e.diagram_prompt})]})]})]})},t))})]}),f&&(0,ra.jsx)(kc,{onInsert:e=>{v&&b(v,a[v]+e)},onClose:()=>g(!1)})]})},Cc="".concat(window.location.origin,"/api"),Nc=e=>{let{user:t,questions:n,onRefresh:a,onEdit:i}=e;const[o,s]=(0,r.useState)(n),[l,c]=(0,r.useState)({search:"",subject:"all",key_stage:"all",exam_board:"all",source:"all",min_quality:0,max_marks_min:0,max_marks_max:20}),[d,h]=(0,r.useState)("date_desc"),[m,p]=(0,r.useState)(new Set),[f,g]=(0,r.useState)("grid");(0,r.useEffect)(()=>{v()},[n,l,d]);const v=()=>{let e=[...n];if(l.search.trim()){const t=l.search.toLowerCase();e=e.filter(e=>{var r,n,a,i;return(null===(r=e.question_text)||void 0===r?void 0:r.toLowerCase().includes(t))||(null===(n=e.topic)||void 0===n?void 0:n.toLowerCase().includes(t))||(null===(a=e.subject)||void 0===a?void 0:a.toLowerCase().includes(t))||(null===(i=e.keywords)||void 0===i?void 0:i.some(e=>e.toLowerCase().includes(t)))})}switch("all"!==l.subject&&(e=e.filter(e=>e.subject===l.subject)),"all"!==l.key_stage&&(e=e.filter(e=>e.key_stage===l.key_stage)),"all"!==l.exam_board&&(e=e.filter(e=>e.exam_board===l.exam_board)),"all"!==l.source&&(e=e.filter(e=>e.source===l.source)),l.min_quality>0&&(e=e.filter(e=>(e.quality_score||0)>=l.min_quality)),e=e.filter(e=>e.max_marks>=l.max_marks_min&&e.max_marks<=l.max_marks_max),d){case"date_desc":e.sort((e,t)=>new Date(t.created_at||0)-new Date(e.created_at||0));break;case"date_asc":e.sort((e,t)=>new Date(e.created_at||0)-new Date(t.created_at||0));break;case"quality_desc":e.sort((e,t)=>(t.quality_score||0)-(e.quality_score||0));break;case"marks_asc":e.sort((e,t)=>e.max_marks-t.max_marks)}s(e)},y=(e,t)=>{c(r=>u(u({},r),{},{[e]:t}))},b=()=>{c({search:"",subject:"all",key_stage:"all",exam_board:"all",source:"all",min_quality:0,max_marks_min:0,max_marks_max:20})},x=[...new Set(n.map(e=>e.subject).filter(Boolean))],w=[...new Set(n.map(e=>e.key_stage).filter(Boolean))],k=[...new Set(n.map(e=>e.exam_board).filter(Boolean))];return(0,ra.jsxs)("div",{children:[(0,ra.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:[(0,ra.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,ra.jsxs)("div",{children:[(0,ra.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Your Question Bank"}),(0,ra.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Showing ",o.length," of ",n.length," questions"]})]}),(0,ra.jsx)("div",{className:"flex gap-2",children:(0,ra.jsx)("button",{onClick:()=>g("grid"===f?"list":"grid"),className:"px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm",children:"grid"===f?"\ud83d\udccb List":"\ud83d\udd32 Grid"})})]}),(0,ra.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,ra.jsxs)("div",{className:"p-3 bg-blue-50 rounded-lg",children:[(0,ra.jsx)("p",{className:"text-xs text-blue-600 font-medium",children:"Total Questions"}),(0,ra.jsx)("p",{className:"text-2xl font-bold text-blue-900",children:n.length})]}),(0,ra.jsxs)("div",{className:"p-3 bg-purple-50 rounded-lg",children:[(0,ra.jsx)("p",{className:"text-xs text-purple-600 font-medium",children:"AI Generated"}),(0,ra.jsx)("p",{className:"text-2xl font-bold text-purple-900",children:n.filter(e=>"ai_generated"===e.source).length})]}),(0,ra.jsxs)("div",{className:"p-3 bg-green-50 rounded-lg",children:[(0,ra.jsx)("p",{className:"text-xs text-green-600 font-medium",children:"High Quality (85+)"}),(0,ra.jsx)("p",{className:"text-2xl font-bold text-green-900",children:n.filter(e=>(e.quality_score||0)>=85).length})]}),(0,ra.jsxs)("div",{className:"p-3 bg-yellow-50 rounded-lg",children:[(0,ra.jsx)("p",{className:"text-xs text-yellow-600 font-medium",children:"With Diagrams"}),(0,ra.jsx)("p",{className:"text-2xl font-bold text-yellow-900",children:n.filter(e=>e.diagram_prompt).length})]})]})]}),(0,ra.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:[(0,ra.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,ra.jsx)("h4",{className:"font-semibold text-gray-900",children:"Filters & Search"}),(0,ra.jsx)("button",{onClick:b,className:"text-sm text-blue-600 hover:text-blue-700",children:"Clear All"})]}),(0,ra.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,ra.jsxs)("div",{className:"lg:col-span-2",children:[(0,ra.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Search"}),(0,ra.jsx)("input",{type:"text",value:l.search,onChange:e=>y("search",e.target.value),placeholder:"Search questions, topics, keywords...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Subject"}),(0,ra.jsxs)("select",{value:l.subject,onChange:e=>y("subject",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[(0,ra.jsx)("option",{value:"all",children:"All Subjects"}),x.map(e=>(0,ra.jsx)("option",{value:e,children:e},e))]})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Key Stage"}),(0,ra.jsxs)("select",{value:l.key_stage,onChange:e=>y("key_stage",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[(0,ra.jsx)("option",{value:"all",children:"All Key Stages"}),w.map(e=>(0,ra.jsx)("option",{value:e,children:e},e))]})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Exam Board"}),(0,ra.jsxs)("select",{value:l.exam_board,onChange:e=>y("exam_board",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[(0,ra.jsx)("option",{value:"all",children:"All Boards"}),k.map(e=>(0,ra.jsx)("option",{value:e,children:e},e))]})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Source"}),(0,ra.jsxs)("select",{value:l.source,onChange:e=>y("source",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[(0,ra.jsx)("option",{value:"all",children:"All Sources"}),(0,ra.jsx)("option",{value:"manual",children:"Manual"}),(0,ra.jsx)("option",{value:"ai_generated",children:"AI Generated"})]})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Min Quality Score"}),(0,ra.jsx)("input",{type:"number",min:"0",max:"100",value:l.min_quality,onChange:e=>y("min_quality",parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Sort By"}),(0,ra.jsxs)("select",{value:d,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[(0,ra.jsx)("option",{value:"date_desc",children:"Newest First"}),(0,ra.jsx)("option",{value:"date_asc",children:"Oldest First"}),(0,ra.jsx)("option",{value:"quality_desc",children:"Highest Quality"}),(0,ra.jsx)("option",{value:"marks_asc",children:"Marks (Low to High)"})]})]})]})]}),m.size>0&&(0,ra.jsx)("div",{className:"bg-blue-50 border border-blue-200 p-4 rounded-lg mb-6",children:(0,ra.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ra.jsxs)("span",{className:"text-sm font-medium text-blue-900",children:[m.size," question",1!==m.size?"s":""," selected"]}),(0,ra.jsxs)("div",{className:"flex gap-2",children:[(0,ra.jsx)("button",{onClick:()=>{p(new Set)},className:"px-3 py-1 bg-white border border-blue-300 text-blue-700 rounded text-sm hover:bg-blue-50",children:"Deselect All"}),(0,ra.jsx)("button",{onClick:async()=>{if(window.confirm("Delete ".concat(m.size," selected questions?")))try{for(const e of m)await ta.delete("".concat(Cc,"/teacher/questions/").concat(e));p(new Set),a()}catch(e){alert("Failed to delete some questions")}},className:"px-3 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700",children:"Delete Selected"})]})]})}),0===o.length?(0,ra.jsxs)("div",{className:"bg-white p-12 rounded-lg shadow text-center",children:[(0,ra.jsx)("p",{className:"text-gray-600 mb-4",children:"No questions match your filters"}),(0,ra.jsx)("button",{onClick:b,className:"text-blue-600 hover:text-blue-700",children:"Clear filters"})]}):(0,ra.jsxs)(ra.Fragment,{children:[(0,ra.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,ra.jsxs)("button",{onClick:()=>{p(new Set(o.map(e=>e.id)))},className:"text-sm text-blue-600 hover:text-blue-700",children:["Select All (",o.length,")"]})}),(0,ra.jsx)("div",{className:"grid"===f?"grid grid-cols-1 lg:grid-cols-2 gap-4":"space-y-4",children:o.map(e=>(0,ra.jsx)("div",{className:"bg-white p-6 rounded-lg shadow","data-testid":"question-".concat(e.id),children:(0,ra.jsxs)("div",{className:"flex items-start gap-3",children:[(0,ra.jsx)("input",{type:"checkbox",checked:m.has(e.id),onChange:()=>{return t=e.id,void p(e=>{const r=new Set(e);return r.has(t)?r.delete(t):r.add(t),r});var t},className:"mt-1"}),(0,ra.jsxs)("div",{className:"flex-1",children:[(0,ra.jsxs)("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[(0,ra.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:[e.subject," - ",e.exam_type]}),"ai_generated"===e.source&&(0,ra.jsx)("span",{className:"text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded",children:"\ud83e\udd16 AI"}),e.quality_score&&e.quality_score>=85&&(0,ra.jsxs)("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded",children:["\u2b50 ",e.quality_score]}),e.diagram_prompt&&(0,ra.jsx)("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded",children:"\ud83d\udcd0 Diagram"})]}),(0,ra.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.topic}),(0,ra.jsx)("div",{className:"text-gray-700 mb-2 line-clamp-3",children:(0,ra.jsx)(hc,{text:e.question_text})}),(0,ra.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[(0,ra.jsxs)("span",{children:["Max Marks: ",e.max_marks]}),e.key_stage&&(0,ra.jsxs)("span",{children:["\u2022 ",e.key_stage]}),e.exam_board&&(0,ra.jsxs)("span",{children:["\u2022 ",e.exam_board]})]})]}),(0,ra.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,ra.jsx)("button",{onClick:()=>i(e),className:"text-blue-600 hover:text-blue-700 text-sm","data-testid":"edit-question-".concat(e.id),children:"Edit"}),(0,ra.jsx)("button",{onClick:()=>(async e=>{try{const t=u(u({},e),{},{subject:e.subject,exam_type:e.exam_type,topic:e.topic+" (Copy)",question_text:e.question_text,max_marks:e.max_marks,mark_scheme:e.mark_scheme,source:e.source,key_stage:e.key_stage,exam_board:e.exam_board,tier:e.tier,question_title:e.question_title?e.question_title+" (Copy)":null,topic_tags:e.topic_tags,mark_scheme_json:e.mark_scheme_json,model_answer:e.model_answer,common_mistakes:e.common_mistakes,keywords:e.keywords,diagram_prompt:e.diagram_prompt,quality_score:e.quality_score,quality_notes:e.quality_notes,calculator_allowed:e.calculator_allowed});await ta.post("".concat(Cc,"/teacher/questions"),t),a()}catch(t){alert("Failed to clone question")}})(e),className:"text-green-600 hover:text-green-700 text-sm","data-testid":"clone-question-".concat(e.id),children:"Clone"})]})]})},e.id))})]})]})},_c={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_BACKEND_URL+"/api",Ac=e=>{let{user:t}=e;const[n,a]=(0,r.useState)([]),[i,o]=(0,r.useState)(!0),[s,l]=(0,r.useState)("manual"),[c,d]=(0,r.useState)(!1),[h,m]=(0,r.useState)(null),[p,f]=(0,r.useState)(!1),[g,v]=(0,r.useState)(null),[y,b]=(0,r.useState)({subject:"",exam_type:"",topic:"",question_text:"",max_marks:"",mark_scheme:""}),x=je();(0,r.useEffect)(()=>{w()},[]);const w=async()=>{try{const e=await ta.get("".concat(_c,"/teacher/questions"));a(e.data),o(!1)}catch(e){console.error("Error loading questions:",e),o(!1)}},k=e=>{v(e),f(!0)};return(0,ra.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,ra.jsx)("nav",{className:"bg-white shadow-sm border-b",children:(0,ra.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-4 flex justify-between items-center",children:[(0,ra.jsxs)("div",{className:"flex items-center gap-6",children:[(0,ra.jsx)("h1",{className:"text-2xl font-bold text-blue-600",children:"BlueAI"}),(0,ra.jsxs)("div",{className:"flex gap-4",children:[(0,ra.jsx)("button",{onClick:()=>x("/teacher/dashboard"),className:"text-gray-700 hover:text-blue-600",children:"Dashboard"}),(0,ra.jsx)("button",{onClick:()=>x("/teacher/questions"),className:"text-blue-600 font-medium",children:"Questions"}),(0,ra.jsx)("button",{onClick:()=>x("/teacher/assessments"),className:"text-gray-700 hover:text-blue-600",children:"Assessments"}),(0,ra.jsx)("button",{onClick:()=>x("/teacher/classes"),className:"text-gray-700 hover:text-blue-600",children:"Classes"}),(0,ra.jsx)("button",{onClick:()=>x("/teacher/analytics"),className:"text-gray-700 hover:text-blue-600",children:"Analytics"}),"admin"===t.role&&(0,ra.jsx)("button",{onClick:()=>x("/admin/dashboard"),className:"text-gray-700 hover:text-blue-600",children:"Admin"})]})]}),(0,ra.jsx)("span",{className:"text-gray-700",children:t.name})]})}),(0,ra.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[(0,ra.jsxs)("div",{className:"mb-8",children:[(0,ra.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-2","data-testid":"questions-title",children:"Question Builder"}),(0,ra.jsx)("p",{className:"text-gray-600",children:"Create questions manually or use AI to generate curriculum-aligned questions"})]}),(0,ra.jsx)("div",{className:"border-b mb-6",children:(0,ra.jsxs)("div",{className:"flex gap-1",children:[(0,ra.jsx)("button",{onClick:()=>l("manual"),className:"px-6 py-3 font-medium border-b-2 ".concat("manual"===s?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-blue-600"),"data-testid":"manual-tab",children:"\ud83d\udcdd Manual Builder"}),(0,ra.jsx)("button",{onClick:()=>l("ai"),className:"px-6 py-3 font-medium border-b-2 ".concat("ai"===s?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-blue-600"),"data-testid":"ai-tab",children:"\ud83e\udd16 AI Generator"}),(0,ra.jsxs)("button",{onClick:()=>l("bank"),className:"px-6 py-3 font-medium border-b-2 ".concat("bank"===s?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-blue-600"),"data-testid":"bank-tab",children:["\ud83d\uddc2\ufe0f Question Bank (",n.length,")"]})]})}),"manual"===s&&(0,ra.jsxs)("div",{children:[(0,ra.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,ra.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Manual Question Builder"}),(0,ra.jsx)("button",{onClick:()=>{d(!0),m(null),b({subject:"",exam_type:"",topic:"",question_text:"",max_marks:"",mark_scheme:""})},className:"bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700","data-testid":"new-question-btn",children:"+ New Question"})]}),c&&(0,ra.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow mb-6","data-testid":"question-form",children:[(0,ra.jsx)("h3",{className:"text-xl font-semibold mb-4",children:h?"Edit Question":"Create Question"}),(0,ra.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{h?await ta.put("".concat(_c,"/teacher/questions/").concat(h),u(u({},y),{},{max_marks:parseInt(y.max_marks)})):await ta.post("".concat(_c,"/teacher/questions"),u(u({},y),{},{max_marks:parseInt(y.max_marks)})),d(!1),m(null),b({subject:"",exam_type:"",topic:"",question_text:"",max_marks:"",mark_scheme:""}),w()}catch(t){alert("Failed to save question")}},className:"space-y-4",children:[(0,ra.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject"}),(0,ra.jsx)("input",{type:"text",className:"w-full px-3 py-2 border rounded-lg",value:y.subject,onChange:e=>b(u(u({},y),{},{subject:e.target.value})),required:!0,"data-testid":"subject-input"})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Exam Type"}),(0,ra.jsx)("input",{type:"text",className:"w-full px-3 py-2 border rounded-lg",value:y.exam_type,onChange:e=>b(u(u({},y),{},{exam_type:e.target.value})),placeholder:"e.g., GCSE, A-Level",required:!0,"data-testid":"exam-type-input"})]})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Topic"}),(0,ra.jsxs)("div",{className:"flex gap-2",children:[(0,ra.jsx)("input",{type:"text",className:"flex-1 px-3 py-2 border rounded-lg",value:y.topic,onChange:e=>b(u(u({},y),{},{topic:e.target.value})),required:!0,"data-testid":"topic-input"}),(0,ra.jsx)("button",{type:"button",onClick:()=>k("topic"),className:"px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg",title:"Math Keyboard",children:"\ud835\udc53(\ud835\udc65)"})]})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Question Text"}),(0,ra.jsxs)("div",{className:"relative",children:[(0,ra.jsx)("textarea",{className:"w-full px-3 py-2 border rounded-lg",rows:"4",value:y.question_text,onChange:e=>b(u(u({},y),{},{question_text:e.target.value})),required:!0,"data-testid":"question-text-input"}),(0,ra.jsx)("button",{type:"button",onClick:()=>k("question_text"),className:"absolute top-2 right-2 px-3 py-1 bg-gray-100 hover:bg-gray-200 rounded text-sm",title:"Math Keyboard",children:"\ud835\udc53(\ud835\udc65)"})]})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mark Scheme"}),(0,ra.jsxs)("div",{className:"relative",children:[(0,ra.jsx)("textarea",{className:"w-full px-3 py-2 border rounded-lg",rows:"6",value:y.mark_scheme,onChange:e=>b(u(u({},y),{},{mark_scheme:e.target.value})),placeholder:"Enter marking criteria",required:!0,"data-testid":"mark-scheme-input"}),(0,ra.jsx)("button",{type:"button",onClick:()=>k("mark_scheme"),className:"absolute top-2 right-2 px-3 py-1 bg-gray-100 hover:bg-gray-200 rounded text-sm",title:"Math Keyboard",children:"\ud835\udc53(\ud835\udc65)"})]})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Marks"}),(0,ra.jsx)("input",{type:"number",className:"w-full px-3 py-2 border rounded-lg",value:y.max_marks,onChange:e=>b(u(u({},y),{},{max_marks:e.target.value})),required:!0,min:"1","data-testid":"max-marks-input"})]}),(0,ra.jsxs)("div",{className:"flex gap-2",children:[(0,ra.jsxs)("button",{type:"submit",className:"bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700","data-testid":"save-question-btn",children:[h?"Update":"Create"," Question"]}),(0,ra.jsx)("button",{type:"button",onClick:()=>{d(!1),m(null)},className:"bg-gray-200 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-300","data-testid":"cancel-btn",children:"Cancel"})]})]})]}),!c&&(0,ra.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow text-center",children:[(0,ra.jsx)("p",{className:"text-gray-600 mb-4",children:'Click "New Question" to create a question manually with full control over content and formatting.'}),(0,ra.jsx)("p",{className:"text-sm text-gray-500",children:"Math keyboard available for LaTeX support in all text fields."})]})]}),"ai"===s&&(0,ra.jsx)(Sc,{user:t,onQuestionsGenerated:w}),"bank"===s&&(0,ra.jsx)(Nc,{user:t,questions:n,onRefresh:w,onEdit:e=>{b({subject:e.subject,exam_type:e.exam_type,topic:e.topic,question_text:e.question_text,max_marks:e.max_marks.toString(),mark_scheme:e.mark_scheme}),m(e.id),d(!0),l("manual")}})]}),p&&(0,ra.jsx)(kc,{onInsert:e=>{g&&b(t=>u(u({},t),{},{[g]:t[g]+e}))},onClose:()=>f(!1)})]})},Tc=e=>{let{selectedMode:t,onModeChange:r}=e;return(0,ra.jsxs)("div",{className:"space-y-4",children:[(0,ra.jsxs)("div",{children:[(0,ra.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Select Assessment Type"}),(0,ra.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Choose the type of assessment you want to create. This determines the structure and student experience."})]}),(0,ra.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[{id:"CLASSIC",name:"\ud83d\udcdd Classic Mode",description:"Single question assessment (backward compatible)",duration:"30-60 min",questions:"1 question",icon:"\ud83d\udcdd",color:"bg-gray-100 border-gray-300 hover:bg-gray-200"},{id:"FORMATIVE_SINGLE_LONG_RESPONSE",name:"\ud83d\udccb Formative Assessment",description:"Single extended response question for mastery checks",duration:"30-60 min",questions:"1 question (6+ marks)",icon:"\ud83d\udccb",color:"bg-blue-50 border-blue-300 hover:bg-blue-100"},{id:"SUMMATIVE_MULTI_QUESTION",name:"\ud83d\udcca Summative Assessment",description:"Multiple questions of mixed types (MCQ, short answer, calculations)",duration:"30-60 min",questions:"5-10 questions",icon:"\ud83d\udcca",color:"bg-green-50 border-green-300 hover:bg-green-100"},{id:"EXAM_STRUCTURED_GCSE_STYLE",name:"\ud83d\udcc4 GCSE Structured Exam",description:"Exam-style questions with sub-parts (1a, 1b, 1c) and shared stimulus",duration:"30-60 min",questions:"1-5 structured questions",icon:"\ud83d\udcc4",color:"bg-purple-50 border-purple-300 hover:bg-purple-100"}].map(e=>(0,ra.jsx)("button",{onClick:()=>r(e.id),className:"text-left p-4 rounded-lg border-2 transition-all ".concat(t===e.id?"ring-2 ring-blue-500 border-blue-500 bg-blue-50":e.color),children:(0,ra.jsxs)("div",{className:"flex items-start gap-3",children:[(0,ra.jsx)("span",{className:"text-3xl",children:e.icon}),(0,ra.jsxs)("div",{className:"flex-1",children:[(0,ra.jsx)("h4",{className:"font-semibold text-gray-900 mb-1",children:e.name}),(0,ra.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),(0,ra.jsxs)("div",{className:"flex gap-4 text-xs text-gray-500",children:[(0,ra.jsxs)("span",{children:["\u23f1\ufe0f ",e.duration]}),(0,ra.jsxs)("span",{children:["\ud83d\udcdd ",e.questions]})]})]}),t===e.id&&(0,ra.jsx)("div",{className:"flex-shrink-0",children:(0,ra.jsx)("div",{className:"w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center",children:(0,ra.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})})})]})},e.id))})]})},Ec=e=>{let{selectedType:t,onTypeChange:r,mode:n}=e;const a=[{id:"SHORT_ANSWER",name:"Short Answer",description:"1-3 marks, brief written response",icon:"\u270d\ufe0f",marks:"1-3",available:["SUMMATIVE_MULTI_QUESTION","EXAM_STRUCTURED_GCSE_STYLE"]},{id:"MULTIPLE_CHOICE",name:"Multiple Choice",description:"A-D options, single correct answer",icon:"\ud83d\udd18",marks:"1",available:["SUMMATIVE_MULTI_QUESTION"]},{id:"MULTI_SELECT",name:"Multi-Select",description:"Multiple correct answers possible",icon:"\u2611\ufe0f",marks:"2-3",available:["SUMMATIVE_MULTI_QUESTION"]},{id:"NUMERIC",name:"Numeric Answer",description:"Calculation question with numeric answer",icon:"\ud83d\udd22",marks:"1-3",available:["SUMMATIVE_MULTI_QUESTION","EXAM_STRUCTURED_GCSE_STYLE"]},{id:"LONG_RESPONSE",name:"Long Response",description:"Extended written answer (6+ marks)",icon:"\ud83d\udcdd",marks:"6+",available:["FORMATIVE_SINGLE_LONG_RESPONSE","SUMMATIVE_MULTI_QUESTION","EXAM_STRUCTURED_GCSE_STYLE"]},{id:"STRUCTURED_WITH_PARTS",name:"GCSE Structured",description:"Question with sub-parts (1a, 1b, 1c...)",icon:"\ud83d\udcc4",marks:"varies",available:["EXAM_STRUCTURED_GCSE_STYLE"]}].filter(e=>e.available.includes(n));return(0,ra.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:a.map(e=>(0,ra.jsxs)("button",{onClick:()=>r(e.id),className:"p-4 rounded-lg border-2 text-left transition-all ".concat(t===e.id?"border-blue-500 bg-blue-50 ring-2 ring-blue-200":"border-gray-200 hover:border-blue-300 hover:bg-gray-50"),children:[(0,ra.jsx)("div",{className:"text-2xl mb-2",children:e.icon}),(0,ra.jsx)("div",{className:"font-medium text-gray-900 text-sm mb-1",children:e.name}),(0,ra.jsx)("div",{className:"text-xs text-gray-600 mb-2",children:e.description}),(0,ra.jsxs)("div",{className:"text-xs text-blue-600 font-medium",children:[e.marks," marks"]})]},e.id))})},Oc=e=>{let{options:t,onOptionsChange:r,allowMultiSelect:n,onMultiSelectChange:a}=e;const i=["A","B","C","D"];return(0,ra.jsxs)("div",{className:"space-y-4",children:[(0,ra.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ra.jsx)("h4",{className:"font-medium text-gray-900",children:"Multiple Choice Options"}),(0,ra.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,ra.jsx)("input",{type:"checkbox",checked:n,onChange:e=>a(e.target.checked),className:"rounded"}),(0,ra.jsx)("span",{children:"Allow multiple correct answers"})]})]}),(0,ra.jsx)("div",{className:"space-y-3",children:t.map((e,a)=>(0,ra.jsxs)("div",{className:"flex items-start gap-3 p-3 border rounded-lg bg-gray-50",children:[(0,ra.jsx)("button",{onClick:()=>(e=>{const a=[...t];n?a[e].isCorrect=!a[e].isCorrect:a.forEach((t,r)=>{t.isCorrect=r===e}),r(a)})(a),className:"flex-shrink-0 w-8 h-8 rounded-full border-2 flex items-center justify-center font-bold transition-colors ".concat(e.isCorrect?"bg-green-600 border-green-600 text-white":"bg-white border-gray-300 text-gray-400 hover:border-green-400"),title:e.isCorrect?"Correct answer":"Mark as correct",children:e.isCorrect&&(0,ra.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),(0,ra.jsxs)("div",{className:"flex-1",children:[(0,ra.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,ra.jsx)("span",{className:"font-bold text-gray-700 text-lg",children:i[a]}),(0,ra.jsx)("span",{className:"text-xs text-gray-500",children:"Click \u2713 to mark correct"})]}),(0,ra.jsx)("input",{type:"text",value:e.text,onChange:e=>((e,n,a)=>{const i=[...t];i[e]=u(u({},i[e]),{},{[n]:a}),r(i)})(a,"text",e.target.value),placeholder:"Option ".concat(i[a]," text..."),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]})]},a))}),!n&&!t.some(e=>e.isCorrect)&&(0,ra.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3 text-sm text-amber-800",children:"\u26a0\ufe0f Please mark at least one option as correct"}),n&&t.filter(e=>e.isCorrect).length<2&&(0,ra.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 text-sm text-blue-800",children:"\ud83d\udca1 Multi-select mode: Mark 2 or more options as correct"})]})},Pc=e=>{let{parts:t,onPartsChange:r,questionNumber:n}=e;const a=()=>"abcdefghijklmnopqrstuvwxyz"[t.length]||String.fromCharCode(97+t.length),i=()=>{const e={partLabel:a(),partPrompt:"",maxMarks:1,answerType:"TEXT",markScheme:"",correctAnswer:""};r([...t,e])},o=(e,n,a)=>{const i=[...t];i[e]=u(u({},i[e]),{},{[n]:a}),r(i)},s=(e,n)=>{const a="up"===n?e-1:e+1;if(a<0||a>=t.length)return;const i=[...t];[i[e],i[a]]=[i[a],i[e]];const o=i.map((e,t)=>u(u({},e),{},{partLabel:String.fromCharCode(97+t)}));r(o)},l=t.reduce((e,t)=>e+(t.maxMarks||0),0);return(0,ra.jsxs)("div",{className:"space-y-4",children:[(0,ra.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ra.jsxs)("div",{children:[(0,ra.jsxs)("h4",{className:"font-semibold text-gray-900",children:["Question ",n," Parts"]}),(0,ra.jsx)("p",{className:"text-sm text-gray-600",children:"Add sub-parts (a, b, c...) - auto-labeled"})]}),(0,ra.jsxs)("div",{className:"text-right",children:[(0,ra.jsx)("div",{className:"text-sm text-gray-600",children:"Total Marks"}),(0,ra.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:l})]})]}),0===t.length?(0,ra.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[(0,ra.jsx)("div",{className:"text-gray-400 mb-2",children:(0,ra.jsx)("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,ra.jsx)("p",{className:"text-gray-600 mb-3",children:"No parts yet. Add your first sub-part."}),(0,ra.jsx)("button",{onClick:i,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Add Part (a)"})]}):(0,ra.jsxs)("div",{className:"space-y-3",children:[t.map((e,n)=>(0,ra.jsx)("div",{className:"border-2 border-gray-200 rounded-lg p-4 bg-white",children:(0,ra.jsxs)("div",{className:"flex items-start gap-3 mb-3",children:[(0,ra.jsx)("div",{className:"flex-shrink-0",children:(0,ra.jsx)("div",{className:"w-10 h-10 bg-purple-100 text-purple-700 rounded-lg flex items-center justify-center font-bold text-lg",children:e.partLabel})}),(0,ra.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,ra.jsxs)("div",{children:[(0,ra.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Part (",e.partLabel,") Question"]}),(0,ra.jsx)("textarea",{value:e.partPrompt,onChange:e=>o(n,"partPrompt",e.target.value),placeholder:"Enter the question for this part...",rows:2,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,ra.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Marks"}),(0,ra.jsx)("input",{type:"number",min:"1",max:"20",value:e.maxMarks,onChange:e=>o(n,"maxMarks",parseInt(e.target.value)||1),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Answer Type"}),(0,ra.jsxs)("select",{value:e.answerType,onChange:e=>o(n,"answerType",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,ra.jsx)("option",{value:"TEXT",children:"Text"}),(0,ra.jsx)("option",{value:"NUMERIC",children:"Numeric"}),(0,ra.jsx)("option",{value:"MATHS",children:"Maths (LaTeX)"}),(0,ra.jsx)("option",{value:"MIXED",children:"Mixed"})]})]})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mark Scheme"}),(0,ra.jsx)("textarea",{value:e.markScheme,onChange:e=>o(n,"markScheme",e.target.value),placeholder:"How should this part be marked?",rows:2,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),(0,ra.jsxs)("div",{className:"flex-shrink-0 flex flex-col gap-2",children:[(0,ra.jsx)("button",{onClick:()=>s(n,"up"),disabled:0===n,className:"p-2 rounded hover:bg-gray-100 disabled:opacity-30 disabled:cursor-not-allowed",title:"Move up",children:(0,ra.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 15l7-7 7 7"})})}),(0,ra.jsx)("button",{onClick:()=>s(n,"down"),disabled:n===t.length-1,className:"p-2 rounded hover:bg-gray-100 disabled:opacity-30 disabled:cursor-not-allowed",title:"Move down",children:(0,ra.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})}),(0,ra.jsx)("button",{onClick:()=>(e=>{const n=t.filter((t,r)=>r!==e),a=n.map((e,t)=>u(u({},e),{},{partLabel:String.fromCharCode(97+t)}));r(a)})(n),className:"p-2 rounded hover:bg-red-100 text-red-600",title:"Remove part",children:(0,ra.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})]})},n)),(0,ra.jsxs)("button",{onClick:i,className:"w-full py-3 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-400 hover:bg-blue-50 text-gray-600 hover:text-blue-600 font-medium transition-colors",children:["+ Add Part (",a(),")"]})]})]})},Ic={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_BACKEND_URL+"/api",Mc=e=>{let{assessmentId:t,questionNumber:n,currentStimulus:a,onStimulusUploaded:i}=e;const[o,s]=(0,r.useState)(!1),[l,c]=(0,r.useState)(""),[u,d]=(0,r.useState)("image"),[h,m]=(0,r.useState)("text"===(null===a||void 0===a?void 0:a.type)?a.content:""),[p,f]=(0,r.useState)((null===a||void 0===a?void 0:a.caption)||"");return(0,ra.jsxs)("div",{className:"border-2 border-gray-200 rounded-lg p-4 bg-gray-50",children:[(0,ra.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Shared Stimulus (Optional)"}),(0,ra.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Add a shared diagram, text passage, or table that students will refer to when answering this question."}),a?(0,ra.jsxs)("div",{className:"bg-white border rounded-lg p-4",children:[(0,ra.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,ra.jsxs)("div",{children:[(0,ra.jsx)("span",{className:"text-xs font-medium text-gray-500 uppercase",children:"image"===a.type?"\ud83d\uddbc\ufe0f Image":"\ud83d\udcdd Text"}),a.caption&&(0,ra.jsx)("p",{className:"text-sm font-medium text-gray-700 mt-1",children:a.caption})]}),(0,ra.jsx)("button",{onClick:()=>{i(null),m(""),f("")},className:"text-red-600 hover:text-red-700 text-sm font-medium",children:"Remove"})]}),"image"===a.type?(0,ra.jsx)("img",{src:a.content,alt:a.caption||"Stimulus",className:"max-w-full h-auto rounded border"}):(0,ra.jsx)("div",{className:"whitespace-pre-wrap text-sm text-gray-700 bg-gray-50 p-3 rounded",children:a.content})]}):(0,ra.jsxs)("div",{children:[(0,ra.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,ra.jsx)("button",{onClick:()=>d("image"),className:"flex-1 py-2 px-4 rounded-lg border-2 font-medium ".concat("image"===u?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 text-gray-600 hover:bg-gray-100"),children:"\ud83d\uddbc\ufe0f Image/Diagram"}),(0,ra.jsx)("button",{onClick:()=>d("text"),className:"flex-1 py-2 px-4 rounded-lg border-2 font-medium ".concat("text"===u?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 text-gray-600 hover:bg-gray-100"),children:"\ud83d\udcdd Text/Table"})]}),(0,ra.jsxs)("div",{className:"mb-3",children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Caption (Optional)"}),(0,ra.jsx)("input",{type:"text",value:p,onChange:e=>f(e.target.value),placeholder:"e.g., Figure 1: Circuit diagram",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),"image"===u?(0,ra.jsx)("div",{children:(0,ra.jsx)("label",{className:"block",children:(0,ra.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center cursor-pointer hover:border-blue-400 hover:bg-blue-50 transition-colors",children:[(0,ra.jsx)("svg",{className:"w-12 h-12 mx-auto text-gray-400 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,ra.jsx)("p",{className:"text-gray-600 mb-1",children:o?"Uploading...":"Click to upload image"}),(0,ra.jsx)("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF up to 5MB"}),(0,ra.jsx)("input",{type:"file",accept:"image/*",onChange:async e=>{const r=e.target.files[0];if(r)if(r.type.startsWith("image/"))if(r.size>5242880)c("Image must be less than 5MB");else{s(!0),c("");try{const e=new FormData;e.append("file",r),e.append("question_number",n),e.append("caption",p);const a=await ta.post("".concat(Ic,"/teacher/assessments/").concat(t,"/upload-stimulus"),e,{headers:{"Content-Type":"multipart/form-data"}});a.data.success&&i(a.data.stimulusBlock)}catch(l){var a,o;c((null===(a=l.response)||void 0===a||null===(o=a.data)||void 0===o?void 0:o.detail)||"Failed to upload image")}finally{s(!1)}}else c("Please upload an image file")},disabled:o,className:"hidden"})]})})}):(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stimulus Content"}),(0,ra.jsx)("textarea",{value:h,onChange:e=>m(e.target.value),placeholder:"Enter text passage, data table, or other information students need...",rows:6,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 font-mono text-sm"}),(0,ra.jsx)("button",{onClick:()=>{if(!h.trim())return void c("Please enter stimulus content");i({type:"text",content:h,caption:p})},className:"mt-3 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Add Text Stimulus"})]}),l&&(0,ra.jsx)("div",{className:"mt-3 bg-red-50 border border-red-200 rounded-lg p-3 text-sm text-red-700",children:l})]})]})},Rc={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_BACKEND_URL+"/api",Dc=e=>{let{onQuestionsGenerated:t,assessmentMode:n}=e;const[a,i]=(0,r.useState)(!1),[o,s]=(0,r.useState)({subject:"Mathematics",key_stage:"KS4",exam_board:"AQA",tier:"Higher",topic:"",subtopic:"",difficulty:"Medium",num_questions:5,question_types:[],total_marks:40,include_latex:!0,calculator_allowed:!1,context:"mock exam"}),[l,c]=(0,r.useState)(""),d=(e,t)=>{s(u(u({},o),{},{[e]:t}))};return(0,ra.jsxs)("div",{className:"space-y-6",children:[(0,ra.jsx)("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 border border-purple-200 rounded-lg p-4",children:(0,ra.jsxs)("div",{className:"flex items-start gap-3",children:[(0,ra.jsx)("div",{className:"text-3xl",children:"\ud83e\udd16"}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("h3",{className:"font-semibold text-gray-900 mb-1",children:"AI Bulk Question Generator"}),(0,ra.jsx)("p",{className:"text-sm text-gray-600",children:"Generate multiple exam-quality questions at once. Specify your requirements and let AI create a complete set of questions."})]})]})}),(0,ra.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject"}),(0,ra.jsx)("select",{value:o.subject,onChange:e=>d("subject",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:["Mathematics","Physics","Chemistry","Biology","Computer Science","English","History"].map(e=>(0,ra.jsx)("option",{value:e,children:e},e))})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Key Stage"}),(0,ra.jsx)("select",{value:o.key_stage,onChange:e=>d("key_stage",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:["KS3","KS4","KS5"].map(e=>(0,ra.jsx)("option",{value:e,children:e},e))})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Exam Board"}),(0,ra.jsx)("select",{value:o.exam_board,onChange:e=>d("exam_board",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:["AQA","Edexcel","OCR","WJEC","CIE"].map(e=>(0,ra.jsx)("option",{value:e,children:e},e))})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tier"}),(0,ra.jsx)("select",{value:o.tier,onChange:e=>d("tier",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:["Foundation","Higher","Intermediate"].map(e=>(0,ra.jsx)("option",{value:e,children:e},e))})]})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Topic *"}),(0,ra.jsx)("input",{type:"text",value:o.topic,onChange:e=>d("topic",e.target.value),placeholder:"e.g., Quadratic Equations, Photosynthesis, World War II",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subtopic (Optional)"}),(0,ra.jsx)("input",{type:"text",value:o.subtopic,onChange:e=>d("subtopic",e.target.value),placeholder:"e.g., Factorising, Completing the square",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,ra.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Difficulty"}),(0,ra.jsx)("select",{value:o.difficulty,onChange:e=>d("difficulty",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:["Easy","Medium","Hard"].map(e=>(0,ra.jsx)("option",{value:e,children:e},e))})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Questions"}),(0,ra.jsx)("input",{type:"number",min:"3",max:"20",value:o.num_questions,onChange:e=>d("num_questions",parseInt(e.target.value)||5),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Marks"}),(0,ra.jsx)("input",{type:"number",min:"10",max:"100",value:o.total_marks,onChange:e=>d("total_marks",parseInt(e.target.value)||40),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Question Types (Select mix or leave blank for AI to decide)"}),(0,ra.jsx)("div",{className:"flex flex-wrap gap-2",children:[{id:"SHORT_ANSWER",name:"Short Answer (1-3 marks)"},{id:"MULTIPLE_CHOICE",name:"Multiple Choice"},{id:"NUMERIC",name:"Numeric/Calculation"},{id:"LONG_RESPONSE",name:"Long Response (6+ marks)"},{id:"STRUCTURED_WITH_PARTS",name:"Structured (GCSE style)"}].map(e=>(0,ra.jsxs)("button",{onClick:()=>(e=>{const t=o.question_types.includes(e)?o.question_types.filter(t=>t!==e):[...o.question_types,e];s(u(u({},o),{},{question_types:t}))})(e.id),className:"px-4 py-2 rounded-lg border-2 text-sm font-medium transition-colors ".concat(o.question_types.includes(e.id)?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 text-gray-600 hover:border-gray-300"),children:[o.question_types.includes(e.id)&&"\u2713 ",e.name]},e.id))})]}),(0,ra.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,ra.jsxs)("label",{className:"flex items-center gap-2",children:[(0,ra.jsx)("input",{type:"checkbox",checked:o.include_latex,onChange:e=>d("include_latex",e.target.checked),className:"rounded"}),(0,ra.jsx)("span",{className:"text-sm",children:"Use LaTeX for maths"})]}),(0,ra.jsxs)("label",{className:"flex items-center gap-2",children:[(0,ra.jsx)("input",{type:"checkbox",checked:o.calculator_allowed,onChange:e=>d("calculator_allowed",e.target.checked),className:"rounded"}),(0,ra.jsx)("span",{className:"text-sm",children:"Calculator allowed"})]})]}),l&&(0,ra.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 text-sm text-red-700",children:l}),(0,ra.jsx)("button",{onClick:async()=>{if(o.topic.trim())if(o.num_questions<3||o.num_questions>20)c("Number of questions must be between 3 and 20");else{i(!0),c("");try{const e=await ta.post("".concat(Rc,"/teacher/questions/ai-generate-multi"),o);e.data.success&&t(e.data.questions)}catch(n){var e,r;c((null===(e=n.response)||void 0===e||null===(r=e.data)||void 0===r?void 0:r.detail)||"Failed to generate questions")}finally{i(!1)}}else c("Please enter a topic")},disabled:a,className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 text-white py-3 px-6 rounded-lg font-medium hover:from-purple-700 hover:to-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:a?(0,ra.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,ra.jsxs)("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[(0,ra.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),(0,ra.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Generating ",o.num_questions," questions..."]}):"\ud83e\udd16 Generate ".concat(o.num_questions," Questions with AI")})]})},Lc=e=>{var t;let{question:n,questionIndex:a,onQuestionChange:i,onRemove:o,assessmentMode:s,assessmentId:l}=e;const[c,d]=(0,r.useState)("manual"),h=(e,t)=>{i(a,u(u({},n),{},{[e]:t}))};return r.useEffect(()=>{"MULTIPLE_CHOICE"!==n.questionType&&"MULTI_SELECT"!==n.questionType||n.options&&0!==n.options.length||h("options",[{label:"A",text:"",isCorrect:!1},{label:"B",text:"",isCorrect:!1},{label:"C",text:"",isCorrect:!1},{label:"D",text:"",isCorrect:!1}]),"STRUCTURED_WITH_PARTS"===n.questionType&&(n.parts&&0!==n.parts.length||h("parts",[{partLabel:"a",partPrompt:"",maxMarks:1,answerType:"TEXT",markScheme:""}]))},[n.questionType]),(0,ra.jsxs)("div",{className:"border-2 border-gray-200 rounded-lg bg-white",children:[(0,ra.jsxs)("div",{className:"bg-gray-50 p-4 border-b flex justify-between items-center",children:[(0,ra.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ra.jsx)("div",{className:"w-10 h-10 bg-blue-600 text-white rounded-lg flex items-center justify-center font-bold text-lg",children:n.questionNumber}),(0,ra.jsxs)("div",{children:[(0,ra.jsxs)("h3",{className:"font-semibold text-gray-900",children:["Question ",n.questionNumber]}),(0,ra.jsxs)("p",{className:"text-sm text-gray-600",children:[(null===(t=n.questionType)||void 0===t?void 0:t.replace(/_/g," "))||"Select type"," \u2022 ",n.maxMarks||0," marks"]})]})]}),(0,ra.jsx)("button",{onClick:()=>o(a),className:"text-red-600 hover:text-red-700 font-medium text-sm",children:"Remove"})]}),(0,ra.jsx)("div",{className:"border-b",children:(0,ra.jsxs)("div",{className:"flex",children:[(0,ra.jsx)("button",{onClick:()=>d("manual"),className:"flex-1 px-4 py-3 font-medium transition-colors ".concat("manual"===c?"bg-white text-blue-600 border-b-2 border-blue-600":"bg-gray-50 text-gray-600 hover:text-gray-900"),children:"\u270d\ufe0f Write Manually"}),(0,ra.jsx)("button",{onClick:()=>d("ai"),className:"flex-1 px-4 py-3 font-medium transition-colors ".concat("ai"===c?"bg-white text-blue-600 border-b-2 border-blue-600":"bg-gray-50 text-gray-600 hover:text-gray-900"),children:"\ud83e\udd16 Generate with AI"})]})}),(0,ra.jsx)("div",{className:"p-4 space-y-4",children:"manual"===c?(0,ra.jsxs)(ra.Fragment,{children:[!n.questionType&&(0,ra.jsxs)("div",{children:[(0,ra.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Select Question Type"}),(0,ra.jsx)(Ec,{selectedType:n.questionType,onTypeChange:e=>h("questionType",e),mode:s})]}),n.questionType&&(0,ra.jsxs)(ra.Fragment,{children:["STRUCTURED_WITH_PARTS"===n.questionType&&l&&(0,ra.jsx)(Mc,{assessmentId:l,questionNumber:n.questionNumber,currentStimulus:n.stimulusBlock,onStimulusUploaded:e=>h("stimulusBlock",e)}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Question Text"}),(0,ra.jsx)("textarea",{value:n.questionBody||"",onChange:e=>h("questionBody",e.target.value),placeholder:"Enter your question here...",rows:3,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),("MULTIPLE_CHOICE"===n.questionType||"MULTI_SELECT"===n.questionType)&&(0,ra.jsx)(Oc,{options:n.options||[],onOptionsChange:e=>h("options",e),allowMultiSelect:"MULTI_SELECT"===n.questionType,onMultiSelectChange:e=>h("allowMultiSelect",e)}),"STRUCTURED_WITH_PARTS"===n.questionType&&(0,ra.jsx)(Pc,{parts:n.parts||[],onPartsChange:e=>{h("parts",e);const t=e.reduce((e,t)=>e+(t.maxMarks||0),0);h("maxMarks",t)},questionNumber:n.questionNumber}),"STRUCTURED_WITH_PARTS"!==n.questionType&&(0,ra.jsxs)(ra.Fragment,{children:[(0,ra.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Marks"}),(0,ra.jsx)("input",{type:"number",min:"1",max:"20",value:n.maxMarks||1,onChange:e=>h("maxMarks",parseInt(e.target.value)||1),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Answer Type"}),(0,ra.jsxs)("select",{value:n.answerType||"TEXT",onChange:e=>h("answerType",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,ra.jsx)("option",{value:"TEXT",children:"Text"}),(0,ra.jsx)("option",{value:"NUMERIC",children:"Numeric"}),(0,ra.jsx)("option",{value:"MATHS",children:"Maths (LaTeX)"}),(0,ra.jsx)("option",{value:"MIXED",children:"Mixed"})]})]})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mark Scheme"}),(0,ra.jsx)("textarea",{value:n.markScheme||"",onChange:e=>h("markScheme",e.target.value),placeholder:"Enter marking criteria...",rows:3,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Model Answer (Optional)"}),(0,ra.jsx)("textarea",{value:n.modelAnswer||"",onChange:e=>h("modelAnswer",e.target.value),placeholder:"Enter model answer for reference...",rows:2,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),(0,ra.jsx)("div",{className:"flex items-center gap-2",children:(0,ra.jsxs)("label",{className:"flex items-center gap-2",children:[(0,ra.jsx)("input",{type:"checkbox",checked:n.calculatorAllowed||!1,onChange:e=>h("calculatorAllowed",e.target.checked),className:"rounded"}),(0,ra.jsx)("span",{className:"text-sm",children:"Calculator allowed"})]})})]})]}):(0,ra.jsxs)("div",{children:[(0,ra.jsx)(Dc,{onQuestionsGenerated:e=>{if(e&&e.length>0){const t=e[0];i(a,u(u(u({},n),t),{},{questionNumber:n.questionNumber})),d("manual")}},assessmentMode:s}),(0,ra.jsx)("div",{className:"mt-4 bg-blue-50 border border-blue-200 rounded-lg p-3 text-sm text-blue-800",children:"\ud83d\udca1 AI will generate a question based on your specifications. You can edit it after generation."})]})})]})},zc={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_BACKEND_URL+"/api",qc=e=>{let{user:t}=e;const n=je(),{assessmentId:a}=Se(),i=!!a,[o,s]=(0,r.useState)(i),[l,c]=(0,r.useState)(!1),[d,h]=(0,r.useState)(1),[m,p]=(0,r.useState)(!1),[f,g]=(0,r.useState)({show:!1,message:"",type:"info"}),[v,y]=(0,r.useState)({assessmentMode:"",title:"",subject:"Mathematics",stage:"KS4",examBoard:"AQA",tier:"Higher",durationMinutes:45,instructions:"",shuffleQuestions:!1,shuffleOptions:!1,allowDraftSaving:!0,questions:[],class_id:null}),[b,x]=(0,r.useState)(!1);(0,r.useEffect)(()=>{i&&w()},[a]);const w=async()=>{try{const e=await ta.get("".concat(zc,"/teacher/assessments/").concat(a,"/enhanced"));y(e.data.assessment),h(3),s(!1)}catch(e){alert("Failed to load assessment"),n("/teacher/assessments")}},k=(e,t)=>{y(u(u({},v),{},{[e]:t}))},j=(e,t)=>{const r=[...v.questions];r[e]=t,y(u(u({},v),{},{questions:r}))},S=e=>{const t=v.questions.filter((t,r)=>r!==e),r=t.map((e,t)=>u(u({},e),{},{questionNumber:t+1}));y(u(u({},v),{},{questions:r}))},C=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",r=e;"object"===typeof e&&(r=Array.isArray(e)?e.map(e=>e.msg||JSON.stringify(e)).join(", "):e.message||JSON.stringify(e)),g({show:!0,message:r,type:t}),setTimeout(()=>{g({show:!1,message:"",type:"info"})},3e3)},N=()=>{if(console.log("\ud83d\udd0d Validating assessment..."),console.log("Title:",v.title),console.log("Questions count:",v.questions.length),console.log("Assessment mode:",v.assessmentMode),!v.title.trim())return console.log("\u274c Validation failed: No title"),C("Please enter an assessment title","error"),!1;if(0===v.questions.length)return console.log("\u274c Validation failed: No questions"),C("Please add at least one question","error"),!1;if("FORMATIVE_SINGLE_LONG_RESPONSE"===v.assessmentMode&&v.questions.length<1)return console.log("\u274c Validation failed: Formative mode needs at least 1 question"),C("Formative mode requires at least 1 question","error"),!1;if("SUMMATIVE_MULTI_QUESTION"===v.assessmentMode&&(v.questions.length<3||v.questions.length>20))return console.log("\u274c Validation failed: Summative mode needs 3-20 questions"),C("Summative mode requires 3-20 questions","error"),!1;for(const e of v.questions)if(!e.questionBody.trim())return console.log("\u274c Validation failed: Question ".concat(e.questionNumber," has no body")),C("Question ".concat(e.questionNumber," is missing question text"),"error"),!1;return console.log("\u2705 Validation passed"),!0},_=v.questions.reduce((e,t)=>"STRUCTURED_WITH_PARTS"===t.questionType?e+(t.parts||[]).reduce((e,t)=>e+(t.maxMarks||0),0):e+(t.maxMarks||0),0);return o?(0,ra.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,ra.jsxs)("div",{className:"text-center",children:[(0,ra.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,ra.jsx)("p",{className:"text-gray-600",children:"Loading assessment..."})]})}):(0,ra.jsxs)("div",{className:"min-h-screen bg-gray-50 pb-20",children:[(0,ra.jsx)("div",{className:"bg-white border-b sticky top-0 z-10",children:(0,ra.jsxs)("div",{className:"max-w-5xl mx-auto px-4 py-4",children:[(0,ra.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ra.jsxs)("div",{children:[(0,ra.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:i?"Edit Assessment":"Create New Assessment"}),(0,ra.jsxs)("p",{className:"text-sm text-gray-600",children:["Step ",d," of 3"]})]}),(0,ra.jsx)("button",{onClick:()=>n("/teacher/assessments"),className:"text-gray-600 hover:text-gray-900",children:"\u2715 Close"})]}),(0,ra.jsxs)("div",{className:"mt-4 flex gap-2",children:[(0,ra.jsx)("div",{className:"flex-1 h-1 rounded ".concat(d>=1?"bg-blue-600":"bg-gray-200")}),(0,ra.jsx)("div",{className:"flex-1 h-1 rounded ".concat(d>=2?"bg-blue-600":"bg-gray-200")}),(0,ra.jsx)("div",{className:"flex-1 h-1 rounded ".concat(d>=3?"bg-blue-600":"bg-gray-200")})]})]})}),(0,ra.jsxs)("div",{className:"max-w-5xl mx-auto px-4 py-6 space-y-6",children:[1===d&&(0,ra.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,ra.jsx)(Tc,{selectedMode:v.assessmentMode,onModeChange:e=>k("assessmentMode",e)}),(0,ra.jsx)("div",{className:"mt-6 flex justify-end",children:(0,ra.jsx)("button",{onClick:()=>h(2),disabled:!v.assessmentMode,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next: Assessment Details \u2192"})})]}),2===d&&(0,ra.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 space-y-4",children:[(0,ra.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Assessment Details"}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Assessment Title *"}),(0,ra.jsx)("input",{type:"text",value:v.title,onChange:e=>k("title",e.target.value),placeholder:"e.g., Quadratic Equations Mid-Term Assessment",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,ra.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject"}),(0,ra.jsxs)("select",{value:v.subject,onChange:e=>k("subject",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,ra.jsx)("option",{children:"Mathematics"}),(0,ra.jsx)("option",{children:"Physics"}),(0,ra.jsx)("option",{children:"Chemistry"}),(0,ra.jsx)("option",{children:"Biology"}),(0,ra.jsx)("option",{children:"English"}),(0,ra.jsx)("option",{children:"History"})]})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stage"}),(0,ra.jsxs)("select",{value:v.stage,onChange:e=>k("stage",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,ra.jsx)("option",{children:"KS3"}),(0,ra.jsx)("option",{children:"KS4"}),(0,ra.jsx)("option",{children:"KS5"})]})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Exam Board"}),(0,ra.jsxs)("select",{value:v.examBoard,onChange:e=>k("examBoard",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,ra.jsx)("option",{children:"AQA"}),(0,ra.jsx)("option",{children:"Edexcel"}),(0,ra.jsx)("option",{children:"OCR"}),(0,ra.jsx)("option",{children:"WJEC"}),(0,ra.jsx)("option",{children:"CIE"})]})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tier"}),(0,ra.jsxs)("select",{value:v.tier,onChange:e=>k("tier",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,ra.jsx)("option",{children:"Foundation"}),(0,ra.jsx)("option",{children:"Higher"}),(0,ra.jsx)("option",{children:"Intermediate"}),(0,ra.jsx)("option",{children:"None"})]})]})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration (minutes) - Between 1 and 60"}),(0,ra.jsx)("input",{type:"number",min:"1",max:"60",value:v.durationMinutes,onChange:e=>k("durationMinutes",parseInt(e.target.value)||45),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Instructions (Optional)"}),(0,ra.jsx)("textarea",{value:v.instructions,onChange:e=>k("instructions",e.target.value),placeholder:"Add any special instructions for students...",rows:3,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,ra.jsxs)("div",{className:"flex gap-4",children:[(0,ra.jsxs)("label",{className:"flex items-center gap-2",children:[(0,ra.jsx)("input",{type:"checkbox",checked:v.shuffleQuestions,onChange:e=>k("shuffleQuestions",e.target.checked),disabled:"SUMMATIVE_MULTI_QUESTION"!==v.assessmentMode,className:"rounded"}),(0,ra.jsx)("span",{className:"text-sm",children:"Shuffle questions"})]}),(0,ra.jsxs)("label",{className:"flex items-center gap-2",children:[(0,ra.jsx)("input",{type:"checkbox",checked:v.shuffleOptions,onChange:e=>k("shuffleOptions",e.target.checked),className:"rounded"}),(0,ra.jsx)("span",{className:"text-sm",children:"Shuffle MCQ options"})]})]}),(0,ra.jsxs)("div",{className:"flex justify-between pt-4 border-t",children:[(0,ra.jsx)("button",{onClick:()=>h(1),className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"\u2190 Back"}),(0,ra.jsx)("button",{onClick:()=>h(3),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Next: Add Questions \u2192"})]})]}),3===d&&(0,ra.jsxs)(ra.Fragment,{children:[(0,ra.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg shadow-lg p-6",children:(0,ra.jsxs)("div",{className:"flex justify-between items-start",children:[(0,ra.jsxs)("div",{children:[(0,ra.jsx)("h2",{className:"text-2xl font-bold mb-2",children:v.title||"Untitled Assessment"}),(0,ra.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm opacity-90",children:[(0,ra.jsxs)("span",{children:["\ud83d\udcda ",v.subject]}),(0,ra.jsxs)("span",{children:["\u23f1\ufe0f ",v.durationMinutes," minutes"]}),(0,ra.jsxs)("span",{children:["\ud83d\udcdd ",v.questions.length," questions"]}),(0,ra.jsxs)("span",{children:["\ud83c\udfaf ",_," marks"]})]})]}),(0,ra.jsx)("button",{onClick:()=>h(2),className:"px-4 py-2 bg-white text-blue-600 rounded-lg hover:bg-blue-50 text-sm font-medium",children:"Edit Details"})]})}),(0,ra.jsxs)("div",{className:"space-y-4",children:[v.questions.map((e,t)=>(0,ra.jsx)(Lc,{question:e,questionIndex:t,onQuestionChange:j,onRemove:S,assessmentMode:v.assessmentMode,assessmentId:a},t)),(0,ra.jsxs)("div",{className:"flex gap-3",children:[(0,ra.jsx)("button",{onClick:()=>{const e={questionNumber:v.questions.length+1,questionType:"",questionBody:"",stimulusBlock:null,maxMarks:1,subject:v.subject,topic:"",difficulty:"Medium",tags:[],options:[],allowMultiSelect:!1,parts:[],answerType:"TEXT",calculatorAllowed:!1,markScheme:"",modelAnswer:"",source:"manual"};y(u(u({},v),{},{questions:[...v.questions,e]}))},className:"flex-1 py-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-400 hover:bg-blue-50 text-gray-600 hover:text-blue-600 font-medium transition-colors",children:"+ Add Question Manually"}),(0,ra.jsx)("button",{onClick:()=>x(!0),className:"flex-1 py-4 border-2 border-dashed border-purple-300 rounded-lg hover:border-purple-400 hover:bg-purple-50 text-purple-600 hover:text-purple-700 font-medium transition-colors",children:"\ud83e\udd16 Generate Multiple Questions with AI"})]})]}),b&&(0,ra.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,ra.jsx)("div",{className:"bg-white rounded-lg shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:(0,ra.jsxs)("div",{className:"p-6",children:[(0,ra.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,ra.jsx)("h3",{className:"text-xl font-bold",children:"AI Bulk Question Generator"}),(0,ra.jsx)("button",{onClick:()=>x(!1),className:"text-gray-400 hover:text-gray-600",children:"\u2715"})]}),(0,ra.jsx)(Dc,{onQuestionsGenerated:e=>{const t=e.map((e,t)=>u(u({},e),{},{questionNumber:v.questions.length+t+1}));y(u(u({},v),{},{questions:[...v.questions,...t]})),x(!1)},assessmentMode:v.assessmentMode})]})})}),(0,ra.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 flex justify-between items-center sticky bottom-0",children:[(0,ra.jsx)("button",{onClick:async()=>{if(console.log("\ud83d\udd35 Save Draft clicked"),N()){console.log("\u2705 Validation passed, saving..."),c(!0);try{if(console.log("\ud83d\udce4 Sending request to backend..."),console.log("Assessment data:",v),i)console.log("Updating existing assessment:",a),await ta.put("".concat(zc,"/teacher/assessments/").concat(a,"/questions"),v.questions),C("Draft saved successfully!","success");else{console.log("Creating new assessment");const e=await ta.post("".concat(zc,"/teacher/assessments/enhanced"),v);console.log("\u2705 Response received:",e.data),C("Assessment created as draft!","success"),n("/teacher/assessments/".concat(e.data.assessment.id,"/edit"))}}catch(o){var e,t,r;console.error("\u274c Error saving draft:",o),console.error("Error response:",o.response),console.error("Error details:",null===(e=o.response)||void 0===e?void 0:e.data);let n="Failed to save";if(null!==(t=o.response)&&void 0!==t&&null!==(r=t.data)&&void 0!==r&&r.detail){const e=o.response.data.detail;Array.isArray(e)?n=e.map(e=>e.msg||"Validation error").join(", "):"string"===typeof e&&(n=e)}else o.message&&(n=o.message);C(n,"error")}finally{c(!1),console.log("\ud83d\udd35 Save Draft completed")}}else console.log("\u274c Validation failed")},disabled:l,className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",children:l?"Saving...":"\ud83d\udcbe Save Draft"}),(0,ra.jsx)("button",{onClick:()=>{console.log("\ud83d\udfe2 Publish Assessment clicked"),N()?(console.log("\u2705 Validation passed, showing confirmation dialog"),p(!0)):console.log("\u274c Validation failed")},disabled:l,className:"px-6 py-3 bg-gradient-to-r from-green-600 to-blue-600 text-white rounded-lg hover:from-green-700 hover:to-blue-700 font-medium disabled:opacity-50",children:l?"Publishing...":"\ud83d\ude80 Publish Assessment"})]})]})]}),m&&(0,ra.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,ra.jsxs)("div",{className:"bg-white rounded-lg shadow-2xl max-w-md w-full p-6",children:[(0,ra.jsxs)("div",{className:"mb-4",children:[(0,ra.jsx)("div",{className:"flex items-center justify-center w-12 h-12 mx-auto mb-4 bg-green-100 rounded-full",children:(0,ra.jsx)("span",{className:"text-2xl",children:"\ud83d\ude80"})}),(0,ra.jsx)("h3",{className:"text-xl font-bold text-center text-gray-900 mb-2",children:"Publish Assessment?"}),(0,ra.jsx)("p",{className:"text-center text-gray-600",children:"Are you sure you want to publish this assessment? Students will be able to access it immediately."})]}),(0,ra.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,ra.jsx)("button",{onClick:()=>{console.log("\u274c User cancelled publish"),p(!1)},disabled:l,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 font-medium disabled:opacity-50",children:"Cancel"}),(0,ra.jsx)("button",{onClick:async()=>{console.log("\u2705 User confirmed publish"),p(!1),c(!0);try{let e=a;if(i)console.log("Updating existing assessment:",a),await ta.put("".concat(zc,"/teacher/assessments/").concat(a,"/questions"),v.questions);else{console.log("Creating assessment before publishing");e=(await ta.post("".concat(zc,"/teacher/assessments/enhanced"),v)).data.assessment.id,console.log("\u2705 Assessment created:",e)}console.log("\ud83d\udce4 Publishing assessment:",e),await ta.post("".concat(zc,"/teacher/assessments/").concat(e,"/publish")),console.log("\u2705 Assessment published successfully"),C("Assessment published successfully!","success"),setTimeout(()=>n("/teacher/assessments"),1500)}catch(o){var e,t,r;console.error("\u274c Error publishing:",o),console.error("Error response:",o.response),console.error("Error details:",null===(e=o.response)||void 0===e?void 0:e.data);let n="Failed to publish";if(null!==(t=o.response)&&void 0!==t&&null!==(r=t.data)&&void 0!==r&&r.detail){const e=o.response.data.detail;Array.isArray(e)?n=e.map(e=>e.msg||"Validation error").join(", "):"string"===typeof e&&(n=e)}else o.message&&(n=o.message);C(n,"error")}finally{c(!1),console.log("\ud83d\udfe2 Publish Assessment completed")}},disabled:l,className:"flex-1 px-4 py-2 bg-gradient-to-r from-green-600 to-blue-600 text-white rounded-lg hover:from-green-700 hover:to-blue-700 font-medium disabled:opacity-50",children:l?"Publishing...":"Publish"})]})]})}),f.show&&(0,ra.jsx)("div",{className:"fixed top-4 right-4 z-50 animate-slide-in",children:(0,ra.jsx)("div",{className:"px-6 py-4 rounded-lg shadow-lg ".concat("success"===f.type?"bg-green-600":"error"===f.type?"bg-red-600":"bg-blue-600"," text-white"),children:(0,ra.jsx)("p",{className:"font-medium",children:f.message})})})]})},Bc={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_BACKEND_URL+"/api",Fc=()=>{const{attemptId:e}=Se(),[t,n]=(je(),(0,r.useState)(null)),[a,i]=(0,r.useState)(null),[o,s]=(0,r.useState)(!0),[l,c]=(0,r.useState)(!1),[d,h]=(0,r.useState)(!1),[m,p]=(0,r.useState)(0),[f,g]=(0,r.useState)({}),[v,y]=(0,r.useState)(null),[b,x]=(0,r.useState)(!1),w=(0,r.useRef)(null),[k,j]=(0,r.useState)(!1);(0,r.useEffect)(()=>{S()},[e]),(0,r.useEffect)(()=>{if(null===a||void 0===a||!a.durationMinutes||null===a||void 0===a||!a.started_at||d)return;const e=new Date(a.started_at),t=60*a.durationMinutes*1e3,r=e.getTime()+t,n=Date.now(),i=r-n;if(!(i>0))return void _(!0);y(Math.floor(i/1e3));const o=setInterval(()=>{const e=Date.now(),t=r-e;t<=0?(clearInterval(o),_(!0)):y(Math.floor(t/1e3))},1e3);return()=>clearInterval(o)},[a,d]),(0,r.useEffect)(()=>{if(t&&!d)return w.current&&clearTimeout(w.current),w.current=setTimeout(()=>{C()},3e3),()=>{w.current&&clearTimeout(w.current)}},[f]);const S=async()=>{try{console.log("Loading enhanced attempt:",e);const t=await ta.get("".concat(Bc,"/public/enhanced-attempt/").concat(e));console.log("Attempt data:",t.data),n(t.data.attempt),i(t.data.assessment),t.data.attempt.answers&&g(t.data.attempt.answers),"marked"===t.data.attempt.status&&h(!0),s(!1)}catch(t){console.error("Error loading attempt:",t),alert("Failed to load assessment. Please check your link."),s(!1)}},C=async()=>{if(!b&&t){x(!0);try{await ta.post("".concat(Bc,"/public/enhanced-attempt/").concat(e,"/autosave"),{answers:f}),console.log("Auto-saved answers")}catch(r){console.error("Auto-save failed:",r)}finally{x(!1)}}},N=(e,t)=>{g(r=>u(u({},r),{},{[e]:t}))},_=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!e&&l||(e?await A(e):j(!0))},A=async function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];c(!0),j(!1);try{const r=await ta.post("".concat(Bc,"/public/enhanced-attempt/").concat(e,"/submit"),{answers:f,autoSubmitted:t});console.log("Submit response:",r.data),n(r.data.attempt),r.data.assessment&&i(r.data.assessment),h(!0)}catch(o){var r,a;console.error("Submit error:",o),alert((null===(r=o.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.detail)||"Failed to submit assessment"),c(!1)}},T=()=>{let e=0,t=0;return a.questions.forEach(r=>{var n;"STRUCTURED_WITH_PARTS"===r.questionType&&r.parts&&r.parts.length>0?(t+=r.parts.length,r.parts.forEach(t=>{var n;const a="".concat(r.questionNumber,"-").concat(t.partLabel);null!==(n=f[a])&&void 0!==n&&n.trim()&&e++})):(t+=1,null!==(n=f[r.questionNumber])&&void 0!==n&&n.trim()&&e++)}),{answeredCount:e,totalItems:t}};if(o)return(0,ra.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:(0,ra.jsxs)("div",{className:"text-center",children:[(0,ra.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,ra.jsx)("p",{className:"text-gray-600",children:"Loading assessment..."})]})});if(!t||!a)return(0,ra.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:(0,ra.jsxs)("div",{className:"text-center",children:[(0,ra.jsx)("p",{className:"text-xl text-gray-800",children:"Assessment not found"}),(0,ra.jsx)("p",{className:"text-gray-600 mt-2",children:"Please check your link and try again."})]})});if(!a.questions||!Array.isArray(a.questions)||0===a.questions.length)return(0,ra.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:(0,ra.jsxs)("div",{className:"text-center",children:[(0,ra.jsx)("p",{className:"text-xl text-gray-800",children:"No questions found"}),(0,ra.jsx)("p",{className:"text-gray-600 mt-2",children:"This assessment doesn't have any questions."})]})});if(d)return(0,ra.jsx)(Uc,{attempt:t,assessment:a});const E=a.questions[m];if(!E)return console.error("Current question not found:",{currentQuestionIndex:m,totalQuestions:a.questions.length}),(0,ra.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:(0,ra.jsxs)("div",{className:"text-center",children:[(0,ra.jsx)("p",{className:"text-xl text-gray-800",children:"Question not found"}),(0,ra.jsxs)("p",{className:"text-gray-600 mt-2",children:["Unable to load question ",m+1,"."]})]})});const O="FORMATIVE_SINGLE_LONG_RESPONSE"===a.assessmentMode;return(0,ra.jsxs)("div",{className:"min-h-screen bg-gray-50 flex",children:[(0,ra.jsxs)("div",{className:"w-64 bg-white border-r border-gray-200 p-4 overflow-y-auto",children:[(0,ra.jsxs)("div",{className:"mb-6",children:[(0,ra.jsx)("h2",{className:"text-lg font-bold text-gray-900 mb-1",children:a.title}),(0,ra.jsx)("p",{className:"text-sm text-gray-600",children:a.subject}),a.totalMarks&&(0,ra.jsxs)("p",{className:"text-sm text-gray-600",children:["Total: ",a.totalMarks," marks"]})]}),null!==v&&(0,ra.jsxs)("div",{className:"mb-6 p-3 rounded-lg ".concat(v<300?"bg-red-50 border border-red-200":"bg-blue-50 border border-blue-200"),children:[(0,ra.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Time Remaining"}),(0,ra.jsx)("p",{className:"text-2xl font-bold ".concat(v<300?"text-red-600":"text-blue-600"),children:(e=>{const t=Math.floor(e/60),r=e%60;return"".concat(t,":").concat(r.toString().padStart(2,"0"))})(v)})]}),(0,ra.jsxs)("div",{className:"mb-6",children:[(0,ra.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:["Progress: ",T().answeredCount," / ",T().totalItems]}),(0,ra.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,ra.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all",style:{width:"".concat(T().answeredCount/T().totalItems*100,"%")}})})]}),(0,ra.jsxs)("div",{className:"space-y-2",children:[(0,ra.jsx)("p",{className:"text-xs font-medium text-gray-500 uppercase mb-2",children:"Questions"}),a.questions.map((e,t)=>{const r="STRUCTURED_WITH_PARTS"===e.questionType&&e.parts&&e.parts.length>0,n=t===m;let a;var i;r?a=e.parts.every(t=>{var r;const n="".concat(e.questionNumber,"-").concat(t.partLabel);return null===(r=f[n])||void 0===r?void 0:r.trim()}):a=null===(i=f[e.questionNumber])||void 0===i?void 0:i.trim();return(0,ra.jsx)("div",{children:(0,ra.jsxs)("button",{onClick:()=>(e=>{p(e)})(t),className:"w-full text-left p-3 rounded-lg border transition-all ".concat(n?"bg-blue-600 text-white border-blue-600":a?"bg-green-50 border-green-300 text-green-900 hover:bg-green-100":"bg-white border-gray-200 hover:bg-gray-50"),children:[(0,ra.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ra.jsxs)("span",{className:"font-medium",children:["Question ",e.questionNumber]}),a&&!n&&(0,ra.jsx)("svg",{className:"w-5 h-5 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,ra.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})]}),e.maxMarks&&(0,ra.jsxs)("p",{className:"text-xs mt-1 ".concat(n?"text-blue-100":"text-gray-500"),children:[e.maxMarks," marks"]}),r&&(0,ra.jsxs)("p",{className:"text-xs mt-1 ".concat(n?"text-blue-100":"text-gray-500"),children:[e.parts.length," parts (a-",String.fromCharCode(96+e.parts.length),")"]})]})},e.questionNumber)})]}),(0,ra.jsx)("button",{onClick:()=>_(!1),disabled:l,className:"w-full mt-6 bg-gradient-to-r from-green-600 to-blue-600 text-white py-3 rounded-lg font-medium hover:from-green-700 hover:to-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Submitting...":"Submit Assessment"}),b&&(0,ra.jsx)("p",{className:"text-xs text-gray-500 text-center mt-2",children:"Auto-saving..."})]}),(0,ra.jsx)("div",{className:"flex-1 p-8 overflow-y-auto",children:(0,ra.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,ra.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[(0,ra.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ra.jsxs)("h2",{className:"text-2xl font-bold text-gray-900",children:["Question ",E.questionNumber]}),(0,ra.jsxs)("div",{className:"flex items-center gap-4",children:[E.maxMarks&&!O&&(0,ra.jsxs)("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:[E.maxMarks," marks"]}),E.calculatorAllowed&&(0,ra.jsx)("span",{className:"px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm font-medium",children:"Calculator Allowed"})]})]}),(0,ra.jsx)("div",{className:"prose max-w-none",children:(0,ra.jsx)(hc,{text:E.questionBody||""})}),"STRUCTURED_WITH_PARTS"===E.questionType&&E.parts&&E.parts.length>0&&(0,ra.jsx)("div",{className:"mt-6 space-y-6",children:E.parts.map((e,t)=>{const r="".concat(E.questionNumber,"-").concat(e.partLabel);return(0,ra.jsxs)("div",{className:"border-l-4 border-blue-500 pl-4 py-2",children:[(0,ra.jsx)("div",{className:"flex items-start justify-between mb-3",children:(0,ra.jsxs)("div",{className:"flex-1",children:[(0,ra.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,ra.jsxs)("span",{className:"font-bold text-blue-600",children:["(",e.partLabel,")"]}),(0,ra.jsxs)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs font-medium",children:[e.maxMarks," ",1===e.maxMarks?"mark":"marks"]})]}),(0,ra.jsx)("div",{className:"prose max-w-none",children:(0,ra.jsx)(hc,{text:e.partPrompt||""})})]})}),(0,ra.jsx)("div",{className:"mt-3",children:(0,ra.jsx)(pc,{value:f[r]||"",onChange:e=>N(r,e),placeholder:"Your answer for part ".concat(e.partLabel,"..."),showKeyboard:!1})})]},t)})}),"MULTIPLE_CHOICE"===E.questionType&&E.options&&(0,ra.jsx)("div",{className:"mt-6 space-y-3",children:E.options.map((e,t)=>{const r="string"===typeof e?e:e.text||e.label||JSON.stringify(e);return(0,ra.jsxs)("label",{className:"block p-4 border-2 rounded-lg cursor-pointer transition-all ".concat(f[E.questionNumber]===r?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:[(0,ra.jsx)("input",{type:"radio",name:"question-".concat(E.questionNumber),value:r,checked:f[E.questionNumber]===r,onChange:e=>N(E.questionNumber,e.target.value),className:"mr-3"}),(0,ra.jsx)(hc,{text:r,inline:!0})]},t)})})]}),"MULTIPLE_CHOICE"!==E.questionType&&"STRUCTURED_WITH_PARTS"!==E.questionType&&(0,ra.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,ra.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Your Answer"}),(0,ra.jsx)(pc,{value:f[E.questionNumber]||"",onChange:e=>N(E.questionNumber,e),placeholder:"Type your answer here...",showKeyboard:!0}),(0,ra.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"You can use the math keyboard to insert mathematical symbols and expressions."})]}),(0,ra.jsxs)("div",{className:"flex justify-between mt-8",children:[(0,ra.jsxs)("button",{onClick:()=>{m>0&&p(m-1)},disabled:0===m,className:"px-6 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[(0,ra.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})}),"Previous"]}),m<a.questions.length-1?(0,ra.jsxs)("button",{onClick:()=>{m<a.questions.length-1&&p(m+1)},className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",children:["Next",(0,ra.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})]}):(0,ra.jsx)("button",{onClick:()=>_(!1),disabled:l,className:"px-6 py-3 bg-gradient-to-r from-green-600 to-blue-600 text-white rounded-lg hover:from-green-700 hover:to-blue-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:l?"Submitting...":"Submit Assessment"})]})]})}),k&&(0,ra.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,ra.jsxs)("div",{className:"bg-white rounded-lg shadow-2xl max-w-md w-full p-6",children:[(0,ra.jsxs)("div",{className:"mb-4",children:[(0,ra.jsx)("div",{className:"flex items-center justify-center w-12 h-12 mx-auto mb-4 bg-yellow-100 rounded-full",children:(0,ra.jsx)("span",{className:"text-2xl",children:"\u26a0\ufe0f"})}),(0,ra.jsx)("h3",{className:"text-xl font-bold text-center text-gray-900 mb-2",children:"Submit Assessment?"}),(0,ra.jsx)("p",{className:"text-center text-gray-600",children:"Are you sure you want to submit? You cannot change your answers after submission."})]}),(0,ra.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,ra.jsx)("button",{onClick:()=>j(!1),disabled:l,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 font-medium disabled:opacity-50",children:"Cancel"}),(0,ra.jsx)("button",{onClick:()=>A(!1),disabled:l,className:"flex-1 px-4 py-2 bg-gradient-to-r from-green-600 to-blue-600 text-white rounded-lg hover:from-green-700 hover:to-blue-700 font-medium disabled:opacity-50",children:l?"Submitting...":"Submit"})]})]})})]})},Uc=e=>{let{attempt:t,assessment:r}=e;const n=t.feedback_released||!1,a="FORMATIVE_SINGLE_LONG_RESPONSE"===r.assessmentMode;return n?(0,ra.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,ra.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,ra.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[(0,ra.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Assessment Results"}),!a&&null!==t.score&&(0,ra.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6",children:[(0,ra.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Your Score"}),(0,ra.jsxs)("p",{className:"text-4xl font-bold text-blue-600",children:[t.score," / ",r.totalMarks]})]}),t.www&&(0,ra.jsxs)("div",{className:"mb-6",children:[(0,ra.jsx)("h3",{className:"text-lg font-semibold text-green-700 mb-2",children:"\u2705 What Went Well (WWW)"}),(0,ra.jsx)("p",{className:"text-gray-700 whitespace-pre-wrap",children:t.www})]}),t.next_steps&&(0,ra.jsxs)("div",{className:"mb-6",children:[(0,ra.jsx)("h3",{className:"text-lg font-semibold text-orange-700 mb-2",children:"\ud83d\udcc8 Even Better If / Next Steps (EBI)"}),(0,ra.jsx)("p",{className:"text-gray-700 whitespace-pre-wrap",children:t.next_steps})]}),t.overall_feedback&&(0,ra.jsxs)("div",{className:"mb-6",children:[(0,ra.jsx)("h3",{className:"text-lg font-semibold text-blue-700 mb-2",children:"\ud83d\udcac Overall Feedback"}),(0,ra.jsx)("p",{className:"text-gray-700 whitespace-pre-wrap",children:t.overall_feedback})]})]})})}):(0,ra.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6",children:(0,ra.jsx)("div",{className:"max-w-3xl mx-auto bg-white rounded-2xl shadow-xl p-8",children:(0,ra.jsxs)("div",{className:"text-center",children:[(0,ra.jsx)("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,ra.jsx)("svg",{className:"w-10 h-10 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),(0,ra.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Submission Received!"}),(0,ra.jsxs)("p",{className:"text-lg text-gray-600 mb-6",children:["Thank you, ",t.student_name]}),(0,ra.jsxs)("div",{className:"bg-blue-50 p-6 rounded-lg",children:[(0,ra.jsx)("p",{className:"text-gray-700",children:"Your answers have been submitted successfully and are being reviewed by your teacher."}),(0,ra.jsx)("p",{className:"text-gray-700 mt-4",children:"Your teacher will review your work and release feedback when ready. Please check back later."})]})]})})})},Hc={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_BACKEND_URL+"/api",Wc=e=>{var t,n;let{user:a}=e;const{assessmentId:i}=Se(),o=je(),[s,l]=(0,r.useState)(!0),[c,u]=(0,r.useState)(null),[d,h]=(0,r.useState)(new Set);(0,r.useEffect)(()=>{m()},[i]);const m=async()=>{try{const e=await ta.get("".concat(Hc,"/teacher/assessments/").concat(i,"/enhanced"));u(e.data),l(!1)}catch(e){console.error("Error loading assessment:",e),l(!1)}};if(s)return(0,ra.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,ra.jsxs)("div",{className:"text-center",children:[(0,ra.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,ra.jsx)("p",{className:"text-gray-600",children:"Loading submissions..."})]})});if(!c)return(0,ra.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,ra.jsx)("p",{className:"text-xl text-gray-800",children:"Assessment not found"})});const{assessment:p,submissions:f,attempts_count:g}=c,v="FORMATIVE_SINGLE_LONG_RESPONSE"===p.assessmentMode,y=(null===f||void 0===f?void 0:f.filter(e=>"marked"===e.status&&!e.feedback_released).length)||0;return(0,ra.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,ra.jsx)("nav",{className:"bg-white shadow-sm border-b",children:(0,ra.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-4 flex justify-between items-center",children:[(0,ra.jsxs)("div",{className:"flex items-center gap-6",children:[(0,ra.jsx)("h1",{className:"text-2xl font-bold text-blue-600",children:"BlueAI"}),(0,ra.jsx)("button",{onClick:()=>o("/teacher/assessments"),className:"text-gray-700 hover:text-blue-600",children:"\u2190 Back to Assessments"})]}),(0,ra.jsx)("span",{className:"text-gray-700",children:a.name})]})}),(0,ra.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[(0,ra.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:[(0,ra.jsx)("div",{className:"flex justify-between items-start mb-4",children:(0,ra.jsxs)("div",{className:"flex-1",children:[(0,ra.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:p.title}),(0,ra.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,ra.jsxs)("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm font-medium",children:["\u2728 ",null===(t=p.assessmentMode)||void 0===t?void 0:t.replace(/_/g," ")]}),v&&(0,ra.jsx)("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm font-medium",children:"Feedback Only"})]}),(0,ra.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-600",children:[(0,ra.jsxs)("div",{children:[(0,ra.jsxs)("p",{children:[(0,ra.jsx)("strong",{children:"Subject:"})," ",p.subject]}),(0,ra.jsxs)("p",{children:[(0,ra.jsx)("strong",{children:"Questions:"})," ",(null===(n=p.questions)||void 0===n?void 0:n.length)||0]}),!v&&(0,ra.jsxs)("p",{children:[(0,ra.jsx)("strong",{children:"Total Marks:"})," ",p.totalMarks]})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsxs)("p",{children:[(0,ra.jsx)("strong",{children:"Duration:"})," ",p.durationMinutes," minutes"]}),(0,ra.jsxs)("p",{children:[(0,ra.jsx)("strong",{children:"Join Code:"})," ",(0,ra.jsx)("span",{className:"text-blue-600 font-bold",children:p.join_code})]}),(0,ra.jsxs)("p",{children:[(0,ra.jsx)("strong",{children:"Submissions:"})," ",g]})]})]})]})}),y>0&&(0,ra.jsx)("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,ra.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ra.jsxs)("p",{className:"text-sm text-gray-700",children:[(0,ra.jsx)("strong",{children:y})," marked submission(s) waiting to be released"]}),(0,ra.jsx)("button",{onClick:async()=>{if(window.confirm("Release feedback for all marked submissions? Students will be able to see their feedback immediately."))try{const e=await ta.post("".concat(Hc,"/teacher/assessments/").concat(i,"/release-all-feedback"));alert(e.data.message),m()}catch(r){var e,t;console.error("Bulk release feedback error:",r),alert((null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||"Failed to release feedback")}},className:"bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700",children:"Release All Feedback"})]})})]}),(0,ra.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,ra.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Student Submissions"}),f&&f.length>0?(0,ra.jsx)("div",{className:"space-y-4",children:f.map(e=>(0,ra.jsx)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:(0,ra.jsxs)("div",{className:"flex justify-between items-start",children:[(0,ra.jsxs)("div",{className:"flex-1",children:[(0,ra.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,ra.jsx)("h4",{className:"text-lg font-semibold text-gray-900",children:e.student_name}),(0,ra.jsx)(Kc,{status:e.status}),e.feedback_released&&(0,ra.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded text-xs font-medium",children:"Released"}),e.autosubmitted&&(0,ra.jsx)("span",{className:"px-2 py-1 bg-orange-100 text-orange-700 rounded text-xs font-medium",children:"Auto-submitted"})]}),(0,ra.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,ra.jsxs)("p",{children:[(0,ra.jsx)("strong",{children:"Submitted:"})," ",e.submitted_at?new Date(e.submitted_at).toLocaleString():"N/A"]}),"marked"===e.status&&!v&&null!==e.score&&(0,ra.jsxs)("p",{children:[(0,ra.jsx)("strong",{children:"Score:"})," ",e.score," / ",p.totalMarks]}),"marked"===e.status&&e.marked_at&&(0,ra.jsxs)("p",{children:[(0,ra.jsx)("strong",{children:"Marked:"})," ",new Date(e.marked_at).toLocaleString()]})]})]}),(0,ra.jsxs)("div",{className:"flex gap-2",children:[(0,ra.jsx)("button",{onClick:()=>o("/teacher/submissions/".concat(e.attempt_id,"/enhanced")),className:"bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 text-sm",children:"marked"===e.status?"View":"Mark"}),"marked"===e.status&&!e.feedback_released&&(0,ra.jsx)("button",{onClick:()=>(async e=>{if(!d.has(e)){h(t=>new Set(t).add(e));try{await ta.post("".concat(Hc,"/teacher/submissions/").concat(e,"/release-feedback")),m()}catch(n){var t,r;console.error("Release feedback error:",n),alert((null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||"Failed to release feedback")}finally{h(t=>{const r=new Set(t);return r.delete(e),r})}}})(e.attempt_id),disabled:d.has(e.attempt_id),className:"bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 text-sm disabled:opacity-50",children:d.has(e.attempt_id)?"Releasing...":"Release"}),"submitted"===e.status&&!e.auto_marked&&(0,ra.jsx)("button",{onClick:()=>(async e=>{if(!d.has(e)&&window.confirm("Use AI to automatically mark this submission? You can review and adjust the marks afterwards.")){h(t=>new Set(t).add(e));try{await ta.post("".concat(Hc,"/teacher/submissions/").concat(e,"/auto-mark")),alert("Submission auto-marked successfully! Review the feedback before releasing."),m()}catch(n){var t,r;console.error("Auto-mark error:",n),alert((null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||"Failed to auto-mark submission")}finally{h(t=>{const r=new Set(t);return r.delete(e),r})}}})(e.attempt_id),disabled:d.has(e.attempt_id),className:"bg-purple-600 text-white py-2 px-4 rounded-lg hover:bg-purple-700 text-sm disabled:opacity-50",children:d.has(e.attempt_id)?"Marking...":"\ud83e\udd16 Auto-Mark"})]})]})},e.attempt_id))}):(0,ra.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,ra.jsx)("p",{children:"No submissions yet"}),(0,ra.jsxs)("p",{className:"text-sm mt-2",children:["Students can join using code: ",(0,ra.jsx)("strong",{className:"text-blue-600",children:p.join_code})]})]})]})]})]})},Kc=e=>{let{status:t}=e;const r={in_progress:"bg-yellow-100 text-yellow-800",submitted:"bg-blue-100 text-blue-800",marked:"bg-green-100 text-green-800",error:"bg-red-100 text-red-800"};return(0,ra.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat(r[t]||r.in_progress),children:t.replace("_"," ").toUpperCase()})},Vc={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_BACKEND_URL+"/api",Gc=e=>{var t,n;let{user:a}=e;const{attemptId:i}=Se(),o=je(),[s,l]=(0,r.useState)(!0),[c,d]=(0,r.useState)(!1),[h,m]=(0,r.useState)(null),[p,f]=(0,r.useState)({}),[g,v]=(0,r.useState)(""),[y,b]=(0,r.useState)(""),[x,w]=(0,r.useState)("");(0,r.useEffect)(()=>{k()},[i]);const k=async()=>{try{const e=await ta.get("".concat(Vc,"/teacher/submissions/").concat(i,"/enhanced"));m(e.data),"marked"===e.data.attempt.status&&(v(e.data.attempt.www||""),b(e.data.attempt.next_steps||""),w(e.data.attempt.overall_feedback||""),e.data.attempt.questionScores&&f(e.data.attempt.questionScores)),l(!1)}catch(e){console.error("Error loading submission:",e),alert("Failed to load submission"),l(!1)}},j=(e,t)=>{f(r=>u(u({},r),{},{[e]:parseInt(t)||0}))},S=()=>Object.values(p).reduce((e,t)=>e+(t||0),0);if(s)return(0,ra.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,ra.jsxs)("div",{className:"text-center",children:[(0,ra.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,ra.jsx)("p",{className:"text-gray-600",children:"Loading submission..."})]})});if(!h)return(0,ra.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,ra.jsx)("p",{className:"text-xl text-gray-800",children:"Submission not found"})});const{attempt:C,assessment:N}=h,_="FORMATIVE_SINGLE_LONG_RESPONSE"===N.assessmentMode,A=C.answers||{};return(0,ra.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,ra.jsx)("nav",{className:"bg-white shadow-sm border-b",children:(0,ra.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-4 flex justify-between items-center",children:[(0,ra.jsxs)("div",{className:"flex items-center gap-6",children:[(0,ra.jsx)("h1",{className:"text-2xl font-bold text-blue-600",children:"BlueAI"}),(0,ra.jsx)("button",{onClick:()=>o("/teacher/assessments/".concat(N.id)),className:"text-gray-700 hover:text-blue-600",children:"\u2190 Back to Submissions"})]}),(0,ra.jsx)("span",{className:"text-gray-700",children:a.name})]})}),(0,ra.jsxs)("div",{className:"max-w-6xl mx-auto px-6 py-8",children:[(0,ra.jsx)("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:(0,ra.jsxs)("div",{className:"flex justify-between items-start",children:[(0,ra.jsxs)("div",{children:[(0,ra.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:[C.student_name,"'s Submission"]}),(0,ra.jsx)("p",{className:"text-gray-600",children:N.title}),(0,ra.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,ra.jsx)("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm font-medium",children:null===(t=N.assessmentMode)||void 0===t?void 0:t.replace(/_/g," ")}),_&&(0,ra.jsx)("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm",children:"Feedback Only (No Score)"})]})]}),!_&&(0,ra.jsxs)("div",{className:"text-right",children:[(0,ra.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Total Score"}),(0,ra.jsxs)("p",{className:"text-3xl font-bold text-blue-600",children:[S()," / ",N.totalMarks]})]})]})}),(0,ra.jsx)("div",{className:"space-y-6 mb-6",children:null===(n=N.questions)||void 0===n?void 0:n.map((e,t)=>{const r="STRUCTURED_WITH_PARTS"===e.questionType&&e.parts&&e.parts.length>0;return(0,ra.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,ra.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,ra.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:["Question ",e.questionNumber]}),(0,ra.jsx)("div",{className:"flex items-center gap-2",children:e.maxMarks&&!_&&(0,ra.jsxs)("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:[e.maxMarks," marks"]})})]}),(0,ra.jsxs)("div",{className:"mb-4 p-4 bg-gray-50 rounded-lg",children:[(0,ra.jsx)("p",{className:"text-sm text-gray-600 mb-2 font-medium",children:"Question:"}),(0,ra.jsx)("div",{className:"prose max-w-none",children:(0,ra.jsx)(hc,{text:e.questionBody||""})})]}),r?(0,ra.jsx)("div",{className:"space-y-4",children:e.parts.map((t,r)=>{const n="".concat(e.questionNumber,"-").concat(t.partLabel),a=A[n];return(0,ra.jsxs)("div",{className:"border-l-4 border-blue-500 pl-4 py-2",children:[(0,ra.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,ra.jsxs)("span",{className:"font-bold text-blue-600 text-lg",children:["(",t.partLabel,")"]}),(0,ra.jsxs)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs font-medium",children:[t.maxMarks," ",1===t.maxMarks?"mark":"marks"]})]}),(0,ra.jsx)("div",{className:"mb-3 p-3 bg-gray-50 rounded",children:(0,ra.jsx)("div",{className:"prose max-w-none text-sm",children:(0,ra.jsx)(hc,{text:t.partPrompt||""})})}),(0,ra.jsxs)("div",{className:"mb-3 p-3 bg-blue-50 rounded",children:[(0,ra.jsx)("p",{className:"text-xs text-gray-600 mb-1 font-medium",children:"Student's Answer:"}),(0,ra.jsx)("div",{className:"prose max-w-none",children:a?(0,ra.jsx)(hc,{text:String(a)}):(0,ra.jsx)("p",{className:"text-gray-500 italic text-sm",children:"No answer provided"})})]}),t.markScheme&&(0,ra.jsxs)("div",{className:"mb-3 p-3 bg-green-50 rounded",children:[(0,ra.jsx)("p",{className:"text-xs text-gray-600 mb-1 font-medium",children:"Mark Scheme:"}),(0,ra.jsx)("div",{className:"prose max-w-none text-sm",children:(0,ra.jsx)(hc,{text:t.markScheme||""})})]}),!_&&(0,ra.jsxs)("div",{className:"mt-3",children:[(0,ra.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Marks for part ",t.partLabel,":"]}),(0,ra.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ra.jsx)("input",{type:"number",min:"0",max:t.maxMarks,value:p[n]||0,onChange:e=>j(n,e.target.value),className:"w-20 px-3 py-1 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),(0,ra.jsxs)("span",{className:"text-sm text-gray-600",children:["out of ",t.maxMarks]})]})]})]},r)})}):(0,ra.jsxs)(ra.Fragment,{children:[(0,ra.jsxs)("div",{className:"mb-4 p-4 bg-blue-50 rounded-lg",children:[(0,ra.jsx)("p",{className:"text-sm text-gray-600 mb-2 font-medium",children:"Student's Answer:"}),(0,ra.jsx)("div",{className:"prose max-w-none",children:A[e.questionNumber]?(0,ra.jsx)(hc,{text:String(A[e.questionNumber])}):(0,ra.jsx)("p",{className:"text-gray-500 italic",children:"No answer provided"})})]}),e.markScheme&&(0,ra.jsxs)("div",{className:"mb-4 p-4 bg-green-50 rounded-lg",children:[(0,ra.jsx)("p",{className:"text-sm text-gray-600 mb-2 font-medium",children:"Mark Scheme:"}),(0,ra.jsx)("div",{className:"prose max-w-none text-sm",children:(0,ra.jsx)(hc,{text:e.markScheme||""})})]}),e.modelAnswer&&(0,ra.jsxs)("div",{className:"mb-4 p-4 bg-purple-50 rounded-lg",children:[(0,ra.jsx)("p",{className:"text-sm text-gray-600 mb-2 font-medium",children:"Model Answer:"}),(0,ra.jsx)("div",{className:"prose max-w-none text-sm",children:(0,ra.jsx)(hc,{text:e.modelAnswer||""})})]}),!_&&e.maxMarks&&(0,ra.jsxs)("div",{className:"mt-4",children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Marks Awarded:"}),(0,ra.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ra.jsx)("input",{type:"number",min:"0",max:e.maxMarks,value:p[e.questionNumber]||0,onChange:t=>j(e.questionNumber,t.target.value),className:"w-24 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),(0,ra.jsxs)("span",{className:"text-gray-600",children:["out of ",e.maxMarks]})]})]})]})]},e.questionNumber)})}),(0,ra.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:[(0,ra.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Overall Feedback"}),(0,ra.jsxs)("div",{className:"mb-4",children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-green-700 mb-2",children:"\u2705 What Went Well (WWW)"}),(0,ra.jsx)("textarea",{value:g,onChange:e=>v(e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500",placeholder:"What did the student do well?"})]}),(0,ra.jsxs)("div",{className:"mb-4",children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-orange-700 mb-2",children:"\ud83d\udcc8 Even Better If / Next Steps (EBI)"}),(0,ra.jsx)("textarea",{value:y,onChange:e=>b(e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500",placeholder:"What could the student improve?"})]}),(0,ra.jsxs)("div",{className:"mb-4",children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-blue-700 mb-2",children:"\ud83d\udcac Overall Feedback"}),(0,ra.jsx)("textarea",{value:x,onChange:e=>w(e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"General comments or summary"})]})]}),(0,ra.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,ra.jsx)("button",{onClick:()=>o("/teacher/assessments/".concat(N.id)),className:"px-6 py-3 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),(0,ra.jsx)("button",{onClick:async()=>{d(!0);try{const e=S();await ta.post("".concat(Vc,"/teacher/submissions/").concat(i,"/mark-enhanced"),{questionScores:p,totalScore:e,www:g,next_steps:y,overall_feedback:x}),alert("Feedback saved successfully!"),k()}catch(r){var e,t;console.error("Error saving feedback:",r),alert((null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||"Failed to save feedback")}finally{d(!1)}},disabled:c,className:"px-6 py-3 bg-gradient-to-r from-green-600 to-blue-600 text-white rounded-lg hover:from-green-700 hover:to-blue-700 disabled:opacity-50 font-medium",children:c?"Saving...":"Save Feedback"})]})]})]})},Qc={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_BACKEND_URL+"/api",Yc=e=>{let{children:t,adminOnly:n=!1}=e;const[a,i]=(0,r.useState)(null),[o,s]=(0,r.useState)(null),l=je(),c=xe();return(0,r.useEffect)(()=>{var e;if(null!==(e=c.state)&&void 0!==e&&e.user)return s(c.state.user),void i(!0);(async()=>{try{const e=await ta.get("".concat(Qc,"/auth/me"));if(s(e.data),n&&"admin"!==e.data.role)return void l("/teacher/dashboard");i(!0)}catch(e){i(!1),l("/teacher/login",{state:{from:c.pathname}})}})()},[c,l,n]),null===a?(0,ra.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,ra.jsx)("div",{className:"text-lg",children:"Loading..."})}):a?t(o):null},$c=window.location.origin,Jc="".concat($c,"/api"),Xc=e=>{let{user:t}=e;const[n,a]=(0,r.useState)([]),[i,o]=(0,r.useState)([]),[s,l]=(0,r.useState)([]),[c,d]=(0,r.useState)([]),[h,m]=(0,r.useState)(!0),[p,f]=(0,r.useState)(!1),[g,v]=(0,r.useState)(!1),[y,b]=(0,r.useState)("assessments"),[x,w]=(0,r.useState)({question_id:"",class_id:"",duration_minutes:"",auto_close:!1}),[k,j]=(0,r.useState)({name:"",description:"",question_id:"",default_class_id:"",duration_minutes:"",auto_close:!1}),S=je();(0,r.useEffect)(()=>{C()},[]);const C=async()=>{try{const[e,t,r,n]=await Promise.all([ta.get("".concat(Jc,"/teacher/assessments")),ta.get("".concat(Jc,"/teacher/questions")),ta.get("".concat(Jc,"/teacher/classes")),ta.get("".concat(Jc,"/teacher/templates"))]);a(e.data),o(t.data),l(r.data.classes||[]),d(n.data.templates||[]),m(!1)}catch(e){console.error("Error loading data:",e),m(!1)}},N=async e=>{try{await ta.post("".concat(Jc,"/teacher/assessments/").concat(e,"/start")),C()}catch(t){alert("Failed to start assessment")}},_=e=>{const t={draft:"bg-gray-100 text-gray-700",published:"bg-blue-100 text-blue-700",started:"bg-green-100 text-green-700",closed:"bg-red-100 text-red-700"};return(0,ra.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat(t[e]||t.draft),children:e.toUpperCase()})};return(0,ra.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,ra.jsx)("nav",{className:"bg-white shadow-sm border-b",children:(0,ra.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-4 flex justify-between items-center",children:[(0,ra.jsxs)("div",{className:"flex items-center gap-6",children:[(0,ra.jsx)("h1",{className:"text-2xl font-bold text-blue-600",children:"BlueAI"}),(0,ra.jsxs)("div",{className:"flex gap-4",children:[(0,ra.jsx)("button",{onClick:()=>S("/teacher/dashboard"),className:"text-gray-700 hover:text-blue-600",children:"Dashboard"}),(0,ra.jsx)("button",{onClick:()=>S("/teacher/questions"),className:"text-gray-700 hover:text-blue-600",children:"Questions"}),(0,ra.jsx)("button",{onClick:()=>S("/teacher/assessments"),className:"text-blue-600 font-medium",children:"Assessments"}),"admin"===t.role&&(0,ra.jsx)("button",{onClick:()=>S("/admin/dashboard"),className:"text-gray-700 hover:text-blue-600",children:"Admin"})]})]}),(0,ra.jsx)("span",{className:"text-gray-700",children:t.name})]})}),(0,ra.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[(0,ra.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,ra.jsx)("h2",{className:"text-3xl font-bold text-gray-900","data-testid":"assessments-title",children:"Assessments"}),(0,ra.jsx)("div",{className:"flex gap-2",children:"templates"===y?(0,ra.jsx)("button",{onClick:()=>v(!0),className:"bg-purple-600 text-white py-2 px-4 rounded-lg hover:bg-purple-700","data-testid":"new-template-btn",children:"New Template"}):(0,ra.jsxs)(ra.Fragment,{children:[(0,ra.jsxs)("button",{onClick:()=>S("/teacher/assessments/create"),className:"bg-gradient-to-r from-purple-600 to-blue-600 text-white py-2 px-4 rounded-lg hover:from-purple-700 hover:to-blue-700 font-medium flex items-center gap-2",children:[(0,ra.jsx)("span",{children:"\u2728"}),"Create Enhanced Assessment"]}),(0,ra.jsx)("button",{onClick:()=>f(!0),className:"bg-gray-600 text-white py-2 px-4 rounded-lg hover:bg-gray-700","data-testid":"new-assessment-btn",children:"Classic Mode"})]})})]}),(0,ra.jsxs)("div",{className:"flex bg-gray-100 rounded-lg p-1 mb-6 w-fit",children:[(0,ra.jsxs)("button",{onClick:()=>b("assessments"),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors ".concat("assessments"===y?"bg-white text-blue-600 shadow":"text-gray-600 hover:text-gray-900"),"data-testid":"assessments-tab",children:["Assessments (",n.length,")"]}),(0,ra.jsxs)("button",{onClick:()=>b("templates"),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors ".concat("templates"===y?"bg-white text-purple-600 shadow":"text-gray-600 hover:text-gray-900"),"data-testid":"templates-tab",children:["Templates (",c.length,")"]})]}),"templates"===y&&(0,ra.jsxs)(ra.Fragment,{children:[g&&(0,ra.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow mb-6 border-2 border-purple-200","data-testid":"template-form",children:[(0,ra.jsx)("h3",{className:"text-xl font-semibold mb-4 text-purple-700",children:"Create Template"}),(0,ra.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{await ta.post("".concat(Jc,"/teacher/templates"),{name:k.name,description:k.description||null,question_id:k.question_id,default_class_id:k.default_class_id||null,duration_minutes:k.duration_minutes?parseInt(k.duration_minutes):null,auto_close:k.auto_close}),v(!1),j({name:"",description:"",question_id:"",default_class_id:"",duration_minutes:"",auto_close:!1}),C(),alert("Template created successfully!")}catch(n){var t,r;alert((null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||"Failed to create template")}},className:"space-y-4",children:[(0,ra.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Template Name *"}),(0,ra.jsx)("input",{type:"text",className:"w-full px-3 py-2 border rounded-lg",value:k.name,onChange:e=>j(u(u({},k),{},{name:e.target.value})),required:!0,placeholder:"e.g., Weekly Physics Quiz","data-testid":"template-name-input"})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,ra.jsx)("input",{type:"text",className:"w-full px-3 py-2 border rounded-lg",value:k.description,onChange:e=>j(u(u({},k),{},{description:e.target.value})),placeholder:"Optional description"})]})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Question *"}),(0,ra.jsxs)("select",{className:"w-full px-3 py-2 border rounded-lg",value:k.question_id,onChange:e=>j(u(u({},k),{},{question_id:e.target.value})),required:!0,"data-testid":"template-question-select",children:[(0,ra.jsx)("option",{value:"",children:"-- Select a question --"}),i.map(e=>(0,ra.jsxs)("option",{value:e.id,children:[e.subject," - ",e.topic]},e.id))]})]}),(0,ra.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Default Class"}),(0,ra.jsxs)("select",{className:"w-full px-3 py-2 border rounded-lg",value:k.default_class_id,onChange:e=>j(u(u({},k),{},{default_class_id:e.target.value})),children:[(0,ra.jsx)("option",{value:"",children:"-- No default class --"}),s.map(e=>(0,ra.jsx)("option",{value:e.id,children:e.class_name},e.id))]})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration (minutes)"}),(0,ra.jsx)("input",{type:"number",className:"w-full px-3 py-2 border rounded-lg",value:k.duration_minutes,onChange:e=>j(u(u({},k),{},{duration_minutes:e.target.value})),placeholder:"Optional",min:"1"})]})]}),(0,ra.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ra.jsx)("input",{type:"checkbox",id:"template_auto_close",checked:k.auto_close,onChange:e=>j(u(u({},k),{},{auto_close:e.target.checked}))}),(0,ra.jsx)("label",{htmlFor:"template_auto_close",className:"text-sm text-gray-700",children:"Auto-close when time expires"})]}),(0,ra.jsxs)("div",{className:"flex gap-2",children:[(0,ra.jsx)("button",{type:"submit",className:"bg-purple-600 text-white py-2 px-4 rounded-lg hover:bg-purple-700","data-testid":"save-template-btn",children:"Save Template"}),(0,ra.jsx)("button",{type:"button",onClick:()=>v(!1),className:"bg-gray-200 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-300",children:"Cancel"})]})]})]}),0===c.length?(0,ra.jsxs)("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[(0,ra.jsx)("div",{className:"text-purple-600 mb-4",children:(0,ra.jsx)("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,ra.jsx)("p",{className:"text-gray-600 mb-4",children:"No templates yet. Create your first template to quickly reuse assessment configurations."}),(0,ra.jsx)("button",{onClick:()=>v(!0),className:"bg-purple-600 text-white py-2 px-4 rounded-lg hover:bg-purple-700",children:"Create Template"})]}):(0,ra.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:c.map(e=>(0,ra.jsxs)("div",{className:"bg-white rounded-lg shadow p-5 border-l-4 border-purple-500 hover:shadow-md transition-shadow",children:[(0,ra.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,ra.jsx)("h3",{className:"font-semibold text-gray-900",children:e.name}),(0,ra.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Delete this template?"))try{await ta.delete("".concat(Jc,"/teacher/templates/").concat(e)),C()}catch(t){alert("Failed to delete template")}})(e.id),className:"text-gray-400 hover:text-red-600",title:"Delete template",children:(0,ra.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),e.description&&(0,ra.jsx)("p",{className:"text-sm text-gray-500 mb-3",children:e.description}),(0,ra.jsxs)("div",{className:"space-y-1 text-sm text-gray-600 mb-4",children:[(0,ra.jsxs)("p",{children:[(0,ra.jsx)("span",{className:"font-medium",children:"Question:"})," ",e.question_subject," - ",e.question_topic||"N/A"]}),e.default_class_name&&(0,ra.jsxs)("p",{children:[(0,ra.jsx)("span",{className:"font-medium",children:"Class:"})," ",e.default_class_name]}),e.duration_minutes&&(0,ra.jsxs)("p",{children:[(0,ra.jsx)("span",{className:"font-medium",children:"Duration:"})," ",e.duration_minutes," min"]}),(0,ra.jsxs)("p",{children:[(0,ra.jsx)("span",{className:"font-medium",children:"Used:"})," ",e.use_count," times"]})]}),(0,ra.jsxs)("button",{onClick:()=>(async e=>{try{const t=await ta.post("".concat(Jc,"/teacher/templates/").concat(e.id,"/create-assessment"));alert(t.data.message),b("assessments"),C()}catch(n){var t,r;alert((null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||"Failed to create assessment from template")}})(e),className:"w-full bg-purple-600 text-white py-2 px-4 rounded-lg hover:bg-purple-700 flex items-center justify-center gap-2","data-testid":"use-template-".concat(e.id),children:[(0,ra.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Create Assessment"]})]},e.id))})]}),"assessments"===y&&(0,ra.jsxs)(ra.Fragment,{children:[p&&(0,ra.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow mb-6","data-testid":"assessment-form",children:[(0,ra.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Create Assessment"}),(0,ra.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{await ta.post("".concat(Jc,"/teacher/assessments"),{question_id:x.question_id,class_id:x.class_id||null,duration_minutes:x.duration_minutes?parseInt(x.duration_minutes):null,auto_close:x.auto_close}),f(!1),w({question_id:"",class_id:"",duration_minutes:"",auto_close:!1}),C()}catch(t){alert("Failed to create assessment")}},className:"space-y-4",children:[(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Question"}),(0,ra.jsxs)("select",{className:"w-full px-3 py-2 border rounded-lg",value:x.question_id,onChange:e=>w(u(u({},x),{},{question_id:e.target.value})),required:!0,"data-testid":"question-select",children:[(0,ra.jsx)("option",{value:"",children:"-- Select a question --"}),i.map(e=>(0,ra.jsxs)("option",{value:e.id,children:[e.subject," - ",e.topic]},e.id))]})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Link to Class (Optional)"}),(0,ra.jsxs)("select",{className:"w-full px-3 py-2 border rounded-lg",value:x.class_id,onChange:e=>w(u(u({},x),{},{class_id:e.target.value})),"data-testid":"class-select",children:[(0,ra.jsx)("option",{value:"",children:"-- No class (students enter name) --"}),s.map(e=>(0,ra.jsxs)("option",{value:e.id,children:[e.class_name," ",e.subject?"(".concat(e.subject,")"):""," - ",e.student_count," students"]},e.id))]}),(0,ra.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"If linked, students will select their name from a dropdown instead of typing it."})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration (minutes)"}),(0,ra.jsx)("input",{type:"number",className:"w-full px-3 py-2 border rounded-lg",value:x.duration_minutes,onChange:e=>w(u(u({},x),{},{duration_minutes:e.target.value})),placeholder:"Optional - leave empty for no time limit",min:"1","data-testid":"duration-input"})]}),(0,ra.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ra.jsx)("input",{type:"checkbox",id:"auto_close",checked:x.auto_close,onChange:e=>w(u(u({},x),{},{auto_close:e.target.checked})),"data-testid":"auto-close-checkbox"}),(0,ra.jsx)("label",{htmlFor:"auto_close",className:"text-sm text-gray-700",children:"Auto-close when time expires"})]}),(0,ra.jsxs)("div",{className:"flex gap-2",children:[(0,ra.jsx)("button",{type:"submit",className:"bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700","data-testid":"create-assessment-submit",children:"Create Assessment"}),(0,ra.jsx)("button",{type:"button",onClick:()=>f(!1),className:"bg-gray-200 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-300","data-testid":"cancel-assessment-btn",children:"Cancel"})]})]})]}),h?(0,ra.jsx)("div",{className:"text-center py-12",children:"Loading..."}):0===n.length?(0,ra.jsx)("div",{className:"bg-white p-12 rounded-lg shadow text-center","data-testid":"no-assessments",children:(0,ra.jsx)("p",{className:"text-gray-600 mb-4",children:"No assessments yet"})}):(0,ra.jsx)("div",{className:"space-y-4","data-testid":"assessments-list",children:n.map(e=>{var t;const r=e.assessmentMode&&"CLASSIC"!==e.assessmentMode,n=i.find(t=>t.id===e.question_id),a=r?e.title||"Untitled Assessment":(null===n||void 0===n?void 0:n.subject)||"Unknown",o=(r?e.subject:null===n||void 0===n||n.subject,r?"".concat((null===(t=e.questions)||void 0===t?void 0:t.length)||0," questions"):(null===n||void 0===n?void 0:n.topic)||""),s=r?(e.assessmentMode||"ENHANCED").replace(/_/g," "):"CLASSIC";return(0,ra.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow","data-testid":"assessment-".concat(e.id),children:[(0,ra.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,ra.jsxs)("div",{className:"flex-1",children:[(0,ra.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,ra.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:a}),_(e.status),r&&(0,ra.jsxs)("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 rounded text-xs font-medium",children:["\u2728 ",s]})]}),(0,ra.jsx)("p",{className:"text-gray-600 mb-1",children:o}),e.duration_minutes&&(0,ra.jsxs)("p",{className:"text-sm text-gray-500",children:["Duration: ",e.duration_minutes," minutes"]}),r&&e.totalMarks&&(0,ra.jsxs)("p",{className:"text-sm text-gray-500",children:["Total Marks: ",e.totalMarks]})]}),(0,ra.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[(0,ra.jsxs)("div",{className:"bg-blue-50 px-4 py-2 rounded",children:[(0,ra.jsx)("p",{className:"text-xs text-gray-600",children:"Join Code"}),(0,ra.jsx)("p",{className:"text-xl font-bold text-blue-600","data-testid":"join-code-".concat(e.id),children:e.join_code})]}),"started"===e.status&&(0,ra.jsxs)("div",{className:"text-xs text-gray-500",children:["Link: ",window.location.origin,"/join"]})]})]}),(0,ra.jsxs)("div",{className:"flex gap-2",children:["draft"===e.status&&(0,ra.jsx)("button",{onClick:()=>N(e.id),className:"bg-green-600 text-white py-1 px-3 rounded text-sm hover:bg-green-700","data-testid":"start-assessment-".concat(e.id),children:"Start Assessment"}),"published"===e.status&&(0,ra.jsx)("button",{onClick:()=>N(e.id),className:"bg-green-600 text-white py-1 px-3 rounded text-sm hover:bg-green-700","data-testid":"start-assessment-".concat(e.id),children:"Start Assessment"}),"started"===e.status&&(0,ra.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Close this assessment?"))try{await ta.post("".concat(Jc,"/teacher/assessments/").concat(e,"/close")),C()}catch(t){alert("Failed to close assessment")}})(e.id),className:"bg-red-600 text-white py-1 px-3 rounded text-sm hover:bg-red-700","data-testid":"close-assessment-".concat(e.id),children:"Close Assessment"}),(0,ra.jsx)("button",{onClick:()=>{S(r?"/teacher/assessments/".concat(e.id,"/enhanced"):"/teacher/assessments/".concat(e.id))},className:"bg-blue-600 text-white py-1 px-3 rounded text-sm hover:bg-blue-700","data-testid":"view-submissions-".concat(e.id),children:"View Submissions"})]})]},e.id)})})]})]})]})},Zc=e=>{var t,n,a;let{user:i}=e;const{assessmentId:o}=Se(),[s,l]=(0,r.useState)(null),[c,u]=(0,r.useState)(!0),[d,h]=(0,r.useState)(new Set),[m,p]=(0,r.useState)(new Set),f=je();(0,r.useEffect)(()=>{g()},[o]);const g=async()=>{try{const e=await ta.get("".concat(Jc,"/teacher/assessments/").concat(o));l(e.data),u(!1)}catch(e){console.error("Error loading assessment:",e),u(!1)}},[v,y]=(0,r.useState)(!1),[b,x]=(0,r.useState)(!1),[w,k]=(0,r.useState)(!1),j=(null===s||void 0===s||null===(t=s.submissions)||void 0===t?void 0:t.filter(e=>"marked"===e.status&&!e.feedback_released).length)||0,S=(null===s||void 0===s||null===(n=s.submissions)||void 0===n?void 0:n.filter(e=>"marked"===e.status).length)||0,C=(null===s||void 0===s||null===(a=s.submissions)||void 0===a?void 0:a.filter(e=>"marked"===e.status&&e.feedback_released&&!e.email_sent_at).length)||0;return c?(0,ra.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,ra.jsxs)("div",{className:"text-center",children:[(0,ra.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,ra.jsx)("p",{className:"text-gray-600",children:"Loading submissions..."})]})}):s&&s.question&&s.assessment?(0,ra.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,ra.jsx)("nav",{className:"bg-white shadow-sm border-b",children:(0,ra.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-4 flex justify-between items-center",children:[(0,ra.jsxs)("div",{className:"flex items-center gap-6",children:[(0,ra.jsx)("h1",{className:"text-2xl font-bold text-blue-600",children:"BlueAI"}),(0,ra.jsx)("button",{onClick:()=>f("/teacher/assessments"),className:"text-gray-700 hover:text-blue-600",children:"\u2190 Back to Assessments"})]}),(0,ra.jsx)("span",{className:"text-gray-700",children:i.name})]})}),(0,ra.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[(0,ra.jsx)("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:(0,ra.jsxs)("div",{className:"flex justify-between items-start",children:[(0,ra.jsxs)("div",{children:[(0,ra.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4","data-testid":"assessment-detail-title",children:s.question.subject}),(0,ra.jsxs)("p",{className:"text-gray-700 mb-2",children:[(0,ra.jsx)("strong",{children:"Question:"})," ",s.question.question_text]}),(0,ra.jsxs)("p",{className:"text-gray-600 mb-2",children:[(0,ra.jsx)("strong",{children:"Max Marks:"})," ",s.question.max_marks]}),(0,ra.jsxs)("p",{className:"text-gray-600",children:[(0,ra.jsx)("strong",{children:"Join Code:"})," ",(0,ra.jsx)("span",{className:"text-blue-600 font-bold",children:s.assessment.join_code})]})]}),(0,ra.jsxs)("button",{onClick:()=>f("/teacher/assessments/".concat(o,"/security-report")),className:"bg-orange-600 text-white py-2 px-4 rounded-lg hover:bg-orange-700 flex items-center gap-2","data-testid":"view-security-report-btn",children:[(0,ra.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),"Security Report"]})]})}),(0,ra.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,ra.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,ra.jsxs)("h3",{className:"text-xl font-semibold text-gray-900","data-testid":"submissions-title",children:["Submissions (",s.submissions.length,")"]}),(0,ra.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,ra.jsxs)("button",{onClick:async()=>{y(!0);try{const e=await ta.get("".concat(Jc,"/teacher/assessments/").concat(o,"/export-csv"),{responseType:"blob"}),t=window.URL.createObjectURL(new Blob([e.data])),r=document.createElement("a");r.href=t,r.setAttribute("download","Submissions_".concat(s.question.subject,"_").concat(s.assessment.join_code,".csv")),document.body.appendChild(r),r.click(),r.remove()}catch(e){console.error("Export CSV error:",e),alert("Failed to export CSV")}y(!1)},disabled:v||0===s.submissions.length,className:"bg-green-600 text-white py-2 px-3 rounded-lg hover:bg-green-700 disabled:opacity-50 flex items-center gap-1 text-sm","data-testid":"export-csv-btn",children:[(0,ra.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),v?"Exporting...":"Export CSV"]}),S>0&&(0,ra.jsxs)("button",{onClick:async()=>{x(!0);try{const e=await ta.get("".concat(Jc,"/teacher/assessments/").concat(o,"/export-pdfs-zip"),{responseType:"blob"}),t=window.URL.createObjectURL(new Blob([e.data])),r=document.createElement("a");r.href=t,r.setAttribute("download","PDFs_".concat(s.question.subject,"_").concat(s.assessment.join_code,".zip")),document.body.appendChild(r),r.click(),r.remove()}catch(r){var e,t;console.error("Export PDFs error:",r),alert((null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||"Failed to export PDFs")}x(!1)},disabled:b,className:"bg-red-600 text-white py-2 px-3 rounded-lg hover:bg-red-700 disabled:opacity-50 flex items-center gap-1 text-sm","data-testid":"export-pdfs-zip-btn",children:[(0,ra.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),b?"Generating...":"Download All PDFs (".concat(S,")")]}),C>0&&(0,ra.jsxs)("button",{onClick:async()=>{if(window.confirm("Email PDF reports to all students with email addresses? Only released, marked submissions will be emailed.")){k(!0);try{const e=await ta.post("".concat(Jc,"/teacher/assessments/").concat(o,"/email-all-pdfs"));alert("".concat(e.data.message,"\n\nSent: ").concat(e.data.summary.sent,"\nFailed: ").concat(e.data.summary.failed,"\nNo email: ").concat(e.data.summary.no_email)),g()}catch(r){var e,t;console.error("Email all PDFs error:",r),alert((null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||"Failed to email PDFs")}k(!1)}},disabled:w,className:"bg-indigo-600 text-white py-2 px-3 rounded-lg hover:bg-indigo-700 disabled:opacity-50 flex items-center gap-1 text-sm","data-testid":"email-all-pdfs-btn",children:[(0,ra.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),w?"Emailing...":"Email All (".concat(C,")")]}),j>0&&(0,ra.jsxs)("button",{onClick:async()=>{if(window.confirm("Release feedback for all marked submissions? Students will be able to see their feedback immediately."))try{const e=await ta.post("".concat(Jc,"/teacher/assessments/").concat(o,"/release-all-feedback"));alert(e.data.message),g()}catch(r){var e,t;console.error("Bulk release feedback error:",r),alert((null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||"Failed to release feedback")}},className:"bg-purple-600 text-white py-2 px-3 rounded-lg hover:bg-purple-700 flex items-center gap-1 text-sm","data-testid":"bulk-release-feedback-btn",children:[(0,ra.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Release All (",j,")"]})]})]}),0===s.submissions.length?(0,ra.jsx)("p",{className:"text-gray-600 text-center py-8","data-testid":"no-submissions",children:"No submissions yet"}):(0,ra.jsx)("div",{className:"space-y-4","data-testid":"submissions-list",children:s.submissions.map(e=>(0,ra.jsx)("div",{className:"border border-gray-200 rounded-lg p-4","data-testid":"submission-".concat(e.attempt_id),children:(0,ra.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,ra.jsxs)("div",{children:[(0,ra.jsx)("h4",{className:"font-semibold text-gray-900",children:e.student_name}),(0,ra.jsx)("p",{className:"text-sm text-gray-500",children:e.submitted_at?new Date(e.submitted_at).toLocaleString():"In progress"}),e.feedback_released&&(0,ra.jsx)("span",{className:"text-xs text-green-600",children:"\u2713 Feedback released"})]}),(0,ra.jsx)("div",{className:"flex items-center gap-2 flex-wrap justify-end",children:"marked"===e.status?(0,ra.jsxs)(ra.Fragment,{children:[(0,ra.jsxs)("span",{className:"text-lg font-bold text-green-600",children:[e.score,"/",s.question.max_marks]}),!e.feedback_released&&(0,ra.jsx)("button",{onClick:()=>(async e=>{if(!m.has(e.attempt_id)){p(t=>new Set(t).add(e.attempt_id));try{await ta.post("".concat(Jc,"/teacher/submissions/").concat(e.attempt_id,"/release-feedback")),g()}catch(n){var t,r;console.error("Release feedback error:",n),alert((null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||"Failed to release feedback")}finally{p(t=>{const r=new Set(t);return r.delete(e.attempt_id),r})}}})(e),className:"bg-purple-600 text-white py-1 px-3 rounded text-sm hover:bg-purple-700 disabled:opacity-50",disabled:m.has(e.attempt_id),"data-testid":"release-feedback-".concat(e.attempt_id),children:m.has(e.attempt_id)?"Releasing...":"Release Feedback"}),(0,ra.jsx)("button",{onClick:()=>(async e=>{if(!d.has(e.attempt_id)){h(t=>new Set(t).add(e.attempt_id));try{const t=await ta.get("".concat(Jc,"/teacher/submissions/").concat(e.attempt_id,"/download-pdf"),{responseType:"blob"}),r=window.URL.createObjectURL(new Blob([t.data])),n=document.createElement("a");n.href=r;const a="".concat(e.student_name,"_").concat(s.question.subject,"_Feedback.pdf").replace(/ /g,"_");n.setAttribute("download",a),document.body.appendChild(n),n.click(),n.remove(),window.URL.revokeObjectURL(r),h(t=>{const r=new Set(t);return r.delete(e.attempt_id),r})}catch(t){console.error("PDF download error:",t),alert("PDF generation failed. Please retry."),h(t=>{const r=new Set(t);return r.delete(e.attempt_id),r})}}})(e),className:"bg-green-600 text-white py-1 px-3 rounded text-sm hover:bg-green-700 disabled:opacity-50",disabled:d.has(e.attempt_id),"data-testid":"download-pdf-".concat(e.attempt_id),children:d.has(e.attempt_id)?"Downloading...":"Download PDF"}),(0,ra.jsx)("button",{onClick:()=>f("/teacher/submissions/".concat(e.attempt_id)),className:"bg-blue-600 text-white py-1 px-3 rounded text-sm hover:bg-blue-700","data-testid":"view-submission-".concat(e.attempt_id),children:"View Details"})]}):"error"===e.status?(0,ra.jsx)("span",{className:"text-red-600 text-sm",children:"Marking failed"}):(0,ra.jsx)("span",{className:"text-gray-600 text-sm",children:"Not marked"})})]})},e.attempt_id))})]})]})]}):(0,ra.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,ra.jsxs)("div",{className:"text-center",children:[(0,ra.jsx)("p",{className:"text-xl text-gray-800",children:"Assessment not found"}),(0,ra.jsx)("button",{onClick:()=>f("/teacher/assessments"),className:"mt-4 text-blue-600 hover:underline",children:"\u2190 Back to Assessments"})]})})},eu=e=>{var t;let{user:n}=e;const{submissionId:a}=Se(),[i,o]=(0,r.useState)(null),[s,l]=(0,r.useState)(!0),[c,d]=(0,r.useState)(!1),[h,m]=(0,r.useState)(!1),[p,f]=(0,r.useState)(!1),[g,v]=(0,r.useState)(!1),[y,b]=(0,r.useState)({}),[x,w]=(0,r.useState)(!1),[k,j]=(0,r.useState)(!1),[S,C]=(0,r.useState)(!1),N=je();(0,r.useEffect)(()=>{_()},[a]);const _=async()=>{try{const e=await ta.get("".concat(Jc,"/teacher/submissions/").concat(a));o(e.data),b({score:e.data.submission.score,www:e.data.submission.www,next_steps:e.data.submission.next_steps,overall_feedback:e.data.submission.overall_feedback}),l(!1)}catch(e){console.error("Error loading submission:",e),l(!1)}},A=async e=>{const t=prompt("Why is this a ".concat(e," example? (optional)"));C(!0);try{await ta.post("".concat(Jc,"/teacher/submissions/").concat(a,"/convert-to-example?example_type=").concat(e,"&explanation=").concat(encodeURIComponent(t||""))),alert("Converted to ".concat(e," example for future AI calibration"))}catch(i){var r,n;console.error("Error converting to example:",i),alert((null===(r=i.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.detail)||"Failed to convert to example")}C(!1)};return s?(0,ra.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:"Loading..."}):i?(0,ra.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,ra.jsx)("nav",{className:"bg-white shadow-sm border-b",children:(0,ra.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-4 flex justify-between items-center",children:[(0,ra.jsxs)("div",{className:"flex items-center gap-6",children:[(0,ra.jsx)("h1",{className:"text-2xl font-bold text-blue-600",children:"BlueAI"}),(0,ra.jsx)("button",{onClick:()=>N("/teacher/assessments/".concat(i.assessment.id)),className:"text-gray-700 hover:text-blue-600",children:"\u2190 Back"})]}),(0,ra.jsx)("span",{className:"text-gray-700",children:n.name})]})}),(0,ra.jsxs)("div",{className:"max-w-4xl mx-auto px-6 py-8",children:[i.submission.needs_review&&(0,ra.jsxs)("div",{className:"bg-amber-50 border border-amber-300 rounded-lg p-4 mb-6 flex justify-between items-center",children:[(0,ra.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ra.jsx)("svg",{className:"w-6 h-6 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("p",{className:"font-semibold text-amber-800",children:"Needs Teacher Review"}),(null===(t=i.submission.review_reasons)||void 0===t?void 0:t.length)>0&&(0,ra.jsx)("p",{className:"text-sm text-amber-700",children:i.submission.review_reasons.join(", ")})]})]}),(0,ra.jsx)("button",{onClick:async()=>{try{await ta.post("".concat(Jc,"/teacher/submissions/").concat(a,"/mark-reviewed")),_()}catch(e){console.error("Error marking as reviewed:",e),alert("Failed to mark as reviewed")}},className:"bg-amber-600 text-white py-2 px-4 rounded-lg hover:bg-amber-700","data-testid":"mark-reviewed-btn",children:"Mark as Reviewed"})]}),(0,ra.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow",children:[(0,ra.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,ra.jsxs)("div",{children:[(0,ra.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,ra.jsx)("h2",{className:"text-2xl font-bold text-gray-900","data-testid":"submission-detail-title",children:i.submission.student_name}),void 0!==i.submission.ai_confidence&&(0,ra.jsxs)("span",{className:"text-xs px-2 py-1 rounded-full ".concat(i.submission.ai_confidence>=.8?"bg-green-100 text-green-700":i.submission.ai_confidence>=.6?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"),children:["AI Confidence: ",Math.round(100*i.submission.ai_confidence),"%"]})]}),(0,ra.jsxs)("p",{className:"text-gray-600",children:[i.question.subject," - ",i.question.topic]}),i.submission.moderated_at&&(0,ra.jsx)("p",{className:"text-xs text-green-600 mt-1",children:"Feedback moderated"}),i.submission.email_sent_at&&(0,ra.jsxs)("p",{className:"text-xs text-indigo-600 mt-1",children:["Email sent to ",i.submission.email_sent_to]})]}),(0,ra.jsxs)("div",{className:"flex gap-2 flex-wrap",children:["marked"===i.submission.status&&!g&&(0,ra.jsxs)(ra.Fragment,{children:[(0,ra.jsx)("button",{onClick:()=>v(!0),className:"bg-amber-600 text-white py-2 px-4 rounded-lg hover:bg-amber-700","data-testid":"edit-feedback-btn",children:"Edit Feedback"}),(0,ra.jsxs)("div",{className:"relative group",children:[(0,ra.jsx)("button",{className:"bg-purple-600 text-white py-2 px-4 rounded-lg hover:bg-purple-700 disabled:opacity-50",disabled:S,children:S?"Saving...":"Save as Example"}),(0,ra.jsxs)("div",{className:"absolute right-0 mt-1 w-48 bg-white rounded-lg shadow-lg border hidden group-hover:block z-10",children:[(0,ra.jsx)("button",{onClick:()=>A("good"),className:"block w-full text-left px-4 py-2 text-sm text-green-700 hover:bg-green-50","data-testid":"save-good-example-btn",children:"Good Answer Example"}),(0,ra.jsx)("button",{onClick:()=>A("bad"),className:"block w-full text-left px-4 py-2 text-sm text-red-700 hover:bg-red-50","data-testid":"save-bad-example-btn",children:"Poor Answer Example"})]})]})]}),(0,ra.jsx)("button",{onClick:async()=>{if(!h){m(!0);try{await ta.post("".concat(Jc,"/teacher/submissions/").concat(a,"/regenerate-pdf")),alert("PDF regenerated successfully!"),_()}catch(e){console.error("PDF regeneration error:",e),alert("Failed to regenerate PDF")}m(!1)}},className:"bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 disabled:opacity-50",disabled:h,"data-testid":"regenerate-pdf-btn",children:h?"Regenerating...":"Regenerate PDF"}),(0,ra.jsx)("button",{onClick:async()=>{if(!c){d(!0);try{const e=await ta.get("".concat(Jc,"/teacher/submissions/").concat(a,"/download-pdf"),{responseType:"blob"}),t=window.URL.createObjectURL(new Blob([e.data])),r=document.createElement("a");r.href=t;const n="".concat(i.submission.student_name,"_").concat(i.question.subject,"_Feedback.pdf").replace(/ /g,"_");r.setAttribute("download",n),document.body.appendChild(r),r.click(),r.remove(),window.URL.revokeObjectURL(t),d(!1)}catch(e){console.error("PDF download error:",e),alert("PDF generation failed. Please retry."),d(!1)}}},className:"bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 disabled:opacity-50",disabled:c,"data-testid":"download-pdf-btn",children:c?"Downloading...":"Download PDF"}),"marked"===i.submission.status&&!i.submission.email_sent_at&&(0,ra.jsx)("button",{onClick:async()=>{if(!p){f(!0);try{const e=await ta.post("".concat(Jc,"/teacher/submissions/").concat(a,"/email-pdf"));alert(e.data.message),_()}catch(r){var e,t;console.error("Email PDF error:",r),alert((null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||"Failed to email PDF")}f(!1)}},className:"bg-indigo-600 text-white py-2 px-4 rounded-lg hover:bg-indigo-700 disabled:opacity-50",disabled:p,"data-testid":"email-pdf-btn",children:p?"Emailing...":"Email PDF to Student"})]})]}),(0,ra.jsxs)("div",{className:"space-y-6",children:[(0,ra.jsxs)("div",{children:[(0,ra.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Question"}),(0,ra.jsx)("p",{className:"text-gray-700","data-testid":"question-text",children:i.question.question_text})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Student's Answer"}),(0,ra.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg",children:(0,ra.jsx)("p",{className:"text-gray-700 whitespace-pre-wrap","data-testid":"student-answer",children:i.submission.answer_text})})]}),"marked"===i.submission.status&&(0,ra.jsxs)(ra.Fragment,{children:[i.submission.mark_breakdown&&i.submission.mark_breakdown.length>0&&(0,ra.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,ra.jsxs)("button",{onClick:()=>j(!k),className:"w-full flex justify-between items-center px-4 py-3 bg-gray-50 hover:bg-gray-100 transition-colors","data-testid":"toggle-breakdown-btn",children:[(0,ra.jsx)("span",{className:"font-medium text-gray-900",children:"Mark Breakdown"}),(0,ra.jsx)("svg",{className:"w-5 h-5 text-gray-500 transform transition-transform ".concat(k?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),k&&(0,ra.jsx)("div",{className:"p-4 space-y-3",children:i.submission.mark_breakdown.map((e,t)=>(0,ra.jsxs)("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-gray-50",children:[(0,ra.jsxs)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ".concat(e.marks_awarded===e.marks_available?"bg-green-100 text-green-700":e.marks_awarded>0?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"),children:[e.marks_awarded,"/",e.marks_available]}),(0,ra.jsxs)("div",{className:"flex-1",children:[(0,ra.jsx)("p",{className:"font-medium text-gray-900",children:e.point}),e.evidence&&(0,ra.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[(0,ra.jsx)("span",{className:"font-medium",children:"Evidence: "}),(0,ra.jsxs)("span",{className:"italic",children:['"',e.evidence,'"']})]})]})]},t))})]}),g?(0,ra.jsxs)("div",{className:"space-y-4 border-2 border-amber-200 bg-amber-50 p-6 rounded-lg",children:[(0,ra.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,ra.jsx)("h3",{className:"text-lg font-semibold text-amber-800",children:"Editing Feedback"}),(0,ra.jsxs)("div",{className:"flex gap-2",children:[(0,ra.jsx)("button",{onClick:()=>v(!1),className:"text-gray-600 hover:text-gray-800 py-1 px-3",children:"Cancel"}),(0,ra.jsx)("button",{onClick:async()=>{w(!0);try{await ta.put("".concat(Jc,"/teacher/submissions/").concat(a,"/moderate-feedback"),y),alert("Feedback saved successfully!"),v(!1),_()}catch(e){console.error("Save feedback error:",e),alert("Failed to save feedback")}w(!1)},disabled:x,className:"bg-green-600 text-white py-1 px-4 rounded hover:bg-green-700 disabled:opacity-50","data-testid":"save-feedback-btn",children:x?"Saving...":"Save Changes"})]})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Score (out of ",i.question.max_marks,")"]}),(0,ra.jsx)("input",{type:"number",className:"w-32 px-3 py-2 border rounded-lg",value:y.score||"",onChange:e=>b(u(u({},y),{},{score:parseInt(e.target.value)||0})),min:"0",max:i.question.max_marks,"data-testid":"edit-score-input"})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"What Went Well"}),(0,ra.jsx)("textarea",{className:"w-full px-3 py-2 border rounded-lg",rows:3,value:y.www||"",onChange:e=>b(u(u({},y),{},{www:e.target.value})),"data-testid":"edit-www-input"})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Next Steps"}),(0,ra.jsx)("textarea",{className:"w-full px-3 py-2 border rounded-lg",rows:3,value:y.next_steps||"",onChange:e=>b(u(u({},y),{},{next_steps:e.target.value})),"data-testid":"edit-next-steps-input"})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Overall Feedback"}),(0,ra.jsx)("textarea",{className:"w-full px-3 py-2 border rounded-lg",rows:3,value:y.overall_feedback||"",onChange:e=>b(u(u({},y),{},{overall_feedback:e.target.value})),"data-testid":"edit-overall-feedback-input"})]})]}):(0,ra.jsxs)(ra.Fragment,{children:[(0,ra.jsxs)("div",{className:"bg-blue-50 p-6 rounded-lg",children:[(0,ra.jsx)("p",{className:"text-gray-600 text-sm mb-1",children:"Score"}),(0,ra.jsxs)("p",{className:"text-3xl font-bold text-blue-600","data-testid":"score",children:[i.submission.score,"/",i.question.max_marks]})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"What Went Well"}),(0,ra.jsx)("p",{className:"text-gray-700","data-testid":"www",children:i.submission.www})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Next Steps"}),(0,ra.jsx)("p",{className:"text-gray-700","data-testid":"next-steps",children:i.submission.next_steps})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Overall Feedback"}),(0,ra.jsx)("p",{className:"text-gray-700","data-testid":"overall-feedback",children:i.submission.overall_feedback})]})]})]})]})]})]})]}):(0,ra.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:"Submission not found"})},tu=e=>{let{user:t}=e;const{assessmentId:n}=Se(),[a,i]=(0,r.useState)(null),[o,s]=(0,r.useState)(!0),[l,c]=(0,r.useState)(null),u=je();(0,r.useEffect)(()=>{d()},[n]);const d=async()=>{try{const e=await ta.get("".concat(Jc,"/teacher/assessments/").concat(n,"/security-report"));i(e.data),s(!1)}catch(e){console.error("Error loading security report:",e),s(!1)}},h=e=>{switch(e){case"tab_hidden":return"\ud83d\udc41\ufe0f";case"window_blur":return"\ud83d\udd04";case"fullscreen_exit":return"\u2b1c";case"fullscreen_not_supported":return"\u26a0\ufe0f";default:return"\u2753"}},m=e=>{switch(e){case"tab_hidden":return"Tab Switch";case"window_blur":return"Window Lost Focus";case"fullscreen_exit":return"Exited Fullscreen";case"fullscreen_not_supported":return"Fullscreen Not Supported";default:return e}};return o?(0,ra.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:"Loading..."}):a?(0,ra.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,ra.jsx)("nav",{className:"bg-white shadow-sm border-b",children:(0,ra.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-4 flex justify-between items-center",children:[(0,ra.jsxs)("div",{className:"flex items-center gap-6",children:[(0,ra.jsx)("h1",{className:"text-2xl font-bold text-blue-600",children:"BlueAI"}),(0,ra.jsx)("button",{onClick:()=>u("/teacher/assessments/".concat(n)),className:"text-gray-700 hover:text-blue-600",children:"\u2190 Back to Assessment"})]}),(0,ra.jsx)("span",{className:"text-gray-700",children:t.name})]})}),(0,ra.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[(0,ra.jsxs)("div",{className:"mb-8",children:[(0,ra.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-2","data-testid":"security-report-title",children:"Security Report"}),(0,ra.jsx)("p",{className:"text-gray-600",children:"Monitor student activity during the assessment"})]}),(0,ra.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,ra.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,ra.jsx)("p",{className:"text-gray-600 text-sm mb-1",children:"Total Submissions"}),(0,ra.jsx)("p",{className:"text-3xl font-bold text-blue-600",children:a.total_submissions})]}),(0,ra.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,ra.jsx)("p",{className:"text-gray-600 text-sm mb-1",children:"With Security Events"}),(0,ra.jsx)("p",{className:"text-3xl font-bold text-yellow-600",children:a.submissions_with_events})]}),(0,ra.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,ra.jsx)("p",{className:"text-gray-600 text-sm mb-1",children:"Total Events"}),(0,ra.jsx)("p",{className:"text-3xl font-bold text-orange-600",children:a.total_events})]}),(0,ra.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,ra.jsx)("p",{className:"text-gray-600 text-sm mb-1",children:"Flagged (3+ events)"}),(0,ra.jsx)("p",{className:"text-3xl font-bold text-red-600",children:a.flagged_count})]})]}),(0,ra.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,ra.jsx)("div",{className:"p-6 border-b",children:(0,ra.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Student Activity"})}),0===a.report.length?(0,ra.jsxs)("div",{className:"p-8 text-center text-gray-600",children:[(0,ra.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,ra.jsx)("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,ra.jsx)("p",{className:"text-lg font-medium",children:"No security events detected"}),(0,ra.jsx)("p",{className:"text-sm text-gray-500",children:"All students completed the assessment without any flagged activity"})]}):(0,ra.jsx)("div",{className:"divide-y",children:a.report.map(e=>(0,ra.jsxs)("div",{className:"p-6 ".concat(e.flagged?"bg-red-50":""),"data-testid":"security-student-".concat(e.attempt_id),children:[(0,ra.jsxs)("div",{className:"flex justify-between items-start",children:[(0,ra.jsxs)("div",{className:"flex-1",children:[(0,ra.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,ra.jsx)("h4",{className:"font-semibold text-gray-900",children:e.student_name}),e.flagged&&(0,ra.jsx)("span",{className:"bg-red-100 text-red-700 text-xs px-2 py-1 rounded-full font-medium",children:"FLAGGED"}),(0,ra.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat("marked"===e.status?"bg-green-100 text-green-700":"submitted"===e.status?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"),children:e.status})]}),(0,ra.jsx)("div",{className:"flex flex-wrap gap-4 text-sm",children:Object.entries(e.event_summary).map(e=>{let[t,r]=e;return r>0&&(0,ra.jsxs)("div",{className:"flex items-center gap-1",children:[(0,ra.jsx)("span",{children:h(t)}),(0,ra.jsxs)("span",{className:"text-gray-600",children:[m(t),":"]}),(0,ra.jsx)("span",{className:"font-medium",children:r})]},t)})})]}),(0,ra.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ra.jsxs)("div",{className:"text-right",children:[(0,ra.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.event_count}),(0,ra.jsx)("p",{className:"text-xs text-gray-500",children:"events"})]}),(0,ra.jsx)("button",{onClick:()=>c(l===e.attempt_id?null:e.attempt_id),className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:l===e.attempt_id?"Hide Details":"Show Details"})]})]}),l===e.attempt_id&&(0,ra.jsxs)("div",{className:"mt-4 bg-gray-50 rounded-lg p-4",children:[(0,ra.jsx)("h5",{className:"font-medium text-gray-900 mb-3",children:"Event Timeline"}),(0,ra.jsx)("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:e.events.map((e,t)=>(0,ra.jsxs)("div",{className:"flex items-center gap-3 text-sm",children:[(0,ra.jsx)("span",{className:"text-gray-400 w-20",children:new Date(e.timestamp).toLocaleTimeString()}),(0,ra.jsx)("span",{children:h(e.type)}),(0,ra.jsx)("span",{className:"text-gray-700",children:m(e.type)})]},t))})]})]},e.attempt_id))})]})]})]}):(0,ra.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:"Report not found"})},ru=e=>{let{user:t,onProfileUpdate:n}=e;const[a,i]=(0,r.useState)({name:t.name||"",display_name:t.display_name||"",school_name:t.school_name||"",department:t.department||""}),[o,s]=(0,r.useState)(!1),[l,c]=(0,r.useState)(null),d=je();(0,r.useEffect)(()=>{h()},[]);const h=async()=>{try{const[e,t,r]=await Promise.all([ta.get("".concat(Jc,"/teacher/questions")),ta.get("".concat(Jc,"/teacher/assessments")),ta.get("".concat(Jc,"/teacher/classes"))]),n=e.data.length,a=t.data.length,i=(r.data.classes||[]).length,o=t.data.filter(e=>"started"===e.status).length;c({totalQuestions:n,totalAssessments:a,totalClasses:i,activeAssessments:o})}catch(e){console.error("Error loading stats:",e)}};return(0,ra.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,ra.jsx)("nav",{className:"bg-white shadow-sm border-b",children:(0,ra.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-4 flex justify-between items-center",children:[(0,ra.jsxs)("div",{className:"flex items-center gap-6",children:[(0,ra.jsx)("h1",{className:"text-2xl font-bold text-blue-600",children:"BlueAI"}),(0,ra.jsx)("button",{onClick:()=>d("/teacher"),className:"text-gray-700 hover:text-blue-600",children:"\u2190 Back to Dashboard"})]}),(0,ra.jsx)("span",{className:"text-gray-700",children:t.name})]})}),(0,ra.jsx)("div",{className:"max-w-4xl mx-auto px-6 py-8",children:(0,ra.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,ra.jsxs)("div",{className:"md:col-span-2 bg-white p-6 rounded-lg shadow",children:[(0,ra.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-6","data-testid":"profile-title",children:"Profile Settings"}),(0,ra.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),s(!0);try{await ta.put("".concat(Jc,"/auth/profile"),a),alert("Profile updated successfully!"),n&&n(u(u({},t),a))}catch(r){console.error("Error updating profile:",r),alert("Failed to update profile")}s(!1)},className:"space-y-4",children:[(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),(0,ra.jsx)("input",{type:"text",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",value:a.name,onChange:e=>i(u(u({},a),{},{name:e.target.value})),"data-testid":"profile-name-input"})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Display Name (shown on reports)"}),(0,ra.jsx)("input",{type:"text",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",value:a.display_name,onChange:e=>i(u(u({},a),{},{display_name:e.target.value})),placeholder:"e.g., Mr. Smith, Ms. Johnson","data-testid":"profile-display-name-input"})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"School Name"}),(0,ra.jsx)("input",{type:"text",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",value:a.school_name,onChange:e=>i(u(u({},a),{},{school_name:e.target.value})),"data-testid":"profile-school-input"})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),(0,ra.jsx)("input",{type:"text",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",value:a.department,onChange:e=>i(u(u({},a),{},{department:e.target.value})),placeholder:"e.g., Science, Mathematics","data-testid":"profile-department-input"})]}),(0,ra.jsx)("div",{className:"pt-4",children:(0,ra.jsx)("button",{type:"submit",disabled:o,className:"bg-blue-600 text-white py-2 px-6 rounded-lg hover:bg-blue-700 disabled:opacity-50","data-testid":"save-profile-btn",children:o?"Saving...":"Save Changes"})})]}),(0,ra.jsxs)("div",{className:"mt-8 pt-6 border-t",children:[(0,ra.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Account Information"}),(0,ra.jsxs)("div",{className:"text-sm text-gray-600 space-y-2",children:[(0,ra.jsxs)("p",{children:[(0,ra.jsx)("span",{className:"font-medium",children:"Email:"})," ",t.email]}),(0,ra.jsxs)("p",{children:[(0,ra.jsx)("span",{className:"font-medium",children:"Role:"})," ",t.role]}),(0,ra.jsxs)("p",{children:[(0,ra.jsx)("span",{className:"font-medium",children:"Auth Provider:"})," ",t.auth_provider||"Email"]})]})]})]}),(0,ra.jsxs)("div",{className:"space-y-4",children:[(0,ra.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,ra.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Your Stats"}),l?(0,ra.jsxs)("div",{className:"space-y-4",children:[(0,ra.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ra.jsx)("span",{className:"text-gray-600",children:"Questions Created"}),(0,ra.jsx)("span",{className:"text-2xl font-bold text-blue-600","data-testid":"stat-questions",children:l.totalQuestions})]}),(0,ra.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ra.jsx)("span",{className:"text-gray-600",children:"Total Assessments"}),(0,ra.jsx)("span",{className:"text-2xl font-bold text-green-600","data-testid":"stat-assessments",children:l.totalAssessments})]}),(0,ra.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ra.jsx)("span",{className:"text-gray-600",children:"Active Assessments"}),(0,ra.jsx)("span",{className:"text-2xl font-bold text-amber-600","data-testid":"stat-active",children:l.activeAssessments})]}),(0,ra.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ra.jsx)("span",{className:"text-gray-600",children:"Classes"}),(0,ra.jsx)("span",{className:"text-2xl font-bold text-purple-600","data-testid":"stat-classes",children:l.totalClasses})]})]}):(0,ra.jsx)("p",{className:"text-gray-500",children:"Loading stats..."})]}),(0,ra.jsxs)("div",{className:"bg-gradient-to-br from-blue-500 to-indigo-600 p-6 rounded-lg shadow text-white",children:[(0,ra.jsx)("h3",{className:"font-semibold mb-2",children:"Quick Tips"}),(0,ra.jsxs)("ul",{className:"text-sm space-y-2 text-blue-100",children:[(0,ra.jsx)("li",{children:"\u2022 Set your display name for professional PDF reports"}),(0,ra.jsx)("li",{children:"\u2022 Add your school name to personalize feedback"}),(0,ra.jsx)("li",{children:"\u2022 Link assessments to classes for better tracking"})]})]})]})]})})]})},nu=window.location.origin,au="".concat(nu,"/api"),iu=e=>{let{user:t}=e;const[n,a]=(0,r.useState)([]),[i,o]=(0,r.useState)([]),[s,l]=(0,r.useState)(!0),c=je();(0,r.useEffect)(()=>{u()},[]);const u=async()=>{try{const[e,t]=await Promise.all([ta.get("".concat(au,"/admin/teachers")),ta.get("".concat(au,"/admin/assessments"))]);a(e.data),o(t.data),l(!1)}catch(e){console.error("Error loading data:",e),l(!1)}};return(0,ra.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,ra.jsx)("nav",{className:"bg-white shadow-sm border-b",children:(0,ra.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-4 flex justify-between items-center",children:[(0,ra.jsxs)("div",{className:"flex items-center gap-6",children:[(0,ra.jsx)("h1",{className:"text-2xl font-bold text-blue-600",children:"BlueAI"}),(0,ra.jsxs)("div",{className:"flex gap-4",children:[(0,ra.jsx)("button",{onClick:()=>c("/teacher/dashboard"),className:"text-gray-700 hover:text-blue-600",children:"Dashboard"}),(0,ra.jsx)("button",{onClick:()=>c("/teacher/questions"),className:"text-gray-700 hover:text-blue-600",children:"Questions"}),(0,ra.jsx)("button",{onClick:()=>c("/teacher/assessments"),className:"text-gray-700 hover:text-blue-600",children:"Assessments"}),(0,ra.jsx)("button",{onClick:()=>c("/admin/dashboard"),className:"text-blue-600 font-medium",children:"Admin"})]})]}),(0,ra.jsx)("span",{className:"text-gray-700",children:t.name})]})}),(0,ra.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[(0,ra.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-8","data-testid":"admin-title",children:"Admin Dashboard"}),(0,ra.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow mb-8",children:[(0,ra.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 mb-4","data-testid":"teachers-title",children:["Teachers (",n.length,")"]}),s?(0,ra.jsx)("div",{className:"text-center py-8",children:"Loading..."}):0===n.length?(0,ra.jsx)("p",{className:"text-gray-600 text-center py-8",children:"No teachers yet"}):(0,ra.jsx)("div",{className:"overflow-x-auto",children:(0,ra.jsxs)("table",{className:"w-full","data-testid":"teachers-table",children:[(0,ra.jsx)("thead",{children:(0,ra.jsxs)("tr",{className:"border-b",children:[(0,ra.jsx)("th",{className:"text-left py-3 px-4 text-gray-700 font-medium",children:"Name"}),(0,ra.jsx)("th",{className:"text-left py-3 px-4 text-gray-700 font-medium",children:"Email"}),(0,ra.jsx)("th",{className:"text-left py-3 px-4 text-gray-700 font-medium",children:"Role"}),(0,ra.jsx)("th",{className:"text-left py-3 px-4 text-gray-700 font-medium",children:"Actions"})]})}),(0,ra.jsx)("tbody",{children:n.map(e=>(0,ra.jsxs)("tr",{className:"border-b","data-testid":"teacher-".concat(e.user_id),children:[(0,ra.jsx)("td",{className:"py-3 px-4",children:e.name}),(0,ra.jsx)("td",{className:"py-3 px-4 text-gray-600",children:e.email}),(0,ra.jsx)("td",{className:"py-3 px-4",children:(0,ra.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat("admin"===e.role?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"),children:e.role})}),(0,ra.jsx)("td",{className:"py-3 px-4",children:e.user_id!==t.user_id&&(0,ra.jsxs)("select",{value:e.role,onChange:t=>(async(e,t)=>{try{await ta.put("".concat(au,"/admin/teachers/").concat(e,"/role?role=").concat(t)),u()}catch(r){alert("Failed to update role")}})(e.user_id,t.target.value),className:"px-2 py-1 border rounded text-sm","data-testid":"role-select-".concat(e.user_id),children:[(0,ra.jsx)("option",{value:"teacher",children:"Teacher"}),(0,ra.jsx)("option",{value:"admin",children:"Admin"})]})})]},e.user_id))})]})})]}),(0,ra.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,ra.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 mb-4","data-testid":"all-assessments-title",children:["All Assessments (",i.length,")"]}),s?(0,ra.jsx)("div",{className:"text-center py-8",children:"Loading..."}):0===i.length?(0,ra.jsx)("p",{className:"text-gray-600 text-center py-8",children:"No assessments yet"}):(0,ra.jsx)("div",{className:"space-y-3","data-testid":"all-assessments-list",children:i.map(e=>(0,ra.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 flex justify-between items-center","data-testid":"admin-assessment-".concat(e.id),children:[(0,ra.jsxs)("div",{children:[(0,ra.jsxs)("p",{className:"font-medium text-gray-900",children:["Code: ",e.join_code]}),(0,ra.jsxs)("p",{className:"text-sm text-gray-600",children:["Teacher: ",e.teacher_name]}),(0,ra.jsxs)("p",{className:"text-sm text-gray-500",children:["Status: ",e.status]})]}),(0,ra.jsx)("button",{onClick:()=>c("/teacher/assessments/".concat(e.id)),className:"bg-blue-600 text-white py-1 px-3 rounded text-sm hover:bg-blue-700","data-testid":"view-assessment-".concat(e.id),children:"View"})]},e.id))})]})]})]})};function ou(e){var t,r,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=ou(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function su(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=ou(e))&&(n&&(n+=" "),n+=t);return n}var lu=__webpack_require__(7820),cu=__webpack_require__.n(lu),uu=__webpack_require__(7770),du=__webpack_require__.n(uu);function hu(e){var t=10**(arguments.length>1&&void 0!==arguments[1]?arguments[1]:4),r=Math.round(e*t)/t;return Object.is(r,-0)?0:r}function mu(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.reduce((e,t,n)=>{var a=r[n-1];return"string"===typeof a?e+a+t:void 0!==a?e+hu(a)+t:e+t},"")}var pu=e=>0===e?0:e>0?1:-1,fu=e=>"number"==typeof e&&e!=+e,gu=e=>"string"===typeof e&&e.indexOf("%")===e.length-1,vu=e=>("number"===typeof e||e instanceof Number)&&!fu(e),yu=e=>vu(e)||"string"===typeof e,bu=0,xu=e=>{var t=++bu;return"".concat(e||"").concat(t)},wu=function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!vu(e)&&"string"!==typeof e)return n;if(gu(e)){if(null==t)return n;var i=e.indexOf("%");r=t*parseFloat(e.slice(0,i))/100}else r=+e;return fu(r)&&(r=n),a&&null!=t&&r>t&&(r=t),r},ku=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++){if(r[String(e[n])])return!0;r[String(e[n])]=!0}return!1};function ju(e,t,r){return vu(e)&&vu(t)?hu(e+r*(t-e)):t}function Su(e,t,r){if(e&&e.length)return e.find(e=>e&&("function"===typeof t?t(e):du()(e,t))===r)}var Cu=e=>null===e||"undefined"===typeof e,Nu=e=>Cu(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function _u(e){return null!=e}function Au(){}var Tu=function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];if("undefined"!==typeof console&&console.warn&&(void 0===t&&console.warn("LogUtils requires an error message argument"),!e))if(void 0===t)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var i=0;console.warn(t.replace(/%s/g,()=>n[i++]))}},Eu={width:"100%",height:"100%",debounce:0,minWidth:0,initialDimension:{width:-1,height:-1}},Ou=(e,t,r)=>{var{width:n=Eu.width,height:a=Eu.height,aspect:i,maxHeight:o}=r,s=gu(n)?e:Number(n),l=gu(a)?t:Number(a);return i&&i>0&&(s?l=s/i:l&&(s=l*i),o&&null!=l&&l>o&&(l=o)),{calculatedWidth:s,calculatedHeight:l}},Pu={width:0,height:0,overflow:"visible"},Iu={width:0,overflowX:"visible"},Mu={height:0,overflowY:"visible"},Ru={},Du=e=>{var{width:t,height:r}=e,n=gu(t),a=gu(r);return n&&a?Pu:n?Iu:a?Mu:Ru};function Lu(e){return Number.isFinite(e)}function zu(e){return"number"===typeof e&&e>0&&Number.isFinite(e)}function qu(){return qu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qu.apply(null,arguments)}function Bu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Fu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Bu(Object(r),!0).forEach(function(t){Uu(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bu(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Uu(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Hu=(0,r.createContext)(Eu.initialDimension);function Wu(e){var{children:t,width:n,height:a}=e,i=(0,r.useMemo)(()=>({width:n,height:a}),[n,a]);return function(e){return zu(e.width)&&zu(e.height)}(i)?r.createElement(Hu.Provider,{value:i},t):null}var Ku=()=>(0,r.useContext)(Hu),Vu=(0,r.forwardRef)((e,t)=>{var{aspect:n,initialDimension:a=Eu.initialDimension,width:i,height:o,minWidth:s=Eu.minWidth,minHeight:l,maxHeight:c,children:u,debounce:d=Eu.debounce,id:h,className:m,onResize:p,style:f={}}=e,g=(0,r.useRef)(null),v=(0,r.useRef)();v.current=p,(0,r.useImperativeHandle)(t,()=>g.current);var[y,b]=(0,r.useState)({containerWidth:a.width,containerHeight:a.height}),x=(0,r.useCallback)((e,t)=>{b(r=>{var n=Math.round(e),a=Math.round(t);return r.containerWidth===n&&r.containerHeight===a?r:{containerWidth:n,containerHeight:a}})},[]);(0,r.useEffect)(()=>{if(null==g.current||"undefined"===typeof ResizeObserver)return Au;var e=e=>{var t,r=e[0];if(null!=r){var{width:n,height:a}=r.contentRect;x(n,a),null===(t=v.current)||void 0===t||t.call(v,n,a)}};d>0&&(e=cu()(e,d,{trailing:!0,leading:!1}));var t=new ResizeObserver(e),{width:r,height:n}=g.current.getBoundingClientRect();return x(r,n),t.observe(g.current),()=>{t.disconnect()}},[x,d]);var{containerWidth:w,containerHeight:k}=y;Tu(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:j,calculatedHeight:S}=Ou(w,k,{width:i,height:o,aspect:n,maxHeight:c});return Tu(null!=j&&j>0||null!=S&&S>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",j,S,i,o,s,l,n),r.createElement("div",{id:h?"".concat(h):void 0,className:su("recharts-responsive-container",m),style:Fu(Fu({},f),{},{width:i,height:o,minWidth:s,minHeight:l,maxHeight:c}),ref:g},r.createElement("div",{style:Du({width:i,height:o})},r.createElement(Wu,{width:j,height:S},u)))}),Gu=(0,r.forwardRef)((e,t)=>{var n=Ku();if(zu(n.width)&&zu(n.height))return e.children;var{width:a,height:i}=function(e){var{width:t,height:r,aspect:n}=e,a=t,i=r;return void 0===a&&void 0===i?(a=Eu.width,i=Eu.height):void 0===a?a=n&&n>0?void 0:Eu.width:void 0===i&&(i=n&&n>0?void 0:Eu.height),{width:a,height:i}}({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:o,calculatedHeight:s}=Ou(void 0,void 0,{width:a,height:i,aspect:e.aspect,maxHeight:e.maxHeight});return vu(o)&&vu(s)?r.createElement(Wu,{width:o,height:s},e.children):r.createElement(Vu,qu({},e,{width:a,height:i,ref:t}))}),Qu=Symbol.for("immer-nothing"),Yu=Symbol.for("immer-draftable"),$u=Symbol.for("immer-state");function Ju(e){throw new Error("[Immer] minified error nr: ".concat(e,". Full error at: https://bit.ly/3cXEKWf"))}var Xu=Object,Zu=Xu.getPrototypeOf,ed="constructor",td="prototype",rd="configurable",nd="enumerable",ad="writable",id="value",od=e=>!!e&&!!e[$u];function sd(e){var t;return!!e&&(ud(e)||gd(e)||!!e[Yu]||!(null===(t=e[ed])||void 0===t||!t[Yu])||vd(e)||yd(e))}var ld=Xu[td][ed].toString(),cd=new WeakMap;function ud(e){if(!e||!bd(e))return!1;const t=Zu(e);if(null===t||t===Xu[td])return!0;const r=Xu.hasOwnProperty.call(t,ed)&&t[ed];if(r===Object)return!0;if(!xd(r))return!1;let n=cd.get(r);return void 0===n&&(n=Function.toString.call(r),cd.set(r,n)),n===ld}function dd(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(0===hd(e)){(r?Reflect.ownKeys(e):Xu.keys(e)).forEach(r=>{t(r,e[r],e)})}else e.forEach((r,n)=>t(n,r,e))}function hd(e){const t=e[$u];return t?t.type_:gd(e)?1:vd(e)?2:yd(e)?3:0}var md=function(e,t){return 2===(arguments.length>2&&void 0!==arguments[2]?arguments[2]:hd(e))?e.has(t):Xu[td].hasOwnProperty.call(e,t)},pd=function(e,t){return 2===(arguments.length>2&&void 0!==arguments[2]?arguments[2]:hd(e))?e.get(t):e[t]},fd=function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:hd(e);2===n?e.set(t,r):3===n?e.add(r):e[t]=r};var gd=Array.isArray,vd=e=>e instanceof Map,yd=e=>e instanceof Set,bd=e=>"object"===typeof e,xd=e=>"function"===typeof e,wd=e=>"boolean"===typeof e;var kd=e=>e.copy_||e.base_,jd=e=>e.modified_?e.copy_:e.base_;function Sd(e,t){if(vd(e))return new Map(e);if(yd(e))return new Set(e);if(gd(e))return Array[td].slice.call(e);const r=ud(e);if(!0===t||"class_only"===t&&!r){const t=Xu.getOwnPropertyDescriptors(e);delete t[$u];let r=Reflect.ownKeys(t);for(let n=0;n<r.length;n++){const a=r[n],i=t[a];!1===i[ad]&&(i[ad]=!0,i[rd]=!0),(i.get||i.set)&&(t[a]={[rd]:!0,[ad]:!0,[nd]:i[nd],[id]:e[a]})}return Xu.create(Zu(e),t)}{const t=Zu(e);if(null!==t&&r)return u({},e);const n=Xu.create(t);return Xu.assign(n,e)}}function Cd(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return _d(e)||od(e)||!sd(e)||(hd(e)>1&&Xu.defineProperties(e,{set:Nd,add:Nd,clear:Nd,delete:Nd}),Xu.freeze(e),t&&dd(e,(e,t)=>{Cd(t,!0)},!1)),e}var Nd={[id]:function(){Ju(2)}};function _d(e){return null===e||!bd(e)||Xu.isFrozen(e)}var Ad="MapSet",Td="Patches",Ed="ArrayMethods",Od={};function Pd(e){const t=Od[e];return t||Ju(0),t}var Id,Md=e=>!!Od[e];var Rd=()=>Id;function Dd(e,t){t&&(e.patchPlugin_=Pd(Td),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Ld(e){zd(e),e.drafts_.forEach(Bd),e.drafts_=null}function zd(e){e===Id&&(Id=e.parent_)}var qd=e=>Id={drafts_:[],parent_:Id,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:Md(Ad)?Pd(Ad):void 0,arrayMethodsPlugin_:Md(Ed)?Pd(Ed):void 0};function Bd(e){const t=e[$u];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function Fd(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];if(void 0!==e&&e!==r){r[$u].modified_&&(Ld(t),Ju(4)),sd(e)&&(e=Ud(t,e));const{patchPlugin_:n}=t;n&&n.generateReplacementPatches_(r[$u].base_,e,t)}else e=Ud(t,r);return function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Cd(t,r)}(t,e,!0),Ld(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Qu?e:void 0}function Ud(e,t){if(_d(t))return t;const r=t[$u];if(!r){return Yd(t,e.handledSet_,e)}if(!Wd(r,e))return t;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:t}=r;if(t)for(;t.length>0;){t.pop()(e)}Gd(r,e)}return r.copy_}function Hd(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var Wd=(e,t)=>e.scope_===t,Kd=[];function Vd(e,t,r,n){var a;const i=kd(e),o=e.type_;if(void 0!==n){if(pd(i,n,o)===t)return void fd(i,n,r,o)}if(!e.draftLocations_){const t=e.draftLocations_=new Map;dd(i,(e,r)=>{if(od(r)){const n=t.get(r)||[];n.push(e),t.set(r,n)}})}const s=null!==(a=e.draftLocations_.get(t))&&void 0!==a?a:Kd;for(const l of s)fd(i,l,r,o)}function Gd(e,t){var r,n;if(e.modified_&&!e.finalized_&&(3===e.type_||1===e.type_&&e.allIndicesReassigned_||(null!==(r=null===(n=e.assigned_)||void 0===n?void 0:n.size)&&void 0!==r?r:0)>0)){const{patchPlugin_:r}=t;if(r){const n=r.getPath(e);n&&r.generatePatches_(e,n,t)}Hd(e)}}function Qd(e,t,r){const{scope_:n}=e;if(od(r)){const a=r[$u];Wd(a,n)&&a.callbacks_.push(function(){th(e);const n=jd(a);Vd(e,r,n,t)})}else sd(r)&&e.callbacks_.push(function(){const a=kd(e);var i;3===e.type_?a.has(r)&&Yd(r,n.handledSet_,n):pd(a,t,e.type_)===r&&n.drafts_.length>1&&!0===(null!==(i=e.assigned_.get(t))&&void 0!==i&&i)&&e.copy_&&Yd(pd(e.copy_,t,e.type_),n.handledSet_,n)})}function Yd(e,t,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||od(e)||t.has(e)||!sd(e)||_d(e)||(t.add(e),dd(e,(n,a)=>{if(od(a)){const t=a[$u];if(Wd(t,r)){const r=jd(t);fd(e,n,r,e.type_),Hd(t)}}else sd(a)&&Yd(a,t,r)})),e}var $d={get(e,t){if(t===$u)return e;let r=e.scope_.arrayMethodsPlugin_;const n=1===e.type_&&"string"===typeof t;if(n&&null!==r&&void 0!==r&&r.isArrayOperationMethod(t))return r.createMethodInterceptor(e,t);const a=kd(e);if(!md(a,t,e.type_))return function(e,t,r){var n;const a=Zd(t,r);return a?id in a?a[id]:null===(n=a.get)||void 0===n?void 0:n.call(e.draft_):void 0}(e,a,t);const i=a[t];if(e.finalized_||!sd(i))return i;if(n&&e.operationMethod&&null!==r&&void 0!==r&&r.isMutatingArrayMethod(e.operationMethod)&&function(e){const t=+e;return Number.isInteger(t)&&String(t)===e}(t))return i;if(i===Xd(e.base_,t)){th(e);const r=1===e.type_?+t:t,n=rh(e.scope_,i,e,r);return e.copy_[r]=n}return i},has:(e,t)=>t in kd(e),ownKeys:e=>Reflect.ownKeys(kd(e)),set(e,t,r){const n=Zd(kd(e),t);if(null!==n&&void 0!==n&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const n=Xd(kd(e),t),o=null===n||void 0===n?void 0:n[$u];if(o&&o.base_===r)return e.copy_[t]=r,e.assigned_.set(t,!1),!0;if(((a=r)===(i=n)?0!==a||1/a===1/i:a!==a&&i!==i)&&(void 0!==r||md(e.base_,t,e.type_)))return!0;th(e),eh(e)}var a,i;return e.copy_[t]===r&&(void 0!==r||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_.set(t,!0),Qd(e,t,r)),!0},deleteProperty:(e,t)=>(th(e),void 0!==Xd(e.base_,t)||t in e.base_?(e.assigned_.set(t,!1),eh(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const r=kd(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n?{[ad]:!0,[rd]:1!==e.type_||"length"!==t,[nd]:n[nd],[id]:r[t]}:n},defineProperty(){Ju(11)},getPrototypeOf:e=>Zu(e.base_),setPrototypeOf(){Ju(12)}},Jd={};for(let PX in $d){let e=$d[PX];Jd[PX]=function(){const t=arguments;return t[0]=t[0][0],e.apply(this,t)}}function Xd(e,t){const r=e[$u];return(r?kd(r):e)[t]}function Zd(e,t){if(!(t in e))return;let r=Zu(e);for(;r;){const e=Object.getOwnPropertyDescriptor(r,t);if(e)return e;r=Zu(r)}}function eh(e){e.modified_||(e.modified_=!0,e.parent_&&eh(e.parent_))}function th(e){e.copy_||(e.assigned_=new Map,e.copy_=Sd(e.base_,e.scope_.immer_.useStrictShallowCopy_))}Jd.deleteProperty=function(e,t){return Jd.set.call(this,e,t,void 0)},Jd.set=function(e,t,r){return $d.set.call(this,e[0],t,r,e[0])};function rh(e,t,r,n){var a,i;const[o,s]=vd(t)?Pd(Ad).proxyMap_(t,r):yd(t)?Pd(Ad).proxySet_(t,r):function(e,t){const r=gd(e),n={type_:r?1:0,scope_:t?t.scope_:Rd(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let a=n,i=$d;r&&(a=[n],i=Jd);const{revoke:o,proxy:s}=Proxy.revocable(a,i);return n.draft_=s,n.revoke_=o,[s,n]}(t,r);return(null!==(a=null===r||void 0===r?void 0:r.scope_)&&void 0!==a?a:Rd()).drafts_.push(o),s.callbacks_=null!==(i=null===r||void 0===r?void 0:r.callbacks_)&&void 0!==i?i:[],s.key_=n,r&&void 0!==n?function(e,t,r){e.callbacks_.push(function(n){var a,i;const o=t;if(!o||!Wd(o,n))return;null===(a=n.mapSetPlugin_)||void 0===a||a.fixSetContents(o);const s=jd(o);Vd(e,null!==(i=o.draft_)&&void 0!==i?i:o,s,r),Gd(o,n)})}(r,s,n):s.callbacks_.push(function(e){var t;null===(t=e.mapSetPlugin_)||void 0===t||t.fixSetContents(s);const{patchPlugin_:r}=e;s.modified_&&r&&r.generatePatches_(s,[],e)}),o}function nh(e){return od(e)||Ju(10),ah(e)}function ah(e){if(!sd(e)||_d(e))return e;const t=e[$u];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Sd(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=Sd(e,!0);return dd(r,(e,t)=>{fd(r,e,ah(t))},n),t&&(t.finalized_=!1),r}var ih=new class{constructor(e){var t=this;this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(e,t,r)=>{if(xd(e)&&!xd(t)){const r=t;t=e;const n=this;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;for(var a=arguments.length,i=new Array(a>1?a-1:0),o=1;o<a;o++)i[o-1]=arguments[o];return n.produce(e,e=>t.call(this,e,...i))}}let n;if(xd(t)||Ju(6),void 0===r||xd(r)||Ju(7),sd(e)){const a=qd(this),i=rh(a,e,void 0);let o=!0;try{n=t(i),o=!1}finally{o?Ld(a):zd(a)}return Dd(a,r),Fd(n,a)}if(!e||!bd(e)){if(n=t(e),void 0===n&&(n=e),n===Qu&&(n=void 0),this.autoFreeze_&&Cd(n,!0),r){const t=[],a=[];Pd(Td).generateReplacementPatches_(e,n,{patches_:t,inversePatches_:a}),r(t,a)}return n}Ju(1)},this.produceWithPatches=(e,r)=>{if(xd(e))return function(r){for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];return t.produceWithPatches(r,t=>e(t,...a))};let n,a;return[this.produce(e,r,(e,t)=>{n=e,a=t}),n,a]},wd(null===e||void 0===e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),wd(null===e||void 0===e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),wd(null===e||void 0===e?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){sd(e)||Ju(8),od(e)&&(e=nh(e));const t=qd(this),r=rh(t,e,void 0);return r[$u].isManual_=!0,zd(t),r}finishDraft(e,t){const r=e&&e[$u];r&&r.isManual_||Ju(9);const{scope_:n}=r;return Dd(n,t),Fd(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}r>-1&&(t=t.slice(r+1));const n=Pd(Td).applyPatches_;return od(e)?n(e,t):this.produce(e,e=>n(e,t))}},oh=ih.produce;function sh(e){return"Minified Redux error #".concat(e,"; visit https://redux.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}var lh=(()=>"function"===typeof Symbol&&Symbol.observable||"@@observable")(),ch=()=>Math.random().toString(36).substring(7).split("").join("."),uh={INIT:"@@redux/INIT".concat(ch()),REPLACE:"@@redux/REPLACE".concat(ch()),PROBE_UNKNOWN_ACTION:()=>"@@redux/PROBE_UNKNOWN_ACTION".concat(ch())};function dh(e){if("object"!==typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function hh(e,t,r){if("function"!==typeof e)throw new Error(sh(2));if("function"===typeof t&&"function"===typeof r||"function"===typeof r&&"function"===typeof arguments[3])throw new Error(sh(0));if("function"===typeof t&&"undefined"===typeof r&&(r=t,t=void 0),"undefined"!==typeof r){if("function"!==typeof r)throw new Error(sh(1));return r(hh)(e,t)}let n=e,a=t,i=new Map,o=i,s=0,l=!1;function c(){o===i&&(o=new Map,i.forEach((e,t)=>{o.set(t,e)}))}function u(){if(l)throw new Error(sh(3));return a}function d(e){if("function"!==typeof e)throw new Error(sh(4));if(l)throw new Error(sh(5));let t=!0;c();const r=s++;return o.set(r,e),function(){if(t){if(l)throw new Error(sh(6));t=!1,c(),o.delete(r),i=null}}}function h(e){if(!dh(e))throw new Error(sh(7));if("undefined"===typeof e.type)throw new Error(sh(8));if("string"!==typeof e.type)throw new Error(sh(17));if(l)throw new Error(sh(9));try{l=!0,a=n(a,e)}finally{l=!1}return(i=o).forEach(e=>{e()}),e}h({type:uh.INIT});return{dispatch:h,subscribe:d,getState:u,replaceReducer:function(e){if("function"!==typeof e)throw new Error(sh(10));n=e,h({type:uh.REPLACE})},[lh]:function(){const e=d;return{subscribe(t){if("object"!==typeof t||null===t)throw new Error(sh(11));function r(){const e=t;e.next&&e.next(u())}r();return{unsubscribe:e(r)}},[lh](){return this}}}}}function mh(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const n=t[i];0,"function"===typeof e[n]&&(r[n]=e[n])}const n=Object.keys(r);let a;try{!function(e){Object.keys(e).forEach(t=>{const r=e[t];if("undefined"===typeof r(void 0,{type:uh.INIT}))throw new Error(sh(12));if("undefined"===typeof r(void 0,{type:uh.PROBE_UNKNOWN_ACTION()}))throw new Error(sh(13))})}(r)}catch(OX){a=OX}return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(a)throw a;let i=!1;const o={};for(let a=0;a<n.length;a++){const s=n[a],l=r[s],c=e[s],u=l(c,t);if("undefined"===typeof u){t&&t.type;throw new Error(sh(14))}o[s]=u,i=i||u!==c}return i=i||n.length!==Object.keys(e).length,i?o:e}}function ph(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?e=>e:1===t.length?t[0]:t.reduce((e,t)=>function(){return e(t(...arguments))})}function fh(e){return dh(e)&&"type"in e&&"string"===typeof e.type}function gh(e){return t=>{let{dispatch:r,getState:n}=t;return t=>a=>"function"===typeof a?a(r,n,e):t(a)}}var vh=gh(),yh=gh;const bh=["reducerPath"];var xh="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?ph:ph.apply(null,arguments)};"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function wh(e,t){function r(){if(t){let r=t(...arguments);if(!r)throw new Error(fm(0));return u(u({type:e,payload:r.payload},"meta"in r&&{meta:r.meta}),"error"in r&&{error:r.error})}return{type:e,payload:arguments.length<=0?void 0:arguments[0]}}return r.toString=()=>"".concat(e),r.type=e,r.match=t=>fh(t)&&t.type===e,r}var kh=class e extends Array{constructor(){super(...arguments),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return super.concat.apply(this,t)}prepend(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return 1===r.length&&Array.isArray(r[0])?new e(...r[0].concat(this)):new e(...r.concat(this))}};function jh(e){return sd(e)?oh(e,()=>{}):e}function Sh(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}var Ch="RTK_autoBatch",Nh=()=>e=>({payload:e,meta:{[Ch]:!0}}),_h=e=>t=>{setTimeout(t,e)},Ah=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"raf"};return t=>function(){const r=t(...arguments);let n=!0,a=!1,i=!1;const o=new Set,s="tick"===e.type?queueMicrotask:"raf"===e.type?"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:_h(10):"callback"===e.type?e.queueNotification:_h(e.timeout),l=()=>{i=!1,a&&(a=!1,o.forEach(e=>e()))};return Object.assign({},r,{subscribe(e){const t=r.subscribe(()=>n&&e());return o.add(e),()=>{t(),o.delete(e)}},dispatch(e){try{var t;return n=!(null!==e&&void 0!==e&&null!==(t=e.meta)&&void 0!==t&&t[Ch]),a=!n,a&&(i||(i=!0,s(l))),r.dispatch(e)}finally{n=!0}}})}};function Th(e){const t=function(e){const{thunk:t=!0,immutableCheck:r=!0,serializableCheck:n=!0,actionCreatorCheck:a=!0}=null!==e&&void 0!==e?e:{};let i=new kh;return t&&("boolean"===typeof t?i.push(vh):i.push(yh(t.extraArgument))),i},{reducer:r,middleware:n,devTools:a=!0,duplicateMiddlewareCheck:i=!0,preloadedState:o,enhancers:s}=e||{};let l,c;if("function"===typeof r)l=r;else{if(!dh(r))throw new Error(fm(1));l=mh(r)}c="function"===typeof n?n(t):t();let d=ph;a&&(d=xh(u({trace:!1},"object"===typeof a&&a)));const h=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>(r,n)=>{const a=e(r,n);let i=()=>{throw new Error(sh(15))};const o={getState:a.getState,dispatch:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return i(e,...r)}},s=t.map(e=>e(o));return i=ph(...s)(a.dispatch),u(u({},a),{},{dispatch:i})}}(...c),m=(e=>function(t){const{autoBatch:r=!0}=null!==t&&void 0!==t?t:{};let n=new kh(e);return r&&n.push(Ah("object"===typeof r?r:void 0)),n})(h);return hh(l,o,d(..."function"===typeof s?s(m):m()))}function Eh(e){const t={},r=[];let n;const a={addCase(e,r){const n="string"===typeof e?e:e.type;if(!n)throw new Error(fm(28));if(n in t)throw new Error(fm(29));return t[n]=r,a},addAsyncThunk:(e,n)=>(n.pending&&(t[e.pending.type]=n.pending),n.rejected&&(t[e.rejected.type]=n.rejected),n.fulfilled&&(t[e.fulfilled.type]=n.fulfilled),n.settled&&r.push({matcher:e.settled,reducer:n.settled}),a),addMatcher:(e,t)=>(r.push({matcher:e,reducer:t}),a),addDefaultCase:e=>(n=e,a)};return e(a),[t,r,n]}var Oh=function(){let e="",t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;for(;t--;)e+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return e};var Ph=Symbol.for("rtk-slice-createasyncthunk");function Ih(e,t){return"".concat(e,"/").concat(t)}function Mh(){var e;let{creators:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=null===t||void 0===t||null===(e=t.asyncThunk)||void 0===e?void 0:e[Ph];return function(e){const{name:t,reducerPath:n=t}=e;if(!t)throw new Error(fm(11));const a=("function"===typeof e.reducers?e.reducers(function(){function e(e,t){return u({_reducerDefinitionType:"asyncThunk",payloadCreator:e},t)}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name](){return e(...arguments)}}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}()):e.reducers)||{},o=Object.keys(a),s={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},l={addCase(e,t){const r="string"===typeof e?e:e.type;if(!r)throw new Error(fm(12));if(r in s.sliceCaseReducersByType)throw new Error(fm(13));return s.sliceCaseReducersByType[r]=t,l},addMatcher:(e,t)=>(s.sliceMatchers.push({matcher:e,reducer:t}),l),exposeAction:(e,t)=>(s.actionCreators[e]=t,l),exposeCaseReducer:(e,t)=>(s.sliceCaseReducersByName[e]=t,l)};function c(){const[t={},r=[],n]="function"===typeof e.extraReducers?Eh(e.extraReducers):[e.extraReducers],a=u(u({},t),s.sliceCaseReducersByType);return function(e,t){let r,[n,a,i]=Eh(t);if("function"===typeof e)r=()=>jh(e());else{const t=jh(e);r=()=>t}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r(),t=arguments.length>1?arguments[1]:void 0,o=[n[t.type],...a.filter(e=>{let{matcher:r}=e;return r(t)}).map(e=>{let{reducer:t}=e;return t})];return 0===o.filter(e=>!!e).length&&(o=[i]),o.reduce((e,r)=>{if(r){if(od(e)){const n=r(e,t);return void 0===n?e:n}if(sd(e))return oh(e,e=>r(e,t));{const n=r(e,t);if(void 0===n){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return n}}return e},e)}return o.getInitialState=r,o}(e.initialState,e=>{for(let t in a)e.addCase(t,a[t]);for(let t of s.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of r)e.addMatcher(t.matcher,t.reducer);n&&e.addDefaultCase(n)})}o.forEach(n=>{const i=a[n],o={reducerName:n,type:Ih(t,n),createNotation:"function"===typeof e.reducers};!function(e){return"asyncThunk"===e._reducerDefinitionType}(i)?function(e,t,r){let n,a,{type:i,reducerName:o,createNotation:s}=e;if("reducer"in t){if(s&&!function(e){return"reducerWithPrepare"===e._reducerDefinitionType}(t))throw new Error(fm(17));n=t.reducer,a=t.prepare}else n=t;r.addCase(i,n).exposeCaseReducer(o,n).exposeAction(o,a?wh(i,a):wh(i))}(o,i,l):function(e,t,r,n){let{type:a,reducerName:i}=e;if(!n)throw new Error(fm(18));const{payloadCreator:o,fulfilled:s,pending:l,rejected:c,settled:u,options:d}=t,h=n(a,o,d);r.exposeAction(i,h),s&&r.addCase(h.fulfilled,s);l&&r.addCase(h.pending,l);c&&r.addCase(h.rejected,c);u&&r.addMatcher(h.settled,u);r.exposeCaseReducer(i,{fulfilled:s||Lh,pending:l||Lh,rejected:c||Lh,settled:u||Lh})}(o,i,l,r)});const d=e=>e,h=new Map,m=new WeakMap;let p;function f(e,t){return p||(p=c()),p(e,t)}function g(){return p||(p=c()),p.getInitialState()}function v(t){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(e){let a=e[t];return"undefined"===typeof a&&r&&(a=Sh(m,n,g)),a}function a(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;const n=Sh(h,r,()=>new WeakMap);return Sh(n,t,()=>{const n={};for(const[i,o]of Object.entries(null!==(a=e.selectors)&&void 0!==a?a:{})){var a;n[i]=Rh(o,t,()=>Sh(m,t,g),r)}return n})}return{reducerPath:t,getSelectors:a,get selectors(){return a(n)},selectSlice:n}}const y=u(u({name:t,reducer:f,actions:s.actionCreators,caseReducers:s.sliceCaseReducersByName,getInitialState:g},v(n)),{},{injectInto(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{reducerPath:r}=t,a=i(t,bh);const o=null!==r&&void 0!==r?r:n;return e.inject({reducerPath:o,reducer:f},a),u(u({},y),v(o,!0))}});return y}}function Rh(e,t,r,n){function a(a){let i=t(a);"undefined"===typeof i&&n&&(i=r());for(var o=arguments.length,s=new Array(o>1?o-1:0),l=1;l<o;l++)s[l-1]=arguments[l];return e(i,...s)}return a.unwrapped=e,a}var Dh=Mh();function Lh(){}var zh="listener",qh="completed",Bh="cancelled",Fh="task-".concat(Bh),Uh="task-".concat(qh),Hh="".concat(zh,"-").concat(Bh),Wh="".concat(zh,"-").concat(qh),Kh=class{constructor(e){l(this,"name","TaskAbortError"),l(this,"message",void 0),this.code=e,this.message="".concat("task"," ").concat(Bh," (reason: ").concat(e,")")}},Vh=(e,t)=>{if("function"!==typeof e)throw new TypeError(fm(32))},Gh=()=>{},Qh=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Gh;return e.catch(t),e},Yh=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),$h=e=>{if(e.aborted)throw new Kh(e.reason)};function Jh(e,t){let r=Gh;return new Promise((n,a)=>{const i=()=>a(new Kh(e.reason));e.aborted?i():(r=Yh(e,i),t.finally(()=>r()).then(n,a))}).finally(()=>{r=Gh})}var Xh=e=>t=>Qh(Jh(e,t).then(t=>($h(e),t))),Zh=e=>{const t=Xh(e);return e=>t(new Promise(t=>setTimeout(t,e)))},{assign:em}=Object,tm={},rm="listenerMiddleware",nm=(e,t)=>(r,n)=>{Vh(r);const a=new AbortController;var i;i=a,Yh(e,()=>i.abort(e.reason));const o=(async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof Kh?"cancelled":"rejected",error:r}}finally{null===t||void 0===t||t()}})(async()=>{$h(e),$h(a.signal);const t=await r({pause:Xh(a.signal),delay:Zh(a.signal),signal:a.signal});return $h(a.signal),t},()=>a.abort(Uh));return null!==n&&void 0!==n&&n.autoJoin&&t.push(o.catch(Gh)),{result:Xh(e)(o),cancel(){a.abort(Fh)}}},am=(e,t)=>(r,n)=>Qh((async(r,n)=>{$h(t);let a=()=>{};const i=[new Promise((t,n)=>{let i=e({predicate:r,effect:(e,r)=>{r.unsubscribe(),t([e,r.getState(),r.getOriginalState()])}});a=()=>{i(),n()}})];null!=n&&i.push(new Promise(e=>setTimeout(e,n,null)));try{const e=await Jh(t,Promise.race(i));return $h(t),e}finally{a()}})(r,n)),im=e=>{let{type:t,actionCreator:r,matcher:n,predicate:a,effect:i}=e;if(t)a=wh(t).match;else if(r)t=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error(fm(21));return Vh(i),{predicate:a,type:t,effect:i}},om=em(e=>{const{type:t,predicate:r,effect:n}=im(e);return{id:Oh(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(fm(22))}}},{withTypes:()=>om}),sm=(e,t)=>{const{type:r,effect:n,predicate:a}=im(t);return Array.from(e.values()).find(e=>("string"===typeof r?e.type===r:e.predicate===a)&&e.effect===n)},lm=e=>{e.pending.forEach(e=>{e.abort(Hh)})},cm=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},um=em(wh("".concat(rm,"/add")),{withTypes:()=>um}),dm=wh("".concat(rm,"/removeAll")),hm=em(wh("".concat(rm,"/remove")),{withTypes:()=>hm}),mm=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];console.error("".concat(rm,"/error"),...t)},pm=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=new Map,r=new Map,{extra:n,onError:a=mm}=e;Vh(a);const i=e=>{var r;return(e=>(e.unsubscribe=()=>t.delete(e.id),t.set(e.id,e),t=>{e.unsubscribe(),null!==t&&void 0!==t&&t.cancelActive&&lm(e)}))(null!==(r=sm(t,e))&&void 0!==r?r:om(e))};em(i,{withTypes:()=>i});const o=e=>{const r=sm(t,e);return r&&(r.unsubscribe(),e.cancelActive&&lm(r)),!!r};em(o,{withTypes:()=>o});const s=async(e,o,s,l)=>{const c=new AbortController,u=am(i,c.signal),d=[];try{e.pending.add(c),(e=>{var t;const n=null!==(t=r.get(e))&&void 0!==t?t:0;r.set(e,n+1)})(e),await Promise.resolve(e.effect(o,em({},s,{getOriginalState:l,condition:(e,t)=>u(e,t).then(Boolean),take:u,delay:Zh(c.signal),pause:Xh(c.signal),extra:n,signal:c.signal,fork:nm(c.signal,d),unsubscribe:e.unsubscribe,subscribe:()=>{t.set(e.id,e)},cancelActiveListeners:()=>{e.pending.forEach((e,t,r)=>{e!==c&&(e.abort(Hh),r.delete(e))})},cancel:()=>{c.abort(Hh),e.pending.delete(c)},throwIfCancelled:()=>{$h(c.signal)}})))}catch(h){h instanceof Kh||cm(a,h,{raisedBy:"effect"})}finally{await Promise.all(d),c.abort(Wh),(e=>{var t;const n=null!==(t=r.get(e))&&void 0!==t?t:1;1===n?r.delete(e):r.set(e,n-1)})(e),e.pending.delete(c)}},l=((e,t)=>()=>{for(const e of t.keys())lm(e);e.clear()})(t,r);return{middleware:e=>r=>n=>{if(!fh(n))return r(n);if(um.match(n))return i(n.payload);if(dm.match(n))return void l();if(hm.match(n))return o(n.payload);let c=e.getState();const u=()=>{if(c===tm)throw new Error(fm(23));return c};let d;try{if(d=r(n),t.size>0){const r=e.getState(),i=Array.from(t.values());for(const t of i){let i=!1;try{i=t.predicate(n,r,c)}catch(h){i=!1,cm(a,h,{raisedBy:"predicate"})}i&&s(t,n,e,u)}}}finally{c=tm}return d},startListening:i,stopListening:o,clearListeners:l}};Symbol.for("rtk-state-proxy-original");function fm(e){return"Minified Redux Toolkit error #".concat(e,"; visit https://redux-toolkit.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}var gm=(e,t)=>{if(t&&Array.isArray(e)){var r=Number.parseInt(t,10);if(!fu(r))return e[r]}},vm=Dh({name:"options",initialState:{chartName:"",tooltipPayloadSearcher:()=>{},eventEmitter:void 0,defaultTooltipEventType:"axis"},reducers:{createEventEmitter:e=>{null==e.eventEmitter&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),ym=vm.reducer,{createEventEmitter:bm}=vm.actions;__webpack_require__(7237);function xm(e){e()}var wm={notify(){},get:()=>[]};function km(e,t){let r,n=wm,a=0,i=!1;function o(){c.onStateChange&&c.onStateChange()}function s(){a++,r||(r=t?t.addNestedSub(o):e.subscribe(o),n=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){xm(()=>{let t=e;for(;t;)t.callback(),t=t.next})},get(){const t=[];let r=e;for(;r;)t.push(r),r=r.next;return t},subscribe(r){let n=!0;const a=t={callback:r,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){n&&null!==e&&(n=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}())}function l(){a--,r&&0===a&&(r(),r=void 0,n.clear(),n=wm)}const c={addNestedSub:function(e){s();const t=n.subscribe(e);let r=!1;return()=>{r||(r=!0,t(),l())}},notifyNestedSubs:function(){n.notify()},handleChangeWrapper:o,isSubscribed:function(){return i},trySubscribe:function(){i||(i=!0,s())},tryUnsubscribe:function(){i&&(i=!1,l())},getListeners:()=>n};return c}var jm=(()=>!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement))(),Sm=(()=>"undefined"!==typeof navigator&&"ReactNative"===navigator.product)(),Cm=(()=>jm||Sm?r.useLayoutEffect:r.useEffect)();function Nm(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function _m(e,t){if(Nm(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(!Object.prototype.hasOwnProperty.call(t,r[a])||!Nm(e[r[a]],t[r[a]]))return!1;return!0}Object.defineProperty,Object.getOwnPropertyNames,Object.getOwnPropertySymbols,Object.getOwnPropertyDescriptor,Object.getPrototypeOf,Object.prototype;var Am=Symbol.for("react-redux-context"),Tm="undefined"!==typeof globalThis?globalThis:{};function Em(){var e;if(!r.createContext)return{};const t=null!==(e=Tm[Am])&&void 0!==e?e:Tm[Am]=new Map;let n=t.get(r.createContext);return n||(n=r.createContext(null),t.set(r.createContext,n)),n}var Om=Em();var Pm=function(e){const{children:t,context:n,serverState:a,store:i}=e,o=r.useMemo(()=>{const e=km(i);return{store:i,subscription:e,getServerState:a?()=>a:void 0}},[i,a]),s=r.useMemo(()=>i.getState(),[i]);Cm(()=>{const{subscription:e}=o;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),s!==i.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}},[o,s]);const l=n||Om;return r.createElement(l.Provider,{value:o},t)};var Im=Symbol.for("immer-nothing"),Mm=Symbol.for("immer-draftable"),Rm=Symbol.for("immer-state");function Dm(e){throw new Error("[Immer] minified error nr: ".concat(e,". Full error at: https://bit.ly/3cXEKWf"))}var Lm=Object.getPrototypeOf;function zm(e){return!!e&&!!e[Rm]}function qm(e){var t;return!!e&&(Um(e)||Array.isArray(e)||!!e[Mm]||!(null===(t=e.constructor)||void 0===t||!t[Mm])||Gm(e)||Qm(e))}var Bm=Object.prototype.constructor.toString(),Fm=new WeakMap;function Um(e){if(!e||"object"!==typeof e)return!1;const t=Object.getPrototypeOf(e);if(null===t||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if("function"!==typeof r)return!1;let n=Fm.get(r);return void 0===n&&(n=Function.toString.call(r),Fm.set(r,n)),n===Bm}function Hm(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(0===Wm(e)){(r?Reflect.ownKeys(e):Object.keys(e)).forEach(r=>{t(r,e[r],e)})}else e.forEach((r,n)=>t(n,r,e))}function Wm(e){const t=e[Rm];return t?t.type_:Array.isArray(e)?1:Gm(e)?2:Qm(e)?3:0}function Km(e,t){return 2===Wm(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Vm(e,t,r){const n=Wm(e);2===n?e.set(t,r):3===n?e.add(r):e[t]=r}function Gm(e){return e instanceof Map}function Qm(e){return e instanceof Set}function Ym(e){return e.copy_||e.base_}function $m(e,t){if(Gm(e))return new Map(e);if(Qm(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=Um(e);if(!0===t||"class_only"===t&&!r){const t=Object.getOwnPropertyDescriptors(e);delete t[Rm];let r=Reflect.ownKeys(t);for(let n=0;n<r.length;n++){const a=r[n],i=t[a];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[a]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[a]})}return Object.create(Lm(e),t)}{const t=Lm(e);if(null!==t&&r)return u({},e);const n=Object.create(t);return Object.assign(n,e)}}function Jm(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Zm(e)||zm(e)||!qm(e)||(Wm(e)>1&&Object.defineProperties(e,{set:Xm,add:Xm,clear:Xm,delete:Xm}),Object.freeze(e),t&&Object.values(e).forEach(e=>Jm(e,!0))),e}var Xm={value:function(){Dm(2)}};function Zm(e){return null===e||"object"!==typeof e||Object.isFrozen(e)}var ep,tp={};function rp(e){const t=tp[e];return t||Dm(0),t}function np(){return ep}function ap(e,t){t&&(rp("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function ip(e){op(e),e.drafts_.forEach(lp),e.drafts_=null}function op(e){e===ep&&(ep=e.parent_)}function sp(e){return ep={drafts_:[],parent_:ep,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function lp(e){const t=e[Rm];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function cp(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return void 0!==e&&e!==r?(r[Rm].modified_&&(ip(t),Dm(4)),qm(e)&&(e=up(t,e),t.parent_||hp(t,e)),t.patches_&&rp("Patches").generateReplacementPatches_(r[Rm].base_,e,t.patches_,t.inversePatches_)):e=up(t,r,[]),ip(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Im?e:void 0}function up(e,t,r){if(Zm(t))return t;const n=e.immer_.shouldUseStrictIteration(),a=t[Rm];if(!a)return Hm(t,(n,i)=>dp(e,a,t,n,i,r),n),t;if(a.scope_!==e)return t;if(!a.modified_)return hp(e,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const t=a.copy_;let i=t,o=!1;3===a.type_&&(i=new Set(t),t.clear(),o=!0),Hm(i,(n,i)=>dp(e,a,t,n,i,r,o),n),hp(e,t,!1),r&&e.patches_&&rp("Patches").generatePatches_(a,r,e.patches_,e.inversePatches_)}return a.copy_}function dp(e,t,r,n,a,i,o){if(null==a)return;if("object"!==typeof a&&!o)return;const s=Zm(a);if(!s||o){if(zm(a)){const o=up(e,a,i&&t&&3!==t.type_&&!Km(t.assigned_,n)?i.concat(n):void 0);if(Vm(r,n,o),!zm(o))return;e.canAutoFreeze_=!1}else o&&r.add(a);if(qm(a)&&!s){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;if(t&&t.base_&&t.base_[n]===a&&s)return;up(e,a),t&&t.scope_.parent_||"symbol"===typeof n||!(Gm(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))||hp(e,a)}}}function hp(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Jm(t,r)}var mp={get(e,t){if(t===Rm)return e;const r=Ym(e);if(!Km(r,t))return function(e,t,r){var n;const a=gp(t,r);return a?"value"in a?a.value:null===(n=a.get)||void 0===n?void 0:n.call(e.draft_):void 0}(e,r,t);const n=r[t];return e.finalized_||!qm(n)?n:n===fp(e.base_,t)?(yp(e),e.copy_[t]=bp(n,e)):n},has:(e,t)=>t in Ym(e),ownKeys:e=>Reflect.ownKeys(Ym(e)),set(e,t,r){const n=gp(Ym(e),t);if(null!==n&&void 0!==n&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const n=fp(Ym(e),t),o=null===n||void 0===n?void 0:n[Rm];if(o&&o.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(((a=r)===(i=n)?0!==a||1/a===1/i:a!==a&&i!==i)&&(void 0!==r||Km(e.base_,t)))return!0;yp(e),vp(e)}var a,i;return e.copy_[t]===r&&(void 0!==r||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==fp(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,yp(e),vp(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const r=Ym(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:n.enumerable,value:r[t]}:n},defineProperty(){Dm(11)},getPrototypeOf:e=>Lm(e.base_),setPrototypeOf(){Dm(12)}},pp={};function fp(e,t){const r=e[Rm];return(r?Ym(r):e)[t]}function gp(e,t){if(!(t in e))return;let r=Lm(e);for(;r;){const e=Object.getOwnPropertyDescriptor(r,t);if(e)return e;r=Lm(r)}}function vp(e){e.modified_||(e.modified_=!0,e.parent_&&vp(e.parent_))}function yp(e){e.copy_||(e.copy_=$m(e.base_,e.scope_.immer_.useStrictShallowCopy_))}Hm(mp,(e,t)=>{pp[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),pp.deleteProperty=function(e,t){return pp.set.call(this,e,t,void 0)},pp.set=function(e,t,r){return mp.set.call(this,e[0],t,r,e[0])};function bp(e,t){const r=Gm(e)?rp("MapSet").proxyMap_(e,t):Qm(e)?rp("MapSet").proxySet_(e,t):function(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:np(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,i=mp;r&&(a=[n],i=pp);const{revoke:o,proxy:s}=Proxy.revocable(a,i);return n.draft_=s,n.revoke_=o,s}(e,t);return(t?t.scope_:np()).drafts_.push(r),r}function xp(e){if(!qm(e)||Zm(e))return e;const t=e[Rm];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=$m(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=$m(e,!0);return Hm(r,(e,t)=>{Vm(r,e,xp(t))},n),t&&(t.finalized_=!1),r}var wp=new class{constructor(e){var t=this;this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,t,r)=>{if("function"===typeof e&&"function"!==typeof t){const r=t;t=e;const n=this;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;for(var a=arguments.length,i=new Array(a>1?a-1:0),o=1;o<a;o++)i[o-1]=arguments[o];return n.produce(e,e=>t.call(this,e,...i))}}let n;if("function"!==typeof t&&Dm(6),void 0!==r&&"function"!==typeof r&&Dm(7),qm(e)){const a=sp(this),i=bp(e,void 0);let o=!0;try{n=t(i),o=!1}finally{o?ip(a):op(a)}return ap(a,r),cp(n,a)}if(!e||"object"!==typeof e){if(n=t(e),void 0===n&&(n=e),n===Im&&(n=void 0),this.autoFreeze_&&Jm(n,!0),r){const t=[],a=[];rp("Patches").generateReplacementPatches_(e,n,t,a),r(t,a)}return n}Dm(1)},this.produceWithPatches=(e,r)=>{if("function"===typeof e)return function(r){for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];return t.produceWithPatches(r,t=>e(t,...a))};let n,a;return[this.produce(e,r,(e,t)=>{n=e,a=t}),n,a]},"boolean"===typeof(null===e||void 0===e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),"boolean"===typeof(null===e||void 0===e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),"boolean"===typeof(null===e||void 0===e?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){qm(e)||Dm(8),zm(e)&&(e=function(e){zm(e)||Dm(10);return xp(e)}(e));const t=sp(this),r=bp(e,void 0);return r[Rm].isManual_=!0,op(t),r}finishDraft(e,t){const r=e&&e[Rm];r&&r.isManual_||Dm(9);const{scope_:n}=r;return ap(n,t),cp(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}r>-1&&(t=t.slice(r+1));const n=rp("Patches").applyPatches_;return zm(e)?n(e,t):this.produce(e,e=>n(e,t))}};wp.produce;var kp={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},jp=Dh({name:"tooltip",initialState:{itemInteraction:{click:kp,hover:kp},axisInteraction:{click:kp,hover:kp},keyboardInteraction:kp,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:Nh()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:r,next:n}=t.payload,a=nh(e).tooltipItemPayloads.indexOf(r);a>-1&&(e.tooltipItemPayloads[a]=n)},prepare:Nh()},removeTooltipEntrySettings:{reducer(e,t){var r=nh(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:Nh()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:Sp,replaceTooltipEntrySettings:Cp,removeTooltipEntrySettings:Np,setTooltipSettingsState:_p,setActiveMouseOverItemIndex:Ap,mouseLeaveItem:Tp,mouseLeaveChart:Ep,setActiveClickItemIndex:Op,setMouseOverAxisIndex:Pp,setMouseClickAxisIndex:Ip,setSyncInteraction:Mp,setKeyboardInteraction:Rp}=jp.actions,Dp=jp.reducer,Lp=Dh({name:"chartData",initialState:{chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},reducers:{setChartData(e,t){if(e.chartData=t.payload,null==t.payload)return e.dataStartIndex=0,void(e.dataEndIndex=0);t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;null!=r&&(e.dataStartIndex=r),null!=n&&(e.dataEndIndex=n)}}}),{setChartData:zp,setDataStartEndIndexes:qp,setComputedData:Bp}=Lp.actions,Fp=Lp.reducer,Up=Dh({name:"chartLayout",initialState:{layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,a,i;e.margin.top=null!==(r=t.payload.top)&&void 0!==r?r:0,e.margin.right=null!==(n=t.payload.right)&&void 0!==n?n:0,e.margin.bottom=null!==(a=t.payload.bottom)&&void 0!==a?a:0,e.margin.left=null!==(i=t.payload.left)&&void 0!==i?i:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:Hp,setLayout:Wp,setChartSize:Kp,setScale:Vp}=Up.actions,Gp=Up.reducer;function Qp(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected a function, instead received ".concat(typeof e);if("function"!==typeof e)throw new TypeError(t)}var Yp=e=>Array.isArray(e)?e:[e];function $p(e){const t=Array.isArray(e[0])?e[0]:e;return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected all items to be functions, instead received the following types: ";if(!e.every(e=>"function"===typeof e)){const r=e.map(e=>"function"===typeof e?"function ".concat(e.name||"unnamed","()"):typeof e).join(", ");throw new TypeError("".concat(t,"[").concat(r,"]"))}}(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}Symbol(),Object.getPrototypeOf({});var Jp="undefined"!==typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}};function Xp(){return{s:0,v:void 0,o:null,p:null}}function Zp(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={s:0,v:void 0,o:null,p:null};const{resultEqualityCheck:n}=t;let a,i=0;function o(){let t=r;const{length:o}=arguments;for(let e=0,r=o;e<r;e++){const r=arguments[e];if("function"===typeof r||"object"===typeof r&&null!==r){let e=t.o;null===e&&(t.o=e=new WeakMap);const n=e.get(r);void 0===n?(t=Xp(),e.set(r,t)):t=n}else{let e=t.p;null===e&&(t.p=e=new Map);const n=e.get(r);void 0===n?(t=Xp(),e.set(r,t)):t=n}}const s=t;let l;if(1===t.s)l=t.v;else if(l=e.apply(null,arguments),i++,n){var c,u,d;const e=null!==(c=null===(u=a)||void 0===u||null===(d=u.deref)||void 0===d?void 0:d.call(u))&&void 0!==c?c:a;null!=e&&n(e,l)&&(l=e,0!==i&&i--);a="object"===typeof l&&null!==l||"function"===typeof l?new Jp(l):l}return s.s=1,s.v=l,l}return o.clearCache=()=>{r={s:0,v:void 0,o:null,p:null},o.resetResultsCount()},o.resultsCount=()=>i,o.resetResultsCount=()=>{i=0},o}function ef(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];const a="function"===typeof e?{memoize:e,memoizeOptions:r}:e,i=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];let n,i=0,o=0,s={},l=t.pop();"object"===typeof l&&(s=l,l=t.pop()),Qp(l,"createSelector expects an output function after the inputs, but received: [".concat(typeof l,"]"));const c=u(u({},a),s),{memoize:d,memoizeOptions:h=[],argsMemoize:m=Zp,argsMemoizeOptions:p=[],devModeChecks:f={}}=c,g=Yp(h),v=Yp(p),y=$p(t),b=d(function(){return i++,l.apply(null,arguments)},...g);const x=m(function(){o++;const e=function(e,t){const r=[],{length:n}=e;for(let a=0;a<n;a++)r.push(e[a].apply(null,t));return r}(y,arguments);return n=b.apply(null,e),n},...v);return Object.assign(x,{resultFunc:l,memoizedResultFunc:b,dependencies:y,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>n,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:d,argsMemoize:m})};return Object.assign(i,{withTypes:()=>i}),i}var tf=ef(Zp),rf=Object.assign(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tf;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected an object, instead received ".concat(typeof e);if("object"!==typeof e)throw new TypeError(t)}(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ".concat(typeof e));const r=Object.keys(e),n=t(r.map(t=>e[t]),function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((e,t,n)=>(e[r[n]]=t,e),{})});return n},{withTypes:()=>rf}),nf=__webpack_require__(8443),af=(0,r.createContext)(null),of=e=>e,sf=()=>{var e=(0,r.useContext)(af);return e?e.store.dispatch:of},lf=()=>{},cf=()=>lf,uf=(e,t)=>e===t;function df(e){var t=(0,r.useContext)(af),n=(0,r.useMemo)(()=>t?t=>{if(null!=t)return e(t)}:lf,[t,e]);return(0,nf.useSyncExternalStoreWithSelector)(t?t.subscription.addNestedSub:cf,t?t.store.getState:lf,t?t.store.getState:lf,n,uf)}var hf=__webpack_require__(3821),mf=__webpack_require__.n(hf),pf=e=>e.legend.settings,ff=tf([e=>e.legend.payload,pf],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?mf()(n,r):n});function gf(e,t){if((a=e.length)>1)for(var r,n,a,i=1,o=e[t[0]],s=o.length;i<a;++i)for(n=o,o=e[t[i]],r=0;r<s;++r)o[r][1]+=o[r][0]=isNaN(n[r][1])?n[r][0]:n[r][1]}Array.prototype.slice;function vf(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function yf(e){return function(){return e}}function bf(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function xf(e,t){return e[t]}function wf(e){const t=[];return t.key=e,t}function kf(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function jf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Sf(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?jf(Object(r),!0).forEach(function(t){Cf(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jf(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Cf(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nf(e,t,r){return Cu(e)||Cu(t)?r:yu(t)?du()(e,t,r):"function"===typeof t?t(e):r}var _f=(e,t)=>"horizontal"===e&&"xAxis"===t||"vertical"===e&&"yAxis"===t||"centric"===e&&"angleAxis"===t||"radial"===e&&"radiusAxis"===t,Af=(e,t,r,n)=>{if(n)return e.map(e=>e.coordinate);var a,i,o=e.map(e=>(e.coordinate===t&&(a=!0),e.coordinate===r&&(i=!0),e.coordinate));return a||o.push(t),i||o.push(r),o},Tf=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:a,range:i,scale:o,realScaleType:s,isCategorical:l,categoricalDomain:c,tickCount:u,ticks:d,niceTicks:h,axisType:m}=e;if(!o)return null;var p="scaleBand"===s&&o.bandwidth?o.bandwidth()/2:2,f=(t||r)&&"category"===a&&o.bandwidth?o.bandwidth()/p:0;return f="angleAxis"===m&&i&&i.length>=2?2*pu(i[0]-i[1])*f:f,t&&(d||h)?(d||h||[]).map((e,t)=>{var r=n?n.indexOf(e):e,a=o.map(r);return Lu(a)?{coordinate:a+f,value:e,offset:f,index:t}:null}).filter(_u):l&&c?c.map((e,t)=>{var r=o.map(e);return Lu(r)?{coordinate:r+f,value:e,index:t,offset:f}:null}).filter(_u):o.ticks&&!r&&null!=u?o.ticks(u).map((e,t)=>{var r=o.map(e);return Lu(r)?{coordinate:r+f,value:e,index:t,offset:f}:null}).filter(_u):o.domain().map((e,t)=>{var r=o.map(e);return Lu(r)?{coordinate:r+f,value:n?n[e]:e,index:t,offset:f}:null}).filter(_u)},Ef={sign:e=>{var t,r=e.length;if(!(r<=0)){var n=null===(t=e[0])||void 0===t?void 0:t.length;if(!(null==n||n<=0))for(var a=0;a<n;++a)for(var i=0,o=0,s=0;s<r;++s){var l=e[s],c=null===l||void 0===l?void 0:l[a];if(null!=c){var u=c[1],d=c[0],h=fu(u)?d:u;h>=0?(c[0]=i,i+=h,c[1]=i):(c[0]=o,o+=h,c[1]=o)}}}},expand:function(e,t){if((n=e.length)>0){for(var r,n,a,i=0,o=e[0].length;i<o;++i){for(a=r=0;r<n;++r)a+=e[r][i][1]||0;if(a)for(r=0;r<n;++r)e[r][i][1]/=a}gf(e,t)}},none:gf,silhouette:function(e,t){if((r=e.length)>0){for(var r,n=0,a=e[t[0]],i=a.length;n<i;++n){for(var o=0,s=0;o<r;++o)s+=e[o][n][1]||0;a[n][1]+=a[n][0]=-s/2}gf(e,t)}},wiggle:function(e,t){if((a=e.length)>0&&(n=(r=e[t[0]]).length)>0){for(var r,n,a,i=0,o=1;o<n;++o){for(var s=0,l=0,c=0;s<a;++s){for(var u=e[t[s]],d=u[o][1]||0,h=(d-(u[o-1][1]||0))/2,m=0;m<s;++m){var p=e[t[m]];h+=(p[o][1]||0)-(p[o-1][1]||0)}l+=d,c+=h*d}r[o-1][1]+=r[o-1][0]=i,l&&(i-=c/l)}r[o-1][1]+=r[o-1][0]=i,gf(e,t)}},positive:e=>{var t,r=e.length;if(!(r<=0)){var n=null===(t=e[0])||void 0===t?void 0:t.length;if(!(null==n||n<=0))for(var a=0;a<n;++a)for(var i=0,o=0;o<r;++o){var s=e[o],l=null===s||void 0===s?void 0:s[a];if(null!=l){var c=fu(l[1])?l[0]:l[1];c>=0?(l[0]=i,i+=c,l[1]=i):(l[0]=0,l[1]=0)}}}}},Of=(e,t,r)=>{var n,a=null!==(n=Ef[r])&&void 0!==n?n:gf,i=function(){var e=yf([]),t=bf,r=gf,n=xf;function a(a){var i,o,s=Array.from(e.apply(this,arguments),wf),l=s.length,c=-1;for(const e of a)for(i=0,++c;i<l;++i)(s[i][c]=[0,+n(e,s[i].key,c,a)]).data=e;for(i=0,o=vf(t(s));i<l;++i)s[o[i]].index=i;return r(s,o),s}return a.keys=function(t){return arguments.length?(e="function"===typeof t?t:yf(Array.from(t)),a):e},a.value=function(e){return arguments.length?(n="function"===typeof e?e:yf(+e),a):n},a.order=function(e){return arguments.length?(t=null==e?bf:"function"===typeof e?e:yf(Array.from(e)),a):t},a.offset=function(e){return arguments.length?(r=null==e?gf:e,a):r},a}().keys(t).value((e,t)=>Number(Nf(e,t,0))).order(bf).offset(a),o=i(e);return o.forEach((r,n)=>{r.forEach((r,a)=>{var i=Nf(e[a],t[n],0);Array.isArray(i)&&2===i.length&&vu(i[0])&&vu(i[1])&&(r[0]=i[0],r[1]=i[1])})}),o};function Pf(e){return null==e?void 0:String(e)}function If(e){var{axis:t,ticks:r,bandSize:n,entry:a,index:i,dataKey:o}=e;if("category"===t.type){if(!t.allowDuplicatedCategory&&t.dataKey&&!Cu(a[t.dataKey])){var s=Su(r,"value",a[t.dataKey]);if(s)return s.coordinate+n/2}return null!==r&&void 0!==r&&r[i]?r[i].coordinate+n/2:null}var l=Nf(a,Cu(o)?t.dataKey:o),c=t.scale.map(l);return vu(c)?c:null}var Mf=e=>{var{axis:t,ticks:r,offset:n,bandSize:a,entry:i,index:o}=e;if("category"===t.type)return r[o]?r[o].coordinate+n:null;var s=Nf(i,t.dataKey,t.scale.domain()[o]);if(Cu(s))return null;var l=t.scale.map(s);return vu(l)?l-a/2+n:null},Rf=(e,t,r)=>{var n;if(null!=e)return n=Object.keys(e).reduce((n,a)=>{var i=e[a];if(!i)return n;var{stackedData:o}=i,s=o.reduce((e,n)=>{var a=(e=>{var t=e.flat(2).filter(vu);return[Math.min(...t),Math.max(...t)]})(kf(n,t,r));return Lu(a[0])&&Lu(a[1])?[Math.min(e[0],a[0]),Math.max(e[1],a[1])]:e},[1/0,-1/0]);return[Math.min(s[0],n[0]),Math.max(s[1],n[1])]},[1/0,-1/0]),[n[0]===1/0?0:n[0],n[1]===-1/0?0:n[1]]},Df=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Lf=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,zf=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var a=mf()(t,e=>e.coordinate),i=1/0,o=1,s=a.length;o<s;o++){var l=a[o],c=a[o-1];i=Math.min(((null===l||void 0===l?void 0:l.coordinate)||0)-((null===c||void 0===c?void 0:c.coordinate)||0),i)}return i===1/0?0:i}return r?void 0:0};function qf(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:a,name:i}=e;return Sf(Sf({},t),{},{dataKey:r,payload:n,value:a,name:i})}function Bf(e,t){return e?String(e):"string"===typeof t?t:void 0}var Ff=e=>e.layout.width,Uf=e=>e.layout.height,Hf=e=>e.layout.scale,Wf=e=>e.layout.margin,Kf=tf(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Vf=tf(e=>e.cartesianAxis.yAxis,e=>Object.values(e));function Gf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Qf(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Gf(Object(r),!0).forEach(function(t){Yf(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gf(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Yf(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $f=tf([Ff,Uf,Wf,e=>e.brush.height,function(e){return Vf(e).reduce((e,t)=>"left"!==t.orientation||t.mirror||t.hide?e:e+("number"===typeof t.width?t.width:60),0)},function(e){return Vf(e).reduce((e,t)=>"right"!==t.orientation||t.mirror||t.hide?e:e+("number"===typeof t.width?t.width:60),0)},function(e){return Kf(e).reduce((e,t)=>"top"!==t.orientation||t.mirror||t.hide?e:e+t.height,0)},function(e){return Kf(e).reduce((e,t)=>"bottom"!==t.orientation||t.mirror||t.hide?e:e+t.height,0)},pf,e=>e.legend.size],(e,t,r,n,a,i,o,s,l,c)=>{var u={left:(r.left||0)+a,right:(r.right||0)+i},d=Qf(Qf({},{top:(r.top||0)+o,bottom:(r.bottom||0)+s}),u),h=d.bottom;d.bottom+=n,d=((e,t,r)=>{if(t&&r){var{width:n,height:a}=r,{align:i,verticalAlign:o,layout:s}=t;if(("vertical"===s||"horizontal"===s&&"middle"===o)&&"center"!==i&&vu(e[i]))return Sf(Sf({},e),{},{[i]:e[i]+(n||0)});if(("horizontal"===s||"vertical"===s&&"center"===i)&&"middle"!==o&&vu(e[o]))return Sf(Sf({},e),{},{[o]:e[o]+(a||0)})}return e})(d,l,c);var m=e-d.left-d.right,p=t-d.top-d.bottom;return Qf(Qf({brushBottom:h},d),{},{width:Math.max(m,0),height:Math.max(p,0)})}),Jf=tf($f,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Xf=tf(Ff,Uf,(e,t)=>({x:0,y:0,width:e,height:t})),Zf=(0,r.createContext)(null),eg=()=>null!=(0,r.useContext)(Zf),tg=e=>e.brush,rg=tf([tg,$f,Wf],(e,t,r)=>({height:e.height,x:vu(e.x)?e.x:t.left,y:vu(e.y)?e.y:t.top+t.height+t.brushBottom-((null===r||void 0===r?void 0:r.bottom)||0),width:vu(e.width)?e.width:t.width}));function ng(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var ag=()=>{var e,t=eg(),r=df(Jf),n=df(rg),a=null===(e=df(tg))||void 0===e?void 0:e.padding;return t&&n&&a?{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}:r},ig={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},og=()=>{var e;return null!==(e=df($f))&&void 0!==e?e:ig},sg=()=>df(Ff),lg=()=>df(Uf),cg=e=>e.layout.layoutType,ug=()=>df(cg),dg=()=>{var e=ug();if("horizontal"===e||"vertical"===e)return e},hg=e=>{var t=e.layout.layoutType;if("centric"===t||"radial"===t)return t},mg=e=>{var t=sf(),n=eg(),{width:a,height:i}=e,o=Ku(),s=a,l=i;return o&&(s=o.width>0?o.width:a,l=o.height>0?o.height:i),(0,r.useEffect)(()=>{!n&&zu(s)&&zu(l)&&t(Kp({width:s,height:l}))},[t,n,s,l]),null},pg=__webpack_require__(9859),fg=__webpack_require__.n(pg);function gg(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function vg(e,t){switch(arguments.length){case 0:break;case 1:"function"===typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"===typeof t?this.interpolator(t):this.range(t)}return this}class yg extends Map{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:kg;if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[r,n]of e)this.set(r,n)}get(e){return super.get(bg(this,e))}has(e){return super.has(bg(this,e))}set(e,t){return super.set(xg(this,e),t)}delete(e){return super.delete(wg(this,e))}}Set;function bg(e,t){let{_intern:r,_key:n}=e;const a=n(t);return r.has(a)?r.get(a):t}function xg(e,t){let{_intern:r,_key:n}=e;const a=n(t);return r.has(a)?r.get(a):(r.set(a,t),t)}function wg(e,t){let{_intern:r,_key:n}=e;const a=n(t);return r.has(a)&&(t=r.get(a),r.delete(a)),t}function kg(e){return null!==e&&"object"===typeof e?e.valueOf():e}const jg=Symbol("implicit");function Sg(){var e=new yg,t=[],r=[],n=jg;function a(a){let i=e.get(a);if(void 0===i){if(n!==jg)return n;e.set(a,i=t.push(a)-1)}return r[i%r.length]}return a.domain=function(r){if(!arguments.length)return t.slice();t=[],e=new yg;for(const n of r)e.has(n)||e.set(n,t.push(n)-1);return a},a.range=function(e){return arguments.length?(r=Array.from(e),a):r.slice()},a.unknown=function(e){return arguments.length?(n=e,a):n},a.copy=function(){return Sg(t,r).unknown(n)},gg.apply(a,arguments),a}function Cg(){var e,t,r=Sg().unknown(void 0),n=r.domain,a=r.range,i=0,o=1,s=!1,l=0,c=0,u=.5;function d(){var r=n().length,d=o<i,h=d?o:i,m=d?i:o;e=(m-h)/Math.max(1,r-l+2*c),s&&(e=Math.floor(e)),h+=(m-h-e*(r-l))*u,t=e*(1-l),s&&(h=Math.round(h),t=Math.round(t));var p=function(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=0|Math.max(0,Math.ceil((t-e)/r)),i=new Array(a);++n<a;)i[n]=e+n*r;return i}(r).map(function(t){return h+e*t});return a(d?p.reverse():p)}return delete r.unknown,r.domain=function(e){return arguments.length?(n(e),d()):n()},r.range=function(e){return arguments.length?([i,o]=e,i=+i,o=+o,d()):[i,o]},r.rangeRound=function(e){return[i,o]=e,i=+i,o=+o,s=!0,d()},r.bandwidth=function(){return t},r.step=function(){return e},r.round=function(e){return arguments.length?(s=!!e,d()):s},r.padding=function(e){return arguments.length?(l=Math.min(1,c=+e),d()):l},r.paddingInner=function(e){return arguments.length?(l=Math.min(1,e),d()):l},r.paddingOuter=function(e){return arguments.length?(c=+e,d()):c},r.align=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),d()):u},r.copy=function(){return Cg(n(),[i,o]).round(s).paddingInner(l).paddingOuter(c).align(u)},gg.apply(d(),arguments)}function Ng(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Ng(t())},e}function _g(){return Ng(Cg.apply(null,arguments).paddingInner(1))}const Ag=Math.sqrt(50),Tg=Math.sqrt(10),Eg=Math.sqrt(2);function Og(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),o=i>=Ag?10:i>=Tg?5:i>=Eg?2:1;let s,l,c;return a<0?(c=Math.pow(10,-a)/o,s=Math.round(e*c),l=Math.round(t*c),s/c<e&&++s,l/c>t&&--l,c=-c):(c=Math.pow(10,a)*o,s=Math.round(e/c),l=Math.round(t/c),s*c<e&&++s,l*c>t&&--l),l<s&&.5<=r&&r<2?Og(e,t,2*r):[s,l,c]}function Pg(e,t,r){if(!((r=+r)>0))return[];if((e=+e)===(t=+t))return[e];const n=t<e,[a,i,o]=n?Og(t,e,r):Og(e,t,r);if(!(i>=a))return[];const s=i-a+1,l=new Array(s);if(n)if(o<0)for(let c=0;c<s;++c)l[c]=(i-c)/-o;else for(let c=0;c<s;++c)l[c]=(i-c)*o;else if(o<0)for(let c=0;c<s;++c)l[c]=(a+c)/-o;else for(let c=0;c<s;++c)l[c]=(a+c)*o;return l}function Ig(e,t,r){return Og(e=+e,t=+t,r=+r)[2]}function Mg(e,t,r){r=+r;const n=(t=+t)<(e=+e),a=n?Ig(t,e,r):Ig(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function Rg(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Dg(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Lg(e){let t,r,n;function a(e,n){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(a<i){if(0!==t(n,n))return i;do{const t=a+i>>>1;r(e[t],n)<0?a=t+1:i=t}while(a<i)}return a}return 2!==e.length?(t=Rg,r=(t,r)=>Rg(e(t),r),n=(t,r)=>e(t)-r):(t=e===Rg||e===Dg?e:zg,r=e,n=e),{left:a,center:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=a(e,t,r,(arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length)-1);return i>r&&n(e[i-1],t)>-n(e[i],t)?i-1:i},right:function(e,n){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(a<i){if(0!==t(n,n))return i;do{const t=a+i>>>1;r(e[t],n)<=0?a=t+1:i=t}while(a<i)}return a}}}function zg(){return 0}function qg(e){return null===e?NaN:+e}const Bg=Lg(Rg),Fg=Bg.right,Ug=(Bg.left,Lg(qg).center,Fg);function Hg(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function Wg(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Kg(){}var Vg=.7,Gg=1/Vg,Qg="\\s*([+-]?\\d+)\\s*",Yg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",$g="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Jg=/^#([0-9a-f]{3,8})$/,Xg=new RegExp("^rgb\\(".concat(Qg,",").concat(Qg,",").concat(Qg,"\\)$")),Zg=new RegExp("^rgb\\(".concat($g,",").concat($g,",").concat($g,"\\)$")),ev=new RegExp("^rgba\\(".concat(Qg,",").concat(Qg,",").concat(Qg,",").concat(Yg,"\\)$")),tv=new RegExp("^rgba\\(".concat($g,",").concat($g,",").concat($g,",").concat(Yg,"\\)$")),rv=new RegExp("^hsl\\(".concat(Yg,",").concat($g,",").concat($g,"\\)$")),nv=new RegExp("^hsla\\(".concat(Yg,",").concat($g,",").concat($g,",").concat(Yg,"\\)$")),av={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function iv(){return this.rgb().formatHex()}function ov(){return this.rgb().formatRgb()}function sv(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=Jg.exec(e))?(r=t[1].length,t=parseInt(t[1],16),6===r?lv(t):3===r?new dv(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===r?cv(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===r?cv(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Xg.exec(e))?new dv(t[1],t[2],t[3],1):(t=Zg.exec(e))?new dv(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=ev.exec(e))?cv(t[1],t[2],t[3],t[4]):(t=tv.exec(e))?cv(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=rv.exec(e))?vv(t[1],t[2]/100,t[3]/100,1):(t=nv.exec(e))?vv(t[1],t[2]/100,t[3]/100,t[4]):av.hasOwnProperty(e)?lv(av[e]):"transparent"===e?new dv(NaN,NaN,NaN,0):null}function lv(e){return new dv(e>>16&255,e>>8&255,255&e,1)}function cv(e,t,r,n){return n<=0&&(e=t=r=NaN),new dv(e,t,r,n)}function uv(e,t,r,n){return 1===arguments.length?((a=e)instanceof Kg||(a=sv(a)),a?new dv((a=a.rgb()).r,a.g,a.b,a.opacity):new dv):new dv(e,t,r,null==n?1:n);var a}function dv(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}function hv(){return"#".concat(gv(this.r)).concat(gv(this.g)).concat(gv(this.b))}function mv(){const e=pv(this.opacity);return"".concat(1===e?"rgb(":"rgba(").concat(fv(this.r),", ").concat(fv(this.g),", ").concat(fv(this.b)).concat(1===e?")":", ".concat(e,")"))}function pv(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function fv(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function gv(e){return((e=fv(e))<16?"0":"")+e.toString(16)}function vv(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new bv(e,t,r,n)}function yv(e){if(e instanceof bv)return new bv(e.h,e.s,e.l,e.opacity);if(e instanceof Kg||(e=sv(e)),!e)return new bv;if(e instanceof bv)return e;var t=(e=e.rgb()).r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,s=i-a,l=(i+a)/2;return s?(o=t===i?(r-n)/s+6*(r<n):r===i?(n-t)/s+2:(t-r)/s+4,s/=l<.5?i+a:2-i-a,o*=60):s=l>0&&l<1?0:o,new bv(o,s,l,e.opacity)}function bv(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}function xv(e){return(e=(e||0)%360)<0?e+360:e}function wv(e){return Math.max(0,Math.min(1,e||0))}function kv(e,t,r){return 255*(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)}function jv(e,t,r,n,a){var i=e*e,o=i*e;return((1-3*e+3*i-o)*t+(4-6*i+3*o)*r+(1+3*e+3*i-3*o)*n+o*a)/6}Hg(Kg,sv,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:iv,formatHex:iv,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return yv(this).formatHsl()},formatRgb:ov,toString:ov}),Hg(dv,uv,Wg(Kg,{brighter(e){return e=null==e?Gg:Math.pow(Gg,e),new dv(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?Vg:Math.pow(Vg,e),new dv(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new dv(fv(this.r),fv(this.g),fv(this.b),pv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:hv,formatHex:hv,formatHex8:function(){return"#".concat(gv(this.r)).concat(gv(this.g)).concat(gv(this.b)).concat(gv(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:mv,toString:mv})),Hg(bv,function(e,t,r,n){return 1===arguments.length?yv(e):new bv(e,t,r,null==n?1:n)},Wg(Kg,{brighter(e){return e=null==e?Gg:Math.pow(Gg,e),new bv(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?Vg:Math.pow(Vg,e),new bv(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new dv(kv(e>=240?e-240:e+120,a,n),kv(e,a,n),kv(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new bv(xv(this.h),wv(this.s),wv(this.l),pv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=pv(this.opacity);return"".concat(1===e?"hsl(":"hsla(").concat(xv(this.h),", ").concat(100*wv(this.s),"%, ").concat(100*wv(this.l),"%").concat(1===e?")":", ".concat(e,")"))}}));const Sv=e=>()=>e;function Cv(e,t){return function(r){return e+r*t}}function Nv(e){return 1===(e=+e)?_v:function(t,r){return r-t?function(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}(t,r,e):Sv(isNaN(t)?r:t)}}function _v(e,t){var r=t-e;return r?Cv(e,r):Sv(isNaN(e)?t:e)}const Av=function e(t){var r=Nv(t);function n(e,t){var n=r((e=uv(e)).r,(t=uv(t)).r),a=r(e.g,t.g),i=r(e.b,t.b),o=_v(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=a(t),e.b=i(t),e.opacity=o(t),e+""}}return n.gamma=e,n}(1);function Tv(e){return function(t){var r,n,a=t.length,i=new Array(a),o=new Array(a),s=new Array(a);for(r=0;r<a;++r)n=uv(t[r]),i[r]=n.r||0,o[r]=n.g||0,s[r]=n.b||0;return i=e(i),o=e(o),s=e(s),n.opacity=1,function(e){return n.r=i(e),n.g=o(e),n.b=s(e),n+""}}}Tv(function(e){var t=e.length-1;return function(r){var n=r<=0?r=0:r>=1?(r=1,t-1):Math.floor(r*t),a=e[n],i=e[n+1],o=n>0?e[n-1]:2*a-i,s=n<t-1?e[n+2]:2*i-a;return jv((r-n/t)*t,o,a,i,s)}}),Tv(function(e){var t=e.length;return function(r){var n=Math.floor(((r%=1)<0?++r:r)*t),a=e[(n+t-1)%t],i=e[n%t],o=e[(n+1)%t],s=e[(n+2)%t];return jv((r-n/t)*t,a,i,o,s)}});function Ev(e,t){var r,n=t?t.length:0,a=e?Math.min(n,e.length):0,i=new Array(a),o=new Array(n);for(r=0;r<a;++r)i[r]=zv(e[r],t[r]);for(;r<n;++r)o[r]=t[r];return function(e){for(r=0;r<a;++r)o[r]=i[r](e);return o}}function Ov(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Pv(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function Iv(e,t){var r,n={},a={};for(r in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)r in e?n[r]=zv(e[r],t[r]):a[r]=t[r];return function(e){for(r in n)a[r]=n[r](e);return a}}var Mv=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Rv=new RegExp(Mv.source,"g");function Dv(e,t){var r,n,a,i=Mv.lastIndex=Rv.lastIndex=0,o=-1,s=[],l=[];for(e+="",t+="";(r=Mv.exec(e))&&(n=Rv.exec(t));)(a=n.index)>i&&(a=t.slice(i,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(n=n[0])?s[o]?s[o]+=n:s[++o]=n:(s[++o]=null,l.push({i:o,x:Pv(r,n)})),i=Rv.lastIndex;return i<t.length&&(a=t.slice(i),s[o]?s[o]+=a:s[++o]=a),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var r,n=0;n<t;++n)s[(r=l[n]).i]=r.x(e);return s.join("")})}function Lv(e,t){t||(t=[]);var r,n=e?Math.min(t.length,e.length):0,a=t.slice();return function(i){for(r=0;r<n;++r)a[r]=e[r]*(1-i)+t[r]*i;return a}}function zv(e,t){var r,n,a=typeof t;return null==t||"boolean"===a?Sv(t):("number"===a?Pv:"string"===a?(r=sv(t))?(t=r,Av):Dv:t instanceof sv?Av:t instanceof Date?Ov:(n=t,!ArrayBuffer.isView(n)||n instanceof DataView?Array.isArray(t)?Ev:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?Iv:Pv:Lv))(e,t)}function qv(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function Bv(e){return+e}var Fv=[0,1];function Uv(e){return e}function Hv(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:(r=isNaN(t)?NaN:.5,function(){return r});var r}function Wv(e,t,r){var n=e[0],a=e[1],i=t[0],o=t[1];return a<n?(n=Hv(a,n),i=r(o,i)):(n=Hv(n,a),i=r(i,o)),function(e){return i(n(e))}}function Kv(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)a[o]=Hv(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(t){var r=Ug(e,t,1,n)-1;return i[r](a[r](t))}}function Vv(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Gv(){var e,t,r,n,a,i,o=Fv,s=Fv,l=zv,c=Uv;function u(){var e=Math.min(o.length,s.length);return c!==Uv&&(c=function(e,t){var r;return e>t&&(r=e,e=t,t=r),function(r){return Math.max(e,Math.min(t,r))}}(o[0],o[e-1])),n=e>2?Kv:Wv,a=i=null,d}function d(t){return null==t||isNaN(t=+t)?r:(a||(a=n(o.map(e),s,l)))(e(c(t)))}return d.invert=function(r){return c(t((i||(i=n(s,o.map(e),Pv)))(r)))},d.domain=function(e){return arguments.length?(o=Array.from(e,Bv),u()):o.slice()},d.range=function(e){return arguments.length?(s=Array.from(e),u()):s.slice()},d.rangeRound=function(e){return s=Array.from(e),l=qv,u()},d.clamp=function(e){return arguments.length?(c=!!e||Uv,u()):c!==Uv},d.interpolate=function(e){return arguments.length?(l=e,u()):l},d.unknown=function(e){return arguments.length?(r=e,d):r},function(r,n){return e=r,t=n,u()}}function Qv(){return Gv()(Uv,Uv)}var Yv,$v=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Jv(e){if(!(t=$v.exec(e)))throw new Error("invalid format: "+e);var t;return new Xv({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function Xv(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function Zv(e,t){if(!isFinite(e)||0===e)return null;var r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function ey(e){return(e=Zv(Math.abs(e)))?e[1]:NaN}function ty(e,t){var r=Zv(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}Jv.prototype=Xv.prototype,Xv.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const ry={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>ty(100*e,t),r:ty,s:function(e,t){var r=Zv(e,t);if(!r)return Yv=void 0,e.toPrecision(t);var n=r[0],a=r[1],i=a-(Yv=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+Zv(e,Math.max(0,t+i-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function ny(e){return e}var ay,iy,oy,sy=Array.prototype.map,ly=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function cy(e){var t,r,n=void 0===e.grouping||void 0===e.thousands?ny:(t=sy.call(e.grouping,Number),r=e.thousands+"",function(e,n){for(var a=e.length,i=[],o=0,s=t[0],l=0;a>0&&s>0&&(l+s+1>n&&(s=Math.max(1,n-l)),i.push(e.substring(a-=s,a+s)),!((l+=s+1)>n));)s=t[o=(o+1)%t.length];return i.reverse().join(r)}),a=void 0===e.currency?"":e.currency[0]+"",i=void 0===e.currency?"":e.currency[1]+"",o=void 0===e.decimal?".":e.decimal+"",s=void 0===e.numerals?ny:function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}(sy.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"\u2212":e.minus+"",u=void 0===e.nan?"NaN":e.nan+"";function d(e,t){var r=(e=Jv(e)).fill,d=e.align,h=e.sign,m=e.symbol,p=e.zero,f=e.width,g=e.comma,v=e.precision,y=e.trim,b=e.type;"n"===b?(g=!0,b="g"):ry[b]||(void 0===v&&(v=12),y=!0,b="g"),(p||"0"===r&&"="===d)&&(p=!0,r="0",d="=");var x=(t&&void 0!==t.prefix?t.prefix:"")+("$"===m?a:"#"===m&&/[boxX]/.test(b)?"0"+b.toLowerCase():""),w=("$"===m?i:/[%p]/.test(b)?l:"")+(t&&void 0!==t.suffix?t.suffix:""),k=ry[b],j=/[defgprs%]/.test(b);function S(e){var t,a,i,l=x,m=w;if("c"===b)m=k(e)+m,e="";else{var S=(e=+e)<0||1/e<0;if(e=isNaN(e)?u:k(Math.abs(e),v),y&&(e=function(e){e:for(var t,r=e.length,n=1,a=-1;n<r;++n)switch(e[n]){case".":a=t=n;break;case"0":0===a&&(a=n),t=n;break;default:if(!+e[n])break e;a>0&&(a=0)}return a>0?e.slice(0,a)+e.slice(t+1):e}(e)),S&&0===+e&&"+"!==h&&(S=!1),l=(S?"("===h?h:c:"-"===h||"("===h?"":h)+l,m=("s"!==b||isNaN(e)||void 0===Yv?"":ly[8+Yv/3])+m+(S&&"("===h?")":""),j)for(t=-1,a=e.length;++t<a;)if(48>(i=e.charCodeAt(t))||i>57){m=(46===i?o+e.slice(t+1):e.slice(t))+m,e=e.slice(0,t);break}}g&&!p&&(e=n(e,1/0));var C=l.length+e.length+m.length,N=C<f?new Array(f-C+1).join(r):"";switch(g&&p&&(e=n(N+e,N.length?f-m.length:1/0),N=""),d){case"<":e=l+e+m+N;break;case"=":e=l+N+e+m;break;case"^":e=N.slice(0,C=N.length>>1)+l+e+m+N.slice(C);break;default:e=N+l+e+m}return s(e)}return v=void 0===v?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),S.toString=function(){return e+""},S}return{format:d,formatPrefix:function(e,t){var r=3*Math.max(-8,Math.min(8,Math.floor(ey(t)/3))),n=Math.pow(10,-r),a=d(((e=Jv(e)).type="f",e),{suffix:ly[8+r/3]});return function(e){return a(n*e)}}}}function uy(e,t,r,n){var a,i=Mg(e,t,r);switch((n=Jv(null==n?",f":n)).type){case"s":var o=Math.max(Math.abs(e),Math.abs(t));return null!=n.precision||isNaN(a=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(ey(t)/3)))-ey(Math.abs(e)))}(i,o))||(n.precision=a),oy(n,o);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(a=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,ey(t)-ey(e))+1}(i,Math.max(Math.abs(e),Math.abs(t))))||(n.precision=a-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(a=function(e){return Math.max(0,-ey(Math.abs(e)))}(i))||(n.precision=a-2*("%"===n.type))}return iy(n)}function dy(e){var t=e.domain;return e.ticks=function(e){var r=t();return Pg(r[0],r[r.length-1],null==e?10:e)},e.tickFormat=function(e,r){var n=t();return uy(n[0],n[n.length-1],null==e?10:e,r)},e.nice=function(r){null==r&&(r=10);var n,a,i=t(),o=0,s=i.length-1,l=i[o],c=i[s],u=10;for(c<l&&(a=l,l=c,c=a,a=o,o=s,s=a);u-- >0;){if((a=Ig(l,c,r))===n)return i[o]=l,i[s]=c,t(i);if(a>0)l=Math.floor(l/a)*a,c=Math.ceil(c/a)*a;else{if(!(a<0))break;l=Math.ceil(l*a)/a,c=Math.floor(c*a)/a}n=a}return e},e}function hy(){var e=Qv();return e.copy=function(){return Vv(e,hy())},gg.apply(e,arguments),dy(e)}function my(e){var t;function r(e){return null==e||isNaN(e=+e)?t:e}return r.invert=r,r.domain=r.range=function(t){return arguments.length?(e=Array.from(t,Bv),r):e.slice()},r.unknown=function(e){return arguments.length?(t=e,r):t},r.copy=function(){return my(e).unknown(t)},e=arguments.length?Array.from(e,Bv):[0,1],dy(r)}function py(e,t){var r,n=0,a=(e=e.slice()).length-1,i=e[n],o=e[a];return o<i&&(r=n,n=a,a=r,r=i,i=o,o=r),e[n]=t.floor(i),e[a]=t.ceil(o),e}function fy(e){return Math.log(e)}function gy(e){return Math.exp(e)}function vy(e){return-Math.log(-e)}function yy(e){return-Math.exp(-e)}function by(e){return isFinite(e)?+("1e"+e):e<0?0:e}function xy(e){return(t,r)=>-e(-t,r)}function wy(e){const t=e(fy,gy),r=t.domain;let n,a,i=10;function o(){return n=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}(i),a=function(e){return 10===e?by:e===Math.E?Math.exp:t=>Math.pow(e,t)}(i),r()[0]<0?(n=xy(n),a=xy(a),e(vy,yy)):e(fy,gy),t}return t.base=function(e){return arguments.length?(i=+e,o()):i},t.domain=function(e){return arguments.length?(r(e),o()):r()},t.ticks=e=>{const t=r();let o=t[0],s=t[t.length-1];const l=s<o;l&&([o,s]=[s,o]);let c,u,d=n(o),h=n(s);const m=null==e?10:+e;let p=[];if(!(i%1)&&h-d<m){if(d=Math.floor(d),h=Math.ceil(h),o>0){for(;d<=h;++d)for(c=1;c<i;++c)if(u=d<0?c/a(-d):c*a(d),!(u<o)){if(u>s)break;p.push(u)}}else for(;d<=h;++d)for(c=i-1;c>=1;--c)if(u=d>0?c/a(-d):c*a(d),!(u<o)){if(u>s)break;p.push(u)}2*p.length<m&&(p=Pg(o,s,m))}else p=Pg(d,h,Math.min(h-d,m)).map(a);return l?p.reverse():p},t.tickFormat=(e,r)=>{if(null==e&&(e=10),null==r&&(r=10===i?"s":","),"function"!==typeof r&&(i%1||null!=(r=Jv(r)).precision||(r.trim=!0),r=iy(r)),e===1/0)return r;const o=Math.max(1,i*e/t.ticks().length);return e=>{let t=e/a(Math.round(n(e)));return t*i<i-.5&&(t*=i),t<=o?r(e):""}},t.nice=()=>r(py(r(),{floor:e=>a(Math.floor(n(e))),ceil:e=>a(Math.ceil(n(e)))})),t}function ky(){const e=wy(Gv()).domain([1,10]);return e.copy=()=>Vv(e,ky()).base(e.base()),gg.apply(e,arguments),e}function jy(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Sy(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Cy(e){var t=1,r=e(jy(t),Sy(t));return r.constant=function(r){return arguments.length?e(jy(t=+r),Sy(t)):t},dy(r)}function Ny(){var e=Cy(Gv());return e.copy=function(){return Vv(e,Ny()).constant(e.constant())},gg.apply(e,arguments)}function _y(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Ay(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Ty(e){return e<0?-e*e:e*e}function Ey(e){var t=e(Uv,Uv),r=1;return t.exponent=function(t){return arguments.length?1===(r=+t)?e(Uv,Uv):.5===r?e(Ay,Ty):e(_y(r),_y(1/r)):r},dy(t)}function Oy(){var e=Ey(Gv());return e.copy=function(){return Vv(e,Oy()).exponent(e.exponent())},gg.apply(e,arguments),e}function Py(){return Oy.apply(null,arguments).exponent(.5)}function Iy(e){return Math.sign(e)*e*e}function My(){var e,t=Qv(),r=[0,1],n=!1;function a(r){var a=function(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}(t(r));return isNaN(a)?e:n?Math.round(a):a}return a.invert=function(e){return t.invert(Iy(e))},a.domain=function(e){return arguments.length?(t.domain(e),a):t.domain()},a.range=function(e){return arguments.length?(t.range((r=Array.from(e,Bv)).map(Iy)),a):r.slice()},a.rangeRound=function(e){return a.range(e).round(!0)},a.round=function(e){return arguments.length?(n=!!e,a):n},a.clamp=function(e){return arguments.length?(t.clamp(e),a):t.clamp()},a.unknown=function(t){return arguments.length?(e=t,a):e},a.copy=function(){return My(t.domain(),r).round(n).clamp(t.clamp()).unknown(e)},gg.apply(a,arguments),dy(a)}function Ry(e,t){let r;if(void 0===t)for(const n of e)null!=n&&(r<n||void 0===r&&n>=n)&&(r=n);else{let n=-1;for(let a of e)null!=(a=t(a,++n,e))&&(r<a||void 0===r&&a>=a)&&(r=a)}return r}function Dy(e,t){let r;if(void 0===t)for(const n of e)null!=n&&(r>n||void 0===r&&n>=n)&&(r=n);else{let n=-1;for(let a of e)null!=(a=t(a,++n,e))&&(r>a||void 0===r&&a>=a)&&(r=a)}return r}function Ly(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rg;if(e===Rg)return zy;if("function"!==typeof e)throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||0===n?n:(0===e(r,r))-(0===e(t,t))}}function zy(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:e>t?1:0)}function qy(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,a=arguments.length>4?arguments[4]:void 0;if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=void 0===a?zy:Ly(a);n>r;){if(n-r>600){const i=n-r+1,o=t-r+1,s=Math.log(i),l=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*l*(i-l)/i)*(o-i/2<0?-1:1);qy(e,t,Math.max(r,Math.floor(t-o*l/i+c)),Math.min(n,Math.floor(t+(i-o)*l/i+c)),a)}const i=e[t];let o=r,s=n;for(By(e,r,t),a(e[n],i)>0&&By(e,r,n);o<s;){for(By(e,o,s),++o,--s;a(e[o],i)<0;)++o;for(;a(e[s],i)>0;)--s}0===a(e[r],i)?By(e,r,s):(++s,By(e,s,n)),s<=t&&(r=s+1),t<=s&&(n=s-1)}return e}function By(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function Fy(e,t,r){if(e=Float64Array.from(function*(e,t){if(void 0===t)for(let r of e)null!=r&&(r=+r)>=r&&(yield r);else{let r=-1;for(let n of e)null!=(n=t(n,++r,e))&&(n=+n)>=n&&(yield n)}}(e,r)),(n=e.length)&&!isNaN(t=+t)){if(t<=0||n<2)return Dy(e);if(t>=1)return Ry(e);var n,a=(n-1)*t,i=Math.floor(a),o=Ry(qy(e,i).subarray(0,i+1));return o+(Dy(e.subarray(i+1))-o)*(a-i)}}function Uy(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:qg;if((n=e.length)&&!isNaN(t=+t)){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,i=Math.floor(a),o=+r(e[i],i,e);return o+(+r(e[i+1],i+1,e)-o)*(a-i)}}function Hy(){var e,t=[],r=[],n=[];function a(){var e=0,a=Math.max(1,r.length);for(n=new Array(a-1);++e<a;)n[e-1]=Uy(t,e/a);return i}function i(t){return null==t||isNaN(t=+t)?e:r[Ug(n,t)]}return i.invertExtent=function(e){var a=r.indexOf(e);return a<0?[NaN,NaN]:[a>0?n[a-1]:t[0],a<n.length?n[a]:t[t.length-1]]},i.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let r of e)null==r||isNaN(r=+r)||t.push(r);return t.sort(Rg),a()},i.range=function(e){return arguments.length?(r=Array.from(e),a()):r.slice()},i.unknown=function(t){return arguments.length?(e=t,i):e},i.quantiles=function(){return n.slice()},i.copy=function(){return Hy().domain(t).range(r).unknown(e)},gg.apply(i,arguments)}function Wy(){var e,t=0,r=1,n=1,a=[.5],i=[0,1];function o(t){return null!=t&&t<=t?i[Ug(a,t,0,n)]:e}function s(){var e=-1;for(a=new Array(n);++e<n;)a[e]=((e+1)*r-(e-n)*t)/(n+1);return o}return o.domain=function(e){return arguments.length?([t,r]=e,t=+t,r=+r,s()):[t,r]},o.range=function(e){return arguments.length?(n=(i=Array.from(e)).length-1,s()):i.slice()},o.invertExtent=function(e){var o=i.indexOf(e);return o<0?[NaN,NaN]:o<1?[t,a[0]]:o>=n?[a[n-1],r]:[a[o-1],a[o]]},o.unknown=function(t){return arguments.length?(e=t,o):o},o.thresholds=function(){return a.slice()},o.copy=function(){return Wy().domain([t,r]).range(i).unknown(e)},gg.apply(dy(o),arguments)}function Ky(){var e,t=[.5],r=[0,1],n=1;function a(a){return null!=a&&a<=a?r[Ug(t,a,0,n)]:e}return a.domain=function(e){return arguments.length?(t=Array.from(e),n=Math.min(t.length,r.length-1),a):t.slice()},a.range=function(e){return arguments.length?(r=Array.from(e),n=Math.min(t.length,r.length-1),a):r.slice()},a.invertExtent=function(e){var n=r.indexOf(e);return[t[n-1],t[n]]},a.unknown=function(t){return arguments.length?(e=t,a):e},a.copy=function(){return Ky().domain(t).range(r).unknown(e)},gg.apply(a,arguments)}ay=cy({thousands:",",grouping:[3],currency:["$",""]}),iy=ay.format,oy=ay.formatPrefix;const Vy=1e3,Gy=6e4,Qy=36e5,Yy=864e5,$y=6048e5,Jy=2592e6,Xy=31536e6,Zy=new Date,eb=new Date;function tb(e,t,r,n){function a(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return a.floor=t=>(e(t=new Date(+t)),t),a.ceil=r=>(e(r=new Date(r-1)),t(r,1),e(r),r),a.round=e=>{const t=a(e),r=a.ceil(e);return e-t<r-e?t:r},a.offset=(e,r)=>(t(e=new Date(+e),null==r?1:Math.floor(r)),e),a.range=(r,n,i)=>{const o=[];if(r=a.ceil(r),i=null==i?1:Math.floor(i),!(r<n)||!(i>0))return o;let s;do{o.push(s=new Date(+r)),t(r,i),e(r)}while(s<r&&r<n);return o},a.filter=r=>tb(t=>{if(t>=t)for(;e(t),!r(t);)t.setTime(t-1)},(e,n)=>{if(e>=e)if(n<0)for(;++n<=0;)for(;t(e,-1),!r(e););else for(;--n>=0;)for(;t(e,1),!r(e););}),r&&(a.count=(t,n)=>(Zy.setTime(+t),eb.setTime(+n),e(Zy),e(eb),Math.floor(r(Zy,eb))),a.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?a.filter(n?t=>n(t)%e===0:t=>a.count(0,t)%e===0):a:null)),a}const rb=tb(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);rb.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?tb(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):rb:null);rb.range;const nb=tb(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Vy)},(e,t)=>(t-e)/Vy,e=>e.getUTCSeconds()),ab=(nb.range,tb(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Vy)},(e,t)=>{e.setTime(+e+t*Gy)},(e,t)=>(t-e)/Gy,e=>e.getMinutes())),ib=(ab.range,tb(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Gy)},(e,t)=>(t-e)/Gy,e=>e.getUTCMinutes())),ob=(ib.range,tb(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Vy-e.getMinutes()*Gy)},(e,t)=>{e.setTime(+e+t*Qy)},(e,t)=>(t-e)/Qy,e=>e.getHours())),sb=(ob.range,tb(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Qy)},(e,t)=>(t-e)/Qy,e=>e.getUTCHours())),lb=(sb.range,tb(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Gy)/Yy,e=>e.getDate()-1)),cb=(lb.range,tb(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Yy,e=>e.getUTCDate()-1)),ub=(cb.range,tb(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Yy,e=>Math.floor(e/Yy)));ub.range;function db(e){return tb(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+7*t)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Gy)/$y)}const hb=db(0),mb=db(1),pb=db(2),fb=db(3),gb=db(4),vb=db(5),yb=db(6);hb.range,mb.range,pb.range,fb.range,gb.range,vb.range,yb.range;function bb(e){return tb(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)},(e,t)=>(t-e)/$y)}const xb=bb(0),wb=bb(1),kb=bb(2),jb=bb(3),Sb=bb(4),Cb=bb(5),Nb=bb(6),_b=(xb.range,wb.range,kb.range,jb.range,Sb.range,Cb.range,Nb.range,tb(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear()),e=>e.getMonth())),Ab=(_b.range,tb(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear()),e=>e.getUTCMonth())),Tb=(Ab.range,tb(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear()));Tb.every=e=>isFinite(e=Math.floor(e))&&e>0?tb(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)}):null;Tb.range;const Eb=tb(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Eb.every=e=>isFinite(e=Math.floor(e))&&e>0?tb(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)}):null;Eb.range;function Ob(e,t,r,n,a,i){const o=[[nb,1,Vy],[nb,5,5e3],[nb,15,15e3],[nb,30,3e4],[i,1,Gy],[i,5,3e5],[i,15,9e5],[i,30,18e5],[a,1,Qy],[a,3,108e5],[a,6,216e5],[a,12,432e5],[n,1,Yy],[n,2,1728e5],[r,1,$y],[t,1,Jy],[t,3,7776e6],[e,1,Xy]];function s(t,r,n){const a=Math.abs(r-t)/n,i=Lg(e=>{let[,,t]=e;return t}).right(o,a);if(i===o.length)return e.every(Mg(t/Xy,r/Xy,n));if(0===i)return rb.every(Math.max(Mg(t,r,n),1));const[s,l]=o[a/o[i-1][2]<o[i][2]/a?i-1:i];return s.every(l)}return[function(e,t,r){const n=t<e;n&&([e,t]=[t,e]);const a=r&&"function"===typeof r.range?r:s(e,t,r),i=a?a.range(e,+t+1):[];return n?i.reverse():i},s]}const[Pb,Ib]=Ob(Eb,Ab,xb,ub,sb,ib),[Mb,Rb]=Ob(Tb,_b,hb,lb,ob,ab);function Db(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Lb(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function zb(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}var qb,Bb,Fb,Ub={"-":"",_:" ",0:"0"},Hb=/^\s*\d+/,Wb=/^%/,Kb=/[\\^$*+?|[\]().{}]/g;function Vb(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(t)+a:a)}function Gb(e){return e.replace(Kb,"\\$&")}function Qb(e){return new RegExp("^(?:"+e.map(Gb).join("|")+")","i")}function Yb(e){return new Map(e.map((e,t)=>[e.toLowerCase(),t]))}function $b(e,t,r){var n=Hb.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function Jb(e,t,r){var n=Hb.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function Xb(e,t,r){var n=Hb.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function Zb(e,t,r){var n=Hb.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function ex(e,t,r){var n=Hb.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function tx(e,t,r){var n=Hb.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function rx(e,t,r){var n=Hb.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function nx(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function ax(e,t,r){var n=Hb.exec(t.slice(r,r+1));return n?(e.q=3*n[0]-3,r+n[0].length):-1}function ix(e,t,r){var n=Hb.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function ox(e,t,r){var n=Hb.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function sx(e,t,r){var n=Hb.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function lx(e,t,r){var n=Hb.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function cx(e,t,r){var n=Hb.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function ux(e,t,r){var n=Hb.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function dx(e,t,r){var n=Hb.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function hx(e,t,r){var n=Hb.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function mx(e,t,r){var n=Wb.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function px(e,t,r){var n=Hb.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function fx(e,t,r){var n=Hb.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function gx(e,t){return Vb(e.getDate(),t,2)}function vx(e,t){return Vb(e.getHours(),t,2)}function yx(e,t){return Vb(e.getHours()%12||12,t,2)}function bx(e,t){return Vb(1+lb.count(Tb(e),e),t,3)}function xx(e,t){return Vb(e.getMilliseconds(),t,3)}function wx(e,t){return xx(e,t)+"000"}function kx(e,t){return Vb(e.getMonth()+1,t,2)}function jx(e,t){return Vb(e.getMinutes(),t,2)}function Sx(e,t){return Vb(e.getSeconds(),t,2)}function Cx(e){var t=e.getDay();return 0===t?7:t}function Nx(e,t){return Vb(hb.count(Tb(e)-1,e),t,2)}function _x(e){var t=e.getDay();return t>=4||0===t?gb(e):gb.ceil(e)}function Ax(e,t){return e=_x(e),Vb(gb.count(Tb(e),e)+(4===Tb(e).getDay()),t,2)}function Tx(e){return e.getDay()}function Ex(e,t){return Vb(mb.count(Tb(e)-1,e),t,2)}function Ox(e,t){return Vb(e.getFullYear()%100,t,2)}function Px(e,t){return Vb((e=_x(e)).getFullYear()%100,t,2)}function Ix(e,t){return Vb(e.getFullYear()%1e4,t,4)}function Mx(e,t){var r=e.getDay();return Vb((e=r>=4||0===r?gb(e):gb.ceil(e)).getFullYear()%1e4,t,4)}function Rx(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Vb(t/60|0,"0",2)+Vb(t%60,"0",2)}function Dx(e,t){return Vb(e.getUTCDate(),t,2)}function Lx(e,t){return Vb(e.getUTCHours(),t,2)}function zx(e,t){return Vb(e.getUTCHours()%12||12,t,2)}function qx(e,t){return Vb(1+cb.count(Eb(e),e),t,3)}function Bx(e,t){return Vb(e.getUTCMilliseconds(),t,3)}function Fx(e,t){return Bx(e,t)+"000"}function Ux(e,t){return Vb(e.getUTCMonth()+1,t,2)}function Hx(e,t){return Vb(e.getUTCMinutes(),t,2)}function Wx(e,t){return Vb(e.getUTCSeconds(),t,2)}function Kx(e){var t=e.getUTCDay();return 0===t?7:t}function Vx(e,t){return Vb(xb.count(Eb(e)-1,e),t,2)}function Gx(e){var t=e.getUTCDay();return t>=4||0===t?Sb(e):Sb.ceil(e)}function Qx(e,t){return e=Gx(e),Vb(Sb.count(Eb(e),e)+(4===Eb(e).getUTCDay()),t,2)}function Yx(e){return e.getUTCDay()}function $x(e,t){return Vb(wb.count(Eb(e)-1,e),t,2)}function Jx(e,t){return Vb(e.getUTCFullYear()%100,t,2)}function Xx(e,t){return Vb((e=Gx(e)).getUTCFullYear()%100,t,2)}function Zx(e,t){return Vb(e.getUTCFullYear()%1e4,t,4)}function ew(e,t){var r=e.getUTCDay();return Vb((e=r>=4||0===r?Sb(e):Sb.ceil(e)).getUTCFullYear()%1e4,t,4)}function tw(){return"+0000"}function rw(){return"%"}function nw(e){return+e}function aw(e){return Math.floor(+e/1e3)}function iw(e){return new Date(e)}function ow(e){return e instanceof Date?+e:+new Date(+e)}function sw(e,t,r,n,a,i,o,s,l,c){var u=Qv(),d=u.invert,h=u.domain,m=c(".%L"),p=c(":%S"),f=c("%I:%M"),g=c("%I %p"),v=c("%a %d"),y=c("%b %d"),b=c("%B"),x=c("%Y");function w(e){return(l(e)<e?m:s(e)<e?p:o(e)<e?f:i(e)<e?g:n(e)<e?a(e)<e?v:y:r(e)<e?b:x)(e)}return u.invert=function(e){return new Date(d(e))},u.domain=function(e){return arguments.length?h(Array.from(e,ow)):h().map(iw)},u.ticks=function(t){var r=h();return e(r[0],r[r.length-1],null==t?10:t)},u.tickFormat=function(e,t){return null==t?w:c(t)},u.nice=function(e){var r=h();return e&&"function"===typeof e.range||(e=t(r[0],r[r.length-1],null==e?10:e)),e?h(py(r,e)):u},u.copy=function(){return Vv(u,sw(e,t,r,n,a,i,o,s,l,c))},u}function lw(){return gg.apply(sw(Mb,Rb,Tb,_b,hb,lb,ob,ab,nb,Bb).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function cw(){return gg.apply(sw(Pb,Ib,Eb,Ab,xb,cb,sb,ib,nb,Fb).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function uw(){var e,t,r,n,a,i=0,o=1,s=Uv,l=!1;function c(t){return null==t||isNaN(t=+t)?a:s(0===r?.5:(t=(n(t)-e)*r,l?Math.max(0,Math.min(1,t)):t))}function u(e){return function(t){var r,n;return arguments.length?([r,n]=t,s=e(r,n),c):[s(0),s(1)]}}return c.domain=function(a){return arguments.length?([i,o]=a,e=n(i=+i),t=n(o=+o),r=e===t?0:1/(t-e),c):[i,o]},c.clamp=function(e){return arguments.length?(l=!!e,c):l},c.interpolator=function(e){return arguments.length?(s=e,c):s},c.range=u(zv),c.rangeRound=u(qv),c.unknown=function(e){return arguments.length?(a=e,c):a},function(a){return n=a,e=a(i),t=a(o),r=e===t?0:1/(t-e),c}}function dw(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function hw(){var e=dy(uw()(Uv));return e.copy=function(){return dw(e,hw())},vg.apply(e,arguments)}function mw(){var e=wy(uw()).domain([1,10]);return e.copy=function(){return dw(e,mw()).base(e.base())},vg.apply(e,arguments)}function pw(){var e=Cy(uw());return e.copy=function(){return dw(e,pw()).constant(e.constant())},vg.apply(e,arguments)}function fw(){var e=Ey(uw());return e.copy=function(){return dw(e,fw()).exponent(e.exponent())},vg.apply(e,arguments)}function gw(){return fw.apply(null,arguments).exponent(.5)}function vw(){var e=[],t=Uv;function r(r){if(null!=r&&!isNaN(r=+r))return t((Ug(e,r,1)-1)/(e.length-1))}return r.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let r of t)null==r||isNaN(r=+r)||e.push(r);return e.sort(Rg),r},r.interpolator=function(e){return arguments.length?(t=e,r):t},r.range=function(){return e.map((r,n)=>t(n/(e.length-1)))},r.quantiles=function(t){return Array.from({length:t+1},(r,n)=>Fy(e,n/t))},r.copy=function(){return vw(t).domain(e)},vg.apply(r,arguments)}function yw(){var e,t,r,n,a,i,o,s=0,l=.5,c=1,u=1,d=Uv,h=!1;function m(e){return isNaN(e=+e)?o:(e=.5+((e=+i(e))-t)*(u*e<u*t?n:a),d(h?Math.max(0,Math.min(1,e)):e))}function p(e){return function(t){var r,n,a;return arguments.length?([r,n,a]=t,d=function(e,t){void 0===t&&(t=e,e=zv);for(var r=0,n=t.length-1,a=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(a,a=t[++r]);return function(e){var t=Math.max(0,Math.min(n-1,Math.floor(e*=n)));return i[t](e-t)}}(e,[r,n,a]),m):[d(0),d(.5),d(1)]}}return m.domain=function(o){return arguments.length?([s,l,c]=o,e=i(s=+s),t=i(l=+l),r=i(c=+c),n=e===t?0:.5/(t-e),a=t===r?0:.5/(r-t),u=t<e?-1:1,m):[s,l,c]},m.clamp=function(e){return arguments.length?(h=!!e,m):h},m.interpolator=function(e){return arguments.length?(d=e,m):d},m.range=p(zv),m.rangeRound=p(qv),m.unknown=function(e){return arguments.length?(o=e,m):o},function(o){return i=o,e=o(s),t=o(l),r=o(c),n=e===t?0:.5/(t-e),a=t===r?0:.5/(r-t),u=t<e?-1:1,m}}function bw(){var e=dy(yw()(Uv));return e.copy=function(){return dw(e,bw())},vg.apply(e,arguments)}function xw(){var e=wy(yw()).domain([.1,1,10]);return e.copy=function(){return dw(e,xw()).base(e.base())},vg.apply(e,arguments)}function ww(){var e=Cy(yw());return e.copy=function(){return dw(e,ww()).constant(e.constant())},vg.apply(e,arguments)}function kw(){var e=Ey(yw());return e.copy=function(){return dw(e,kw()).exponent(e.exponent())},vg.apply(e,arguments)}function jw(){return kw.apply(null,arguments).exponent(.5)}!function(e){qb=function(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,i=e.days,o=e.shortDays,s=e.months,l=e.shortMonths,c=Qb(a),u=Yb(a),d=Qb(i),h=Yb(i),m=Qb(o),p=Yb(o),f=Qb(s),g=Yb(s),v=Qb(l),y=Yb(l),b={a:function(e){return o[e.getDay()]},A:function(e){return i[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:null,d:gx,e:gx,f:wx,g:Px,G:Mx,H:vx,I:yx,j:bx,L:xx,m:kx,M:jx,p:function(e){return a[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:nw,s:aw,S:Sx,u:Cx,U:Nx,V:Ax,w:Tx,W:Ex,x:null,X:null,y:Ox,Y:Ix,Z:Rx,"%":rw},x={a:function(e){return o[e.getUTCDay()]},A:function(e){return i[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return s[e.getUTCMonth()]},c:null,d:Dx,e:Dx,f:Fx,g:Xx,G:ew,H:Lx,I:zx,j:qx,L:Bx,m:Ux,M:Hx,p:function(e){return a[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:nw,s:aw,S:Wx,u:Kx,U:Vx,V:Qx,w:Yx,W:$x,x:null,X:null,y:Jx,Y:Zx,Z:tw,"%":rw},w={a:function(e,t,r){var n=m.exec(t.slice(r));return n?(e.w=p.get(n[0].toLowerCase()),r+n[0].length):-1},A:function(e,t,r){var n=d.exec(t.slice(r));return n?(e.w=h.get(n[0].toLowerCase()),r+n[0].length):-1},b:function(e,t,r){var n=v.exec(t.slice(r));return n?(e.m=y.get(n[0].toLowerCase()),r+n[0].length):-1},B:function(e,t,r){var n=f.exec(t.slice(r));return n?(e.m=g.get(n[0].toLowerCase()),r+n[0].length):-1},c:function(e,r,n){return S(e,t,r,n)},d:ox,e:ox,f:hx,g:rx,G:tx,H:lx,I:lx,j:sx,L:dx,m:ix,M:cx,p:function(e,t,r){var n=c.exec(t.slice(r));return n?(e.p=u.get(n[0].toLowerCase()),r+n[0].length):-1},q:ax,Q:px,s:fx,S:ux,u:Jb,U:Xb,V:Zb,w:$b,W:ex,x:function(e,t,n){return S(e,r,t,n)},X:function(e,t,r){return S(e,n,t,r)},y:rx,Y:tx,Z:nx,"%":mx};function k(e,t){return function(r){var n,a,i,o=[],s=-1,l=0,c=e.length;for(r instanceof Date||(r=new Date(+r));++s<c;)37===e.charCodeAt(s)&&(o.push(e.slice(l,s)),null!=(a=Ub[n=e.charAt(++s)])?n=e.charAt(++s):a="e"===n?" ":"0",(i=t[n])&&(n=i(r,a)),o.push(n),l=s+1);return o.push(e.slice(l,s)),o.join("")}}function j(e,t){return function(r){var n,a,i=zb(1900,void 0,1);if(S(i,e,r+="",0)!=r.length)return null;if("Q"in i)return new Date(i.Q);if("s"in i)return new Date(1e3*i.s+("L"in i?i.L:0));if(t&&!("Z"in i)&&(i.Z=0),"p"in i&&(i.H=i.H%12+12*i.p),void 0===i.m&&(i.m="q"in i?i.q:0),"V"in i){if(i.V<1||i.V>53)return null;"w"in i||(i.w=1),"Z"in i?(a=(n=Lb(zb(i.y,0,1))).getUTCDay(),n=a>4||0===a?wb.ceil(n):wb(n),n=cb.offset(n,7*(i.V-1)),i.y=n.getUTCFullYear(),i.m=n.getUTCMonth(),i.d=n.getUTCDate()+(i.w+6)%7):(a=(n=Db(zb(i.y,0,1))).getDay(),n=a>4||0===a?mb.ceil(n):mb(n),n=lb.offset(n,7*(i.V-1)),i.y=n.getFullYear(),i.m=n.getMonth(),i.d=n.getDate()+(i.w+6)%7)}else("W"in i||"U"in i)&&("w"in i||(i.w="u"in i?i.u%7:"W"in i?1:0),a="Z"in i?Lb(zb(i.y,0,1)).getUTCDay():Db(zb(i.y,0,1)).getDay(),i.m=0,i.d="W"in i?(i.w+6)%7+7*i.W-(a+5)%7:i.w+7*i.U-(a+6)%7);return"Z"in i?(i.H+=i.Z/100|0,i.M+=i.Z%100,Lb(i)):Db(i)}}function S(e,t,r,n){for(var a,i,o=0,s=t.length,l=r.length;o<s;){if(n>=l)return-1;if(37===(a=t.charCodeAt(o++))){if(a=t.charAt(o++),!(i=w[a in Ub?t.charAt(o++):a])||(n=i(e,r,n))<0)return-1}else if(a!=r.charCodeAt(n++))return-1}return n}return b.x=k(r,b),b.X=k(n,b),b.c=k(t,b),x.x=k(r,x),x.X=k(n,x),x.c=k(t,x),{format:function(e){var t=k(e+="",b);return t.toString=function(){return e},t},parse:function(e){var t=j(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=k(e+="",x);return t.toString=function(){return e},t},utcParse:function(e){var t=j(e+="",!0);return t.toString=function(){return e},t}}}(e),Bb=qb.format,qb.parse,Fb=qb.utcFormat,qb.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Sw=e=>e.chartData,Cw=tf([Sw],e=>{var t=null!=e.chartData?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),Nw=(e,t,r,n)=>n?Cw(e):Sw(e),_w=(e,t,r)=>r?Cw(e):Sw(e);function Aw(e){if(Array.isArray(e)&&2===e.length){var[t,r]=e;if(Lu(t)&&Lu(r))return!0}return!1}function Tw(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function Ew(e,t){if(t&&"function"!==typeof e&&Array.isArray(e)&&2===e.length){var r,n,[a,i]=e;if(Lu(a))r=a;else if("function"===typeof a)return;if(Lu(i))n=i;else if("function"===typeof i)return;var o=[r,n];if(Aw(o))return o}}var Ow=__webpack_require__(8210),Pw=__webpack_require__.n(Ow);function Iw(e){return 0===e?1:Math.floor(new(Pw())(e).abs().log(10).toNumber())+1}function Mw(e,t,r){for(var n=new(Pw())(e),a=0,i=[];n.lt(t)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}var Rw=e=>{var[t,r]=e,[n,a]=[t,r];return t>r&&([n,a]=[r,t]),[n,a]},Dw=(e,t,r)=>{if(e.lte(0))return new(Pw())(0);var n=Iw(e.toNumber()),a=new(Pw())(10).pow(n),i=e.div(a),o=1!==n?.05:.1,s=new(Pw())(Math.ceil(i.div(o).toNumber())).add(r).mul(o).mul(a);return t?new(Pw())(s.toNumber()):new(Pw())(Math.ceil(s.toNumber()))},Lw=function(e,t,r,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new(Pw())(0),tickMin:new(Pw())(0),tickMax:new(Pw())(0)};var i,o=Dw(new(Pw())(t).sub(e).div(r-1),n,a);i=e<=0&&t>=0?new(Pw())(0):(i=new(Pw())(e).add(t).div(2)).sub(new(Pw())(i).mod(o));var s=Math.ceil(i.sub(e).div(o).toNumber()),l=Math.ceil(new(Pw())(t).sub(i).div(o).toNumber()),c=s+l+1;return c>r?Lw(e,t,r,n,a+1):(c<r&&(l=t>0?l+(r-c):l,s=t>0?s:s+(r-c)),{step:o,tickMin:i.sub(new(Pw())(s).mul(o)),tickMax:i.add(new(Pw())(l).mul(o))})},zw=function(e){var[t,r]=e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=Math.max(n,2),[o,s]=Rw([t,r]);if(o===-1/0||s===1/0){var l=s===1/0?[o,...Array(n-1).fill(1/0)]:[...Array(n-1).fill(-1/0),s];return t>r?l.reverse():l}if(o===s)return((e,t,r)=>{var n=new(Pw())(1),a=new(Pw())(e);if(!a.isint()&&r){var i=Math.abs(e);i<1?(n=new(Pw())(10).pow(Iw(e)-1),a=new(Pw())(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new(Pw())(Math.floor(e)))}else 0===e?a=new(Pw())(Math.floor((t-1)/2)):r||(a=new(Pw())(Math.floor(e)));for(var o=Math.floor((t-1)/2),s=[],l=0;l<t;l++)s.push(a.add(new(Pw())(l-o).mul(n)).toNumber());return s})(o,n,a);var{step:c,tickMin:u,tickMax:d}=Lw(o,s,i,a,0),h=Mw(u,d.add(new(Pw())(.1).mul(c)),c);return t>r?h.reverse():h},qw=e=>e.rootProps.maxBarSize,Bw=e=>e.rootProps.barCategoryGap,Fw=e=>e.rootProps.stackOffset,Uw=e=>e.rootProps.reverseStackOrder,Hw=e=>e.options.chartName,Ww=e=>e.rootProps.syncId,Kw=e=>e.rootProps.syncMethod,Vw=e=>e.options.eventEmitter;function Gw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Qw(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Gw(Object(r),!0).forEach(function(t){Yw(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gw(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Yw(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $w=Math.PI/180,Jw=e=>180*e/Math.PI,Xw=(e,t,r,n)=>({x:e+Math.cos(-$w*n)*r,y:t+Math.sin(-$w*n)*r}),Zw=(e,t)=>{var{x:r,y:n}=e,{cx:a,cy:i}=t,o=((e,t)=>{var{x:r,y:n}=e,{x:a,y:i}=t;return Math.sqrt((r-a)**2+(n-i)**2)})({x:r,y:n},{x:a,y:i});if(o<=0)return{radius:o,angle:0};var s=(r-a)/o,l=Math.acos(s);return n>i&&(l=2*Math.PI-l),{radius:o,angle:Jw(l),angleInRadian:l}},ek=(e,t)=>{var{startAngle:r,endAngle:n}=t,a=Math.floor(r/360),i=Math.floor(n/360);return e+360*Math.min(a,i)},tk=(e,t)=>{var{chartX:r,chartY:n}=e,{radius:a,angle:i}=Zw({x:r,y:n},t),{innerRadius:o,outerRadius:s}=t;if(a<o||a>s)return null;if(0===a)return null;var l,{startAngle:c,endAngle:u}=(e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),a=Math.floor(r/360),i=Math.min(n,a);return{startAngle:t-360*i,endAngle:r-360*i}})(t),d=i;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;l=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;l=d>=u&&d<=c}return l?Qw(Qw({},t),{},{radius:a,angle:ek(d,t)}):null},rk={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},nk=!1,ak=!1,ik=0,ok=!1,sk="auto",lk=!0,ck="auto",uk=(rk.axis,!1),dk=!1,hk=!0,mk=!1,pk=0,fk=!1,gk="auto",vk=!0,yk=5,bk="auto",xk=(rk.axis,(e,t)=>{if(e&&t)return null!==e&&void 0!==e&&e.reversed?[t[1],t[0]]:t});function wk(e,t,r){return"auto"!==r?r:null!=e?_f(e,t)?"category":"number":void 0}function kk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function jk(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kk(Object(r),!0).forEach(function(t){Sk(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kk(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Sk(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ck={allowDataOverflow:ak,allowDecimals:nk,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:ik,includeHidden:!1,name:void 0,reversed:ok,scale:sk,tick:lk,tickCount:void 0,ticks:void 0,type:ck,unit:void 0},Nk={allowDataOverflow:uk,allowDecimals:dk,allowDuplicatedCategory:hk,dataKey:void 0,domain:void 0,id:pk,includeHidden:mk,name:void 0,reversed:fk,scale:gk,tick:vk,tickCount:yk,ticks:void 0,type:bk,unit:void 0},_k=tf([(e,t)=>{if(null!=t)return e.polarAxis.angleAxis[t]},hg],(e,t)=>{var r;if(null!=e)return e;var n=null!==(r=wk(t,"angleAxis",Ck.type))&&void 0!==r?r:"category";return jk(jk({},Ck),{},{type:n})}),Ak=tf([(e,t)=>e.polarAxis.radiusAxis[t],hg],(e,t)=>{var r;if(null!=e)return e;var n=null!==(r=wk(t,"radiusAxis",Nk.type))&&void 0!==r?r:"category";return jk(jk({},Nk),{},{type:n})}),Tk=e=>e.polarOptions,Ek=tf([Ff,Uf,$f],function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{top:0,right:0,bottom:0,left:0,width:0,height:0,brushBottom:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(t-(r.top||0)-(r.bottom||0)))/2}),Ok=tf([Tk,Ek],(e,t)=>{if(null!=e)return wu(e.innerRadius,t,0)}),Pk=tf([Tk,Ek],(e,t)=>{if(null!=e)return wu(e.outerRadius,t,.8*t)}),Ik=tf([Tk],e=>{if(null==e)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]}),Mk=(tf([_k,Ik],xk),tf([Ek,Ok,Pk],(e,t,r)=>{if(null!=e&&null!=t&&null!=r)return[t,r]})),Rk=(tf([Ak,Mk],xk),tf([cg,Tk,Ok,Pk,Ff,Uf],(e,t,r,n,a,i)=>{if(("centric"===e||"radial"===e)&&null!=t&&null!=r&&null!=n){var{cx:o,cy:s,startAngle:l,endAngle:c}=t;return{cx:wu(o,a,a/2),cy:wu(s,i,i/2),innerRadius:r,outerRadius:n,startAngle:l,endAngle:c,clockWise:!1}}})),Dk=(e,t)=>t,Lk=(e,t,r)=>r;function zk(e){return null===e||void 0===e?void 0:e.id}function qk(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:a,dataKey:i}=r,o=new Map;return e.forEach(e=>{var t,r=null!==(t=e.data)&&void 0!==t?t:n;if(null!=r&&0!==r.length){var s=zk(e);r.forEach((t,r)=>{var n,l=null==i||a?r:String(Nf(t,i,null)),c=Nf(t,e.dataKey,0);n=o.has(l)?o.get(l):{},Object.assign(n,{[s]:c}),o.set(l,n)})}}),Array.from(o.values())}function Bk(e){return"stackId"in e&&null!=e.stackId&&null!=e.dataKey}var Fk=(e,t)=>e===t||null!=e&&null!=t&&(e[0]===t[0]&&e[1]===t[1]);function Uk(e,t){return!(!Array.isArray(e)||!Array.isArray(t)||0!==e.length||0!==t.length)||e===t}var Hk=e=>{var t=cg(e);return"horizontal"===t?"xAxis":"vertical"===t?"yAxis":"centric"===t?"angleAxis":"radiusAxis"},Wk=e=>e.tooltip.settings.axisId;function Kk(e){var t=e.ticks,r=e.bandwidth,n=e.range(),a=[Math.min(...n),Math.max(...n)];return{domain:()=>e.domain(),range:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(()=>a),rangeMin:()=>a[0],rangeMax:()=>a[1],isInRange(e){var t=a[0],r=a[1];return t<=r?e>=t&&e<=r:e>=r&&e<=t},bandwidth:r?()=>r.call(e):void 0,ticks:t?r=>t.call(e,r):void 0,map:(t,r)=>{var n=e(t);if(null!=n){if(e.bandwidth&&null!==r&&void 0!==r&&r.position){var a=e.bandwidth();switch(r.position){case"middle":n+=a/2;break;case"end":n+=a}}return n}}}}function Vk(e,r,n){if("function"===typeof e)return Kk(e.copy().domain(r).range(n));if(null!=e){var a=function(e){if(e in t)return t[e]();var r="scale".concat(Nu(e));return r in t?t[r]():void 0}(e);if(null!=a)return a.domain(r).range(n),Kk(a)}}function Gk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Qk(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Gk(Object(r),!0).forEach(function(t){Yk(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gk(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Yk(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $k=[0,"auto"],Jk={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},Xk=(e,t)=>e.cartesianAxis.xAxis[t],Zk=(e,t)=>{var r=Xk(e,t);return null==r?Jk:r},ej={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:$k,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:60},tj=(e,t)=>e.cartesianAxis.yAxis[t],rj=(e,t)=>{var r=tj(e,t);return null==r?ej:r},nj={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},aj=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return null==r?nj:r},ij=(e,t,r)=>{switch(t){case"xAxis":return Zk(e,r);case"yAxis":return rj(e,r);case"zAxis":return aj(e,r);case"angleAxis":return _k(e,r);case"radiusAxis":return Ak(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},oj=(e,t,r)=>{switch(t){case"xAxis":return Zk(e,r);case"yAxis":return rj(e,r);case"angleAxis":return _k(e,r);case"radiusAxis":return Ak(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},sj=e=>e.graphicalItems.cartesianItems.some(e=>"bar"===e.type)||e.graphicalItems.polarItems.some(e=>"radialBar"===e.type);function lj(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var cj=e=>e.graphicalItems.cartesianItems,uj=tf([Dk,Lk],lj),dj=(e,t,r)=>e.filter(r).filter(e=>!0===(null===t||void 0===t?void 0:t.includeHidden)||!e.hide),hj=tf([cj,ij,uj],dj,{memoizeOptions:{resultEqualityCheck:Uk}}),mj=tf([hj],e=>e.filter(e=>"area"===e.type||"bar"===e.type).filter(Bk)),pj=e=>e.filter(e=>!("stackId"in e)||void 0===e.stackId),fj=tf([hj],pj),gj=e=>e.map(e=>e.data).filter(Boolean).flat(1),vj=tf([hj],gj,{memoizeOptions:{resultEqualityCheck:Uk}}),yj=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:a}=t;return e.length>0?e:r.slice(n,a+1)},bj=tf([vj,Nw],yj),xj=(e,t,r)=>null!=(null===t||void 0===t?void 0:t.dataKey)?e.map(e=>({value:Nf(e,t.dataKey)})):r.length>0?r.map(e=>e.dataKey).flatMap(t=>e.map(e=>({value:Nf(e,t)}))):e.map(e=>({value:e})),wj=tf([bj,ij,hj],xj);function kj(e,t){switch(e){case"xAxis":return"x"===t.direction;case"yAxis":return"y"===t.direction;default:return!1}}function jj(e){if(yu(e)||e instanceof Date){var t=Number(e);if(Lu(t))return t}}function Sj(e){if(Array.isArray(e)){var t=[jj(e[0]),jj(e[1])];return Aw(t)?t:void 0}var r=jj(e);if(null!=r)return[r,r]}function Cj(e){return e.map(jj).filter(_u)}var Nj=e=>{var t=Hk(e),r=Wk(e);return oj(e,t,r)},_j=tf([Nj],e=>null===e||void 0===e?void 0:e.dataKey),Aj=tf([mj,Nw,Nj],qk),Tj=(e,t,r,n)=>{var a=t.reduce((e,t)=>{if(null==t.stackId)return e;var r=e[t.stackId];return null==r&&(r=[]),r.push(t),e[t.stackId]=r,e},{});return Object.fromEntries(Object.entries(a).map(t=>{var[a,i]=t,o=n?[...i].reverse():i,s=o.map(zk);return[a,{stackedData:Of(e,s,r),graphicalItems:o}]}))},Ej=tf([Aj,mj,Fw,Uw],Tj),Oj=(e,t,r,n)=>{var{dataStartIndex:a,dataEndIndex:i}=t;if(null==n&&"zAxis"!==r){var o=Rf(e,a,i);if(null==o||0!==o[0]||0!==o[1])return o}},Pj=tf([ij],e=>e.allowDataOverflow),Ij=e=>{var t;if(null==e||!("domain"in e))return $k;if(null!=e.domain)return e.domain;if("ticks"in e&&null!=e.ticks){if("number"===e.type){var r=Cj(e.ticks);return[Math.min(...r),Math.max(...r)]}if("category"===e.type)return e.ticks.map(String)}return null!==(t=null===e||void 0===e?void 0:e.domain)&&void 0!==t?t:$k},Mj=tf([ij],Ij),Rj=tf([Mj,Pj],Ew),Dj=tf([Ej,Sw,Dk,Rj],Oj,{memoizeOptions:{resultEqualityCheck:Fk}}),Lj=e=>e.errorBars,zj=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t.filter(Boolean);if(0!==n.length){var a=n.flat();return[Math.min(...a),Math.max(...a)]}},qj=(e,t,r,n,a)=>{var i,o;if(r.length>0&&e.forEach(e=>{r.forEach(r=>{var s,l,c=null===(s=n[r.id])||void 0===s?void 0:s.filter(e=>kj(a,e)),u=Nf(e,null!==(l=t.dataKey)&&void 0!==l?l:r.dataKey),d=function(e,t,r){return!r||"number"!==typeof t||fu(t)?[]:r.length?Cj(r.flatMap(r=>{var n,a,i=Nf(e,r.dataKey);if(Array.isArray(i)?[n,a]=i:n=a=i,Lu(n)&&Lu(a))return[t-n,t+a]})):[]}(e,u,c);if(d.length>=2){var h=Math.min(...d),m=Math.max(...d);(null==i||h<i)&&(i=h),(null==o||m>o)&&(o=m)}var p=Sj(u);null!=p&&(i=null==i?p[0]:Math.min(i,p[0]),o=null==o?p[1]:Math.max(o,p[1]))})}),null!=(null===t||void 0===t?void 0:t.dataKey)&&e.forEach(e=>{var r=Sj(Nf(e,t.dataKey));null!=r&&(i=null==i?r[0]:Math.min(i,r[0]),o=null==o?r[1]:Math.max(o,r[1]))}),Lu(i)&&Lu(o))return[i,o]},Bj=tf([bj,ij,fj,Lj,Dk],qj,{memoizeOptions:{resultEqualityCheck:Fk}});function Fj(e){var{value:t}=e;if(yu(t)||t instanceof Date)return t}var Uj=e=>e.referenceElements.dots,Hj=(e,t,r)=>e.filter(e=>"extendDomain"===e.ifOverflow).filter(e=>"xAxis"===t?e.xAxisId===r:e.yAxisId===r),Wj=tf([Uj,Dk,Lk],Hj),Kj=e=>e.referenceElements.areas,Vj=tf([Kj,Dk,Lk],Hj),Gj=e=>e.referenceElements.lines,Qj=tf([Gj,Dk,Lk],Hj),Yj=(e,t)=>{if(null!=e){var r=Cj(e.map(e=>"xAxis"===t?e.x:e.y));if(0!==r.length)return[Math.min(...r),Math.max(...r)]}},$j=tf(Wj,Dk,Yj),Jj=(e,t)=>{if(null!=e){var r=Cj(e.flatMap(e=>["xAxis"===t?e.x1:e.y1,"xAxis"===t?e.x2:e.y2]));if(0!==r.length)return[Math.min(...r),Math.max(...r)]}},Xj=tf([Vj,Dk],Jj);var Zj=(e,t)=>{if(null!=e){var r=e.flatMap(e=>"xAxis"===t?function(e){var t;if(null!=e.x)return Cj([e.x]);var r=null===(t=e.segment)||void 0===t?void 0:t.map(e=>e.x);return null==r||0===r.length?[]:Cj(r)}(e):function(e){var t;if(null!=e.y)return Cj([e.y]);var r=null===(t=e.segment)||void 0===t?void 0:t.map(e=>e.y);return null==r||0===r.length?[]:Cj(r)}(e));if(0!==r.length)return[Math.min(...r),Math.max(...r)]}},eS=tf([Qj,Dk],Zj),tS=tf($j,eS,Xj,(e,t,r)=>zj(e,r,t)),rS=(e,t,r,n,a,i,o,s)=>null!=r?r:function(e,t,r){if(r||null!=t){if("function"===typeof e&&null!=t)try{var n=e(t,r);if(Aw(n))return Tw(n,t,r)}catch(m){}if(Array.isArray(e)&&2===e.length){var a,i,[o,s]=e;if("auto"===o)null!=t&&(a=Math.min(...t));else if(vu(o))a=o;else if("function"===typeof o)try{null!=t&&(a=o(null===t||void 0===t?void 0:t[0]))}catch(p){}else if("string"===typeof o&&Df.test(o)){var l=Df.exec(o);if(null==l||null==l[1]||null==t)a=void 0;else{var c=+l[1];a=t[0]-c}}else a=null===t||void 0===t?void 0:t[0];if("auto"===s)null!=t&&(i=Math.max(...t));else if(vu(s))i=s;else if("function"===typeof s)try{null!=t&&(i=s(null===t||void 0===t?void 0:t[1]))}catch(f){}else if("string"===typeof s&&Lf.test(s)){var u=Lf.exec(s);if(null==u||null==u[1]||null==t)i=void 0;else{var d=+u[1];i=t[1]+d}}else i=null===t||void 0===t?void 0:t[1];var h=[a,i];if(Aw(h))return null==t?h:Tw(h,t,r)}}}(t,"vertical"===o&&"xAxis"===s||"horizontal"===o&&"yAxis"===s?zj(n,i,a):zj(i,a),e.allowDataOverflow),nS=tf([ij,Mj,Rj,Dj,Bj,tS,cg,Dk],rS,{memoizeOptions:{resultEqualityCheck:Fk}}),aS=[0,1],iS=(e,t,r,n,a,i,o)=>{if(null!=e&&null!=r&&0!==r.length||void 0!==o){var s,{dataKey:l,type:c}=e,u=_f(t,i);return u&&null==l?fg()(0,null!==(s=null===r||void 0===r?void 0:r.length)&&void 0!==s?s:0):"category"===c?((e,t,r)=>{var n=e.map(Fj).filter(e=>null!=e);return r&&(null==t.dataKey||t.allowDuplicatedCategory&&ku(n))?fg()(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))})(n,e,u):"expand"===a?aS:o}},oS=tf([ij,cg,bj,wj,Fw,Dk,nS],iS);var sS=(e,r,n)=>{if(null!=e){var{scale:a,type:i}=e;if("auto"===a)return"category"===i&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":"category"===i?"band":"linear";if("string"===typeof a){var o="scale".concat(Nu(a));return function(e){return e in t}(o)?o:"point"}}},lS=tf([ij,sj,Hw],sS);function cS(e,t,r,n){if(null!=r&&null!=n)return"function"===typeof e.scale?Vk(e.scale,r,n):Vk(t,r,n)}var uS=(e,t,r)=>{var n=Ij(t);if("auto"===r||"linear"===r)return null!=t&&t.tickCount&&Array.isArray(n)&&("auto"===n[0]||"auto"===n[1])&&Aw(e)?zw(e,t.tickCount,t.allowDecimals):null!=t&&t.tickCount&&"number"===t.type&&Aw(e)?function(e,t){var[r,n]=e,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],[i,o]=Rw([r,n]);if(i===-1/0||o===1/0)return[r,n];if(i===o)return[i];var s=Math.max(t,2),l=Dw(new(Pw())(o).sub(i).div(s-1),a,0),c=[...Mw(new(Pw())(i),new(Pw())(o),l),o];return!1===a&&(c=c.map(e=>Math.round(e))),r>n?c.reverse():c}(e,t.tickCount,t.allowDecimals):void 0},dS=tf([oS,oj,lS],uS),hS=(e,t,r,n)=>{if("angleAxis"!==n&&"number"===(null===e||void 0===e?void 0:e.type)&&Aw(t)&&Array.isArray(r)&&r.length>0){var a,i,o=t[0],s=null!==(a=r[0])&&void 0!==a?a:0,l=t[1],c=null!==(i=r[r.length-1])&&void 0!==i?i:0;return[Math.min(o,s),Math.max(l,c)]}return t},mS=tf([ij,oS,dS,Dk],hS),pS=tf(wj,ij,(e,t)=>{if(t&&"number"===t.type){var r=1/0,n=Array.from(Cj(e.map(e=>e.value))).sort((e,t)=>e-t),a=n[0],i=n[n.length-1];if(null==a||null==i)return 1/0;var o=i-a;if(0===o)return 1/0;for(var s=0;s<n.length-1;s++){var l=n[s],c=n[s+1];if(null!=l&&null!=c){var u=c-l;r=Math.min(r,u)}}return r/o}}),fS=tf(pS,cg,Bw,$f,(e,t,r,n,a)=>a,(e,t,r,n,a)=>{if(!Lu(e))return 0;var i="vertical"===t?n.height:n.width;if("gap"===a)return e*i/2;if("no-gap"===a){var o=wu(r,e*i),s=e*i/2;return s-o-(s-o)/i*o}return 0}),gS=tf(Zk,(e,t,r)=>{var n=Zk(e,t);return null==n||"string"!==typeof n.padding?0:fS(e,"xAxis",t,r,n.padding)},(e,t)=>{var r,n;if(null==e)return{left:0,right:0};var{padding:a}=e;return"string"===typeof a?{left:t,right:t}:{left:(null!==(r=a.left)&&void 0!==r?r:0)+t,right:(null!==(n=a.right)&&void 0!==n?n:0)+t}}),vS=tf(rj,(e,t,r)=>{var n=rj(e,t);return null==n||"string"!==typeof n.padding?0:fS(e,"yAxis",t,r,n.padding)},(e,t)=>{var r,n;if(null==e)return{top:0,bottom:0};var{padding:a}=e;return"string"===typeof a?{top:t,bottom:t}:{top:(null!==(r=a.top)&&void 0!==r?r:0)+t,bottom:(null!==(n=a.bottom)&&void 0!==n?n:0)+t}}),yS=tf([$f,gS,rg,tg,(e,t,r)=>r],(e,t,r,n,a)=>{var{padding:i}=n;return a?[i.left,r.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),bS=tf([$f,cg,vS,rg,tg,(e,t,r)=>r],(e,t,r,n,a,i)=>{var{padding:o}=a;return i?[n.height-o.bottom,o.top]:"horizontal"===t?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),xS=(e,t,r,n)=>{var a;switch(t){case"xAxis":return yS(e,r,n);case"yAxis":return bS(e,r,n);case"zAxis":return null===(a=aj(e,r))||void 0===a?void 0:a.range;case"angleAxis":return Ik(e);case"radiusAxis":return Mk(e,r);default:return}},wS=tf([ij,xS],xk),kS=tf([lS,mS],(e,t)=>{if(null!=t){if("linear"===e){if(!Aw(t)){for(var r,n,a=0;a<t.length;a++){var i=t[a];Lu(i)&&((void 0===r||i<r)&&(r=i),(void 0===n||i>n)&&(n=i))}return void 0!==r&&void 0!==n?[r,n]:void 0}return t}return t}}),jS=tf([ij,lS,kS,wS],cS);tf([hj,Lj,Dk],(e,t,r)=>e.flatMap(e=>t[e.id]).filter(Boolean).filter(e=>kj(r,e)));function SS(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var CS=(e,t)=>t,NS=(e,t,r)=>r,_S=tf(Kf,CS,NS,(e,t,r)=>e.filter(e=>e.orientation===t).filter(e=>e.mirror===r).sort(SS)),AS=tf(Vf,CS,NS,(e,t,r)=>e.filter(e=>e.orientation===t).filter(e=>e.mirror===r).sort(SS)),TS=(e,t)=>({width:e.width,height:t.height}),ES=tf($f,Zk,TS),OS=tf(Uf,$f,_S,CS,NS,(e,t,r,n,a)=>{var i,o={};return r.forEach(r=>{var s=TS(t,r);null==i&&(i=((e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}})(t,n,e));var l="top"===n&&!a||"bottom"===n&&a;o[r.id]=i-Number(l)*s.height,i+=(l?-1:1)*s.height}),o}),PS=tf(Ff,$f,AS,CS,NS,(e,t,r,n,a)=>{var i,o={};return r.forEach(r=>{var s=((e,t)=>({width:"number"===typeof t.width?t.width:60,height:e.height}))(t,r);null==i&&(i=((e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}})(t,n,e));var l="left"===n&&!a||"right"===n&&a;o[r.id]=i-Number(l)*s.width,i+=(l?-1:1)*s.width}),o}),IS=tf([$f,Zk,(e,t)=>{var r=Zk(e,t);if(null!=r)return OS(e,r.orientation,r.mirror)},(e,t)=>t],(e,t,r,n)=>{if(null!=t){var a=null===r||void 0===r?void 0:r[n];return null==a?{x:e.left,y:0}:{x:e.left,y:a}}}),MS=tf([$f,rj,(e,t)=>{var r=rj(e,t);if(null!=r)return PS(e,r.orientation,r.mirror)},(e,t)=>t],(e,t,r,n)=>{if(null!=t){var a=null===r||void 0===r?void 0:r[n];return null==a?{x:0,y:e.top}:{x:a,y:e.top}}}),RS=tf($f,rj,(e,t)=>({width:"number"===typeof t.width?t.width:60,height:e.height})),DS=(e,t,r)=>{switch(t){case"xAxis":return ES(e,r).width;case"yAxis":return RS(e,r).height;default:return}},LS=(e,t,r,n)=>{if(null!=r){var{allowDuplicatedCategory:a,type:i,dataKey:o}=r,s=_f(e,n),l=t.map(e=>e.value);return o&&s&&"category"===i&&a&&ku(l)?l:void 0}},zS=tf([cg,wj,ij,Dk],LS),qS=(e,t,r,n)=>{if(null!=r&&null!=r.dataKey){var{type:a,scale:i}=r;return!_f(e,n)||"number"!==a&&"auto"===i?void 0:t.map(e=>e.value)}},BS=tf([cg,wj,oj,Dk],qS),FS=tf([cg,(e,t,r)=>{switch(t){case"xAxis":return Zk(e,r);case"yAxis":return rj(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},lS,jS,zS,BS,xS,dS,Dk],(e,t,r,n,a,i,o,s,l)=>{if(null!=t){var c=_f(e,l);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:l,categoricalDomain:i,duplicateDomain:a,isCategorical:c,niceTicks:s,range:o,realScaleType:r,scale:n}}}),US=tf([cg,oj,lS,jS,dS,xS,zS,BS,Dk],(e,t,r,n,a,i,o,s,l)=>{if(null!=t&&null!=n){var c=_f(e,l),{type:u,ticks:d,tickCount:h}=t,m="scaleBand"===r&&"function"===typeof n.bandwidth?n.bandwidth()/2:2,p="category"===u&&n.bandwidth?n.bandwidth()/m:0;p="angleAxis"===l&&null!=i&&i.length>=2?2*pu(i[0]-i[1])*p:p;var f=d||a;return f?f.map((e,t)=>{var r=o?o.indexOf(e):e,a=n.map(r);return Lu(a)?{index:t,coordinate:a+p,value:e,offset:p}:null}).filter(_u):c&&s?s.map((e,t)=>{var r=n.map(e);return Lu(r)?{coordinate:r+p,value:e,index:t,offset:p}:null}).filter(_u):n.ticks?n.ticks(h).map((e,t)=>{var r=n.map(e);return Lu(r)?{coordinate:r+p,value:e,index:t,offset:p}:null}).filter(_u):n.domain().map((e,t)=>{var r=n.map(e);return Lu(r)?{coordinate:r+p,value:o?o[e]:e,index:t,offset:p}:null}).filter(_u)}}),HS=tf([cg,oj,jS,xS,zS,BS,Dk],(e,t,r,n,a,i,o)=>{if(null!=t&&null!=r&&null!=n&&n[0]!==n[1]){var s=_f(e,o),{tickCount:l}=t,c=0;return c="angleAxis"===o&&(null===n||void 0===n?void 0:n.length)>=2?2*pu(n[0]-n[1])*c:c,s&&i?i.map((e,t)=>{var n=r.map(e);return Lu(n)?{coordinate:n+c,value:e,index:t,offset:c}:null}).filter(_u):r.ticks?r.ticks(l).map((e,t)=>{var n=r.map(e);return Lu(n)?{coordinate:n+c,value:e,index:t,offset:c}:null}).filter(_u):r.domain().map((e,t)=>{var n=r.map(e);return Lu(n)?{coordinate:n+c,value:a?a[e]:e,index:t,offset:c}:null}).filter(_u)}}),WS=tf(ij,jS,(e,t)=>{if(null!=e&&null!=t)return Qk(Qk({},e),{},{scale:t})}),KS=tf([ij,lS,oS,wS],cS),VS=(tf((e,t,r)=>aj(e,r),KS,(e,t)=>{if(null!=e&&null!=t)return Qk(Qk({},e),{},{scale:t})}),tf([cg,Kf,Vf],(e,t,r)=>{switch(e){case"horizontal":return t.some(e=>e.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(e=>e.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}})),GS=e=>e.options.defaultTooltipEventType,QS=e=>e.options.validateTooltipEventTypes;function YS(e,t,r){if(null==e)return t;var n=e?"axis":"item";return null==r?t:r.includes(n)?n:t}function $S(e,t){return YS(t,GS(e),QS(e))}var JS=(e,t)=>{var r,n=Number(t);if(!fu(n)&&null!=t)return n>=0?null===e||void 0===e||null===(r=e[n])||void 0===r?void 0:r.value:void 0};function XS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ZS(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?XS(Object(r),!0).forEach(function(t){eC(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XS(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function eC(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var tC=(e,t,r,n)=>{if(null==t)return kp;var a=function(e,t,r){return"axis"===t?"click"===r?e.axisInteraction.click:e.axisInteraction.hover:"click"===r?e.itemInteraction.click:e.itemInteraction.hover}(e,t,r);if(null==a)return kp;if(a.active)return a;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&null!=e.syncInteraction.index)return e.syncInteraction;var i=!0===e.settings.active;if(null!=a.index){if(i)return ZS(ZS({},a),{},{active:!0})}else if(null!=n)return{active:!0,coordinate:void 0,dataKey:void 0,index:n,graphicalItemId:void 0};return ZS(ZS({},kp),{},{coordinate:a.coordinate})};function rC(e,t){var r=function(e){if("number"===typeof e)return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var r=Number(e);return Number.isFinite(r)?r:void 0}(e),n=t[0],a=t[1];if(void 0===r)return!1;var i=Math.min(n,a),o=Math.max(n,a);return r>=i&&r<=o}var nC=(e,t,r,n)=>{var a=null===e||void 0===e?void 0:e.index;if(null==a)return null;var i=Number(a);if(!Lu(i))return a;var o=1/0;t.length>0&&(o=t.length-1);var s=Math.max(0,Math.min(i,o)),l=t[s];return null==l||function(e,t,r){if(null==r||null==t)return!0;var n=Nf(e,t);return null==n||!Aw(r)||rC(n,r)}(l,r,n)?String(s):null},aC=(e,t,r,n,a,i,o)=>{if(null!=i){var s=o[0],l=null===s||void 0===s?void 0:s.getPosition(i);if(null!=l)return l;var c=null===a||void 0===a?void 0:a[Number(i)];if(c)return"horizontal"===r?{x:c.coordinate,y:(n.top+t)/2}:{x:(n.left+e)/2,y:c.coordinate}}},iC=(e,t,r,n)=>{if("axis"===t)return e.tooltipItemPayloads;if(0===e.tooltipItemPayloads.length)return[];var a;if(null==(a="hover"===r?e.itemInteraction.hover.graphicalItemId:e.itemInteraction.click.graphicalItemId)&&null!=n){var i=e.tooltipItemPayloads[0];return null!=i?[i]:[]}return e.tooltipItemPayloads.filter(e=>{var t;return(null===(t=e.settings)||void 0===t?void 0:t.graphicalItemId)===a})},oC=e=>e.options.tooltipPayloadSearcher,sC=e=>e.tooltip;function lC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function cC(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lC(Object(r),!0).forEach(function(t){uC(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lC(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function uC(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var dC=(e,t,r,n,a,i,o)=>{if(null!=t&&null!=i){var{chartData:s,computedData:l,dataStartIndex:c,dataEndIndex:u}=r;return e.reduce((e,r)=>{var d,h,m,{dataDefinedOnItem:p,settings:f}=r,g=function(e,t){return null!=e?e:t}(p,s),v=Array.isArray(g)?kf(g,c,u):g,y=null!==(d=null===f||void 0===f?void 0:f.dataKey)&&void 0!==d?d:n,b=null===f||void 0===f?void 0:f.nameKey;(h=n&&Array.isArray(v)&&!Array.isArray(v[0])&&"axis"===o?Su(v,n,a):i(v,t,l,b),Array.isArray(h))?h.forEach(t=>{var r=cC(cC({},f),{},{name:t.name,unit:t.unit,color:void 0,fill:void 0});e.push(qf({tooltipEntrySettings:r,dataKey:t.dataKey,payload:t.payload,value:Nf(t.payload,t.dataKey),name:t.name}))}):e.push(qf({tooltipEntrySettings:f,dataKey:y,payload:h,value:Nf(h,y),name:null!==(m=Nf(h,b))&&void 0!==m?m:null===f||void 0===f?void 0:f.name}));return e},[])}},hC=tf([Nj,sj,Hw],sS),mC=tf([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),pC=tf([Hk,Wk],lj),fC=tf([mC,Nj,pC],dj,{memoizeOptions:{resultEqualityCheck:Uk}}),gC=tf([fC],e=>e.filter(Bk)),vC=tf([fC],gj,{memoizeOptions:{resultEqualityCheck:Uk}}),yC=tf([vC,Sw],yj),bC=tf([gC,Sw,Nj],qk),xC=tf([yC,Nj,fC],xj),wC=tf([Nj],Ij),kC=tf([Nj],e=>e.allowDataOverflow),jC=tf([wC,kC],Ew),SC=tf([fC],e=>e.filter(Bk)),CC=tf([bC,SC,Fw,Uw],Tj),NC=tf([CC,Sw,Hk,jC],Oj),_C=tf([fC],pj),AC=tf([yC,Nj,_C,Lj,Hk],qj,{memoizeOptions:{resultEqualityCheck:Fk}}),TC=tf([Uj,Hk,Wk],Hj),EC=tf([TC,Hk],Yj),OC=tf([Kj,Hk,Wk],Hj),PC=tf([OC,Hk],Jj),IC=tf([Gj,Hk,Wk],Hj),MC=tf([IC,Hk],Zj),RC=tf([EC,MC,PC],zj),DC=tf([Nj,wC,jC,NC,AC,RC,cg,Hk],rS),LC=tf([Nj,cg,yC,xC,Fw,Hk,DC],iS),zC=tf([LC,Nj,hC],uS),qC=tf([Nj,LC,zC,Hk],hS),BC=e=>{var t=Hk(e),r=Wk(e);return xS(e,t,r,!1)},FC=tf([Nj,BC],xk),UC=tf([Nj,hC,qC,FC],cS),HC=tf([cg,xC,Nj,Hk],LS),WC=tf([cg,xC,Nj,Hk],qS),KC=tf([cg,Nj,hC,UC,BC,HC,WC,Hk],(e,t,r,n,a,i,o,s)=>{if(t){var{type:l}=t,c=_f(e,s);if(n){var u="scaleBand"===r&&n.bandwidth?n.bandwidth()/2:2,d="category"===l&&n.bandwidth?n.bandwidth()/u:0;return d="angleAxis"===s&&null!=a&&(null===a||void 0===a?void 0:a.length)>=2?2*pu(a[0]-a[1])*d:d,c&&o?o.map((e,t)=>{var r=n.map(e);return Lu(r)?{coordinate:r+d,value:e,index:t,offset:d}:null}).filter(_u):n.domain().map((e,t)=>{var r=n.map(e);return Lu(r)?{coordinate:r+d,value:i?i[e]:e,index:t,offset:d}:null}).filter(_u)}}}),VC=tf([GS,QS,e=>e.tooltip.settings],(e,t,r)=>YS(r.shared,e,t)),GC=e=>e.tooltip.settings.trigger,QC=e=>e.tooltip.settings.defaultIndex,YC=tf([sC,VC,GC,QC],tC),$C=tf([YC,yC,_j,LC],nC),JC=tf([KC,$C],JS),XC=tf([YC],e=>{if(e)return e.dataKey}),ZC=(tf([YC],e=>{if(e)return e.graphicalItemId}),tf([sC,VC,GC,QC],iC)),eN=tf([Ff,Uf,cg,$f,KC,QC,ZC],aC),tN=tf([YC,eN],(e,t)=>null!==e&&void 0!==e&&e.coordinate?e.coordinate:t),rN=tf([YC],e=>{var t;return null!==(t=null===e||void 0===e?void 0:e.active)&&void 0!==t&&t}),nN=tf([ZC,$C,Sw,_j,JC,oC,VC],dC),aN=tf([nN],e=>{if(null!=e){var t=e.map(e=>e.payload).filter(e=>null!=e);return Array.from(new Set(t))}});function iN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function oN(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?iN(Object(r),!0).forEach(function(t){sN(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iN(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function sN(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var lN=(e,t,r,n,a)=>{var i,o=null!==(i=null===t||void 0===t?void 0:t.length)&&void 0!==i?i:0;if(o<=1||null==e)return 0;if("angleAxis"===n&&null!=a&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var s=0;s<o;s++){var l,c,u,d,h,m=s>0?null===(l=r[s-1])||void 0===l?void 0:l.coordinate:null===(c=r[o-1])||void 0===c?void 0:c.coordinate,p=null===(u=r[s])||void 0===u?void 0:u.coordinate,f=s>=o-1?null===(d=r[0])||void 0===d?void 0:d.coordinate:null===(h=r[s+1])||void 0===h?void 0:h.coordinate,g=void 0;if(null!=m&&null!=p&&null!=f)if(pu(p-m)!==pu(f-p)){var v=[];if(pu(f-p)===pu(a[1]-a[0])){g=f;var y=p+a[1]-a[0];v[0]=Math.min(y,(y+m)/2),v[1]=Math.max(y,(y+m)/2)}else{g=m;var b=f+a[1]-a[0];v[0]=Math.min(p,(b+p)/2),v[1]=Math.max(p,(b+p)/2)}var x,w=[Math.min(p,(g+p)/2),Math.max(p,(g+p)/2)];if(e>w[0]&&e<=w[1]||e>=v[0]&&e<=v[1])return null===(x=r[s])||void 0===x?void 0:x.index}else{var k,j=Math.min(m,f),S=Math.max(m,f);if(e>(j+p)/2&&e<=(S+p)/2)return null===(k=r[s])||void 0===k?void 0:k.index}}else if(t)for(var C=0;C<o;C++){var N=t[C];if(null!=N){var _=t[C+1],A=t[C-1];if(0===C&&null!=_&&e<=(N.coordinate+_.coordinate)/2)return N.index;if(C===o-1&&null!=A&&e>(N.coordinate+A.coordinate)/2)return N.index;if(C>0&&C<o-1&&null!=A&&null!=_&&e>(N.coordinate+A.coordinate)/2&&e<=(N.coordinate+_.coordinate)/2)return N.index}}return-1},cN=()=>df(Hw),uN=(e,t)=>t,dN=(e,t,r)=>r,hN=(e,t,r,n)=>n,mN=tf(KC,e=>mf()(e,e=>e.coordinate)),pN=tf([sC,uN,dN,hN],tC),fN=tf([pN,yC,_j,LC],nC),gN=tf([sC,uN,dN,hN],iC),vN=tf([Ff,Uf,cg,$f,KC,hN,gN],aC),yN=tf([pN,vN],(e,t)=>{var r;return null!==(r=e.coordinate)&&void 0!==r?r:t}),bN=tf([KC,fN],JS),xN=tf([gN,fN,Sw,_j,bN,oC,uN],dC),wN=tf([pN,fN],(e,t)=>({isActive:e.active&&null!=t,activeIndex:t})),kN=(e,t,r,n,a,i,o)=>{if(e&&n&&a&&i&&r){var s=tk(e,r);if(s){var l=((e,t)=>"centric"===t?e.angle:e.radius)(s,t),c=lN(l,o,i,n,a),u=((e,t,r,n)=>{var a=t.find(e=>e&&e.index===r);if(a){if("centric"===e){var i=a.coordinate,{radius:o}=n;return oN(oN(oN({},n),Xw(n.cx,n.cy,o,i)),{},{angle:i,radius:o})}var s=a.coordinate,{angle:l}=n;return oN(oN(oN({},n),Xw(n.cx,n.cy,s,l)),{},{angle:l,radius:s})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}})(t,i,c,s);return{activeIndex:String(c),activeCoordinate:u}}}},jN=tf([(e,t)=>t,cg,Rk,Hk,FC,KC,mN,$f],(e,t,r,n,a,i,o,s)=>{if(e&&t&&n&&a&&i)return"horizontal"===t||"vertical"===t?((e,t,r,n,a,i,o)=>{if(e&&r&&n&&a&&function(e,t){var{chartX:r,chartY:n}=e;return r>=t.left&&r<=t.left+t.width&&n>=t.top&&n<=t.top+t.height}(e,o)){var s=((e,t)=>"horizontal"===t?e.chartX:"vertical"===t?e.chartY:void 0)(e,t),l=lN(s,i,a,r,n),c=((e,t,r,n)=>{var a=t.find(e=>e&&e.index===r);if(a){if("horizontal"===e)return{x:a.coordinate,y:n.chartY};if("vertical"===e)return{x:n.chartX,y:a.coordinate}}return{x:0,y:0}})(t,a,l,e);return{activeIndex:String(l),activeCoordinate:c}}})(e,t,n,a,i,o,s):kN(e,t,r,n,a,i,o)}),SN=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},CN=wh("mouseClick"),NN=pm();NN.startListening({actionCreator:CN,effect:(e,t)=>{var r=e.payload,n=jN(t.getState(),SN(r));null!=(null===n||void 0===n?void 0:n.activeIndex)&&t.dispatch(Ip({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var _N=wh("mouseMove"),AN=pm(),TN=null;function EN(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":"children"===e&&"object"===typeof t&&null!==t?"<<CHILDREN>>":t}function ON(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function PN(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ON(Object(r),!0).forEach(function(t){IN(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ON(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function IN(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}AN.startListening({actionCreator:_N,effect:(e,t)=>{var r=e.payload;null!==TN&&cancelAnimationFrame(TN);var n=SN(r);TN=requestAnimationFrame(()=>{var e=t.getState();if("axis"===$S(e,e.tooltip.settings.shared)){var r=jN(e,n);null!=(null===r||void 0===r?void 0:r.activeIndex)?t.dispatch(Pp({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate})):t.dispatch(Ep())}TN=null})}});var MN=Dh({name:"cartesianAxis",initialState:{xAxis:{},yAxis:{},zAxis:{}},reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:Nh()},replaceXAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;void 0!==e.xAxis[r.id]&&(r.id!==n.id&&delete e.xAxis[r.id],e.xAxis[n.id]=n)},prepare:Nh()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:Nh()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:Nh()},replaceYAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;void 0!==e.yAxis[r.id]&&(r.id!==n.id&&delete e.yAxis[r.id],e.yAxis[n.id]=n)},prepare:Nh()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:Nh()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:Nh()},replaceZAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;void 0!==e.zAxis[r.id]&&(r.id!==n.id&&delete e.zAxis[r.id],e.zAxis[n.id]=n)},prepare:Nh()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:Nh()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,a=e.yAxis[r];if(a){var i,o=a.widthHistory||[];if(3===o.length&&o[0]===o[2]&&n===o[1]&&n!==a.width&&Math.abs(n-(null!==(i=o[0])&&void 0!==i?i:0))<=1)return;var s=[...o,n].slice(-3);e.yAxis[r]=PN(PN({},a),{},{width:n,widthHistory:s})}}}}),{addXAxis:RN,replaceXAxis:DN,removeXAxis:LN,addYAxis:zN,replaceYAxis:qN,removeYAxis:BN,addZAxis:FN,replaceZAxis:UN,removeZAxis:HN,updateYAxisWidth:WN}=MN.actions,KN=MN.reducer,VN=Dh({name:"graphicalItems",initialState:{cartesianItems:[],polarItems:[]},reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:Nh()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,a=nh(e).cartesianItems.indexOf(r);a>-1&&(e.cartesianItems[a]=n)},prepare:Nh()},removeCartesianGraphicalItem:{reducer(e,t){var r=nh(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:Nh()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:Nh()},removePolarGraphicalItem:{reducer(e,t){var r=nh(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:Nh()}}}),{addCartesianGraphicalItem:GN,replaceCartesianGraphicalItem:QN,removeCartesianGraphicalItem:YN,addPolarGraphicalItem:$N,removePolarGraphicalItem:JN}=VN.actions,XN=VN.reducer,ZN=Dh({name:"referenceElements",initialState:{dots:[],areas:[],lines:[]},reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=nh(e).dots.findIndex(e=>e===t.payload);-1!==r&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=nh(e).areas.findIndex(e=>e===t.payload);-1!==r&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=nh(e).lines.findIndex(e=>e===t.payload);-1!==r&&e.lines.splice(r,1)}}}),{addDot:e_,removeDot:t_,addArea:r_,removeArea:n_,addLine:a_,removeLine:i_}=ZN.actions,o_=ZN.reducer,s_={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},l_=Dh({name:"brush",initialState:s_,reducers:{setBrushSettings:(e,t)=>null==t.payload?s_:t.payload}}),{setBrushSettings:c_}=l_.actions,u_=l_.reducer,d_=Dh({name:"legend",initialState:{settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:Nh()},replaceLegendPayload:{reducer(e,t){var{prev:r,next:n}=t.payload,a=nh(e).payload.indexOf(r);a>-1&&(e.payload[a]=n)},prepare:Nh()},removeLegendPayload:{reducer(e,t){var r=nh(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:Nh()}}}),{setLegendSize:h_,setLegendSettings:m_,addLegendPayload:p_,replaceLegendPayload:f_,removeLegendPayload:g_}=d_.actions,v_=d_.reducer,y_={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},b_=Dh({name:"rootProps",initialState:y_,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=null!==(r=t.payload.barGap)&&void 0!==r?r:y_.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),x_=b_.reducer,{updateOptions:w_}=b_.actions,k_=Dh({name:"polarAxis",initialState:{radiusAxis:{},angleAxis:{}},reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:j_,removeRadiusAxis:S_,addAngleAxis:C_,removeAngleAxis:N_}=k_.actions,__=k_.reducer,A_=Dh({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:T_}=A_.actions,E_=A_.reducer,O_=wh("keyDown"),P_=wh("focus"),I_=pm();I_.startListening({actionCreator:O_,effect:(e,t)=>{var r=t.getState();if(!1!==r.rootProps.accessibilityLayer){var{keyboardInteraction:n}=r.tooltip,a=e.payload;if("ArrowRight"===a||"ArrowLeft"===a||"Enter"===a){var i=nC(n,yC(r),_j(r),LC(r)),o=null==i?-1:Number(i);if(Number.isFinite(o)&&!(o<0)){var s=KC(r);if("Enter"!==a){var l=o+("ArrowRight"===a?1:-1)*("left-to-right"===VS(r)?1:-1);if(!(null==s||l>=s.length||l<0)){var c=vN(r,"axis","hover",String(l));t.dispatch(Rp({active:!0,activeIndex:l.toString(),activeCoordinate:c}))}}else{var u=vN(r,"axis","hover",String(n.index));t.dispatch(Rp({active:!n.active,activeIndex:n.index,activeCoordinate:u}))}}}}}}),I_.startListening({actionCreator:P_,effect:(e,t)=>{var r=t.getState();if(!1!==r.rootProps.accessibilityLayer){var{keyboardInteraction:n}=r.tooltip;if(!n.active&&null==n.index){var a=vN(r,"axis","hover",String("0"));t.dispatch(Rp({active:!0,activeIndex:"0",activeCoordinate:a}))}}}});var M_=wh("externalEvent"),R_=pm(),D_=new Map;R_.startListening({actionCreator:M_,effect:(e,t)=>{var{handler:r,reactEvent:n}=e.payload;if(null!=r){n.persist();var a=n.type,i=D_.get(a);void 0!==i&&cancelAnimationFrame(i);var o=requestAnimationFrame(()=>{try{var e=t.getState(),i={activeCoordinate:tN(e),activeDataKey:XC(e),activeIndex:$C(e),activeLabel:JC(e),activeTooltipIndex:$C(e),isTooltipActive:rN(e)};r(i,n)}finally{D_.delete(a)}});D_.set(a,o)}}});var L_=tf([sC],e=>e.tooltipItemPayloads),z_=tf([L_,(e,t)=>t,(e,t,r)=>r],(e,t,r)=>{if(null!=t){var n=e.find(e=>e.settings.graphicalItemId===r);if(null!=n){var{getPosition:a}=n;if(null!=a)return a(t)}}}),q_=wh("touchMove"),B_=pm();B_.startListening({actionCreator:q_,effect:(e,t)=>{var r=e.payload;if(null!=r.touches&&0!==r.touches.length){var n=t.getState(),a=$S(n,n.tooltip.settings.shared);if("axis"===a){var i=r.touches[0];if(null==i)return;var o=jN(n,SN({clientX:i.clientX,clientY:i.clientY,currentTarget:r.currentTarget}));null!=(null===o||void 0===o?void 0:o.activeIndex)&&t.dispatch(Pp({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}else if("item"===a){var s,l=r.touches[0];if(null==document.elementFromPoint||null==l)return;var c=document.elementFromPoint(l.clientX,l.clientY);if(!c||!c.getAttribute)return;var u=c.getAttribute("data-recharts-item-index"),d=null!==(s=c.getAttribute("data-recharts-item-id"))&&void 0!==s?s:void 0,h=fC(n).find(e=>e.id===d);if(null==u||null==h||null==d)return;var{dataKey:m}=h,p=z_(n,u,d);t.dispatch(Ap({activeDataKey:m,activeIndex:u,activeCoordinate:p,activeGraphicalItemId:d}))}}}});var F_=Dh({name:"errorBars",initialState:{},reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:a}=t.payload;e[r]&&(e[r]=e[r].map(e=>e.dataKey===n.dataKey&&e.direction===n.direction?a:e))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(e=>e.dataKey!==n.dataKey||e.direction!==n.direction))}}}),{addErrorBar:U_,replaceErrorBar:H_,removeErrorBar:W_}=F_.actions,K_=F_.reducer,V_=!0,G_=!("undefined"!==typeof window&&window.document&&Boolean(window.document.createElement)&&window.setTimeout);function Q_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Y_(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Q_(Object(r),!0).forEach(function(t){$_(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q_(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function $_(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var J_={zIndexMap:Object.values(rk).reduce((e,t)=>Y_(Y_({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),{})},X_=new Set(Object.values(rk));var Z_=Dh({name:"zIndex",initialState:J_,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:Nh()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!function(e){return X_.has(e)}(r)&&delete e.zIndexMap[r])},prepare:Nh()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:r,element:n,isPanorama:a}=t.payload;e.zIndexMap[r]?a?e.zIndexMap[r].panoramaElement=n:e.zIndexMap[r].element=n:e.zIndexMap[r]={consumers:0,element:a?void 0:n,panoramaElement:a?n:void 0}},prepare:Nh()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElement=void 0:e.zIndexMap[r].element=void 0)},prepare:Nh()}}}),{registerZIndexPortal:eA,unregisterZIndexPortal:tA,registerZIndexPortalElement:rA,unregisterZIndexPortalElement:nA}=Z_.actions,aA=mh({brush:u_,cartesianAxis:KN,chartData:Fp,errorBars:K_,graphicalItems:XN,layout:Gp,legend:v_,options:ym,polarAxis:__,polarOptions:E_,referenceElements:o_,rootProps:x_,tooltip:Dp,zIndex:Z_.reducer});function iA(e){var{preloadedState:t,children:n,reduxStoreName:a}=e,i=eg(),o=(0,r.useRef)(null);if(i)return n;null==o.current&&(o.current=function(e){return Th({reducer:aA,preloadedState:e,middleware:e=>e({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes("es6")}).concat([NN.middleware,AN.middleware,I_.middleware,R_.middleware,B_.middleware]),enhancers:e=>{var t=e;return"function"===typeof e&&(t=e()),t.concat(Ah({type:"raf"}))},devTools:V_&&{serialize:{replacer:EN},name:"recharts-".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Chart")}})}(t,a));var s=af;return r.createElement(Pm,{context:s,store:o.current},n)}var oA=e=>{var{chartData:t}=e,n=sf(),a=eg();return(0,r.useEffect)(()=>a?()=>{}:(n(zp(t)),()=>{n(zp(void 0))}),[t,n,a]),null},sA=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function lA(e,t){return null==e&&null==t||("number"===typeof e&&"number"===typeof t?e===t||e!==e&&t!==t:e===t)}function cA(e,t){var r=new Set([...Object.keys(e),...Object.keys(t)]);for(var n of r)if(sA.has(n)){if(null==e[n]&&null==t[n])continue;if(!_m(e[n],t[n]))return!1}else if(!lA(e[n],t[n]))return!1;return!0}function uA(e){var{layout:t,margin:n}=e,a=sf(),i=eg();return(0,r.useEffect)(()=>{i||(a(Wp(t)),a(Hp(n)))},[a,i,t,n]),null}var dA=(0,r.memo)(uA,cA);function hA(e){var t=sf();return(0,r.useEffect)(()=>{t(w_(e))},[t,e]),null}var mA=()=>{var e;return null===(e=df(e=>e.rootProps.accessibilityLayer))||void 0===e||e},pA=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function fA(e){return"string"===typeof e&&pA.includes(e)}var gA=new Set(["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"]);function vA(e){return"string"===typeof e&&gA.has(e)}function yA(e){return"string"===typeof e&&e.startsWith("data-")}function bA(e){if("object"!==typeof e||null===e)return{};var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(vA(r)||yA(r))&&(t[r]=e[r]);return t}function xA(e){return null==e?null:(0,r.isValidElement)(e)&&"object"===typeof e.props&&null!==e.props?bA(e.props):"object"!==typeof e||Array.isArray(e)?null:bA(e)}function wA(e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(vA(r)||yA(r)||fA(r))&&(t[r]=e[r]);return t}var kA=["children","width","height","viewBox","className","style","title","desc"];function jA(){return jA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jA.apply(null,arguments)}var SA=(0,r.forwardRef)((e,t)=>{var{children:n,width:a,height:i,viewBox:o,className:s,style:l,title:c,desc:u}=e,d=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,kA),h=o||{width:a,height:i,x:0,y:0},m=su("recharts-surface",s);return r.createElement("svg",jA({},wA(d),{className:m,width:a,height:i,style:l,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:t}),r.createElement("title",null,c),r.createElement("desc",null,u),n)}),CA=tf(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(null!=t){var n=e[t];if(null!=n)return r?n.panoramaElement:n.element}}),NA=tf(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(e=>parseInt(e,10)).concat(Object.values(rk));return Array.from(new Set(t)).sort((e,t)=>e-t)},{memoizeOptions:{resultEqualityCheck:function(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}}});function _A(e){var{zIndex:t,isPanorama:n}=e,a=(0,r.useRef)(null),i=sf();return(0,r.useLayoutEffect)(()=>(a.current&&i(rA({zIndex:t,element:a.current,isPanorama:n})),()=>{i(nA({zIndex:t,isPanorama:n}))}),[i,t,n]),r.createElement("g",{tabIndex:-1,ref:a})}function AA(e){var{children:t,isPanorama:n}=e,a=df(NA);if(!a||0===a.length)return t;var i=a.filter(e=>e<0),o=a.filter(e=>e>0);return r.createElement(r.Fragment,null,i.map(e=>r.createElement(_A,{key:e,zIndex:e,isPanorama:n})),t,o.map(e=>r.createElement(_A,{key:e,zIndex:e,isPanorama:n})))}var TA=["children"];function EA(){return EA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},EA.apply(null,arguments)}var OA={width:"100%",height:"100%",display:"block"},PA=(0,r.forwardRef)((e,t)=>{var n=sg(),a=lg(),i=mA();if(!zu(n)||!zu(a))return null;var o,s,{children:l,otherAttributes:c,title:u,desc:d}=e;return null!=c&&(o="number"===typeof c.tabIndex?c.tabIndex:i?0:void 0,s="string"===typeof c.role?c.role:i?"application":void 0),r.createElement(SA,EA({},c,{title:u,desc:d,role:s,tabIndex:o,width:n,height:a,style:OA,ref:t}),l)}),IA=e=>{var{children:t}=e,n=df(rg);if(!n)return null;var{width:a,height:i,y:o,x:s}=n;return r.createElement(SA,{width:a,height:i,x:s,y:o},t)},MA=(0,r.forwardRef)((e,t)=>{var{children:n}=e,a=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,TA);return eg()?r.createElement(IA,null,r.createElement(AA,{isPanorama:!0},n)):r.createElement(PA,EA({ref:t},a),r.createElement(AA,{isPanorama:!1},n))});var RA=new(__webpack_require__(7283)),DA="recharts.syncEvent.tooltip",LA="recharts.syncEvent.brush";function zA(e){return e.tooltip.syncInteraction}var qA=["x","y"];function BA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function FA(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?BA(Object(r),!0).forEach(function(t){UA(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BA(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function UA(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HA(){var e=df(Ww),t=df(Vw),n=sf(),a=df(Kw),i=df(KC),o=ug(),s=ag(),l=df(e=>e.rootProps.className);(0,r.useEffect)(()=>{if(null==e)return Au;var r=(r,l,c)=>{var u;if(t!==c&&e===r)if("index"!==a){if(null!=i){var d;if("function"===typeof a){var h={activeTooltipIndex:null==l.payload.index?void 0:Number(l.payload.index),isTooltipActive:l.payload.active,activeIndex:null==l.payload.index?void 0:Number(l.payload.index),activeLabel:l.payload.label,activeDataKey:l.payload.dataKey,activeCoordinate:l.payload.coordinate},m=a(i,h);d=i[m]}else"value"===a&&(d=i.find(e=>String(e.value)===l.payload.label));var{coordinate:p}=l.payload;if(null!=d&&!1!==l.payload.active&&null!=p&&null!=s){var{x:f,y:g}=p,v=Math.min(f,s.x+s.width),y=Math.min(g,s.y+s.height),b={x:"horizontal"===o?d.coordinate:v,y:"horizontal"===o?y:d.coordinate},x=Mp({active:l.payload.active,coordinate:b,dataKey:l.payload.dataKey,index:String(d.index),label:l.payload.label,sourceViewBox:l.payload.sourceViewBox,graphicalItemId:l.payload.graphicalItemId});n(x)}else n(Mp({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}))}}else if(s&&null!==l&&void 0!==l&&null!==(u=l.payload)&&void 0!==u&&u.coordinate&&l.payload.sourceViewBox){var w=l.payload.coordinate,{x:k,y:j}=w,S=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(w,qA),{x:C,y:N,width:_,height:A}=l.payload.sourceViewBox,T=FA(FA({},S),{},{x:s.x+(_?(k-C)/_:0)*s.width,y:s.y+(A?(j-N)/A:0)*s.height});n(FA(FA({},l),{},{payload:FA(FA({},l.payload),{},{coordinate:T})}))}else n(l)};return RA.on(DA,r),()=>{RA.off(DA,r)}},[l,n,t,e,a,i,o,s])}function WA(){var e=sf();(0,r.useEffect)(()=>{e(bm())},[e]),HA(),function(){var e=df(Ww),t=df(Vw),n=sf();(0,r.useEffect)(()=>{if(null==e)return Au;var r=(r,a,i)=>{t!==i&&e===r&&n(qp(a))};return RA.on(LA,r),()=>{RA.off(LA,r)}},[n,t,e])}()}function KA(e,t,n,a,i,o){var s=df(r=>((e,t,r)=>{if(null!=t){var n=sC(e);return"axis"===t?"hover"===r?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:"hover"===r?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}})(r,e,t)),l=df(Vw),c=df(Ww),u=df(Kw),d=df(zA),h=null===d||void 0===d?void 0:d.active,m=ag();(0,r.useEffect)(()=>{if(!h&&null!=c&&null!=l){var e=Mp({active:o,coordinate:n,dataKey:s,index:i,label:"number"===typeof a?String(a):a,sourceViewBox:m,graphicalItemId:void 0});RA.emit(DA,c,e,l)}},[h,n,s,i,a,l,c,u,o,m])}var VA=(0,r.createContext)(null),GA=(0,r.createContext)(null);function QA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function YA(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?QA(Object(r),!0).forEach(function(t){$A(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QA(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function $A(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JA(){return JA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},JA.apply(null,arguments)}var XA=()=>(WA(),null);function ZA(e){if("number"===typeof e)return e;if("string"===typeof e){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var eT=(0,r.forwardRef)((e,t)=>{var n,a,i=(0,r.useRef)(null),[o,s]=(0,r.useState)({containerWidth:ZA(null===(n=e.style)||void 0===n?void 0:n.width),containerHeight:ZA(null===(a=e.style)||void 0===a?void 0:a.height)}),l=(0,r.useCallback)((e,t)=>{s(r=>{var n=Math.round(e),a=Math.round(t);return r.containerWidth===n&&r.containerHeight===a?r:{containerWidth:n,containerHeight:a}})},[]),c=(0,r.useCallback)(e=>{if("function"===typeof t&&t(e),null!=e&&"undefined"!==typeof ResizeObserver){var{width:r,height:n}=e.getBoundingClientRect();l(r,n);var a=new ResizeObserver(e=>{var t=e[0];if(null!=t){var{width:r,height:n}=t.contentRect;l(r,n)}});a.observe(e),i.current=a}},[t,l]);return(0,r.useEffect)(()=>()=>{var e=i.current;null!=e&&e.disconnect()},[l]),r.createElement(r.Fragment,null,r.createElement(mg,{width:o.containerWidth,height:o.containerHeight}),r.createElement("div",JA({ref:c},e)))}),tT=(0,r.forwardRef)((e,t)=>{var{width:n,height:a}=e,[i,o]=(0,r.useState)({containerWidth:ZA(n),containerHeight:ZA(a)}),s=(0,r.useCallback)((e,t)=>{o(r=>{var n=Math.round(e),a=Math.round(t);return r.containerWidth===n&&r.containerHeight===a?r:{containerWidth:n,containerHeight:a}})},[]),l=(0,r.useCallback)(e=>{if("function"===typeof t&&t(e),null!=e){var{width:r,height:n}=e.getBoundingClientRect();s(r,n)}},[t,s]);return r.createElement(r.Fragment,null,r.createElement(mg,{width:i.containerWidth,height:i.containerHeight}),r.createElement("div",JA({ref:l},e)))}),rT=(0,r.forwardRef)((e,t)=>{var{width:n,height:a}=e;return r.createElement(r.Fragment,null,r.createElement(mg,{width:n,height:a}),r.createElement("div",JA({ref:t},e)))}),nT=(0,r.forwardRef)((e,t)=>{var{width:n,height:a}=e;return"string"===typeof n||"string"===typeof a?r.createElement(tT,JA({},e,{ref:t})):"number"===typeof n&&"number"===typeof a?r.createElement(rT,JA({},e,{width:n,height:a,ref:t})):r.createElement(r.Fragment,null,r.createElement(mg,{width:n,height:a}),r.createElement("div",JA({ref:t},e)))});var aT=(0,r.forwardRef)((e,t)=>{var{children:n,className:a,height:i,onClick:o,onContextMenu:s,onDoubleClick:l,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:h,onMouseUp:m,onTouchEnd:p,onTouchMove:f,onTouchStart:g,style:v,width:y,responsive:b,dispatchTouchEvents:x=!0}=e,w=(0,r.useRef)(null),k=sf(),[j,S]=(0,r.useState)(null),[C,N]=(0,r.useState)(null),_=function(){var e=sf(),[t,n]=(0,r.useState)(null),a=df(Hf);return(0,r.useEffect)(()=>{if(null!=t){var r=t.getBoundingClientRect().width/t.offsetWidth;Lu(r)&&r!==a&&e(Vp(r))}},[t,e,a]),n}(),A=Ku(),T=(null===A||void 0===A?void 0:A.width)>0?A.width:y,E=(null===A||void 0===A?void 0:A.height)>0?A.height:i,O=(0,r.useCallback)(e=>{_(e),"function"===typeof t&&t(e),S(e),N(e),null!=e&&(w.current=e)},[_,t,S,N]),P=(0,r.useCallback)(e=>{k(CN(e)),k(M_({handler:o,reactEvent:e}))},[k,o]),I=(0,r.useCallback)(e=>{k(_N(e)),k(M_({handler:u,reactEvent:e}))},[k,u]),M=(0,r.useCallback)(e=>{k(Ep()),k(M_({handler:d,reactEvent:e}))},[k,d]),R=(0,r.useCallback)(e=>{k(_N(e)),k(M_({handler:h,reactEvent:e}))},[k,h]),D=(0,r.useCallback)(()=>{k(P_())},[k]),L=(0,r.useCallback)(e=>{k(O_(e.key))},[k]),z=(0,r.useCallback)(e=>{k(M_({handler:s,reactEvent:e}))},[k,s]),q=(0,r.useCallback)(e=>{k(M_({handler:l,reactEvent:e}))},[k,l]),B=(0,r.useCallback)(e=>{k(M_({handler:c,reactEvent:e}))},[k,c]),F=(0,r.useCallback)(e=>{k(M_({handler:m,reactEvent:e}))},[k,m]),U=(0,r.useCallback)(e=>{k(M_({handler:g,reactEvent:e}))},[k,g]),H=(0,r.useCallback)(e=>{x&&k(q_(e)),k(M_({handler:f,reactEvent:e}))},[k,x,f]),W=(0,r.useCallback)(e=>{k(M_({handler:p,reactEvent:e}))},[k,p]),K=function(e){return e?eT:nT}(b);return r.createElement(VA.Provider,{value:j},r.createElement(GA.Provider,{value:C},r.createElement(K,{width:null!==T&&void 0!==T?T:null===v||void 0===v?void 0:v.width,height:null!==E&&void 0!==E?E:null===v||void 0===v?void 0:v.height,className:su("recharts-wrapper",a),style:YA({position:"relative",cursor:"default",width:T,height:E},v),onClick:P,onContextMenu:z,onDoubleClick:q,onFocus:D,onKeyDown:L,onMouseDown:B,onMouseEnter:I,onMouseLeave:M,onMouseMove:R,onMouseUp:F,onTouchEnd:W,onTouchMove:H,onTouchStart:U,ref:O},r.createElement(XA,null),n)))}),iT=tf([$f],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),oT=tf([iT,Ff,Uf],(e,t,r)=>{if(e&&null!=t&&null!=r)return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),sT=()=>df(oT),lT=(0,r.createContext)(void 0),cT=e=>{var{children:t}=e,[n]=(0,r.useState)("".concat(xu("recharts"),"-clip")),a=sT();if(null==a)return null;var{x:i,y:o,width:s,height:l}=a;return r.createElement(lT.Provider,{value:n},r.createElement("defs",null,r.createElement("clipPath",{id:n},r.createElement("rect",{x:i,y:o,height:l,width:s}))),t)},uT=["width","height","responsive","children","className","style","compact","title","desc"];var dT=(0,r.forwardRef)((e,t)=>{var{width:n,height:a,responsive:i,children:o,className:s,style:l,compact:c,title:u,desc:d}=e,h=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,uT),m=bA(h);return c?r.createElement(r.Fragment,null,r.createElement(mg,{width:n,height:a}),r.createElement(MA,{otherAttributes:m,title:u,desc:d},o)):r.createElement(aT,{className:s,style:l,width:n,height:a,responsive:null!==i&&void 0!==i&&i,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},r.createElement(MA,{otherAttributes:m,title:u,desc:d,ref:t},r.createElement(cT,null,o)))});function hT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function mT(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pT(e,t){var r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?hT(Object(r),!0).forEach(function(t){mT(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hT(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e),n=t;return Object.keys(t).reduce((e,t)=>(void 0===e[t]&&void 0!==n[t]&&(e[t]=n[t]),e),r)}function fT(){return fT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fT.apply(null,arguments)}var gT={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:{top:5,right:5,bottom:5,left:5},responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},vT=(0,r.forwardRef)(function(e,t){var n,a=pT(e.categoricalChartProps,gT),{chartName:i,defaultTooltipEventType:o,validateTooltipEventTypes:s,tooltipPayloadSearcher:l,categoricalChartProps:c}=e,u={chartName:i,defaultTooltipEventType:o,validateTooltipEventTypes:s,tooltipPayloadSearcher:l,eventEmitter:void 0};return r.createElement(iA,{preloadedState:{options:u},reduxStoreName:null!==(n=c.id)&&void 0!==n?n:i},r.createElement(oA,{chartData:c.data}),r.createElement(dA,{layout:a.layout,margin:a.margin}),r.createElement(hA,{baseValue:a.baseValue,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className,reverseStackOrder:a.reverseStackOrder}),r.createElement(dT,fT({},a,{ref:t})))}),yT=["axis"],bT=(0,r.forwardRef)((e,t)=>r.createElement(vT,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:yT,tooltipPayloadSearcher:gm,categoricalChartProps:e,ref:t}));function xT(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function kT(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wT(Object(r),!0).forEach(function(t){jT(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wT(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function jT(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ST=kT({},{cacheSize:2e3,enableCache:!0}),CT=new class{constructor(e){xT(this,"cache",new Map),this.maxSize=e}get(e){var t=this.cache.get(e);return void 0!==t&&(this.cache.delete(e),this.cache.set(e,t)),t}set(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;null!=r&&this.cache.delete(r)}this.cache.set(e,t)}clear(){this.cache.clear()}size(){return this.cache.size}}(ST.cacheSize),NT={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},_T="recharts_measurement_span";var AT=(e,t)=>{try{var r=document.getElementById(_T);r||((r=document.createElement("span")).setAttribute("id",_T),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,NT,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch(a){return{width:0,height:0}}},TT=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===e||null===e||G_)return{width:0,height:0};if(!ST.enableCache)return AT(e,t);var r=function(e,t){var r=t.fontSize||"",n=t.fontFamily||"",a=t.fontWeight||"",i=t.fontStyle||"",o=t.letterSpacing||"",s=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(a,"|").concat(i,"|").concat(o,"|").concat(s)}(e,t),n=CT.get(r);if(n)return n;var a=AT(e,t);return CT.set(r,a),a};function ET(e,t){if(t<1)return[];if(1===t)return e;for(var r=[],n=0;n<e.length;n+=t){var a=e[n];void 0!==a&&r.push(a)}return r}function OT(e,t,r){return function(e){var{width:t,height:r}=e,n=function(e){return(e%180+180)%180}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),a=n*Math.PI/180,i=Math.atan(r/t),o=a>i&&a<Math.PI-i?r/Math.sin(a):t/Math.cos(a);return Math.abs(o)}({width:e.width+t.width,height:e.height+t.height},r)}function PT(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-a)<=0}function IT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function MT(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?IT(Object(r),!0).forEach(function(t){RT(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IT(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function RT(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DT(e,t,r){var n,{tick:a,ticks:i,viewBox:o,minTickGap:s,orientation:l,interval:c,tickFormatter:u,unit:d,angle:h}=e;if(!i||!i.length||!a)return[];if(vu(c)||G_)return null!==(n=function(e,t){return ET(e,t+1)}(i,vu(c)?c:0))&&void 0!==n?n:[];var m=[],p="top"===l||"bottom"===l?"width":"height",f=d&&"width"===p?TT(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},g=(e,n)=>{var a="function"===typeof u?u(e.value,n):e.value;return"width"===p?OT(TT(a,{fontSize:t,letterSpacing:r}),f,h):TT(a,{fontSize:t,letterSpacing:r})[p]},v=i[0],y=i[1],b=i.length>=2&&null!=v&&null!=y?pu(y.coordinate-v.coordinate):1,x=function(e,t,r){var n="width"===r,{x:a,y:i,width:o,height:s}=e;return 1===t?{start:n?a:i,end:n?a+o:i+s}:{start:n?a+o:i+s,end:n?a:i}}(o,b,p);return"equidistantPreserveStart"===c?function(e,t,r,n,a){for(var i,o=(n||[]).slice(),{start:s,end:l}=t,c=0,u=1,d=s,h=function(){var t=null===n||void 0===n?void 0:n[c];if(void 0===t)return{v:ET(n,u)};var i,o=c,h=()=>(void 0===i&&(i=r(t,o)),i),m=t.coordinate,p=0===c||PT(e,m,h,d,l);p||(c=0,d=s,u+=1),p&&(d=m+e*(h()/2+a),c+=u)};u<=o.length;)if(i=h())return i.v;return[]}(b,x,g,i,s):"equidistantPreserveEnd"===c?function(e,t,r,n,a){var i=(n||[]).slice().length;if(0===i)return[];for(var{start:o,end:s}=t,l=1;l<=i;l++){for(var c,u=(i-1)%l,d=o,h=!0,m=function(){var t=n[p];if(null==t)return 0;var i,o=p,l=()=>(void 0===i&&(i=r(t,o)),i),c=t.coordinate,m=p===u||PT(e,c,l,d,s);if(!m)return h=!1,1;m&&(d=c+e*(l()/2+a))},p=u;p<i&&(0===(c=m())||1!==c);p+=l);if(h){for(var f=[],g=u;g<i;g+=l){var v=n[g];null!=v&&f.push(v)}return f}}return[]}(b,x,g,i,s):(m="preserveStart"===c||"preserveStartEnd"===c?function(e,t,r,n,a,i){var o=(n||[]).slice(),s=o.length,{start:l,end:c}=t;if(i){var u=n[s-1];if(null!=u){var d=r(u,s-1),h=e*(u.coordinate+e*d/2-c);o[s-1]=u=MT(MT({},u),{},{tickCoord:h>0?u.coordinate-h*e:u.coordinate}),null!=u.tickCoord&&PT(e,u.tickCoord,()=>d,l,c)&&(c=u.tickCoord-e*(d/2+a),o[s-1]=MT(MT({},u),{},{isShow:!0}))}}for(var m=i?s-1:s,p=function(t){var n=o[t];if(null==n)return 1;var i,s=n,u=()=>(void 0===i&&(i=r(n,t)),i);if(0===t){var d=e*(s.coordinate-e*u()/2-l);o[t]=s=MT(MT({},s),{},{tickCoord:d<0?s.coordinate-d*e:s.coordinate})}else o[t]=s=MT(MT({},s),{},{tickCoord:s.coordinate});null!=s.tickCoord&&PT(e,s.tickCoord,u,l,c)&&(l=s.tickCoord+e*(u()/2+a),o[t]=MT(MT({},s),{},{isShow:!0}))},f=0;f<m;f++)p(f);return o}(b,x,g,i,s,"preserveStartEnd"===c):function(e,t,r,n,a){for(var i=(n||[]).slice(),o=i.length,{start:s}=t,{end:l}=t,c=function(t){var n=i[t];if(null==n)return 1;var c,u=n,d=()=>(void 0===c&&(c=r(n,t)),c);if(t===o-1){var h=e*(u.coordinate+e*d()/2-l);i[t]=u=MT(MT({},u),{},{tickCoord:h>0?u.coordinate-h*e:u.coordinate})}else i[t]=u=MT(MT({},u),{},{tickCoord:u.coordinate});null!=u.tickCoord&&PT(e,u.tickCoord,d,s,l)&&(l=u.tickCoord-e*(d()/2+a),i[t]=MT(MT({},u),{},{isShow:!0}))},u=o-1;u>=0;u--)c(u);return i}(b,x,g,i,s),m.filter(e=>e.isShow))}var LT=["children","className"];function zT(){return zT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zT.apply(null,arguments)}var qT=r.forwardRef((e,t)=>{var{children:n,className:a}=e,i=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,LT),o=su("recharts-layer",a);return r.createElement("g",zT({className:o},wA(i),{ref:t}),n)});var BT=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,FT=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,UT=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,HT=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,WT={cm:96/2.54,mm:96/25.4,pt:96/72,pc:16,in:96,Q:96/101.6,px:1},KT=["cm","mm","pt","pc","in","Q","px"];var VT="NaN";class GT{static parse(e){var t,[,r,n]=null!==(t=HT.exec(e))&&void 0!==t?t:[];return null==r?GT.NaN:new GT(parseFloat(r),null!==n&&void 0!==n?n:"")}constructor(e,t){this.num=e,this.unit=t,this.num=e,this.unit=t,fu(e)&&(this.unit=""),""===t||UT.test(t)||(this.num=NaN,this.unit=""),function(e){return KT.includes(e)}(t)&&(this.num=function(e,t){return e*WT[t]}(e,t),this.unit="px")}add(e){return this.unit!==e.unit?new GT(NaN,""):new GT(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new GT(NaN,""):new GT(this.num-e.num,this.unit)}multiply(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new GT(NaN,""):new GT(this.num*e.num,this.unit||e.unit)}divide(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new GT(NaN,""):new GT(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return fu(this.num)}}function QT(e){if(null==e||e.includes(VT))return VT;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,a,i]=null!==(r=BT.exec(t))&&void 0!==r?r:[],o=GT.parse(null!==n&&void 0!==n?n:""),s=GT.parse(null!==i&&void 0!==i?i:""),l="*"===a?o.multiply(s):o.divide(s);if(l.isNaN())return VT;t=t.replace(BT,l.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var c,[,u,d,h]=null!==(c=FT.exec(t))&&void 0!==c?c:[],m=GT.parse(null!==u&&void 0!==u?u:""),p=GT.parse(null!==h&&void 0!==h?h:""),f="+"===d?m.add(p):m.subtract(p);if(f.isNaN())return VT;t=t.replace(FT,f.toString())}return t}!function(e,t,r){(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(GT,"NaN",new GT(NaN,""));var YT=/\(([^()]*)\)/;function $T(e){var t=e.replace(/\s+/g,"");return t=function(e){for(var t,r=e;null!=(t=YT.exec(r));){var[,n]=t;r=r.replace(YT,QT(n))}return r}(t),t=QT(t)}function JT(e){var t=function(e){try{return $T(e)}catch(t){return VT}}(e.slice(5,-1));return t===VT?"":t}var XT=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],ZT=["dx","dy","angle","className","breakAll"];function eE(){return eE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},eE.apply(null,arguments)}function tE(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var rE=/[ \f\n\r\t\v\u2028\u2029]+/,nE=e=>{var{children:t,breakAll:r,style:n}=e;try{var a=[];return Cu(t)||(a=r?t.toString().split(""):t.toString().split(rE)),{wordsWithComputedWidth:a.map(e=>({word:e,width:TT(e,n).width})),spaceWidth:r?0:TT("\xa0",n).width}}catch(i){return null}};function aE(e){return"start"===e||"middle"===e||"end"===e||"inherit"===e}var iE=(e,t,r,n)=>e.reduce((e,a)=>{var{word:i,width:o}=a,s=e[e.length-1];if(s&&null!=o&&(null==t||n||s.width+o+r<Number(t)))s.words.push(i),s.width+=o+r;else{var l={words:[i],width:o};e.push(l)}return e},[]),oE=e=>e.reduce((e,t)=>e.width>t.width?e:t),sE=(e,t,r,n,a,i,o,s)=>{var l=e.slice(0,t),c=nE({breakAll:r,style:n,children:l+"\u2026"});if(!c)return[!1,[]];var u=iE(c.wordsWithComputedWidth,i,o,s);return[u.length>a||oE(u).width>Number(i),u]},lE=e=>[{words:Cu(e)?[]:e.toString().split(rE),width:void 0}],cE=e=>{var{width:t,scaleToFit:r,children:n,style:a,breakAll:i,maxLines:o}=e;if((t||r)&&!G_){var s=nE({breakAll:i,children:n,style:a});if(!s)return lE(n);var{wordsWithComputedWidth:l,spaceWidth:c}=s;return((e,t,r,n,a)=>{var{maxLines:i,children:o,style:s,breakAll:l}=e,c=vu(i),u=String(o),d=iE(t,n,r,a);if(!c||a)return d;if(!(d.length>i||oE(d).width>Number(n)))return d;for(var h,m=0,p=u.length-1,f=0;m<=p&&f<=u.length-1;){var g=Math.floor((m+p)/2),v=g-1,[y,b]=sE(u,v,l,s,i,n,r,a),[x]=sE(u,g,l,s,i,n,r,a);if(y||x||(m=g+1),y&&x&&(p=g-1),!y&&x){h=b;break}f++}return h||d})({breakAll:i,children:n,maxLines:o,style:a},l,c,t,Boolean(r))}return lE(n)},uE="#808080",dE={angle:0,breakAll:!1,capHeight:"0.71em",fill:uE,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},hE=(0,r.forwardRef)((e,t)=>{var n=pT(e,dE),{x:a,y:i,lineHeight:o,capHeight:s,fill:l,scaleToFit:c,textAnchor:u,verticalAnchor:d}=n,h=tE(n,XT),m=(0,r.useMemo)(()=>cE({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:c,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,c,h.style,h.width]),{dx:p,dy:f,angle:g,className:v,breakAll:y}=h,b=tE(h,ZT);if(!yu(a)||!yu(i)||0===m.length)return null;var x,w=Number(a)+(vu(p)?p:0),k=Number(i)+(vu(f)?f:0);if(!Lu(w)||!Lu(k))return null;switch(d){case"start":x=JT("calc(".concat(s,")"));break;case"middle":x=JT("calc(".concat((m.length-1)/2," * -").concat(o," + (").concat(s," / 2))"));break;default:x=JT("calc(".concat(m.length-1," * -").concat(o,")"))}var j=[],S=m[0];if(c&&null!=S){var C=S.width,{width:N}=h;j.push("scale(".concat(vu(N)&&vu(C)?N/C:1,")"))}return g&&j.push("rotate(".concat(g,", ").concat(w,", ").concat(k,")")),j.length&&(b.transform=j.join(" ")),r.createElement("text",eE({},wA(b),{ref:t,x:w,y:k,className:su("recharts-text",v),textAnchor:u,fill:l.includes("url")?uE:l}),m.map((e,t)=>{var n=e.words.join(y?"":" ");return r.createElement("tspan",{x:w,dy:0===t?x:o,key:"".concat(n,"-").concat(t)},n)}))});hE.displayName="Text";var mE=__webpack_require__(7950);function pE(e){var{zIndex:t,children:n}=e,a=void 0!==ug()&&void 0!==t&&0!==t,i=eg(),o=sf();(0,r.useLayoutEffect)(()=>a?(o(eA({zIndex:t})),()=>{o(tA({zIndex:t}))}):Au,[o,t,a]);var s=df(e=>CA(e,t,i));return a?s?(0,mE.createPortal)(n,s):null:n}function fE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function gE(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fE(Object(r),!0).forEach(function(t){vE(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fE(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function vE(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var yE=["labelRef"],bE=["content"];function xE(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function wE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function kE(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wE(Object(r),!0).forEach(function(t){jE(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wE(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function jE(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SE(){return SE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},SE.apply(null,arguments)}var CE=(0,r.createContext)(null),NE=e=>{var{x:t,y:n,upperWidth:a,lowerWidth:i,width:o,height:s,children:l}=e,c=(0,r.useMemo)(()=>({x:t,y:n,upperWidth:a,lowerWidth:i,width:o,height:s}),[t,n,a,i,o,s]);return r.createElement(CE.Provider,{value:c},l)},_E=()=>{var e=(0,r.useContext)(CE),t=ag();return e||(t?ng(t):void 0)},AE=(0,r.createContext)(null),TE=()=>{var e=(0,r.useContext)(AE),t=df(Rk);return e||t},EE=e=>null!=e&&"function"===typeof e,OE=(e,t,n,a,i)=>{var o,s,{offset:l,className:c}=e,{cx:u,cy:d,innerRadius:h,outerRadius:m,startAngle:p,endAngle:f,clockWise:g}=i,v=(h+m)/2,y=((e,t)=>pu(t-e)*Math.min(Math.abs(t-e),360))(p,f),b=y>=0?1:-1;switch(t){case"insideStart":o=p+b*l,s=g;break;case"insideEnd":o=f-b*l,s=!g;break;case"end":o=f+b*l,s=g;break;default:throw new Error("Unsupported position ".concat(t))}s=y<=0?s:!s;var x=Xw(u,d,v,o),w=Xw(u,d,v,o+359*(s?1:-1)),k="M".concat(x.x,",").concat(x.y,"\n    A").concat(v,",").concat(v,",0,1,").concat(s?0:1,",\n    ").concat(w.x,",").concat(w.y),j=Cu(e.id)?xu("recharts-radial-line-"):e.id;return r.createElement("text",SE({},a,{dominantBaseline:"central",className:su("recharts-radial-bar-label",c)}),r.createElement("defs",null,r.createElement("path",{id:j,d:k})),r.createElement("textPath",{xlinkHref:"#".concat(j)},n))},PE=e=>null!=e&&"cx"in e&&vu(e.cx),IE={angle:0,offset:5,zIndex:rk.label,position:"middle",textBreakAll:!1};function ME(e){var t,n,a,i=pT(e,IE),{viewBox:o,parentViewBox:s,position:l,value:c,children:u,content:d,className:h="",textBreakAll:m,labelRef:p}=i,f=TE(),g=_E(),v=function(e){if(!PE(e))return e;var{cx:t,cy:r,outerRadius:n}=e,a=2*n;return{x:t-n,y:r-n,width:a,upperWidth:a,lowerWidth:a,height:a}}(t=null==o?"center"===l?g:null!==f&&void 0!==f?f:g:PE(o)?o:ng(o));if(!t||Cu(c)&&Cu(u)&&!(0,r.isValidElement)(d)&&"function"!==typeof d)return null;var y=kE(kE({},i),{},{viewBox:t});if((0,r.isValidElement)(d)){var{labelRef:b}=y,x=xE(y,yE);return(0,r.cloneElement)(d,x)}if("function"===typeof d){var{content:w}=y,k=xE(y,bE);if(n=(0,r.createElement)(d,k),(0,r.isValidElement)(n))return n}else n=(e=>{var{value:t,formatter:r}=e,n=Cu(e.children)?t:e.children;return"function"===typeof r?r(n):n})(i);var j=wA(i);if(PE(t)){if("insideStart"===l||"insideEnd"===l||"end"===l)return OE(i,l,n,j,t);a=((e,t,r)=>{var{cx:n,cy:a,innerRadius:i,outerRadius:o,startAngle:s,endAngle:l}=e,c=(s+l)/2;if("outside"===r){var{x:u,y:d}=Xw(n,a,o+t,c);return{x:u,y:d,textAnchor:u>=n?"start":"end",verticalAnchor:"middle"}}if("center"===r)return{x:n,y:a,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===r)return{x:n,y:a,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===r)return{x:n,y:a,textAnchor:"middle",verticalAnchor:"end"};var h=(i+o)/2,{x:m,y:p}=Xw(n,a,h,c);return{x:m,y:p,textAnchor:"middle",verticalAnchor:"middle"}})(t,i.offset,i.position)}else{if(!v)return null;var S=(e=>{var{viewBox:t,position:r,offset:n=0,parentViewBox:a,clamp:i}=e,{x:o,y:s,height:l,upperWidth:c,lowerWidth:u}=ng(t),d=o,h=o+(c-u)/2,m=(d+h)/2,p=(c+u)/2,f=d+c/2,g=l>=0?1:-1,v=g*n,y=g>0?"end":"start",b=g>0?"start":"end",x=c>=0?1:-1,w=x*n,k=x>0?"end":"start",j=x>0?"start":"end",S=a;if("top"===r){var C={x:d+c/2,y:s-v,horizontalAnchor:"middle",verticalAnchor:y};return i&&S&&(C.height=Math.max(s-S.y,0),C.width=c),C}if("bottom"===r){var N={x:h+u/2,y:s+l+v,horizontalAnchor:"middle",verticalAnchor:b};return i&&S&&(N.height=Math.max(S.y+S.height-(s+l),0),N.width=u),N}if("left"===r){var _={x:m-w,y:s+l/2,horizontalAnchor:k,verticalAnchor:"middle"};return i&&S&&(_.width=Math.max(_.x-S.x,0),_.height=l),_}if("right"===r){var A={x:m+p+w,y:s+l/2,horizontalAnchor:j,verticalAnchor:"middle"};return i&&S&&(A.width=Math.max(S.x+S.width-A.x,0),A.height=l),A}var T=i&&S?{width:p,height:l}:{};return"insideLeft"===r?gE({x:m+w,y:s+l/2,horizontalAnchor:j,verticalAnchor:"middle"},T):"insideRight"===r?gE({x:m+p-w,y:s+l/2,horizontalAnchor:k,verticalAnchor:"middle"},T):"insideTop"===r?gE({x:d+c/2,y:s+v,horizontalAnchor:"middle",verticalAnchor:b},T):"insideBottom"===r?gE({x:h+u/2,y:s+l-v,horizontalAnchor:"middle",verticalAnchor:y},T):"insideTopLeft"===r?gE({x:d+w,y:s+v,horizontalAnchor:j,verticalAnchor:b},T):"insideTopRight"===r?gE({x:d+c-w,y:s+v,horizontalAnchor:k,verticalAnchor:b},T):"insideBottomLeft"===r?gE({x:h+w,y:s+l-v,horizontalAnchor:j,verticalAnchor:y},T):"insideBottomRight"===r?gE({x:h+u-w,y:s+l-v,horizontalAnchor:k,verticalAnchor:y},T):r&&"object"===typeof r&&(vu(r.x)||gu(r.x))&&(vu(r.y)||gu(r.y))?gE({x:o+wu(r.x,p),y:s+wu(r.y,l),horizontalAnchor:"end",verticalAnchor:"end"},T):gE({x:f,y:s+l/2,horizontalAnchor:"middle",verticalAnchor:"middle"},T)})({viewBox:v,position:l,offset:i.offset,parentViewBox:PE(s)?void 0:s,clamp:!0});a=kE(kE({x:S.x,y:S.y,textAnchor:S.horizontalAnchor,verticalAnchor:S.verticalAnchor},void 0!==S.width?{width:S.width}:{}),void 0!==S.height?{height:S.height}:{})}return r.createElement(pE,{zIndex:i.zIndex},r.createElement(hE,SE({ref:p,className:su("recharts-label",h)},j,a,{textAnchor:aE(j.textAnchor)?j.textAnchor:a.textAnchor,breakAll:m}),n))}ME.displayName="Label";var RE=(e,t,n)=>{if(!e)return null;var a={viewBox:t,labelRef:n};return!0===e?r.createElement(ME,SE({key:"label-implicit"},a)):yu(e)?r.createElement(ME,SE({key:"label-implicit",value:e},a)):(0,r.isValidElement)(e)?e.type===ME?(0,r.cloneElement)(e,kE({key:"label-implicit"},a)):r.createElement(ME,SE({key:"label-implicit",content:e},a)):EE(e)?r.createElement(ME,SE({key:"label-implicit",content:e},a)):e&&"object"===typeof e?r.createElement(ME,SE({},e,{key:"label-implicit"},a)):null};function DE(e){var{label:t,labelRef:r}=e,n=_E();return RE(t,n,r)||null}var LE=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,zE=(e,t)=>{if(!e||"function"===typeof e||"boolean"===typeof e)return null;var n=e;if((0,r.isValidElement)(e)&&(n=e.props),"object"!==typeof n&&"function"!==typeof n)return null;var a={};return Object.keys(n).forEach(e=>{fA(e)&&(a[e]=t||(t=>n[e](n,t)))}),a},qE=(e,t,r)=>{if(null===e||"object"!==typeof e&&"function"!==typeof e)return null;var n=null;return Object.keys(e).forEach(a=>{var i=e[a];fA(a)&&"function"===typeof i&&(n||(n={}),n[a]=((e,t,r)=>n=>(e(t,r,n),null))(i,t,r))}),n};var BE=["axisLine","width","height","className","hide","ticks","axisType"];function FE(){return FE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},FE.apply(null,arguments)}function UE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function HE(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?UE(Object(r),!0).forEach(function(t){WE(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UE(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function WE(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var KE={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:rk.axis};function VE(e){var{x:t,y:n,width:a,height:i,orientation:o,mirror:s,axisLine:l,otherSvgProps:c}=e;if(!l)return null;var u=HE(HE(HE({},c),bA(l)),{},{fill:"none"});if("top"===o||"bottom"===o){var d=+("top"===o&&!s||"bottom"===o&&s);u=HE(HE({},u),{},{x1:t,y1:n+d*i,x2:t+a,y2:n+d*i})}else{var h=+("left"===o&&!s||"right"===o&&s);u=HE(HE({},u),{},{x1:t+h*a,y1:n,x2:t+h*a,y2:n+i})}return r.createElement("line",FE({},u,{className:su("recharts-cartesian-axis-line",du()(l,"className"))}))}function GE(e){var t,n,{option:a,tickProps:i,value:o}=e,s=su(i.className,"recharts-cartesian-axis-tick-value");if(r.isValidElement(a))t=r.cloneElement(a,HE(HE({},i),{},{className:s}));else if("function"===typeof a)t=a(HE(HE({},i),{},{className:s}));else{var l="recharts-cartesian-axis-tick-value";"boolean"!==typeof a&&(l=su(l,(n=a)&&"object"===typeof n&&"className"in n&&"string"===typeof n.className?n.className:"")),t=r.createElement(hE,FE({},i,{className:l}),o)}return t}var QE=(0,r.forwardRef)((e,t)=>{var{ticks:n=[],tick:a,tickLine:i,stroke:o,tickFormatter:s,unit:l,padding:c,tickTextProps:u,orientation:d,mirror:h,x:m,y:p,width:f,height:g,tickSize:v,tickMargin:y,fontSize:b,letterSpacing:x,getTicksConfig:w,events:k,axisType:j}=e,S=DT(HE(HE({},w),{},{ticks:n}),b,x),C=function(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}(d,h),N=function(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}(d,h),_=bA(w),A=xA(a),T={};"object"===typeof i&&(T=i);var E=HE(HE({},_),{},{fill:"none"},T),O=S.map(e=>HE({entry:e},function(e,t,r,n,a,i,o,s,l){var c,u,d,h,m,p,f=s?-1:1,g=e.tickSize||o,v=vu(e.tickCoord)?e.tickCoord:e.coordinate;switch(i){case"top":c=u=e.coordinate,p=(d=(h=r+ +!s*a)-f*g)-f*l,m=v;break;case"left":d=h=e.coordinate,m=(c=(u=t+ +!s*n)-f*g)-f*l,p=v;break;case"right":d=h=e.coordinate,m=(c=(u=t+ +s*n)+f*g)+f*l,p=v;break;default:c=u=e.coordinate,p=(d=(h=r+ +s*a)+f*g)+f*l,m=v}return{line:{x1:c,y1:d,x2:u,y2:h},tick:{x:m,y:p}}}(e,m,p,f,g,d,v,h,y))),P=O.map(e=>{var{entry:t,line:n}=e;return r.createElement(qT,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(t.value,"-").concat(t.coordinate,"-").concat(t.tickCoord)},i&&r.createElement("line",FE({},E,n,{className:su("recharts-cartesian-axis-tick-line",du()(i,"className"))})))}),I=O.map((e,t)=>{var n,i,{entry:d,tick:h}=e,m=HE(HE(HE(HE({verticalAnchor:N},_),{},{textAnchor:C,stroke:"none",fill:o},h),{},{index:t,payload:d,visibleTicksCount:S.length,tickFormatter:s,padding:c},u),{},{angle:null!==(n=null!==(i=null===u||void 0===u?void 0:u.angle)&&void 0!==i?i:_.angle)&&void 0!==n?n:0}),p=HE(HE({},m),A);return r.createElement(qT,FE({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(d.value,"-").concat(d.coordinate,"-").concat(d.tickCoord)},qE(k,d,t)),a&&r.createElement(GE,{option:a,tickProps:p,value:"".concat("function"===typeof s?s(d.value,t):d.value).concat(l||"")}))});return r.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(j,"-ticks")},I.length>0&&r.createElement(pE,{zIndex:rk.label},r.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(j,"-tick-labels"),ref:t},I)),P.length>0&&r.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(j,"-tick-lines")},P))}),YE=(0,r.forwardRef)((e,t)=>{var{axisLine:n,width:a,height:i,className:o,hide:s,ticks:l,axisType:c}=e,u=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,BE),[d,h]=(0,r.useState)(""),[m,p]=(0,r.useState)(""),f=(0,r.useRef)(null);(0,r.useImperativeHandle)(t,()=>({getCalculatedWidth:()=>{var t;return(e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:a=0,tickMargin:i=0}=e,o=0;if(t){Array.from(t).forEach(e=>{if(e){var t=e.getBoundingClientRect();t.width>o&&(o=t.width)}});var s=r?r.getBoundingClientRect().width:0,l=o+(a+i)+s+(r?n:0);return Math.round(l)}return 0})({ticks:f.current,label:null===(t=e.labelRef)||void 0===t?void 0:t.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var g=(0,r.useCallback)(e=>{if(e){var t=e.getElementsByClassName("recharts-cartesian-axis-tick-value");f.current=t;var r=t[0];if(r){var n=window.getComputedStyle(r),a=n.fontSize,i=n.letterSpacing;a===d&&i===m||(h(a),p(i))}}},[d,m]);return s||null!=a&&a<=0||null!=i&&i<=0?null:r.createElement(pE,{zIndex:e.zIndex},r.createElement(qT,{className:su("recharts-cartesian-axis",o)},r.createElement(VE,{x:e.x,y:e.y,width:a,height:i,orientation:e.orientation,mirror:e.mirror,axisLine:n,otherSvgProps:bA(e)}),r.createElement(QE,{ref:g,axisType:c,events:u,fontSize:d,getTicksConfig:e,height:e.height,letterSpacing:m,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:l,unit:e.unit,width:e.width,x:e.x,y:e.y}),r.createElement(NE,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},r.createElement(DE,{label:e.label,labelRef:e.labelRef}),e.children)))}),$E=r.forwardRef((e,t)=>{var n=pT(e,KE);return r.createElement(YE,FE({},n,{ref:t}))});$E.displayName="CartesianAxis";var JE=["x1","y1","x2","y2","key"],XE=["offset"],ZE=["xAxisId","yAxisId"],eO=["xAxisId","yAxisId"];function tO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function rO(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tO(Object(r),!0).forEach(function(t){nO(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tO(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function nO(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aO(){return aO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},aO.apply(null,arguments)}function iO(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var oO=e=>{var{fill:t}=e;if(!t||"none"===t)return null;var{fillOpacity:n,x:a,y:i,width:o,height:s,ry:l}=e;return r.createElement("rect",{x:a,y:i,ry:l,width:o,height:s,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function sO(e){var t,{option:n,lineItemProps:a}=e;if(r.isValidElement(n))t=r.cloneElement(n,a);else if("function"===typeof n)t=n(a);else{var i,{x1:o,y1:s,x2:l,y2:c,key:u}=a,d=null!==(i=bA(iO(a,JE)))&&void 0!==i?i:{},{offset:h}=d,m=iO(d,XE);t=r.createElement("line",aO({},m,{x1:o,y1:s,x2:l,y2:c,fill:"none",key:u}))}return t}function lO(e){var{x:t,width:n,horizontal:a=!0,horizontalPoints:i}=e;if(!a||!i||!i.length)return null;var{xAxisId:o,yAxisId:s}=e,l=iO(e,ZE),c=i.map((e,i)=>{var o=rO(rO({},l),{},{x1:t,y1:e,x2:t+n,y2:e,key:"line-".concat(i),index:i});return r.createElement(sO,{key:"line-".concat(i),option:a,lineItemProps:o})});return r.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function cO(e){var{y:t,height:n,vertical:a=!0,verticalPoints:i}=e;if(!a||!i||!i.length)return null;var{xAxisId:o,yAxisId:s}=e,l=iO(e,eO),c=i.map((e,i)=>{var o=rO(rO({},l),{},{x1:e,y1:t,x2:e,y2:t+n,key:"line-".concat(i),index:i});return r.createElement(sO,{option:a,lineItemProps:o,key:"line-".concat(i)})});return r.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function uO(e){var{horizontalFill:t,fillOpacity:n,x:a,y:i,width:o,height:s,horizontalPoints:l,horizontal:c=!0}=e;if(!c||!t||!t.length||null==l)return null;var u=l.map(e=>Math.round(e+i-i)).sort((e,t)=>e-t);i!==u[0]&&u.unshift(0);var d=u.map((e,l)=>{var c=u[l+1],d=null==c?i+s-e:c-e;if(d<=0)return null;var h=l%t.length;return r.createElement("rect",{key:"react-".concat(l),y:e,x:a,height:d,width:o,stroke:"none",fill:t[h],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return r.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function dO(e){var{vertical:t=!0,verticalFill:n,fillOpacity:a,x:i,y:o,width:s,height:l,verticalPoints:c}=e;if(!t||!n||!n.length)return null;var u=c.map(e=>Math.round(e+i-i)).sort((e,t)=>e-t);i!==u[0]&&u.unshift(0);var d=u.map((e,t)=>{var c=u[t+1],d=null==c?i+s-e:c-e;if(d<=0)return null;var h=t%n.length;return r.createElement("rect",{key:"react-".concat(t),x:e,y:o,width:d,height:l,stroke:"none",fill:n[h],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return r.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var hO=(e,t)=>{var{xAxis:r,width:n,height:a,offset:i}=e;return Af(DT(rO(rO(rO({},KE),r),{},{ticks:Tf(r,!0),viewBox:{x:0,y:0,width:n,height:a}})),i.left,i.left+i.width,t)},mO=(e,t)=>{var{yAxis:r,width:n,height:a,offset:i}=e;return Af(DT(rO(rO(rO({},KE),r),{},{ticks:Tf(r,!0),viewBox:{x:0,y:0,width:n,height:a}})),i.top,i.top+i.height,t)},pO={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:rk.grid};function fO(e){var t=sg(),n=lg(),a=og(),i=rO(rO({},pT(e,pO)),{},{x:vu(e.x)?e.x:a.left,y:vu(e.y)?e.y:a.top,width:vu(e.width)?e.width:a.width,height:vu(e.height)?e.height:a.height}),{xAxisId:o,yAxisId:s,x:l,y:c,width:u,height:d,syncWithTicks:h,horizontalValues:m,verticalValues:p}=i,f=eg(),g=df(e=>FS(e,"xAxis",o,f)),v=df(e=>FS(e,"yAxis",s,f));if(!zu(u)||!zu(d)||!vu(l)||!vu(c))return null;var y=i.verticalCoordinatesGenerator||hO,b=i.horizontalCoordinatesGenerator||mO,{horizontalPoints:x,verticalPoints:w}=i;if((!x||!x.length)&&"function"===typeof b){var k=m&&m.length,j=b({yAxis:v?rO(rO({},v),{},{ticks:k?m:v.ticks}):void 0,width:null!==t&&void 0!==t?t:u,height:null!==n&&void 0!==n?n:d,offset:a},!!k||h);Tu(Array.isArray(j),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof j,"]")),Array.isArray(j)&&(x=j)}if((!w||!w.length)&&"function"===typeof y){var S=p&&p.length,C=y({xAxis:g?rO(rO({},g),{},{ticks:S?p:g.ticks}):void 0,width:null!==t&&void 0!==t?t:u,height:null!==n&&void 0!==n?n:d,offset:a},!!S||h);Tu(Array.isArray(C),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof C,"]")),Array.isArray(C)&&(w=C)}return r.createElement(pE,{zIndex:i.zIndex},r.createElement("g",{className:"recharts-cartesian-grid"},r.createElement(oO,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),r.createElement(uO,aO({},i,{horizontalPoints:x})),r.createElement(dO,aO({},i,{verticalPoints:w})),r.createElement(lO,aO({},i,{offset:a,horizontalPoints:x,xAxis:g,yAxis:v})),r.createElement(cO,aO({},i,{offset:a,verticalPoints:w,xAxis:g,yAxis:v}))))}fO.displayName="CartesianGrid";var gO=["domain","range"],vO=["domain","range"];function yO(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function bO(e,t){return e===t||!(!Array.isArray(e)||2!==e.length||!Array.isArray(t)||2!==t.length)&&(e[0]===t[0]&&e[1]===t[1])}function xO(e,t){if(e===t)return!0;var{domain:r,range:n}=e,a=yO(e,gO),{domain:i,range:o}=t,s=yO(t,vO);return!!bO(r,i)&&(!!bO(n,o)&&cA(a,s))}var wO=["type"],kO=["dangerouslySetInnerHTML","ticks","scale"],jO=["id","scale"];function SO(){return SO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},SO.apply(null,arguments)}function CO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function NO(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?CO(Object(r),!0).forEach(function(t){_O(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CO(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _O(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AO(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function TO(e){var t=sf(),n=(0,r.useRef)(null),a=dg(),{type:i}=e,o=AO(e,wO),s=wk(a,"xAxis",i),l=(0,r.useMemo)(()=>{if(null!=s)return NO(NO({},o),{},{type:s})},[o,s]);return(0,r.useLayoutEffect)(()=>{null!=l&&(null===n.current?t(RN(l)):n.current!==l&&t(DN({prev:n.current,next:l})),n.current=l)},[l,t]),(0,r.useLayoutEffect)(()=>()=>{n.current&&(t(LN(n.current)),n.current=null)},[t]),null}var EO=e=>{var{xAxisId:t,className:n}=e,a=df(Xf),i=eg(),o="xAxis",s=df(e=>US(e,o,t,i)),l=df(e=>ES(e,t)),c=df(e=>IS(e,t)),u=df(e=>Xk(e,t));if(null==l||null==c||null==u)return null;var{dangerouslySetInnerHTML:d,ticks:h,scale:m}=e,p=AO(e,kO),{id:f,scale:g}=u,v=AO(u,jO);return r.createElement($E,SO({},p,v,{x:c.x,y:c.y,width:l.width,height:l.height,className:su("recharts-".concat(o," ").concat(o),n),viewBox:a,ticks:s,axisType:o}))},OO={allowDataOverflow:Jk.allowDataOverflow,allowDecimals:Jk.allowDecimals,allowDuplicatedCategory:Jk.allowDuplicatedCategory,angle:Jk.angle,axisLine:KE.axisLine,height:Jk.height,hide:!1,includeHidden:Jk.includeHidden,interval:Jk.interval,label:!1,minTickGap:Jk.minTickGap,mirror:Jk.mirror,orientation:Jk.orientation,padding:Jk.padding,reversed:Jk.reversed,scale:Jk.scale,tick:Jk.tick,tickCount:Jk.tickCount,tickLine:KE.tickLine,tickSize:KE.tickSize,type:Jk.type,xAxisId:0},PO=e=>{var t=pT(e,OO);return r.createElement(r.Fragment,null,r.createElement(TO,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),r.createElement(EO,t))},IO=r.memo(PO,xO);IO.displayName="XAxis";var MO=["type"],RO=["dangerouslySetInnerHTML","ticks","scale"],DO=["id","scale"];function LO(){return LO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},LO.apply(null,arguments)}function zO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function qO(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zO(Object(r),!0).forEach(function(t){BO(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zO(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function BO(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FO(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function UO(e){var t=sf(),n=(0,r.useRef)(null),a=dg(),{type:i}=e,o=FO(e,MO),s=wk(a,"yAxis",i),l=(0,r.useMemo)(()=>{if(null!=s)return qO(qO({},o),{},{type:s})},[s,o]);return(0,r.useLayoutEffect)(()=>{null!=l&&(null===n.current?t(zN(l)):n.current!==l&&t(qN({prev:n.current,next:l})),n.current=l)},[l,t]),(0,r.useLayoutEffect)(()=>()=>{n.current&&(t(BN(n.current)),n.current=null)},[t]),null}function HO(e){var{yAxisId:t,className:n,width:a,label:i}=e,o=(0,r.useRef)(null),s=(0,r.useRef)(null),l=df(Xf),c=eg(),u=sf(),d="yAxis",h=df(e=>RS(e,t)),m=df(e=>MS(e,t)),p=df(e=>US(e,d,t,c)),f=df(e=>tj(e,t));if((0,r.useLayoutEffect)(()=>{if("auto"===a&&h&&!EE(i)&&!(0,r.isValidElement)(i)&&null!=f){var e=o.current;if(e){var n=e.getCalculatedWidth();Math.round(h.width)!==Math.round(n)&&u(WN({id:t,width:n}))}}},[p,h,u,i,t,a,f]),null==h||null==m||null==f)return null;var{dangerouslySetInnerHTML:g,ticks:v,scale:y}=e,b=FO(e,RO),{id:x,scale:w}=f,k=FO(f,DO);return r.createElement($E,LO({},b,k,{ref:o,labelRef:s,x:m.x,y:m.y,tickTextProps:"auto"===a?{width:void 0}:{width:a},width:h.width,height:h.height,className:su("recharts-".concat(d," ").concat(d),n),viewBox:l,ticks:p,axisType:d}))}var WO={allowDataOverflow:ej.allowDataOverflow,allowDecimals:ej.allowDecimals,allowDuplicatedCategory:ej.allowDuplicatedCategory,angle:ej.angle,axisLine:KE.axisLine,hide:!1,includeHidden:ej.includeHidden,interval:ej.interval,label:!1,minTickGap:ej.minTickGap,mirror:ej.mirror,orientation:ej.orientation,padding:ej.padding,reversed:ej.reversed,scale:ej.scale,tick:ej.tick,tickCount:ej.tickCount,tickLine:KE.tickLine,tickSize:KE.tickSize,type:ej.type,width:ej.width,yAxisId:0},KO=e=>{var t=pT(e,WO);return r.createElement(r.Fragment,null,r.createElement(UO,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),r.createElement(HO,t))},VO=r.memo(KO,xO);function GO(){return GO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},GO.apply(null,arguments)}function QO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function YO(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?QO(Object(r),!0).forEach(function(t){$O(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QO(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function $O(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JO(e){return Array.isArray(e)&&yu(e[0])&&yu(e[1])?e.join(" ~ "):e}VO.displayName="YAxis";var XO={separator:" : ",contentStyle:{margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},itemStyle:{display:"block",paddingTop:4,paddingBottom:4,color:"#000"},labelStyle:{},accessibilityLayer:!1},ZO=e=>{var{separator:t=XO.separator,contentStyle:n,itemStyle:a,labelStyle:i=XO.labelStyle,payload:o,formatter:s,itemSorter:l,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:h,accessibilityLayer:m=XO.accessibilityLayer}=e,p=YO(YO({},XO.contentStyle),n),f=YO({margin:0},i),g=!Cu(d),v=g?d:"",y=su("recharts-default-tooltip",c),b=su("recharts-tooltip-label",u);g&&h&&void 0!==o&&null!==o&&(v=h(d,o));var x=m?{role:"status","aria-live":"assertive"}:{};return r.createElement("div",GO({className:y,style:p},x),r.createElement("p",{className:b,style:f},r.isValidElement(v)?v:"".concat(v)),(()=>{if(o&&o.length){var e=(l?mf()(o,l):o).map((e,n)=>{if("none"===e.type)return null;var i=e.formatter||s||JO,{value:l,name:c}=e,u=l,d=c;if(i){var h=i(l,c,e,n,o);if(Array.isArray(h))[u,d]=h;else{if(null==h)return null;u=h}}var m=YO(YO({},XO.itemStyle),{},{color:e.color||XO.itemStyle.color},a);return r.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(n),style:m},yu(d)?r.createElement("span",{className:"recharts-tooltip-item-name"},d):null,yu(d)?r.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,r.createElement("span",{className:"recharts-tooltip-item-value"},u),r.createElement("span",{className:"recharts-tooltip-item-unit"},e.unit||""))});return r.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},e)}return null})())},eP="recharts-tooltip-wrapper",tP={visibility:"hidden"};function rP(e){var{coordinate:t,translateX:r,translateY:n}=e;return su(eP,{["".concat(eP,"-right")]:vu(r)&&t&&vu(t.x)&&r>=t.x,["".concat(eP,"-left")]:vu(r)&&t&&vu(t.x)&&r<t.x,["".concat(eP,"-bottom")]:vu(n)&&t&&vu(t.y)&&n>=t.y,["".concat(eP,"-top")]:vu(n)&&t&&vu(t.y)&&n<t.y})}function nP(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offset:a,position:i,reverseDirection:o,tooltipDimension:s,viewBox:l,viewBoxDimension:c}=e;if(i&&vu(i[n]))return i[n];var u=r[n]-s-(a>0?a:0),d=r[n]+a;if(t[n])return o[n]?u:d;var h=l[n];return null==h?0:o[n]?u<h?Math.max(d,h):Math.max(u,h):null==c?0:d+s>h+c?Math.max(u,h):Math.max(d,h)}function aP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function iP(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?aP(Object(r),!0).forEach(function(t){oP(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aP(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function oP(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class sP extends r.PureComponent{constructor(){super(...arguments),oP(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),oP(this,"handleKeyDown",e=>{var t,r,n,a;"Escape"===e.key&&this.setState({dismissed:!0,dismissedAtCoordinate:{x:null!==(t=null===(r=this.props.coordinate)||void 0===r?void 0:r.x)&&void 0!==t?t:0,y:null!==(n=null===(a=this.props.coordinate)||void 0===a?void 0:a.y)&&void 0!==n?n:0}})})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,t;this.state.dismissed&&((null===(e=this.props.coordinate)||void 0===e?void 0:e.x)===this.state.dismissedAtCoordinate.x&&(null===(t=this.props.coordinate)||void 0===t?void 0:t.y)===this.state.dismissedAtCoordinate.y||(this.state.dismissed=!1))}render(){var{active:e,allowEscapeViewBox:t,animationDuration:n,animationEasing:a,children:i,coordinate:o,hasPayload:s,isAnimationActive:l,offset:c,position:u,reverseDirection:d,useTranslate3d:h,viewBox:m,wrapperStyle:p,lastBoundingBox:f,innerRef:g,hasPortalFromProps:v}=this.props,y="number"===typeof c?c:c.x,b="number"===typeof c?c:c.y,{cssClasses:x,cssProperties:w}=function(e){var t,r,n,{allowEscapeViewBox:a,coordinate:i,offsetTop:o,offsetLeft:s,position:l,reverseDirection:c,tooltipBox:u,useTranslate3d:d,viewBox:h}=e;return t=u.height>0&&u.width>0&&i?function(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}({translateX:r=nP({allowEscapeViewBox:a,coordinate:i,key:"x",offset:s,position:l,reverseDirection:c,tooltipDimension:u.width,viewBox:h,viewBoxDimension:h.width}),translateY:n=nP({allowEscapeViewBox:a,coordinate:i,key:"y",offset:o,position:l,reverseDirection:c,tooltipDimension:u.height,viewBox:h,viewBoxDimension:h.height}),useTranslate3d:d}):tP,{cssProperties:t,cssClasses:rP({translateX:r,translateY:n,coordinate:i})}}({allowEscapeViewBox:t,coordinate:o,offsetLeft:y,offsetTop:b,position:u,reverseDirection:d,tooltipBox:{height:f.height,width:f.width},useTranslate3d:h,viewBox:m}),k=v?{}:iP(iP({transition:l&&e?"transform ".concat(n,"ms ").concat(a):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&s?"visible":"hidden",position:"absolute",top:0,left:0}),j=iP(iP({},k),{},{visibility:!this.state.dismissed&&e&&s?"visible":"hidden"},p);return r.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:x,style:j,ref:g},i)}}var lP=__webpack_require__(4332),cP=__webpack_require__.n(lP);function uP(e,t,r){return!0===t?cP()(e,r):"function"===typeof t?cP()(e,t):e}var dP,hP,mP,pP,fP,gP,vP,yP,bP,xP,wP,kP,jP,SP;function CP(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],[t,n]=(0,r.useState)({height:0,left:0,top:0,width:0}),a=(0,r.useCallback)(e=>{if(null!=e){var r=e.getBoundingClientRect(),a={height:r.height,left:r.left,top:r.top,width:r.width};(Math.abs(a.height-t.height)>1||Math.abs(a.left-t.left)>1||Math.abs(a.top-t.top)>1||Math.abs(a.width-t.width)>1)&&n({height:a.height,left:a.left,top:a.top,width:a.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,a]}function NP(){}function _P(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function AP(e){this._context=e}function TP(e){this._context=e}function EP(e){this._context=e}AP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:_P(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:_P(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},TP.prototype={areaStart:NP,areaEnd:NP,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:_P(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},EP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:_P(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};class OP{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}}function PP(e){this._context=e}function IP(e){this._context=e}function MP(e){return new IP(e)}function RP(e){return e<0?-1:1}function DP(e,t,r){var n=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(n||a<0&&-0),o=(r-e._y1)/(a||n<0&&-0),s=(i*a+o*n)/(n+a);return(RP(i)+RP(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(s))||0}function LP(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function zP(e,t,r){var n=e._x0,a=e._y0,i=e._x1,o=e._y1,s=(i-n)/3;e._context.bezierCurveTo(n+s,a+s*t,i-s,o-s*r,i,o)}function qP(e){this._context=e}function BP(e){this._context=new FP(e)}function FP(e){this._context=e}function UP(e){this._context=e}function HP(e){var t,r,n=e.length-1,a=new Array(n),i=new Array(n),o=new Array(n);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[n-1]=2,i[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=a[t]/i[t-1],i[t]-=r,o[t]-=r*o[t-1];for(a[n-1]=o[n-1]/i[n-1],t=n-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[n-1]=(e[n]+a[n-1])/2,t=0;t<n-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function WP(e,t){this._context=e,this._t=t}function KP(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}PP.prototype={areaStart:NP,areaEnd:NP,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},IP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}},qP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:zP(this,this._t0,LP(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,zP(this,LP(this,r=DP(this,e,t)),r);break;default:zP(this,this._t0,r=DP(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}},(BP.prototype=Object.create(qP.prototype)).point=function(e,t){qP.prototype.point.call(this,t,e)},FP.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,i){this._context.bezierCurveTo(t,e,n,r,i,a)}},UP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===r)this._context.lineTo(e[1],t[1]);else for(var n=HP(e),a=HP(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],e[o],t[o]);(this._line||0!==this._line&&1===r)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},WP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}}this._x=e,this._y=t}};const VP=Math.PI,GP=2*VP,QP=1e-6,YP=GP-QP;function $P(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}class JP{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?$P:function(e){let t=Math.floor(e);if(!(t>=0))throw new Error("invalid digits: ".concat(e));if(t>15)return $P;const r=10**t;return function(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=Math.round(arguments[t]*r)/r+e[t]}}(e)}moveTo(e,t){this._append(dP||(dP=KP(["M",",",""])),this._x0=this._x1=+e,this._y0=this._y1=+t)}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append(hP||(hP=KP(["Z"]))))}lineTo(e,t){this._append(mP||(mP=KP(["L",",",""])),this._x1=+e,this._y1=+t)}quadraticCurveTo(e,t,r,n){this._append(pP||(pP=KP(["Q",",",",",",",""])),+e,+t,this._x1=+r,this._y1=+n)}bezierCurveTo(e,t,r,n,a,i){this._append(fP||(fP=KP(["C",",",",",",",",",",",""])),+e,+t,+r,+n,this._x1=+a,this._y1=+i)}arcTo(e,t,r,n,a){if(e=+e,t=+t,r=+r,n=+n,(a=+a)<0)throw new Error("negative radius: ".concat(a));let i=this._x1,o=this._y1,s=r-e,l=n-t,c=i-e,u=o-t,d=c*c+u*u;if(null===this._x1)this._append(gP||(gP=KP(["M",",",""])),this._x1=e,this._y1=t);else if(d>QP)if(Math.abs(u*s-l*c)>QP&&a){let h=r-i,m=n-o,p=s*s+l*l,f=h*h+m*m,g=Math.sqrt(p),v=Math.sqrt(d),y=a*Math.tan((VP-Math.acos((p+d-f)/(2*g*v)))/2),b=y/v,x=y/g;Math.abs(b-1)>QP&&this._append(yP||(yP=KP(["L",",",""])),e+b*c,t+b*u),this._append(bP||(bP=KP(["A",",",",0,0,",",",",",""])),a,a,+(u*h>c*m),this._x1=e+x*s,this._y1=t+x*l)}else this._append(vP||(vP=KP(["L",",",""])),this._x1=e,this._y1=t);else;}arc(e,t,r,n,a,i){if(e=+e,t=+t,i=!!i,(r=+r)<0)throw new Error("negative radius: ".concat(r));let o=r*Math.cos(n),s=r*Math.sin(n),l=e+o,c=t+s,u=1^i,d=i?n-a:a-n;null===this._x1?this._append(xP||(xP=KP(["M",",",""])),l,c):(Math.abs(this._x1-l)>QP||Math.abs(this._y1-c)>QP)&&this._append(wP||(wP=KP(["L",",",""])),l,c),r&&(d<0&&(d=d%GP+GP),d>YP?this._append(kP||(kP=KP(["A",",",",0,1,",",",",","A",",",",0,1,",",",",",""])),r,r,u,e-o,t-s,r,r,u,this._x1=l,this._y1=c):d>QP&&this._append(jP||(jP=KP(["A",",",",0,",",",",",",",""])),r,r,+(d>=VP),u,this._x1=e+r*Math.cos(a),this._y1=t+r*Math.sin(a)))}rect(e,t,r,n){this._append(SP||(SP=KP(["M",",","h","v","h","Z"])),this._x0=this._x1=+e,this._y0=this._y1=+t,r=+r,+n,-r)}toString(){return this._}}function XP(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(null==r)t=null;else{const e=Math.floor(r);if(!(e>=0))throw new RangeError("invalid digits: ".concat(r));t=e}return e},()=>new JP(t)}function ZP(e){return e[0]}function eI(e){return e[1]}function tI(e,t){var r=yf(!0),n=null,a=MP,i=null,o=XP(s);function s(s){var l,c,u,d=(s=vf(s)).length,h=!1;for(null==n&&(i=a(u=o())),l=0;l<=d;++l)!(l<d&&r(c=s[l],l,s))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+e(c,l,s),+t(c,l,s));if(u)return i=null,u+""||null}return e="function"===typeof e?e:void 0===e?ZP:yf(e),t="function"===typeof t?t:void 0===t?eI:yf(t),s.x=function(t){return arguments.length?(e="function"===typeof t?t:yf(+t),s):e},s.y=function(e){return arguments.length?(t="function"===typeof e?e:yf(+e),s):t},s.defined=function(e){return arguments.length?(r="function"===typeof e?e:yf(!!e),s):r},s.curve=function(e){return arguments.length?(a=e,null!=n&&(i=a(n)),s):a},s.context=function(e){return arguments.length?(null==e?n=i=null:i=a(n=e),s):n},s}function rI(e,t,r){var n=null,a=yf(!0),i=null,o=MP,s=null,l=XP(c);function c(c){var u,d,h,m,p,f=(c=vf(c)).length,g=!1,v=new Array(f),y=new Array(f);for(null==i&&(s=o(p=l())),u=0;u<=f;++u){if(!(u<f&&a(m=c[u],u,c))===g)if(g=!g)d=u,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),h=u-1;h>=d;--h)s.point(v[h],y[h]);s.lineEnd(),s.areaEnd()}g&&(v[u]=+e(m,u,c),y[u]=+t(m,u,c),s.point(n?+n(m,u,c):v[u],r?+r(m,u,c):y[u]))}if(p)return s=null,p+""||null}function u(){return tI().defined(a).curve(o).context(i)}return e="function"===typeof e?e:void 0===e?ZP:yf(+e),t="function"===typeof t?t:yf(void 0===t?0:+t),r="function"===typeof r?r:void 0===r?eI:yf(+r),c.x=function(t){return arguments.length?(e="function"===typeof t?t:yf(+t),n=null,c):e},c.x0=function(t){return arguments.length?(e="function"===typeof t?t:yf(+t),c):e},c.x1=function(e){return arguments.length?(n=null==e?null:"function"===typeof e?e:yf(+e),c):n},c.y=function(e){return arguments.length?(t="function"===typeof e?e:yf(+e),r=null,c):t},c.y0=function(e){return arguments.length?(t="function"===typeof e?e:yf(+e),c):t},c.y1=function(e){return arguments.length?(r=null==e?null:"function"===typeof e?e:yf(+e),c):r},c.lineX0=c.lineY0=function(){return u().x(e).y(t)},c.lineY1=function(){return u().x(e).y(r)},c.lineX1=function(){return u().x(n).y(t)},c.defined=function(e){return arguments.length?(a="function"===typeof e?e:yf(!!e),c):a},c.curve=function(e){return arguments.length?(o=e,null!=i&&(s=o(i)),c):o},c.context=function(e){return arguments.length?(null==e?i=s=null:s=o(i=e),c):i},c}function nI(){return nI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nI.apply(null,arguments)}function aI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function iI(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?aI(Object(r),!0).forEach(function(t){oI(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aI(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function oI(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var sI={curveBasisClosed:function(e){return new TP(e)},curveBasisOpen:function(e){return new EP(e)},curveBasis:function(e){return new AP(e)},curveBumpX:function(e){return new OP(e,!0)},curveBumpY:function(e){return new OP(e,!1)},curveLinearClosed:function(e){return new PP(e)},curveLinear:MP,curveMonotoneX:function(e){return new qP(e)},curveMonotoneY:function(e){return new BP(e)},curveNatural:function(e){return new UP(e)},curveStep:function(e){return new WP(e,.5)},curveStepAfter:function(e){return new WP(e,1)},curveStepBefore:function(e){return new WP(e,0)}},lI=e=>Lu(e.x)&&Lu(e.y),cI=e=>null!=e.base&&lI(e.base)&&lI(e),uI=e=>e.x,dI=e=>e.y,hI={connectNulls:!1,type:"linear"},mI=e=>{var{type:t=hI.type,points:r=[],baseLine:n,layout:a,connectNulls:i=hI.connectNulls}=e,o=((e,t)=>{if("function"===typeof e)return e;var r="curve".concat(Nu(e));if(("curveMonotone"===r||"curveBump"===r)&&t){var n=sI["".concat(r).concat("vertical"===t?"Y":"X")];if(n)return n}return sI[r]||MP})(t,a),s=i?r.filter(lI):r;if(Array.isArray(n)){var l=r.map((e,t)=>iI(iI({},e),{},{base:n[t]}));return("vertical"===a?rI().y(dI).x1(uI).x0(e=>e.base.x):rI().x(uI).y1(dI).y0(e=>e.base.y)).defined(cI).curve(o)(i?l.filter(cI):l)}return("vertical"===a&&vu(n)?rI().y(dI).x1(uI).x0(n):vu(n)?rI().x(uI).y1(dI).y0(n):tI().x(uI).y(dI)).defined(lI).curve(o)(s)},pI=e=>{var{className:t,points:n,path:a,pathRef:i}=e,o=ug();if((!n||!n.length)&&!a)return null;var s={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||o,connectNulls:e.connectNulls},l=n&&n.length?mI(s):a;return r.createElement("path",nI({},bA(e),zE(e),{className:su("recharts-curve",t),d:null===l?void 0:l,ref:i}))},fI=["x","y","top","left","width","height","className"];function gI(){return gI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gI.apply(null,arguments)}function vI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function yI(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var bI=(e,t,r,n,a,i)=>"M".concat(e,",").concat(a,"v").concat(n,"M").concat(i,",").concat(t,"h").concat(r),xI=e=>{var{x:t=0,y:n=0,top:a=0,left:i=0,width:o=0,height:s=0,className:l}=e,c=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,fI),u=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vI(Object(r),!0).forEach(function(t){yI(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vI(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({x:t,y:n,top:a,left:i,width:o,height:s},c);return vu(t)&&vu(n)&&vu(o)&&vu(s)&&vu(a)&&vu(i)?r.createElement("path",gI({},wA(u),{className:su("recharts-cross",l),d:bI(t,n,o,s,a,i)})):null};function wI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function kI(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wI(Object(r),!0).forEach(function(t){jI(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wI(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function jI(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var SI=(e,t,r)=>e.map(e=>"".concat((e=>e.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())))(e)," ").concat(t,"ms ").concat(r)).join(","),CI=(e,t)=>Object.keys(t).reduce((r,n)=>kI(kI({},r),{},{[n]:e(n,t[n])}),{});function NI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?NI(Object(r),!0).forEach(function(t){AI(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NI(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function AI(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var TI=(e,t,r)=>e+(t-e)*r,EI=e=>{var{from:t,to:r}=e;return t!==r},OI=(e,t,r)=>{var n=CI((t,r)=>{if(EI(r)){var[n,a]=e(r.from,r.to,r.velocity);return _I(_I({},r),{},{from:n,velocity:a})}return r},t);return r<1?CI((e,t)=>EI(t)&&null!=n[e]?_I(_I({},t),{},{velocity:TI(t.velocity,n[e].velocity,r),from:TI(t.from,n[e].from,r)}):t,t):OI(e,n,r-1)};function PI(e,t,r,n,a,i){var o,s=n.reduce((r,n)=>_I(_I({},r),{},{[n]:{from:e[n],velocity:0,to:t[n]}}),{}),l=null,c=n=>{o||(o=n);var u=(n-o)/r.dt;s=OI(r,s,u),a(_I(_I(_I({},e),t),CI((e,t)=>t.from,s))),o=n,Object.values(s).filter(EI).length&&(l=i.setTimeout(c))};return()=>(l=i.setTimeout(c),()=>{var e;null===(e=l)||void 0===e||e()})}const II=(e,t,r,n,a,i)=>{var o,s,l=(o=e,s=t,[Object.keys(o),Object.keys(s)].reduce((e,t)=>e.filter(e=>t.includes(e))));return null==r?()=>(a(_I(_I({},e),t)),()=>{}):!0===r.isStepper?PI(e,t,r,l,a,i):function(e,t,r,n,a,i,o){var s,l=null,c=a.reduce((r,n)=>{var a=e[n],i=t[n];return null==a||null==i?r:_I(_I({},r),{},{[n]:[a,i]})},{}),u=a=>{s||(s=a);var d=(a-s)/n,h=CI((e,t)=>TI(...t,r(d)),c);if(i(_I(_I(_I({},e),t),h)),d<1)l=o.setTimeout(u);else{var m=CI((e,t)=>TI(...t,r(1)),c);i(_I(_I(_I({},e),t),m))}};return()=>(l=o.setTimeout(u),()=>{var e;null===(e=l)||void 0===e||e()})}(e,t,r,n,l,a,i)};var MI=1e-4,RI=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],DI=(e,t)=>e.map((e,r)=>e*t**r).reduce((e,t)=>e+t),LI=(e,t)=>r=>{var n=RI(e,t);return DI(n,r)},zI=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(1===t.length)switch(t[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:var n=(e=>{var t,r=e.split("(");if(2!==r.length||"cubic-bezier"!==r[0])return null;var n=null===(t=r[1])||void 0===t||null===(t=t.split(")")[0])||void 0===t?void 0:t.split(",");if(null==n||4!==n.length)return null;var a=n.map(e=>parseFloat(e));return[a[0],a[1],a[2],a[3]]})(t[0]);if(n)return n}return 4===t.length?t:[0,0,1,1]},qI=(e,t,r,n)=>{var a,i,o=LI(e,r),s=LI(t,n),l=(a=e,i=r,e=>{var t=[...RI(a,i).map((e,t)=>e*t).slice(1),0];return DI(t,e)}),c=e=>e>1?1:e<0?0:e,u=e=>{for(var t=e>1?1:e,r=t,n=0;n<8;++n){var a=o(r)-t,i=l(r);if(Math.abs(a-t)<MI||i<MI)return s(r);r=c(r-a/i)}return s(r)};return u.isStepper=!1,u},BI=function(){return qI(...zI(...arguments))},FI=e=>{if("string"===typeof e)switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return BI(e);case"spring":return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{stiff:t=100,damping:r=8,dt:n=17}=e,a=(e,a,i)=>{var o=i+(-(e-a)*t-i*r)*n/1e3,s=i*n/1e3+e;return Math.abs(s-a)<MI&&Math.abs(o)<MI?[a,0]:[s,o]};return a.isStepper=!0,a.dt=n,a}();default:if("cubic-bezier"===e.split("(")[0])return BI(e)}return"function"===typeof e?e:null};class UI{setTimeout(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=performance.now(),n=null,a=i=>{i-r>=t?e(i):"function"===typeof requestAnimationFrame&&(n=requestAnimationFrame(a))};return n=requestAnimationFrame(a),()=>{null!=n&&cancelAnimationFrame(n)}}}function HI(){return function(e){var t=()=>null,r=!1,n=null,a=i=>{if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,[s,...l]=o;return"number"===typeof s?void(n=e.setTimeout(a.bind(null,l),s)):(a(s),void(n=e.setTimeout(a.bind(null,l))))}"string"===typeof i&&t(i),"object"===typeof i&&t(i),"function"===typeof i&&i()}};return{stop:()=>{r=!0},start:e=>{r=!1,n&&(n(),n=null),a(e)},subscribe:e=>(t=e,()=>{t=()=>null}),getTimeoutController:()=>e}}(new UI)}var WI=(0,r.createContext)(HI);var KI={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},VI={t:0},GI={t:1};function QI(e){var t=pT(e,KI),{isActive:n,canBegin:a,duration:i,easing:o,begin:s,onAnimationEnd:l,onAnimationStart:c,children:u}=t,d="auto"===n?!G_:n,h=function(e,t){var n=(0,r.useContext)(WI);return(0,r.useMemo)(()=>null!==t&&void 0!==t?t:n(e),[e,t,n])}(t.animationId,t.animationManager),[m,p]=(0,r.useState)(d?VI:GI),f=(0,r.useRef)(null);return(0,r.useEffect)(()=>{d||p(GI)},[d]),(0,r.useEffect)(()=>{if(!d||!a)return Au;var e=II(VI,GI,FI(o),i,p,h.getTimeoutController());return h.start([c,s,()=>{f.current=e()},i,l]),()=>{h.stop(),f.current&&f.current(),l()}},[d,a,i,o,s,c,l,h]),u(m.t)}function YI(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"animation-",n=(0,r.useRef)(xu(t)),a=(0,r.useRef)(e);return a.current!==e&&(n.current=xu(t),a.current=e),n.current}var $I,JI,XI,ZI,eM,tM,rM,nM,aM,iM,oM=["radius"],sM=["radius"];function lM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function cM(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lM(Object(r),!0).forEach(function(t){uM(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lM(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function uM(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dM(){return dM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dM.apply(null,arguments)}function hM(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function mM(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var pM,fM,gM,vM,yM,bM,xM,wM=(e,t,r,n,a)=>{var i,o=hu(r),s=hu(n),l=Math.min(Math.abs(o)/2,Math.abs(s)/2),c=s>=0?1:-1,u=o>=0?1:-1,d=s>=0&&o>=0||s<0&&o<0?1:0;if(l>0&&Array.isArray(a)){for(var h=[0,0,0,0],m=0;m<4;m++){var p,f=null!==(p=a[m])&&void 0!==p?p:0;h[m]=f>l?l:f}i=mu($I||($I=mM(["M",",",""])),e,t+c*h[0]),h[0]>0&&(i+=mu(JI||(JI=mM(["A ",",",",0,0,",",",",",""])),h[0],h[0],d,e+u*h[0],t)),i+=mu(XI||(XI=mM(["L ",",",""])),e+r-u*h[1],t),h[1]>0&&(i+=mu(ZI||(ZI=mM(["A ",",",",0,0,",",\n        ",",",""])),h[1],h[1],d,e+r,t+c*h[1])),i+=mu(eM||(eM=mM(["L ",",",""])),e+r,t+n-c*h[2]),h[2]>0&&(i+=mu(tM||(tM=mM(["A ",",",",0,0,",",\n        ",",",""])),h[2],h[2],d,e+r-u*h[2],t+n)),i+=mu(rM||(rM=mM(["L ",",",""])),e+u*h[3],t+n),h[3]>0&&(i+=mu(nM||(nM=mM(["A ",",",",0,0,",",\n        ",",",""])),h[3],h[3],d,e,t+n-c*h[3])),i+="Z"}else if(l>0&&a===+a&&a>0){var g=Math.min(l,a);i=mu(aM||(aM=mM(["M ",",","\n            A ",",",",0,0,",",",",","\n            L ",",","\n            A ",",",",0,0,",",",",","\n            L ",",","\n            A ",",",",0,0,",",",",","\n            L ",",","\n            A ",",",",0,0,",",",","," Z"])),e,t+c*g,g,g,d,e+u*g,t,e+r-u*g,t,g,g,d,e+r,t+c*g,e+r,t+n-c*g,g,g,d,e+r-u*g,t+n,e+u*g,t+n,g,g,d,e,t+n-c*g)}else i=mu(iM||(iM=mM(["M ",","," h "," v "," h "," Z"])),e,t,r,n,-r);return i},kM={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},jM=e=>{var t=pT(e,kM),n=(0,r.useRef)(null),[a,i]=(0,r.useState)(-1);(0,r.useEffect)(()=>{if(n.current&&n.current.getTotalLength)try{var e=n.current.getTotalLength();e&&i(e)}catch(t){}},[]);var{x:o,y:s,width:l,height:c,radius:u,className:d}=t,{animationEasing:h,animationDuration:m,animationBegin:p,isAnimationActive:f,isUpdateAnimationActive:g}=t,v=(0,r.useRef)(l),y=(0,r.useRef)(c),b=(0,r.useRef)(o),x=(0,r.useRef)(s),w=YI((0,r.useMemo)(()=>({x:o,y:s,width:l,height:c,radius:u}),[o,s,l,c,u]),"rectangle-");if(o!==+o||s!==+s||l!==+l||c!==+c||0===l||0===c)return null;var k=su("recharts-rectangle",d);if(!g){var j=wA(t),{radius:S}=j,C=hM(j,oM);return r.createElement("path",dM({},C,{x:hu(o),y:hu(s),width:hu(l),height:hu(c),radius:"number"===typeof u?u:void 0,className:k,d:wM(o,s,l,c,u)}))}var N=v.current,_=y.current,A=b.current,T=x.current,E="0px ".concat(-1===a?1:a,"px"),O="".concat(a,"px 0px"),P=SI(["strokeDasharray"],m,"string"===typeof h?h:kM.animationEasing);return r.createElement(QI,{animationId:w,key:w,canBegin:a>0,duration:m,easing:h,isActive:g,begin:p},e=>{var a,i=ju(N,l,e),d=ju(_,c,e),h=ju(A,o,e),m=ju(T,s,e);n.current&&(v.current=i,y.current=d,b.current=h,x.current=m),a=f?e>0?{transition:P,strokeDasharray:O}:{strokeDasharray:E}:{strokeDasharray:O};var p=wA(t),{radius:g}=p,w=hM(p,sM);return r.createElement("path",dM({},w,{radius:"number"===typeof u?u:void 0,className:k,d:wM(h,m,i,d,u),ref:n,style:cM(cM({},a),t.style)}))})};function SM(e){var{cx:t,cy:r,radius:n,startAngle:a,endAngle:i}=e;return{points:[Xw(t,r,n,a),Xw(t,r,n,i)],cx:t,cy:r,radius:n,startAngle:a,endAngle:i}}function CM(){return CM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},CM.apply(null,arguments)}function NM(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var _M=e=>{var{cx:t,cy:r,radius:n,angle:a,sign:i,isExternal:o,cornerRadius:s,cornerIsExternal:l}=e,c=s*(o?1:-1)+n,u=Math.asin(s/c)/$w,d=l?a:a+i*u,h=l?a-i*u:a;return{center:Xw(t,r,c,d),circleTangency:Xw(t,r,n,d),lineTangency:Xw(t,r,c*Math.cos(u*$w),h),theta:u}},AM=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:i,endAngle:o}=e,s=((e,t)=>pu(t-e)*Math.min(Math.abs(t-e),359.999))(i,o),l=i+s,c=Xw(t,r,a,i),u=Xw(t,r,a,l),d=mu(pM||(pM=NM(["M ",",","\n    A ",",",",0,\n    ",",",",\n    ",",","\n  "])),c.x,c.y,a,a,+(Math.abs(s)>180),+(i>l),u.x,u.y);if(n>0){var h=Xw(t,r,n,i),m=Xw(t,r,n,l);d+=mu(fM||(fM=NM(["L ",",","\n            A ",",",",0,\n            ",",",",\n            ",","," Z"])),m.x,m.y,n,n,+(Math.abs(s)>180),+(i<=l),h.x,h.y)}else d+=mu(gM||(gM=NM(["L ",","," Z"])),t,r);return d},TM={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},EM=e=>{var t=pT(e,TM),{cx:n,cy:a,innerRadius:i,outerRadius:o,cornerRadius:s,forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d,className:h}=t;if(o<i||u===d)return null;var m,p=su("recharts-sector",h),f=o-i,g=wu(s,f,0,!0);return m=g>0&&Math.abs(u-d)<360?(e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:s,startAngle:l,endAngle:c}=e,u=pu(c-l),{circleTangency:d,lineTangency:h,theta:m}=_M({cx:t,cy:r,radius:a,angle:l,sign:u,cornerRadius:i,cornerIsExternal:s}),{circleTangency:p,lineTangency:f,theta:g}=_M({cx:t,cy:r,radius:a,angle:c,sign:-u,cornerRadius:i,cornerIsExternal:s}),v=s?Math.abs(l-c):Math.abs(l-c)-m-g;if(v<0)return o?mu(vM||(vM=NM(["M ",",","\n        a",",",",0,0,1,",",0\n        a",",",",0,0,1,",",0\n      "])),h.x,h.y,i,i,2*i,i,i,2*-i):AM({cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:l,endAngle:c});var y=mu(yM||(yM=NM(["M ",",","\n    A",",",",0,0,",",",",","\n    A",",",",0,",",",",",",","\n    A",",",",0,0,",",",",","\n  "])),h.x,h.y,i,i,+(u<0),d.x,d.y,a,a,+(v>180),+(u<0),p.x,p.y,i,i,+(u<0),f.x,f.y);if(n>0){var{circleTangency:b,lineTangency:x,theta:w}=_M({cx:t,cy:r,radius:n,angle:l,sign:u,isExternal:!0,cornerRadius:i,cornerIsExternal:s}),{circleTangency:k,lineTangency:j,theta:S}=_M({cx:t,cy:r,radius:n,angle:c,sign:-u,isExternal:!0,cornerRadius:i,cornerIsExternal:s}),C=s?Math.abs(l-c):Math.abs(l-c)-w-S;if(C<0&&0===i)return"".concat(y,"L").concat(t,",").concat(r,"Z");y+=mu(bM||(bM=NM(["L",",","\n      A",",",",0,0,",",",",","\n      A",",",",0,",",",",",",","\n      A",",",",0,0,",",",",","Z"])),j.x,j.y,i,i,+(u<0),k.x,k.y,n,n,+(C>180),+(u>0),b.x,b.y,i,i,+(u<0),x.x,x.y)}else y+=mu(xM||(xM=NM(["L",",","Z"])),t,r);return y})({cx:n,cy:a,innerRadius:i,outerRadius:o,cornerRadius:Math.min(g,f/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):AM({cx:n,cy:a,innerRadius:i,outerRadius:o,startAngle:u,endAngle:d}),r.createElement("path",CM({},wA(t),{className:p,d:m}))};function OM(e,t,r){if("horizontal"===e)return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if("vertical"===e)return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(LE(t)){if("centric"===e){var{cx:n,cy:a,innerRadius:i,outerRadius:o,angle:s}=t,l=Xw(n,a,i,s),c=Xw(n,a,o,s);return[{x:l.x,y:l.y},{x:c.x,y:c.y}]}return SM(t)}}function PM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function IM(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?PM(Object(r),!0).forEach(function(t){MM(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PM(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function MM(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var RM=()=>{var e=df(Nj),t=df(KC),r=df(UC);return zf(e&&r?IM(IM({},e),{},{scale:r}):void 0,t)};function DM(){return DM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},DM.apply(null,arguments)}function LM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function zM(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?LM(Object(r),!0).forEach(function(t){qM(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LM(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function qM(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BM(e){var{cursor:t,cursorComp:n,cursorProps:a}=e;return(0,r.isValidElement)(t)?(0,r.cloneElement)(t,a):(0,r.createElement)(n,a)}function FM(e){var t,n,a,i,{coordinate:o,payload:s,index:l,offset:c,tooltipAxisBandSize:u,layout:d,cursor:h,tooltipEventType:m,chartName:p}=e,f=o,g=s,v=l;if(!h||!f||"ScatterChart"!==p&&"axis"!==m)return null;if("ScatterChart"===p)n=f,a=xI,i=rk.cursorLine;else if("BarChart"===p)n=function(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:"horizontal"===e?t.x-a:r.left+.5,y:"horizontal"===e?r.top+.5:t.y-a,width:"horizontal"===e?n:r.width-1,height:"horizontal"===e?r.height-1:n}}(d,f,c,u),a=jM,i=rk.cursorRectangle;else if("radial"===d&&LE(f)){var{cx:y,cy:b,radius:x,startAngle:w,endAngle:k}=SM(f);n={cx:y,cy:b,startAngle:w,endAngle:k,innerRadius:x,outerRadius:x},a=EM,i=rk.cursorLine}else n={points:OM(d,f,c)},a=pI,i=rk.cursorLine;var j="object"===typeof h&&"className"in h?h.className:void 0,S=zM(zM(zM(zM({stroke:"#ccc",pointerEvents:"none"},c),n),xA(h)),{},{payload:g,payloadIndex:v,className:su("recharts-tooltip-cursor",j)});return r.createElement(pE,{zIndex:null!==(t=e.zIndex)&&void 0!==t?t:i},r.createElement(BM,{cursor:h,cursorComp:a,cursorProps:S}))}function UM(e){var t=RM(),n=og(),a=ug(),i=cN();return null==t||null==n||null==a||null==i?null:r.createElement(FM,DM({},e,{offset:n,layout:a,tooltipAxisBandSize:t,chartName:i}))}function HM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function WM(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?HM(Object(r),!0).forEach(function(t){KM(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HM(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function KM(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VM(e){return e.dataKey}var GM=[],QM={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function YM(e){var t,n,a=pT(e,QM),{active:i,allowEscapeViewBox:o,animationDuration:s,animationEasing:l,content:c,filterNull:u,isAnimationActive:d,offset:h,payloadUniqBy:m,position:p,reverseDirection:f,useTranslate3d:g,wrapperStyle:v,cursor:y,shared:b,trigger:x,defaultIndex:w,portal:k,axisId:j}=a,S=sf(),C="number"===typeof w?String(w):w;(0,r.useEffect)(()=>{S(_p({shared:b,trigger:x,axisId:j,active:i,defaultIndex:C}))},[S,b,x,j,i,C]);var N=ag(),_=mA(),A=function(e){return df(t=>$S(t,e))}(b),{activeIndex:T,isActive:E}=null!==(t=df(e=>wN(e,A,x,C)))&&void 0!==t?t:{},O=df(e=>xN(e,A,x,C)),P=df(e=>bN(e,A,x,C)),I=df(e=>yN(e,A,x,C)),M=O,R=(0,r.useContext)(VA),D=null!==(n=null!==i&&void 0!==i?i:E)&&void 0!==n&&n,[L,z]=CP([M,D]),q="axis"===A?P:void 0;KA(A,x,I,q,T,D);var B=null!==k&&void 0!==k?k:R;if(null==B||null==N||null==A)return null;var F=null!==M&&void 0!==M?M:GM;D||(F=GM),u&&F.length&&(F=uP(F.filter(e=>null!=e.value&&(!0!==e.hide||a.includeHidden)),m,VM));var U=F.length>0,H=r.createElement(sP,{allowEscapeViewBox:o,animationDuration:s,animationEasing:l,isAnimationActive:d,active:D,coordinate:I,hasPayload:U,offset:h,position:p,reverseDirection:f,useTranslate3d:g,viewBox:N,wrapperStyle:v,lastBoundingBox:L,innerRef:z,hasPortalFromProps:Boolean(k)},function(e,t){return r.isValidElement(e)?r.cloneElement(e,t):"function"===typeof e?r.createElement(e,t):r.createElement(ZO,t)}(c,WM(WM({},a),{},{payload:F,label:q,active:D,activeIndex:T,coordinate:I,accessibilityLayer:_})));return r.createElement(r.Fragment,null,(0,mE.createPortal)(H,B),D&&r.createElement(UM,{cursor:y,tooltipEventType:A,coordinate:I,payload:F,index:T}))}Math.abs,Math.atan2;const $M=Math.cos,JM=(Math.max,Math.min,Math.sin),XM=Math.sqrt,ZM=Math.PI,eR=2*ZM;const tR={draw(e,t){const r=XM(t/ZM);e.moveTo(r,0),e.arc(0,0,r,0,eR)}},rR={draw(e,t){const r=XM(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},nR=XM(1/3),aR=2*nR,iR={draw(e,t){const r=XM(t/aR),n=r*nR;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},oR={draw(e,t){const r=XM(t),n=-r/2;e.rect(n,n,r,r)}},sR=JM(ZM/10)/JM(7*ZM/10),lR=JM(eR/10)*sR,cR=-$M(eR/10)*sR,uR={draw(e,t){const r=XM(.8908130915292852*t),n=lR*r,a=cR*r;e.moveTo(0,-r),e.lineTo(n,a);for(let i=1;i<5;++i){const t=eR*i/5,o=$M(t),s=JM(t);e.lineTo(s*r,-o*r),e.lineTo(o*n-s*a,s*n+o*a)}e.closePath()}},dR=XM(3),hR={draw(e,t){const r=-XM(t/(3*dR));e.moveTo(0,2*r),e.lineTo(-dR*r,-r),e.lineTo(dR*r,-r),e.closePath()}},mR=-.5,pR=XM(3)/2,fR=1/XM(12),gR=3*(fR/2+1),vR={draw(e,t){const r=XM(t/gR),n=r/2,a=r*fR,i=n,o=r*fR+r,s=-i,l=o;e.moveTo(n,a),e.lineTo(i,o),e.lineTo(s,l),e.lineTo(mR*n-pR*a,pR*n+mR*a),e.lineTo(mR*i-pR*o,pR*i+mR*o),e.lineTo(mR*s-pR*l,pR*s+mR*l),e.lineTo(mR*n+pR*a,mR*a-pR*n),e.lineTo(mR*i+pR*o,mR*o-pR*i),e.lineTo(mR*s+pR*l,mR*l-pR*s),e.closePath()}};XM(3),XM(3);var yR=["type","size","sizeType"];function bR(){return bR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bR.apply(null,arguments)}function xR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function wR(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xR(Object(r),!0).forEach(function(t){kR(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xR(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function kR(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var jR={symbolCircle:tR,symbolCross:rR,symbolDiamond:iR,symbolSquare:oR,symbolStar:uR,symbolTriangle:hR,symbolWye:vR},SR=Math.PI/180,CR=e=>{var{type:t="circle",size:n=64,sizeType:a="area"}=e,i=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,yR),o=wR(wR({},i),{},{type:t,size:n,sizeType:a}),s="circle";"string"===typeof t&&(s=t);var{className:l,cx:c,cy:u}=o,d=wA(o);return vu(c)&&vu(u)&&vu(n)?r.createElement("path",bR({},d,{className:su("recharts-symbols",l),transform:"translate(".concat(c,", ").concat(u,")"),d:(()=>{var e=(e=>{var t="symbol".concat(Nu(e));return jR[t]||tR})(s),t=function(e,t){let r=null,n=XP(a);function a(){let a;if(r||(r=a=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),a)return r=null,a+""||null}return e="function"===typeof e?e:yf(e||tR),t="function"===typeof t?t:yf(void 0===t?64:+t),a.type=function(t){return arguments.length?(e="function"===typeof t?t:yf(t),a):e},a.size=function(e){return arguments.length?(t="function"===typeof e?e:yf(+e),a):t},a.context=function(e){return arguments.length?(r=null==e?null:e,a):r},a}().type(e).size(((e,t,r)=>{if("area"===t)return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return.5*e*e/Math.sqrt(3);case"square":return e*e;case"star":var n=18*SR;return 1.25*e*e*(Math.tan(n)-Math.tan(2*n)*Math.tan(n)**2);case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}})(n,a,s)),r=t();if(null!==r)return r})()})):null};function NR(){return NR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},NR.apply(null,arguments)}function _R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function AR(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}CR.registerSymbol=(e,t)=>{jR["symbol".concat(Nu(e))]=t};var TR=32,ER={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function OR(e){var t,{data:n,iconType:a,inactiveColor:i}=e,o=16,s=TR/6,l=TR/3,c=n.inactive?i:n.color,u=null!==a&&void 0!==a?a:n.type;if("none"===u)return null;if("plainline"===u)return r.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:null===(t=n.payload)||void 0===t?void 0:t.strokeDasharray,x1:0,y1:o,x2:TR,y2:o,className:"recharts-legend-icon"});if("line"===u)return r.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(o,"h").concat(l,"\n            A").concat(s,",").concat(s,",0,1,1,").concat(2*l,",").concat(o,"\n            H").concat(TR,"M").concat(2*l,",").concat(o,"\n            A").concat(s,",").concat(s,",0,1,1,").concat(l,",").concat(o),className:"recharts-legend-icon"});if("rect"===u)return r.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(4,"h").concat(TR,"v").concat(24,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(r.isValidElement(n.legendIcon)){var d=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_R(Object(r),!0).forEach(function(t){AR(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_R(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},n);return delete d.legendIcon,r.cloneElement(n.legendIcon,d)}return r.createElement(CR,{fill:c,cx:o,cy:o,size:TR,sizeType:"diameter",type:u})}function PR(e){var{payload:t,iconSize:n,layout:a,formatter:i,inactiveColor:o,iconType:s}=e,l={x:0,y:0,width:TR,height:TR},c={display:"horizontal"===a?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((t,a)=>{var d=t.formatter||i,h=su({"recharts-legend-item":!0,["legend-item-".concat(a)]:!0,inactive:t.inactive});if("none"===t.type)return null;var m=t.inactive?o:t.color,p=d?d(t.value,t,a):t.value;return r.createElement("li",NR({className:h,style:c,key:"legend-item-".concat(a)},qE(e,t,a)),r.createElement(SA,{width:n,height:n,viewBox:l,style:u,"aria-label":"".concat(p," legend icon")},r.createElement(OR,{data:t,iconType:s,inactiveColor:o})),r.createElement("span",{className:"recharts-legend-item-text",style:{color:m}},p))})}var IR=e=>{var t=pT(e,ER),{payload:n,layout:a,align:i}=t;if(!n||!n.length)return null;var o={padding:0,margin:0,textAlign:"horizontal"===a?i:"left"};return r.createElement("ul",{className:"recharts-default-legend",style:o},r.createElement(PR,NR({},t,{payload:n})))};var MR=["contextPayload"];function RR(){return RR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},RR.apply(null,arguments)}function DR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function LR(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?DR(Object(r),!0).forEach(function(t){zR(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DR(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function zR(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qR(e){return e.value}function BR(e){var{contextPayload:t}=e,n=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,MR),a=uP(t,e.payloadUniqBy,qR),i=LR(LR({},n),{},{payload:a});return r.isValidElement(e.content)?r.cloneElement(e.content,i):"function"===typeof e.content?r.createElement(e.content,i):r.createElement(IR,i)}function FR(e){var t=sf();return(0,r.useEffect)(()=>{t(m_(e))},[t,e]),null}function UR(e){var t=sf();return(0,r.useEffect)(()=>(t(h_(e)),()=>{t(h_({width:0,height:0}))}),[t,e]),null}var HR={align:"center",iconSize:14,inactiveColor:"#ccc",itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function WR(e){var t=pT(e,HR),n=df(ff),a=(0,r.useContext)(GA),i=df(e=>e.layout.margin),{width:o,height:s,wrapperStyle:l,portal:c}=t,[u,d]=CP([n]),h=sg(),m=lg();if(null==h||null==m)return null;var p=h-((null===i||void 0===i?void 0:i.left)||0)-((null===i||void 0===i?void 0:i.right)||0),f=function(e,t,r,n){return"vertical"===e&&null!=t?{height:t}:"horizontal"===e?{width:r||n}:null}(t.layout,s,o,p),g=c?l:LR(LR({position:"absolute",width:(null===f||void 0===f?void 0:f.width)||o||"auto",height:(null===f||void 0===f?void 0:f.height)||s||"auto"},function(e,t,r,n,a,i){var o,s,{layout:l,align:c,verticalAlign:u}=t;return e&&(void 0!==e.left&&null!==e.left||void 0!==e.right&&null!==e.right)||(o="center"===c&&"vertical"===l?{left:((n||0)-i.width)/2}:"right"===c?{right:r&&r.right||0}:{left:r&&r.left||0}),e&&(void 0!==e.top&&null!==e.top||void 0!==e.bottom&&null!==e.bottom)||(s="middle"===u?{top:((a||0)-i.height)/2}:"bottom"===u?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),LR(LR({},o),s)}(l,t,i,h,m,u)),l),v=null!==c&&void 0!==c?c:a;if(null==v||null==n)return null;var y=r.createElement("div",{className:"recharts-legend-wrapper",style:g,ref:d},r.createElement(FR,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),!c&&r.createElement(UR,{width:u.width,height:u.height}),r.createElement(BR,RR({},t,f,{margin:i,chartWidth:h,chartHeight:m,contextPayload:n})));return(0,mE.createPortal)(y,v)}WR.displayName="Legend";var KR=__webpack_require__(356),VR=__webpack_require__.n(KR),GR=["valueAccessor"],QR=["dataKey","clockWise","id","textBreakAll","zIndex"];function YR(){return YR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},YR.apply(null,arguments)}function $R(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var JR=e=>Array.isArray(e.value)?VR()(e.value):e.value,XR=(0,r.createContext)(void 0),ZR=XR.Provider,eD=(0,r.createContext)(void 0);eD.Provider;function tD(e){var{valueAccessor:t=JR}=e,n=$R(e,GR),{dataKey:a,clockWise:i,id:o,textBreakAll:s,zIndex:l}=n,c=$R(n,QR),u=(0,r.useContext)(XR),d=(0,r.useContext)(eD),h=u||d;return h&&h.length?r.createElement(pE,{zIndex:null!==l&&void 0!==l?l:rk.label},r.createElement(qT,{className:"recharts-label-list"},h.map((e,i)=>{var l,u=Cu(a)?t(e,i):Nf(e.payload,a),d=Cu(o)?{}:{id:"".concat(o,"-").concat(i)};return r.createElement(ME,YR({key:"label-".concat(i)},wA(e),c,d,{fill:null!==(l=n.fill)&&void 0!==l?l:e.fill,parentViewBox:e.parentViewBox,value:u,textBreakAll:s,viewBox:e.viewBox,index:i,zIndex:0}))}))):null}function rD(e){var{label:t}=e;return t?!0===t?r.createElement(tD,{key:"labelList-implicit"}):r.isValidElement(t)||EE(t)?r.createElement(tD,{key:"labelList-implicit",content:t}):"object"===typeof t?r.createElement(tD,YR({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function nD(){return nD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nD.apply(null,arguments)}tD.displayName="LabelList";var aD=e=>{var{cx:t,cy:n,r:a,className:i}=e,o=su("recharts-dot",i);return vu(t)&&vu(n)&&vu(a)?r.createElement("circle",nD({},bA(e),zE(e),{className:o,cx:t,cy:n,r:a})):null},iD=__webpack_require__(528),oD=e=>"string"===typeof e?e:e?e.displayName||e.name||"Component":"",sD=null,lD=null,cD=e=>{if(e===sD&&Array.isArray(lD))return lD;var t=[];return r.Children.forEach(e,e=>{Cu(e)||((0,iD.zv)(e)?t=t.concat(cD(e.props.children)):t.push(e))}),lD=t,sD=e,t};var uD=e=>!e||"object"!==typeof e||!("clipDot"in e)||Boolean(e.clipDot),dD=["points"];function hD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function mD(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?hD(Object(r),!0).forEach(function(t){pD(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hD(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function pD(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fD(){return fD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fD.apply(null,arguments)}function gD(e){var{option:t,dotProps:n,className:a}=e;if((0,r.isValidElement)(t))return(0,r.cloneElement)(t,n);if("function"===typeof t)return t(n);var i=su(a,"boolean"!==typeof t?t.className:""),o=null!==n&&void 0!==n?n:{},{points:s}=o,l=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(o,dD);return r.createElement(aD,fD({},l,{className:i}))}function vD(e){var{points:t,dot:n,className:a,dotClassName:i,dataKey:o,baseProps:s,needClip:l,clipPathId:c,zIndex:u=rk.scatter}=e;if(!function(e,t){return null!=e&&(!!t||1===e.length)}(t,n))return null;var d,h=uD(n),m=null==(d=n)?null:(0,r.isValidElement)(d)?wA(d.props):"object"!==typeof d||Array.isArray(d)?null:wA(d),p=t.map((e,a)=>{var l,c,u=mD(mD(mD({r:3},s),m),{},{index:a,cx:null!==(l=e.x)&&void 0!==l?l:void 0,cy:null!==(c=e.y)&&void 0!==c?c:void 0,dataKey:o,value:e.value,payload:e.payload,points:t});return r.createElement(gD,{key:"dot-".concat(a),option:n,dotProps:u,className:i})}),f={};return l&&null!=c&&(f.clipPath="url(#clipPath-".concat(h?"":"dots-").concat(c,")")),r.createElement(pE,{zIndex:u},r.createElement(qT,fD({className:a},f),p))}function yD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function bD(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yD(Object(r),!0).forEach(function(t){xD(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yD(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function xD(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var wD=e=>{var{point:t,childIndex:n,mainColor:a,activeDot:i,dataKey:o,clipPath:s}=e;if(!1===i||null==t.x||null==t.y)return null;var l,c=bD(bD(bD({},{index:n,dataKey:o,cx:t.x,cy:t.y,r:4,fill:null!==a&&void 0!==a?a:"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value}),xA(i)),zE(i));return l=(0,r.isValidElement)(i)?(0,r.cloneElement)(i,c):"function"===typeof i?i(c):r.createElement(aD,c),r.createElement(qT,{className:"recharts-active-dot",clipPath:s},l)};function kD(e){var{points:t,mainColor:n,activeDot:a,itemDataKey:i,clipPath:o,zIndex:s=rk.activeDot}=e,l=df($C),c=df(aN);if(null==t||null==c)return null;var u=t.find(e=>c.includes(e.payload));return Cu(u)?null:r.createElement(pE,{zIndex:s},r.createElement(wD,{point:u,childIndex:Number(l),mainColor:n,dataKey:i,activeDot:a,clipPath:o}))}function jD(e){var{tooltipEntrySettings:t}=e,n=sf(),a=eg(),i=(0,r.useRef)(null);return(0,r.useLayoutEffect)(()=>{a||(null===i.current?n(Sp(t)):i.current!==t&&n(Cp({prev:i.current,next:t})),i.current=t)},[t,n,a]),(0,r.useLayoutEffect)(()=>()=>{i.current&&(n(Np(i.current)),i.current=null)},[n]),null}var SD=["children"];var CD={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},ND=(0,r.createContext)(CD);function _D(e){var{children:t}=e,n=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,SD);return r.createElement(ND.Provider,{value:n},t)}function AD(e,t){var r,n,a=df(t=>Zk(t,e)),i=df(e=>rj(e,t)),o=null!==(r=null===a||void 0===a?void 0:a.allowDataOverflow)&&void 0!==r?r:Jk.allowDataOverflow,s=null!==(n=null===i||void 0===i?void 0:i.allowDataOverflow)&&void 0!==n?n:ej.allowDataOverflow;return{needClip:o||s,needClipX:o,needClipY:s}}function TD(e){var{xAxisId:t,yAxisId:n,clipPathId:a}=e,i=sT(),{needClipX:o,needClipY:s,needClip:l}=AD(t,n);if(!l||!i)return null;var{x:c,y:u,width:d,height:h}=i;return r.createElement("clipPath",{id:"clipPath-".concat(a)},r.createElement("rect",{x:o?c:c-d/2,y:s?u:u-h/2,width:o?d:2*d,height:s?h:2*h}))}var ED=(e,t,r,n)=>WS(e,"xAxis",t,n),OD=(e,t,r,n)=>HS(e,"xAxis",t,n),PD=(e,t,r,n)=>WS(e,"yAxis",r,n),ID=(e,t,r,n)=>HS(e,"yAxis",r,n),MD=tf([cg,ED,PD,OD,ID],(e,t,r,n,a)=>_f(e,"xAxis")?zf(t,n,!1):zf(r,a,!1));function RD(e){return"line"===e.type}var DD,LD=tf([cj,(e,t,r,n,a)=>a],(e,t)=>e.filter(RD).find(e=>e.id===t)),zD=tf([cg,ED,PD,OD,ID,LD,MD,Nw],(e,t,r,n,a,i,o,s)=>{var{chartData:l,dataStartIndex:c,dataEndIndex:u}=s;if(null!=i&&null!=t&&null!=r&&null!=n&&null!=a&&0!==n.length&&0!==a.length&&null!=o&&("horizontal"===e||"vertical"===e)){var d,{dataKey:h,data:m}=i;if(null!=(d=null!=m&&m.length>0?m:null===l||void 0===l?void 0:l.slice(c,u+1)))return function(e){var{layout:t,xAxis:r,yAxis:n,xAxisTicks:a,yAxisTicks:i,dataKey:o,bandSize:s,displayedData:l}=e;return l.map((e,l)=>{var c=Nf(e,o);if("horizontal"===t){var u=If({axis:r,ticks:a,bandSize:s,entry:e,index:l}),d=Cu(c)?null:n.scale.map(c);return{x:u,y:null!==d&&void 0!==d?d:null,value:c,payload:e}}var h=Cu(c)?null:r.scale.map(c),m=If({axis:n,ticks:i,bandSize:s,entry:e,index:l});return null==h||null==m?null:{x:h,y:m,value:c,payload:e}}).filter(Boolean)}({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:a,dataKey:h,bandSize:o,displayedData:d})}});function qD(e){var{legendPayload:t}=e,n=sf(),a=eg(),i=(0,r.useRef)(null);return(0,r.useLayoutEffect)(()=>{a||(null===i.current?n(p_(t)):i.current!==t&&n(f_({prev:i.current,next:t})),i.current=t)},[n,a,t]),(0,r.useLayoutEffect)(()=>()=>{i.current&&(n(g_(i.current)),i.current=null)},[n]),null}var BD=null!==(DD=n["useId".toString()])&&void 0!==DD?DD:()=>{var[e]=r.useState(()=>xu("uid-"));return e};var FD=(0,r.createContext)(void 0),UD=e=>{var{id:t,type:n,children:a}=e,i=function(e,t){var r=BD();return t||(e?"".concat(e,"-").concat(r):r)}("recharts-".concat(n),t);return r.createElement(FD.Provider,{value:i},a(i))};var HD=e=>{var t=sf(),n=(0,r.useRef)(null);return(0,r.useLayoutEffect)(()=>{null===n.current?t(GN(e)):n.current!==e&&t(QN({prev:n.current,next:e})),n.current=e},[t,e]),(0,r.useLayoutEffect)(()=>()=>{n.current&&(t(YN(n.current)),n.current=null)},[t]),null},WD=(0,r.memo)(HD);function KD(e){var t=xA(e);if(null!=t){var{r:r,strokeWidth:n}=t,a=Number(r),i=Number(n);return(Number.isNaN(a)||a<0)&&(a=3),(Number.isNaN(i)||i<0)&&(i=2),{r:a,strokeWidth:i}}return{r:3,strokeWidth:2}}var VD,GD,QD,YD,$D,JD=__webpack_require__(9397),XD=__webpack_require__.n(JD);function ZD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eL(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ZD(Object(r),!0).forEach(function(t){tL(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZD(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function tL(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rL(){return rL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rL.apply(null,arguments)}function nL(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var aL=(e,t,r,n,a)=>{var i,o=r-n;return i=mu(VD||(VD=nL(["M ",",",""])),e,t),i+=mu(GD||(GD=nL(["L ",",",""])),e+r,t),i+=mu(QD||(QD=nL(["L ",",",""])),e+r-o/2,t+a),i+=mu(YD||(YD=nL(["L ",",",""])),e+r-o/2-n,t+a),i+=mu($D||($D=nL(["L ",","," Z"])),e,t)},iL={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},oL=e=>{var t=pT(e,iL),{x:n,y:a,upperWidth:i,lowerWidth:o,height:s,className:l}=t,{animationEasing:c,animationDuration:u,animationBegin:d,isUpdateAnimationActive:h}=t,m=(0,r.useRef)(null),[p,f]=(0,r.useState)(-1),g=(0,r.useRef)(i),v=(0,r.useRef)(o),y=(0,r.useRef)(s),b=(0,r.useRef)(n),x=(0,r.useRef)(a),w=YI(e,"trapezoid-");if((0,r.useEffect)(()=>{if(m.current&&m.current.getTotalLength)try{var e=m.current.getTotalLength();e&&f(e)}catch(t){}},[]),n!==+n||a!==+a||i!==+i||o!==+o||s!==+s||0===i&&0===o||0===s)return null;var k=su("recharts-trapezoid",l);if(!h)return r.createElement("g",null,r.createElement("path",rL({},wA(t),{className:k,d:aL(n,a,i,o,s)})));var j=g.current,S=v.current,C=y.current,N=b.current,_=x.current,A="0px ".concat(-1===p?1:p,"px"),T="".concat(p,"px 0px"),E=SI(["strokeDasharray"],u,c);return r.createElement(QI,{animationId:w,key:w,canBegin:p>0,duration:u,easing:c,isActive:h,begin:d},e=>{var l=ju(j,i,e),c=ju(S,o,e),u=ju(C,s,e),d=ju(N,n,e),h=ju(_,a,e);m.current&&(g.current=l,v.current=c,y.current=u,b.current=d,x.current=h);var p=e>0?{transition:E,strokeDasharray:T}:{strokeDasharray:A};return r.createElement("path",rL({},wA(t),{className:k,d:aL(d,h,l,c,u),ref:m,style:eL(eL({},p),t.style)}))})},sL=["option","shapeType","activeClassName"];function lL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function cL(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lL(Object(r),!0).forEach(function(t){uL(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lL(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function uL(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dL(e){var{shapeType:t,elementProps:n}=e;switch(t){case"rectangle":return r.createElement(jM,n);case"trapezoid":return r.createElement(oL,n);case"sector":return r.createElement(EM,n);case"symbols":if(function(e){return"symbols"===e}(t))return r.createElement(CR,n);break;case"curve":return r.createElement(pI,n);default:return null}}function hL(e){var t,{option:n,shapeType:a,activeClassName:i="recharts-active-shape"}=e,o=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,sL);if((0,r.isValidElement)(n))t=(0,r.cloneElement)(n,cL(cL({},o),function(e){return(0,r.isValidElement)(e)?e.props:e}(n)));else if("function"===typeof n)t=n(o,o.index);else if(XD()(n)&&"boolean"!==typeof n){var s=function(e,t){return cL(cL({},t),e)}(n,o);t=r.createElement(dL,{shapeType:a,elementProps:s})}else{var l=o;t=r.createElement(dL,{shapeType:a,elementProps:l})}return o.isActive?r.createElement(qT,{className:i},t):t}var mL=["id"],pL=["type","layout","connectNulls","needClip","shape"],fL=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function gL(){return gL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gL.apply(null,arguments)}function vL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function yL(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vL(Object(r),!0).forEach(function(t){bL(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vL(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function bL(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xL(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var wL=e=>{var{dataKey:t,name:r,stroke:n,legendType:a,hide:i}=e;return[{inactive:i,dataKey:t,type:a,color:n,value:Bf(r,t),payload:e}]},kL=r.memo(e=>{var{dataKey:t,data:n,stroke:a,strokeWidth:i,fill:o,name:s,hide:l,unit:c,tooltipType:u,id:d}=e,h={dataDefinedOnItem:n,getPosition:Au,settings:{stroke:a,strokeWidth:i,fill:o,dataKey:t,nameKey:void 0,name:Bf(s,t),hide:l,type:u,color:a,unit:c,graphicalItemId:d}};return r.createElement(jD,{tooltipEntrySettings:h})}),jL=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function SL(e,t){for(var r=e.length%2!==0?[...e,0]:e,n=[],a=0;a<t;++a)n=[...n,...r];return n}function CL(e){var{clipPathId:t,points:n,props:a}=e,{dot:i,dataKey:o,needClip:s}=a,{id:l}=a,c=bA(xL(a,mL));return r.createElement(vD,{points:n,dot:i,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:o,baseProps:c,needClip:s,clipPathId:t})}function NL(e){var{showLabels:t,children:n,points:a}=e,i=(0,r.useMemo)(()=>null===a||void 0===a?void 0:a.map(e=>{var t,r,n={x:null!==(t=e.x)&&void 0!==t?t:0,y:null!==(r=e.y)&&void 0!==r?r:0,width:0,lowerWidth:0,upperWidth:0,height:0};return yL(yL({},n),{},{value:e.value,payload:e.payload,viewBox:n,parentViewBox:void 0,fill:void 0})}),[a]);return r.createElement(ZR,{value:t?i:void 0},n)}function _L(e){var{clipPathId:t,pathRef:n,points:a,strokeDasharray:i,props:o}=e,{type:s,layout:l,connectNulls:c,needClip:u,shape:d}=o,h=yL(yL({},wA(xL(o,pL))),{},{fill:"none",className:"recharts-line-curve",clipPath:u?"url(#clipPath-".concat(t,")"):void 0,points:a,type:s,layout:l,connectNulls:c,strokeDasharray:null!==i&&void 0!==i?i:o.strokeDasharray});return r.createElement(r.Fragment,null,(null===a||void 0===a?void 0:a.length)>1&&r.createElement(hL,gL({shapeType:"curve",option:d},h,{pathRef:n})),r.createElement(CL,{points:a,clipPathId:t,props:o}))}function AL(e){var{clipPathId:t,props:n,pathRef:a,previousPointsRef:i,longestAnimatedLengthRef:o}=e,{points:s,strokeDasharray:l,isAnimationActive:c,animationBegin:u,animationDuration:d,animationEasing:h,animateNewValues:m,width:p,height:f,onAnimationEnd:g,onAnimationStart:v}=n,y=i.current,b=YI(s,"recharts-line-"),x=(0,r.useRef)(b),[w,k]=(0,r.useState)(!1),j=!w,S=(0,r.useCallback)(()=>{"function"===typeof g&&g(),k(!1)},[g]),C=(0,r.useCallback)(()=>{"function"===typeof v&&v(),k(!0)},[v]),N=function(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch(t){return 0}}(a.current),_=(0,r.useRef)(0);x.current!==b&&(_.current=o.current,x.current=b);var A=_.current;return r.createElement(NL,{points:s,showLabels:j},n.children,r.createElement(QI,{animationId:b,begin:u,duration:d,isActive:c,easing:h,onAnimationEnd:S,onAnimationStart:C,key:b},e=>{var u,d=ju(A,N+A,e),h=Math.min(d,N);if(c)if(l){var g="".concat(l).split(/[,\s]+/gim).map(e=>parseFloat(e));u=((e,t,r)=>{var n=r.reduce((e,t)=>e+t);if(!n)return jL(t,e);for(var a=Math.floor(e/n),i=e%n,o=t-e,s=[],l=0,c=0;l<r.length;c+=null!==(u=r[l])&&void 0!==u?u:0,++l){var u,d=r[l];if(null!=d&&c+d>i){s=[...r.slice(0,l),i-c];break}}var h=s.length%2===0?[0,o]:[o];return[...SL(r,a),...s,...h].map(e=>"".concat(e,"px")).join(", ")})(h,N,g)}else u=jL(N,h);else u=null==l?void 0:String(l);if(e>0&&N>0&&(i.current=s,o.current=Math.max(o.current,h)),y){var v=y.length/s.length,b=1===e?s:s.map((t,r)=>{var n=Math.floor(r*v);if(y[n]){var a=y[n];return yL(yL({},t),{},{x:ju(a.x,t.x,e),y:ju(a.y,t.y,e)})}return yL(yL({},t),{},m?{x:ju(2*p,t.x,e),y:ju(f/2,t.y,e)}:{x:t.x,y:t.y})});return i.current=b,r.createElement(_L,{props:n,points:b,clipPathId:t,pathRef:a,strokeDasharray:u})}return r.createElement(_L,{props:n,points:s,clipPathId:t,pathRef:a,strokeDasharray:u})}),r.createElement(rD,{label:n.label}))}function TL(e){var{clipPathId:t,props:n}=e,a=(0,r.useRef)(null),i=(0,r.useRef)(0),o=(0,r.useRef)(null);return r.createElement(AL,{props:n,clipPathId:t,previousPointsRef:a,longestAnimatedLengthRef:i,pathRef:o})}var EL=(e,t)=>{var r,n;return{x:null!==(r=e.x)&&void 0!==r?r:void 0,y:null!==(n=e.y)&&void 0!==n?n:void 0,value:e.value,errorVal:Nf(e.payload,t)}};class OL extends r.Component{render(){var{hide:e,dot:t,points:n,className:a,xAxisId:i,yAxisId:o,top:s,left:l,width:c,height:u,id:d,needClip:h,zIndex:m}=this.props;if(e)return null;var p=su("recharts-line",a),f=d,{r:g,strokeWidth:v}=KD(t),y=uD(t),b=2*g+v,x=h?"url(#clipPath-".concat(y?"":"dots-").concat(f,")"):void 0;return r.createElement(pE,{zIndex:m},r.createElement(qT,{className:p},h&&r.createElement("defs",null,r.createElement(TD,{clipPathId:f,xAxisId:i,yAxisId:o}),!y&&r.createElement("clipPath",{id:"clipPath-dots-".concat(f)},r.createElement("rect",{x:l-b/2,y:s-b/2,width:c+b,height:u+b}))),r.createElement(_D,{xAxisId:i,yAxisId:o,data:n,dataPointFormatter:EL,errorBarOffset:0},r.createElement(TL,{props:this.props,clipPathId:f}))),r.createElement(kD,{activeDot:this.props.activeDot,points:n,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:x}))}}var PL={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:rk.line,type:"linear"};function IL(e){var t=pT(e,PL),{activeDot:n,animateNewValues:a,animationBegin:i,animationDuration:o,animationEasing:s,connectNulls:l,dot:c,hide:u,isAnimationActive:d,label:h,legendType:m,xAxisId:p,yAxisId:f,id:g}=t,v=xL(t,fL),{needClip:y}=AD(p,f),b=sT(),x=ug(),w=eg(),k=df(e=>zD(e,p,f,w,g));if("horizontal"!==x&&"vertical"!==x||null==k||null==b)return null;var{height:j,width:S,x:C,y:N}=b;return r.createElement(OL,gL({},v,{id:g,connectNulls:l,dot:c,activeDot:n,animateNewValues:a,animationBegin:i,animationDuration:o,animationEasing:s,isAnimationActive:d,hide:u,label:h,legendType:m,xAxisId:p,yAxisId:f,points:k,layout:x,height:j,width:S,left:C,top:N,needClip:y}))}function ML(e){var t=pT(e,PL),n=eg();return r.createElement(UD,{id:t.id,type:"line"},e=>r.createElement(r.Fragment,null,r.createElement(qD,{legendPayload:wL(t)}),r.createElement(kL,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:e}),r.createElement(WD,{type:"line",id:e,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:n}),r.createElement(IL,gL({},t,{id:e}))))}var RL=r.memo(ML,cA);RL.displayName="Line";var DL=["axis","item"],LL=(0,r.forwardRef)((e,t)=>r.createElement(vT,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:DL,tooltipPayloadSearcher:gm,categoricalChartProps:e,ref:t})),zL=e=>null;zL.displayName="Cell";var qL="Invariant failed";function BL(){return BL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},BL.apply(null,arguments)}function FL(e){return r.createElement(hL,BL({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var UL=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(r,n)=>{if(vu(e))return e;var a=vu(r)||Cu(r);return a?e(r,n):(a||function(e){if(!e)throw new Error(qL)}(!1,"minPointSize callback function received a value with type of ".concat(typeof r,". Currently only numbers or null/undefined are supported.")),t)}},HL=(e,t,r)=>{var n=sf();return(a,i)=>o=>{null===e||void 0===e||e(a,i,o),n(Ap({activeIndex:String(i),activeDataKey:t,activeCoordinate:a.tooltipPosition,activeGraphicalItemId:r}))}},WL=e=>{var t=sf();return(r,n)=>a=>{null===e||void 0===e||e(r,n,a),t(Tp())}},KL=(e,t,r)=>{var n=sf();return(a,i)=>o=>{null===e||void 0===e||e(a,i,o),n(Op({activeIndex:String(i),activeDataKey:t,activeCoordinate:a.tooltipPosition,activeGraphicalItemId:r}))}},VL=(e,t,r)=>{var n=null!==r&&void 0!==r?r:e;if(!Cu(n))return wu(n,t,0)};function GL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function QL(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?GL(Object(r),!0).forEach(function(t){YL(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GL(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function YL(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $L(e,t){var r,n;return null!==(r=null===(n=e.graphicalItems.cartesianItems.find(e=>e.id===t))||void 0===n?void 0:n.xAxisId)&&void 0!==r?r:0}function JL(e,t){var r,n;return null!==(r=null===(n=e.graphicalItems.cartesianItems.find(e=>e.id===t))||void 0===n?void 0:n.yAxisId)&&void 0!==r?r:0}var XL=tf([cj,(e,t)=>t],(e,t)=>e.filter(e=>"bar"===e.type).find(e=>e.id===t)),ZL=tf([XL],e=>null===e||void 0===e?void 0:e.maxBarSize),ez=tf([cg,cj,$L,JL,(e,t,r)=>r],(e,t,r,n,a)=>t.filter(t=>"horizontal"===e?t.xAxisId===r:t.yAxisId===n).filter(e=>e.isPanorama===a).filter(e=>!1===e.hide).filter(e=>"bar"===e.type)),tz=tf([ez,e=>e.rootProps.barSize,(e,t)=>{var r=cg(e),n=$L(e,t),a=JL(e,t);if(null!=n&&null!=a)return"horizontal"===r?DS(e,"xAxis",n):DS(e,"yAxis",a)}],(e,t,r)=>{var n=e.filter(Bk),a=e.filter(e=>null==e.stackId),i=n.reduce((e,t)=>{var r=e[t.stackId];return null==r&&(r=[]),r.push(t),e[t.stackId]=r,e},{}),o=Object.entries(i).map(e=>{var n,[a,i]=e;return{stackId:a,dataKeys:i.map(e=>e.dataKey),barSize:VL(t,r,null===(n=i[0])||void 0===n?void 0:n.barSize)}});return[...o,...a.map(e=>({stackId:void 0,dataKeys:[e.dataKey].filter(e=>null!=e),barSize:VL(t,r,e.barSize)}))]}),rz=(e,t,r)=>{var n,a,i=cg(e),o=$L(e,t),s=JL(e,t);if(null!=o&&null!=s)return"horizontal"===i?(n=WS(e,"xAxis",o,r),a=HS(e,"xAxis",o,r)):(n=WS(e,"yAxis",s,r),a=HS(e,"yAxis",s,r)),zf(n,a)},nz=tf([tz,qw,e=>e.rootProps.barGap,Bw,(e,t,r)=>{var n,a,i=XL(e,t);if(null==i)return 0;var o=$L(e,t),s=JL(e,t);if(null==o||null==s)return 0;var l,c,u=cg(e),d=qw(e),{maxBarSize:h}=i,m=Cu(h)?d:h;return"horizontal"===u?(l=WS(e,"xAxis",o,r),c=HS(e,"xAxis",o,r)):(l=WS(e,"yAxis",s,r),c=HS(e,"yAxis",s,r)),null!==(n=null!==(a=zf(l,c,!0))&&void 0!==a?a:m)&&void 0!==n?n:0},rz,ZL],(e,t,r,n,a,i,o)=>{var s=Cu(o)?t:o,l=function(e,t,r,n,a){var i,o=n.length;if(!(o<1)){var s,l=wu(e,r,0,!0),c=[];if(Lu(null===(i=n[0])||void 0===i?void 0:i.barSize)){var u=!1,d=r/o,h=n.reduce((e,t)=>e+(t.barSize||0),0);(h+=(o-1)*l)>=r&&(h-=(o-1)*l,l=0),h>=r&&d>0&&(u=!0,h=o*(d*=.9));var m={offset:((r-h)/2|0)-l,size:0};s=n.reduce((e,t)=>{var r,n={stackId:t.stackId,dataKeys:t.dataKeys,position:{offset:m.offset+m.size+l,size:u?d:null!==(r=t.barSize)&&void 0!==r?r:0}},a=[...e,n];return m=n.position,a},c)}else{var p=wu(t,r,0,!0);r-2*p-(o-1)*l<=0&&(l=0);var f=(r-2*p-(o-1)*l)/o;f>1&&(f>>=0);var g=Lu(a)?Math.min(f,a):f;s=n.reduce((e,t,r)=>[...e,{stackId:t.stackId,dataKeys:t.dataKeys,position:{offset:p+(f+l)*r+(f-g)/2,size:g}}],c)}return s}}(r,n,a!==i?a:i,e,s);return a!==i&&null!=l&&(l=l.map(e=>QL(QL({},e),{},{position:QL(QL({},e.position),{},{offset:e.position.offset-a/2})}))),l}),az=tf([nz,XL],(e,t)=>{if(null!=e&&null!=t){var r=e.find(e=>e.stackId===t.stackId&&null!=t.dataKey&&e.dataKeys.includes(t.dataKey));if(null!=r)return r.position}}),iz=tf([(e,t,r)=>{var n=cg(e),a=$L(e,t),i=JL(e,t);if(null!=a&&null!=i)return"horizontal"===n?Ej(e,"yAxis",i,r):Ej(e,"xAxis",a,r)},XL],(e,t)=>{var r=zk(t);if(e&&null!=r&&null!=t){var{stackId:n}=t;if(null!=n){var a=e[n];if(a){var{stackedData:i}=a;if(i)return i.find(e=>e.key===r)}}}}),oz=tf([$f,Xf,(e,t,r)=>{var n=$L(e,t);if(null!=n)return WS(e,"xAxis",n,r)},(e,t,r)=>{var n=JL(e,t);if(null!=n)return WS(e,"yAxis",n,r)},(e,t,r)=>{var n=$L(e,t);if(null!=n)return HS(e,"xAxis",n,r)},(e,t,r)=>{var n=JL(e,t);if(null!=n)return HS(e,"yAxis",n,r)},az,cg,_w,rz,iz,XL,(e,t,r,n)=>n],(e,t,r,n,a,i,o,s,l,c,u,d,h)=>{var{chartData:m,dataStartIndex:p,dataEndIndex:f}=l;if(null!=d&&null!=o&&null!=t&&("horizontal"===s||"vertical"===s)&&null!=r&&null!=n&&null!=a&&null!=i&&null!=c){var g,{data:v}=d;if(null!=(g=null!=v&&v.length>0?v:null===m||void 0===m?void 0:m.slice(p,f+1)))return function(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:a,bandSize:i,xAxis:o,yAxis:s,xAxisTicks:l,yAxisTicks:c,stackedData:u,displayedData:d,offset:h,cells:m,parentViewBox:p,dataStartIndex:f}=e,g="horizontal"===t?s:o,v=u?g.scale.domain():null,y=(e=>{var{numericAxis:t}=e,r=t.scale.domain();if("number"===t.type){var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return n<=0&&a>=0?0:a<0?a:n}return r[0]})({numericAxis:g}),b=g.scale.map(y);return d.map((e,d)=>{var g,x,w,k,j,S;if(u){var C=u[d+f];if(null==C)return null;g=((e,t)=>{if(!t||2!==t.length||!vu(t[0])||!vu(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!vu(e[0])||e[0]<r)&&(a[0]=r),(!vu(e[1])||e[1]>n)&&(a[1]=n),a[0]>n&&(a[0]=n),a[1]<r&&(a[1]=r),a})(C,v)}else g=Nf(e,r),Array.isArray(g)||(g=[y,g]);var N=UL(n,Ez)(g[1],d);if("horizontal"===t){var _,A=s.scale.map(g[0]),T=s.scale.map(g[1]);if(null==A||null==T)return null;x=Mf({axis:o,ticks:l,bandSize:i,offset:a.offset,entry:e,index:d}),w=null!==(_=null!==T&&void 0!==T?T:A)&&void 0!==_?_:void 0,k=a.size;var E=A-T;if(j=fu(E)?0:E,S={x:x,y:h.top,width:k,height:h.height},Math.abs(N)>0&&Math.abs(j)<Math.abs(N)){var O=pu(j||N)*(Math.abs(N)-Math.abs(j));w-=O,j+=O}}else{var P=o.scale.map(g[0]),I=o.scale.map(g[1]);if(null==P||null==I)return null;if(x=P,w=Mf({axis:s,ticks:c,bandSize:i,offset:a.offset,entry:e,index:d}),k=I-P,j=a.size,S={x:h.left,y:w,width:h.width,height:j},Math.abs(N)>0&&Math.abs(k)<Math.abs(N))k+=pu(k||N)*(Math.abs(N)-Math.abs(k))}return null==x||null==w||null==k||null==j?null:yz(yz({},e),{},{stackedBarStart:b,x:x,y:w,width:k,height:j,value:u?g:g[1],payload:e,background:S,tooltipPosition:{x:x+k/2,y:w+j/2},parentViewBox:p},m&&m[d]&&m[d].props)}).filter(Boolean)}({layout:s,barSettings:d,pos:o,parentViewBox:t,bandSize:c,xAxis:r,yAxis:n,xAxisTicks:a,yAxisTicks:i,stackedData:u,displayedData:g,offset:e,cells:h,dataStartIndex:p})}});var sz=["index"];function lz(){return lz=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lz.apply(null,arguments)}var cz=(0,r.createContext)(void 0),uz=(e,t)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(t),dz=e=>{var{index:t}=e,n=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,sz),a=(e=>{var t=(0,r.useContext)(cz);if(null!=t){var{stackId:n}=t;return"url(#".concat(uz(n,e),")")}})(t);return r.createElement(qT,lz({className:"recharts-bar-stack-layer",clipPath:a},n))},hz=["onMouseEnter","onMouseLeave","onClick"],mz=["value","background","tooltipPosition"],pz=["id"],fz=["onMouseEnter","onClick","onMouseLeave"];function gz(){return gz=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gz.apply(null,arguments)}function vz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function yz(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vz(Object(r),!0).forEach(function(t){bz(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vz(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function bz(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xz(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var wz=e=>{var{dataKey:t,name:r,fill:n,legendType:a,hide:i}=e;return[{inactive:i,dataKey:t,type:a,color:n,value:Bf(r,t),payload:e}]},kz=r.memo(e=>{var{dataKey:t,stroke:n,strokeWidth:a,fill:i,name:o,hide:s,unit:l,tooltipType:c,id:u}=e,d={dataDefinedOnItem:void 0,getPosition:Au,settings:{stroke:n,strokeWidth:a,fill:i,dataKey:t,nameKey:void 0,name:Bf(o,t),hide:s,type:c,color:i,unit:l,graphicalItemId:u}};return r.createElement(jD,{tooltipEntrySettings:d})});function jz(e){var t=df($C),{data:n,dataKey:a,background:i,allOtherBarProps:o}=e,{onMouseEnter:s,onMouseLeave:l,onClick:c}=o,u=xz(o,hz),d=HL(s,a,o.id),h=WL(l),m=KL(c,a,o.id);if(!i||null==n)return null;var p,f,g=xA(i);return r.createElement(pE,{zIndex:(p=i,f=rk.barBackground,p&&"object"===typeof p&&"zIndex"in p&&"number"===typeof p.zIndex&&Lu(p.zIndex)?p.zIndex:f)},n.map((e,n)=>{var{value:o,background:s,tooltipPosition:l}=e,c=xz(e,mz);if(!s)return null;var p=d(e,n),f=h(e,n),v=m(e,n),y=yz(yz(yz(yz(yz({option:i,isActive:String(n)===t},c),{},{fill:"#eee"},s),g),qE(u,e,n)),{},{onMouseEnter:p,onMouseLeave:f,onClick:v,dataKey:a,index:n,className:"recharts-bar-background-rectangle"});return r.createElement(FL,gz({key:"background-bar-".concat(n)},y))}))}function Sz(e){var{showLabels:t,children:n,rects:a}=e,i=null===a||void 0===a?void 0:a.map(e=>{var t={x:e.x,y:e.y,width:e.width,lowerWidth:e.width,upperWidth:e.width,height:e.height};return yz(yz({},t),{},{value:e.value,payload:e.payload,parentViewBox:e.parentViewBox,viewBox:t,fill:e.fill})});return r.createElement(ZR,{value:t?i:void 0},n)}function Cz(e){var{shape:t,activeBar:n,baseProps:a,entry:i,index:o,dataKey:s}=e,l=df($C),c=df(XC),u=n&&String(o)===l&&(null==c||s===c),d=u?n:t;return u?r.createElement(pE,{zIndex:rk.activeBar},r.createElement(dz,{index:o},r.createElement(FL,gz({},a,{name:String(a.name)},i,{isActive:u,option:d,index:o,dataKey:s})))):r.createElement(FL,gz({},a,{name:String(a.name)},i,{isActive:u,option:d,index:o,dataKey:s}))}function Nz(e){var{shape:t,baseProps:n,entry:a,index:i,dataKey:o}=e;return r.createElement(FL,gz({},n,{name:String(n.name)},a,{isActive:!1,option:t,index:i,dataKey:o}))}function _z(e){var t,{data:n,props:a}=e,i=null!==(t=bA(a))&&void 0!==t?t:{},{id:o}=i,s=xz(i,pz),{shape:l,dataKey:c,activeBar:u}=a,{onMouseEnter:d,onClick:h,onMouseLeave:m}=a,p=xz(a,fz),f=HL(d,c,o),g=WL(m),v=KL(h,c,o);return n?r.createElement(r.Fragment,null,n.map((e,t)=>r.createElement(dz,gz({index:t,key:"rectangle-".concat(null===e||void 0===e?void 0:e.x,"-").concat(null===e||void 0===e?void 0:e.y,"-").concat(null===e||void 0===e?void 0:e.value,"-").concat(t),className:"recharts-bar-rectangle"},qE(p,e,t),{onMouseEnter:f(e,t),onMouseLeave:g(e,t),onClick:v(e,t)}),u?r.createElement(Cz,{shape:l,activeBar:u,baseProps:s,entry:e,index:t,dataKey:c}):r.createElement(Nz,{shape:l,baseProps:s,entry:e,index:t,dataKey:c})))):null}function Az(e){var{props:t,previousRectanglesRef:n}=e,{data:a,layout:i,isAnimationActive:o,animationBegin:s,animationDuration:l,animationEasing:c,onAnimationEnd:u,onAnimationStart:d}=t,h=n.current,m=YI(t,"recharts-bar-"),[p,f]=(0,r.useState)(!1),g=!p,v=(0,r.useCallback)(()=>{"function"===typeof u&&u(),f(!1)},[u]),y=(0,r.useCallback)(()=>{"function"===typeof d&&d(),f(!0)},[d]);return r.createElement(Sz,{showLabels:g,rects:a},r.createElement(QI,{animationId:m,begin:s,duration:l,isActive:o,easing:c,onAnimationEnd:v,onAnimationStart:y,key:m},e=>{var o=1===e?a:null===a||void 0===a?void 0:a.map((t,r)=>{var n=h&&h[r];if(n)return yz(yz({},t),{},{x:ju(n.x,t.x,e),y:ju(n.y,t.y,e),width:ju(n.width,t.width,e),height:ju(n.height,t.height,e)});if("horizontal"===i){var a=ju(0,t.height,e),o=ju(t.stackedBarStart,t.y,e);return yz(yz({},t),{},{y:o,height:a})}var s=ju(0,t.width,e),l=ju(t.stackedBarStart,t.x,e);return yz(yz({},t),{},{width:s,x:l})});return e>0&&(n.current=null!==o&&void 0!==o?o:null),null==o?null:r.createElement(qT,null,r.createElement(_z,{props:t,data:o}))}),r.createElement(rD,{label:t.label}),t.children)}function Tz(e){var t=(0,r.useRef)(null);return r.createElement(Az,{previousRectanglesRef:t,props:e})}var Ez=0,Oz=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Nf(e,t)}};class Pz extends r.PureComponent{render(){var{hide:e,data:t,dataKey:n,className:a,xAxisId:i,yAxisId:o,needClip:s,background:l,id:c}=this.props;if(e||null==t)return null;var u=su("recharts-bar",a),d=c;return r.createElement(qT,{className:u,id:c},s&&r.createElement("defs",null,r.createElement(TD,{clipPathId:d,xAxisId:i,yAxisId:o})),r.createElement(qT,{className:"recharts-bar-rectangles",clipPath:s?"url(#clipPath-".concat(d,")"):void 0},r.createElement(jz,{data:t,dataKey:n,background:l,allOtherBarProps:this.props}),r.createElement(Tz,this.props)))}}var Iz={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:Ez,xAxisId:0,yAxisId:0,zIndex:rk.bar};function Mz(e){var t,{xAxisId:n,yAxisId:a,hide:i,legendType:o,minPointSize:s,activeBar:l,animationBegin:c,animationDuration:u,animationEasing:d,isAnimationActive:h}=e,{needClip:m}=AD(n,a),p=ug(),f=eg(),g=function(e,t){var r=[],n=[];return n=Array.isArray(t)?t.map(e=>oD(e)):[oD(t)],cD(e).forEach(e=>{var t=du()(e,"type.displayName")||du()(e,"type.name");t&&-1!==n.indexOf(t)&&r.push(e)}),r}(e.children,zL),v=df(t=>oz(t,e.id,f,g));if("vertical"!==p&&"horizontal"!==p)return null;var y=null===v||void 0===v?void 0:v[0];return t=null==y||null==y.height||null==y.width?0:"vertical"===p?y.height/2:y.width/2,r.createElement(_D,{xAxisId:n,yAxisId:a,data:v,dataPointFormatter:Oz,errorBarOffset:t},r.createElement(Pz,gz({},e,{layout:p,needClip:m,data:v,xAxisId:n,yAxisId:a,hide:i,legendType:o,minPointSize:s,activeBar:l,animationBegin:c,animationDuration:u,animationEasing:d,isAnimationActive:h})))}function Rz(e){var t=pT(e,Iz),n=(e=>{var t=(0,r.useContext)(cz);return null!=t?t.stackId:null!=e?Pf(e):void 0})(t.stackId),a=eg();return r.createElement(UD,{id:t.id,type:"bar"},e=>r.createElement(r.Fragment,null,r.createElement(qD,{legendPayload:wz(t)}),r.createElement(kz,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:e}),r.createElement(WD,{type:"bar",id:e,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:n,hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:a}),r.createElement(pE,{zIndex:t.zIndex},r.createElement(Mz,gz({},t,{id:e})))))}var Dz=r.memo(Rz,cA);Dz.displayName="Bar";var Lz=["axis"],zz=(0,r.forwardRef)((e,t)=>r.createElement(vT,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Lz,tooltipPayloadSearcher:gm,categoricalChartProps:e,ref:t})),qz=(e,t,r)=>WS(e,"xAxis",$L(e,t),r),Bz=(e,t,r)=>HS(e,"xAxis",$L(e,t),r),Fz=(e,t,r)=>WS(e,"yAxis",JL(e,t),r),Uz=(e,t,r)=>HS(e,"yAxis",JL(e,t),r),Hz=tf([cg,qz,Fz,Bz,Uz],(e,t,r,n,a)=>_f(e,"xAxis")?zf(t,n,!1):zf(r,a,!1)),Wz=tf([cj,(e,t)=>t],(e,t)=>e.filter(e=>"area"===e.type).find(e=>e.id===t)),Kz=e=>{var t=cg(e);return _f(t,"xAxis")?"yAxis":"xAxis"},Vz=tf([Wz,(e,t,r)=>Ej(e,Kz(e),((e,t)=>"yAxis"===Kz(e)?JL(e,t):$L(e,t))(e,t),r)],(e,t)=>{var r;if(null!=e&&null!=t){var{stackId:n}=e,a=zk(e);if(null!=n&&null!=a){var i=null===(r=t[n])||void 0===r?void 0:r.stackedData,o=null===i||void 0===i?void 0:i.find(e=>e.key===a);if(null!=o)return o.map(e=>[e[0],e[1]])}}}),Gz=tf([cg,qz,Fz,Bz,Uz,Vz,_w,Hz,Wz,e=>e.rootProps.baseValue],(e,t,r,n,a,i,o,s,l,c)=>{var{chartData:u,dataStartIndex:d,dataEndIndex:h}=o;if(null!=l&&("horizontal"===e||"vertical"===e)&&null!=t&&null!=r&&null!=n&&null!=a&&0!==n.length&&0!==a.length&&null!=s){var m,{data:p}=l;if(null!=(m=p&&p.length>0?p:null===u||void 0===u?void 0:u.slice(d,h+1)))return function(e){var t,{areaSettings:{connectNulls:r,baseValue:n,dataKey:a},stackedData:i,layout:o,chartBaseValue:s,xAxis:l,yAxis:c,displayedData:u,dataStartIndex:d,xAxisTicks:h,yAxisTicks:m,bandSize:p}=e,f=i&&i.length,g=fq(o,s,n,l,c),v="horizontal"===o,y=!1,b=u.map((e,t)=>{var n,o,s,u;if(f)u=i[d+t];else{var b=Nf(e,a);Array.isArray(b)?(u=b,y=!0):u=[g,b]}var x,w=null!==(n=null===(o=u)||void 0===o?void 0:o[1])&&void 0!==n?n:null,k=null==w||f&&!r&&null==Nf(e,a);return v?{x:If({axis:l,ticks:h,bandSize:p,entry:e,index:t}),y:k?null:null!==(x=c.scale.map(w))&&void 0!==x?x:null,value:u,payload:e}:{x:k?null:null!==(s=l.scale.map(w))&&void 0!==s?s:null,y:If({axis:c,ticks:m,bandSize:p,entry:e,index:t}),value:u,payload:e}});t=f||y?b.map(e=>{var t,r,n=Array.isArray(e.value)?e.value[0]:null;return v?{x:e.x,y:null!=n&&null!=e.y&&null!==(r=c.scale.map(n))&&void 0!==r?r:null,payload:e.payload}:{x:null!=n&&null!==(t=l.scale.map(n))&&void 0!==t?t:null,y:e.y,payload:e.payload}}):v?c.scale.map(g):l.scale.map(g);return{points:b,baseLine:null!==t&&void 0!==t?t:0,isRange:y}}({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:a,dataStartIndex:d,areaSettings:l,stackedData:i,displayedData:m,chartBaseValue:c,bandSize:s})}}),Qz=["id"],Yz=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function $z(){return $z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$z.apply(null,arguments)}function Jz(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Xz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Zz(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xz(Object(r),!0).forEach(function(t){eq(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xz(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function eq(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tq(e,t){return e&&"none"!==e?e:t}var rq=e=>{var{dataKey:t,name:r,stroke:n,fill:a,legendType:i,hide:o}=e;return[{inactive:o,dataKey:t,type:i,color:tq(n,a),value:Bf(r,t),payload:e}]},nq=r.memo(e=>{var{dataKey:t,data:n,stroke:a,strokeWidth:i,fill:o,name:s,hide:l,unit:c,tooltipType:u,id:d}=e,h={dataDefinedOnItem:n,getPosition:Au,settings:{stroke:a,strokeWidth:i,fill:o,dataKey:t,nameKey:void 0,name:Bf(s,t),hide:l,type:u,color:tq(a,o),unit:c,graphicalItemId:d}};return r.createElement(jD,{tooltipEntrySettings:h})});function aq(e){var{clipPathId:t,points:n,props:a}=e,{needClip:i,dot:o,dataKey:s}=a,l=bA(a);return r.createElement(vD,{points:n,dot:o,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:s,baseProps:l,needClip:i,clipPathId:t})}function iq(e){var{showLabels:t,children:n,points:a}=e,i=a.map(e=>{var t,r,n={x:null!==(t=e.x)&&void 0!==t?t:0,y:null!==(r=e.y)&&void 0!==r?r:0,width:0,lowerWidth:0,upperWidth:0,height:0};return Zz(Zz({},n),{},{value:e.value,payload:e.payload,parentViewBox:void 0,viewBox:n,fill:void 0})});return r.createElement(ZR,{value:t?i:void 0},n)}function oq(e){var{points:t,baseLine:n,needClip:a,clipPathId:i,props:o}=e,{layout:s,type:l,stroke:c,connectNulls:u,isRange:d}=o,{id:h}=o,m=Jz(o,Qz),p=bA(m),f=wA(m);return r.createElement(r.Fragment,null,(null===t||void 0===t?void 0:t.length)>1&&r.createElement(qT,{clipPath:a?"url(#clipPath-".concat(i,")"):void 0},r.createElement(pI,$z({},f,{id:h,points:t,connectNulls:u,type:l,baseLine:n,layout:s,stroke:"none",className:"recharts-area-area"})),"none"!==c&&r.createElement(pI,$z({},p,{className:"recharts-area-curve",layout:s,type:l,connectNulls:u,fill:"none",points:t})),"none"!==c&&d&&r.createElement(pI,$z({},p,{className:"recharts-area-curve",layout:s,type:l,connectNulls:u,fill:"none",points:n}))),r.createElement(aq,{points:t,props:m,clipPathId:i}))}function sq(e){var t,n,{alpha:a,baseLine:i,points:o,strokeWidth:s}=e,l=null===(t=o[0])||void 0===t?void 0:t.y,c=null===(n=o[o.length-1])||void 0===n?void 0:n.y;if(!Lu(l)||!Lu(c))return null;var u=a*Math.abs(l-c),d=Math.max(...o.map(e=>e.x||0));return vu(i)?d=Math.max(i,d):i&&Array.isArray(i)&&i.length&&(d=Math.max(...i.map(e=>e.x||0),d)),vu(d)?r.createElement("rect",{x:0,y:l<c?l:l-u,width:d+(s?parseInt("".concat(s),10):1),height:Math.floor(u)}):null}function lq(e){var t,n,{alpha:a,baseLine:i,points:o,strokeWidth:s}=e,l=null===(t=o[0])||void 0===t?void 0:t.x,c=null===(n=o[o.length-1])||void 0===n?void 0:n.x;if(!Lu(l)||!Lu(c))return null;var u=a*Math.abs(l-c),d=Math.max(...o.map(e=>e.y||0));return vu(i)?d=Math.max(i,d):i&&Array.isArray(i)&&i.length&&(d=Math.max(...i.map(e=>e.y||0),d)),vu(d)?r.createElement("rect",{x:l<c?l:l-u,y:0,width:u,height:Math.floor(d+(s?parseInt("".concat(s),10):1))}):null}function cq(e){var{alpha:t,layout:n,points:a,baseLine:i,strokeWidth:o}=e;return"vertical"===n?r.createElement(sq,{alpha:t,points:a,baseLine:i,strokeWidth:o}):r.createElement(lq,{alpha:t,points:a,baseLine:i,strokeWidth:o})}function uq(e){var{needClip:t,clipPathId:n,props:a,previousPointsRef:i,previousBaselineRef:o}=e,{points:s,baseLine:l,isAnimationActive:c,animationBegin:u,animationDuration:d,animationEasing:h,onAnimationStart:m,onAnimationEnd:p}=a,f=YI((0,r.useMemo)(()=>({points:s,baseLine:l}),[s,l]),"recharts-area-"),g=dg(),[v,y]=(0,r.useState)(!1),b=!v,x=(0,r.useCallback)(()=>{"function"===typeof p&&p(),y(!1)},[p]),w=(0,r.useCallback)(()=>{"function"===typeof m&&m(),y(!0)},[m]);if(null==g)return null;var k=i.current,j=o.current;return r.createElement(iq,{showLabels:b,points:s},a.children,r.createElement(QI,{animationId:f,begin:u,duration:d,isActive:c,easing:h,onAnimationEnd:x,onAnimationStart:w,key:f},e=>{if(k){var u,d=k.length/s.length,h=1===e?s:s.map((t,r)=>{var n=Math.floor(r*d);if(k[n]){var a=k[n];return Zz(Zz({},t),{},{x:ju(a.x,t.x,e),y:ju(a.y,t.y,e)})}return t});return u=vu(l)?ju(j,l,e):Cu(l)||fu(l)?ju(j,0,e):l.map((t,r)=>{var n=Math.floor(r*d);if(Array.isArray(j)&&j[n]){var a=j[n];return Zz(Zz({},t),{},{x:ju(a.x,t.x,e),y:ju(a.y,t.y,e)})}return t}),e>0&&(i.current=h,o.current=u),r.createElement(oq,{points:h,baseLine:u,needClip:t,clipPathId:n,props:a})}return e>0&&(i.current=s,o.current=l),r.createElement(qT,null,c&&r.createElement("defs",null,r.createElement("clipPath",{id:"animationClipPath-".concat(n)},r.createElement(cq,{alpha:e,points:s,baseLine:l,layout:g,strokeWidth:a.strokeWidth}))),r.createElement(qT,{clipPath:"url(#animationClipPath-".concat(n,")")},r.createElement(oq,{points:s,baseLine:l,needClip:t,clipPathId:n,props:a})))}),r.createElement(rD,{label:a.label}))}function dq(e){var{needClip:t,clipPathId:n,props:a}=e,i=(0,r.useRef)(null),o=(0,r.useRef)();return r.createElement(uq,{needClip:t,clipPathId:n,props:a,previousPointsRef:i,previousBaselineRef:o})}class hq extends r.PureComponent{render(){var{hide:e,dot:t,points:n,className:a,top:i,left:o,needClip:s,xAxisId:l,yAxisId:c,width:u,height:d,id:h,baseLine:m,zIndex:p}=this.props;if(e)return null;var f=su("recharts-area",a),g=h,{r:v,strokeWidth:y}=KD(t),b=uD(t),x=2*v+y,w=s?"url(#clipPath-".concat(b?"":"dots-").concat(g,")"):void 0;return r.createElement(pE,{zIndex:p},r.createElement(qT,{className:f},s&&r.createElement("defs",null,r.createElement(TD,{clipPathId:g,xAxisId:l,yAxisId:c}),!b&&r.createElement("clipPath",{id:"clipPath-dots-".concat(g)},r.createElement("rect",{x:o-x/2,y:i-x/2,width:u+x,height:d+x}))),r.createElement(dq,{needClip:s,clipPathId:g,props:this.props})),r.createElement(kD,{points:n,mainColor:tq(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:w}),this.props.isRange&&Array.isArray(m)&&r.createElement(kD,{points:m,mainColor:tq(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:w}))}}var mq={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",strokeWidth:1,type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:rk.area};function pq(e){var t,n=pT(e,mq),{activeDot:a,animationBegin:i,animationDuration:o,animationEasing:s,connectNulls:l,dot:c,fill:u,fillOpacity:d,hide:h,isAnimationActive:m,legendType:p,stroke:f,xAxisId:g,yAxisId:v}=n,y=Jz(n,Yz),b=ug(),x=cN(),{needClip:w}=AD(g,v),k=eg(),{points:j,isRange:S,baseLine:C}=null!==(t=df(t=>Gz(t,e.id,k)))&&void 0!==t?t:{},N=sT();if("horizontal"!==b&&"vertical"!==b||null==N)return null;if("AreaChart"!==x&&"ComposedChart"!==x)return null;var{height:_,width:A,x:T,y:E}=N;return j&&j.length?r.createElement(hq,$z({},y,{activeDot:a,animationBegin:i,animationDuration:o,animationEasing:s,baseLine:C,connectNulls:l,dot:c,fill:u,fillOpacity:d,height:_,hide:h,layout:b,isAnimationActive:"auto"===m?!G_:m,isRange:S,legendType:p,needClip:w,points:j,stroke:f,width:A,left:T,top:E,xAxisId:g,yAxisId:v})):null}var fq=(e,t,r,n,a)=>{var i=null!==r&&void 0!==r?r:t;if(vu(i))return i;var o="horizontal"===e?a:n,s=o.scale.domain();if("number"===o.type){var l=Math.max(s[0],s[1]),c=Math.min(s[0],s[1]);return"dataMin"===i?c:"dataMax"===i||l<0?l:Math.max(Math.min(s[0],s[1]),0)}return"dataMin"===i?s[0]:"dataMax"===i?s[1]:s[0]};function gq(e){var t=pT(e,mq),n=eg();return r.createElement(UD,{id:t.id,type:"area"},e=>r.createElement(r.Fragment,null,r.createElement(qD,{legendPayload:rq(t)}),r.createElement(nq,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:e}),r.createElement(WD,{type:"area",id:e,data:t.data,dataKey:t.dataKey,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,stackId:Pf(t.stackId),hide:t.hide,barSize:void 0,baseValue:t.baseValue,isPanorama:n,connectNulls:t.connectNulls}),r.createElement(pq,$z({},t,{id:e}))))}var vq=r.memo(gq,cA);vq.displayName="Area";const yq={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_BACKEND_URL+"/api",bq="#22c55e",xq="#f59e0b",wq="#ef4444",kq="#3b82f6",jq="#8b5cf6",Sq=["#22c55e","#f59e0b","#ef4444","#3b82f6","#8b5cf6"],Cq=e=>{var t,n,a,i;let{students:o,heatmapData:s,onStudentClick:l}=e;const[c,d]=(0,r.useState)({subject:"",dateRange:"all"}),h=(null===s||void 0===s||null===(t=s.assessments)||void 0===t?void 0:t.map((e,t)=>{var r,n;const a={name:(null===(r=e.subject)||void 0===r?void 0:r.substring(0,10))||"A".concat(t+1)};return null===(n=s.heatmap)||void 0===n||n.forEach(e=>{var r;null!==(null===(r=e.scores[t])||void 0===r?void 0:r.percentage)&&(a[e.student]=e.scores[t].percentage)}),a}))||[],m=(null===o||void 0===o?void 0:o.map(e=>{var t,r;return{name:(null===(t=e.student_name)||void 0===t?void 0:t.length)>15?e.student_name.substring(0,15)+"...":e.student_name,fullName:e.student_name,average:e.average||0,fill:(r=e.average||0,r>=70?bq:r>=50?xq:wq)}}))||[];return(0,ra.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,ra.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4","data-testid":"student-performance-title",children:"Student Performance Trends"}),(0,ra.jsx)("div",{className:"flex gap-4 mb-6",children:(0,ra.jsxs)("select",{className:"border rounded-lg px-3 py-2 text-sm",value:c.dateRange,onChange:e=>d(u(u({},c),{},{dateRange:e.target.value})),children:[(0,ra.jsx)("option",{value:"all",children:"All Time"}),(0,ra.jsx)("option",{value:"month",children:"Last Month"}),(0,ra.jsx)("option",{value:"week",children:"Last Week"})]})}),h.length>0&&(0,ra.jsxs)("div",{className:"mb-8",children:[(0,ra.jsx)("h4",{className:"text-lg font-medium text-gray-700 mb-3",children:"Performance Over Time"}),(0,ra.jsx)(Gu,{width:"100%",height:300,children:(0,ra.jsxs)(bT,{data:h,children:[(0,ra.jsx)(fO,{strokeDasharray:"3 3"}),(0,ra.jsx)(IO,{dataKey:"name"}),(0,ra.jsx)(VO,{domain:[0,100]}),(0,ra.jsx)(YM,{}),(0,ra.jsx)(WR,{}),null===(n=s.students)||void 0===n?void 0:n.slice(0,5).map((e,t)=>(0,ra.jsx)(RL,{type:"monotone",dataKey:e,stroke:Sq[t%Sq.length],strokeWidth:2,dot:{r:4}},e))]})})]}),m.length>0&&(0,ra.jsxs)("div",{className:"mb-8",children:[(0,ra.jsx)("h4",{className:"text-lg font-medium text-gray-700 mb-3",children:"Average Score by Student"}),(0,ra.jsx)(Gu,{width:"100%",height:300,children:(0,ra.jsxs)(LL,{data:m,layout:"vertical",children:[(0,ra.jsx)(fO,{strokeDasharray:"3 3"}),(0,ra.jsx)(IO,{type:"number",domain:[0,100]}),(0,ra.jsx)(VO,{type:"category",dataKey:"name",width:120}),(0,ra.jsx)(YM,{content:e=>{let{payload:t}=e;return t&&t[0]?(0,ra.jsxs)("div",{className:"bg-white p-2 border rounded shadow",children:[(0,ra.jsx)("p",{className:"font-medium",children:t[0].payload.fullName}),(0,ra.jsxs)("p",{children:["Average: ",t[0].value,"%"]})]}):null}}),(0,ra.jsx)(Dz,{dataKey:"average",fill:kq,children:m.map((e,t)=>(0,ra.jsx)(zL,{fill:e.fill},"cell-".concat(t)))})]})})]}),(null===s||void 0===s||null===(a=s.heatmap)||void 0===a?void 0:a.length)>0&&(0,ra.jsxs)("div",{className:"overflow-x-auto",children:[(0,ra.jsx)("h4",{className:"text-lg font-medium text-gray-700 mb-3",children:"Performance Heatmap"}),(0,ra.jsxs)("table",{className:"min-w-full border-collapse",children:[(0,ra.jsx)("thead",{children:(0,ra.jsxs)("tr",{children:[(0,ra.jsx)("th",{className:"border px-3 py-2 bg-gray-50 text-left sticky left-0",children:"Student"}),null===(i=s.assessments)||void 0===i?void 0:i.map((e,t)=>{var r;return(0,ra.jsx)("th",{className:"border px-3 py-2 bg-gray-50 text-center text-xs",children:(null===(r=e.subject)||void 0===r?void 0:r.substring(0,8))||"A".concat(t+1)},t)})]})}),(0,ra.jsx)("tbody",{children:s.heatmap.map((e,t)=>(0,ra.jsxs)("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>l(e.student),children:[(0,ra.jsx)("td",{className:"border px-3 py-2 font-medium sticky left-0 bg-white",children:e.student}),e.scores.map((e,t)=>(0,ra.jsx)("td",{className:"border px-3 py-2 text-center text-sm font-medium ".concat("green"===e.status?"bg-green-100 text-green-800":"amber"===e.status?"bg-amber-100 text-amber-800":"red"===e.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-400"),children:null!==e.percentage?"".concat(e.percentage,"%"):"-"},t))]},t))})]}),(0,ra.jsxs)("div",{className:"flex gap-4 mt-3 text-sm",children:[(0,ra.jsxs)("span",{className:"flex items-center gap-1",children:[(0,ra.jsx)("span",{className:"w-4 h-4 bg-green-100 border"})," \u226570%"]}),(0,ra.jsxs)("span",{className:"flex items-center gap-1",children:[(0,ra.jsx)("span",{className:"w-4 h-4 bg-amber-100 border"})," 50-69%"]}),(0,ra.jsxs)("span",{className:"flex items-center gap-1",children:[(0,ra.jsx)("span",{className:"w-4 h-4 bg-red-100 border"})," <50%"]})]})]}),0===(null===o||void 0===o?void 0:o.length)&&(0,ra.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No student data available yet. Students will appear here after completing assessments."})]})},Nq=e=>{let{assessments:t}=e;const[n,a]=(0,r.useState)(null),i=e=>(null===e||void 0===e?void 0:e.distribution)||[],o=(null===t||void 0===t?void 0:t.map(e=>{var t;return{name:(null===(t=e.subject)||void 0===t?void 0:t.substring(0,12))||"Assessment",difficulty:Math.round(100*(e.difficulty_index||0)),average:e.average_percentage||0}}))||[];return(0,ra.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,ra.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4","data-testid":"assessment-insights-title",children:"Assessment Insights"}),(null===t||void 0===t?void 0:t.length)>0?(0,ra.jsxs)(ra.Fragment,{children:[(0,ra.jsx)("div",{className:"mb-6",children:(0,ra.jsxs)("select",{className:"border rounded-lg px-4 py-2 w-full max-w-md",value:(null===n||void 0===n?void 0:n.assessment_id)||"",onChange:e=>{const r=t.find(t=>t.assessment_id===e.target.value);a(r)},children:[(0,ra.jsx)("option",{value:"",children:"Select an assessment to view details"}),t.map(e=>(0,ra.jsxs)("option",{value:e.assessment_id,children:[e.subject," - ",e.total_submissions," submissions"]},e.assessment_id))]})}),n&&(0,ra.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[(0,ra.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,ra.jsx)("p",{className:"text-sm text-blue-600",children:"Average Score"}),(0,ra.jsxs)("p",{className:"text-2xl font-bold text-blue-700",children:[n.average_percentage,"%"]})]}),(0,ra.jsxs)("div",{className:"bg-green-50 rounded-lg p-4",children:[(0,ra.jsx)("p",{className:"text-sm text-green-600",children:"Highest Score"}),(0,ra.jsxs)("p",{className:"text-2xl font-bold text-green-700",children:[n.highest_score,"/",n.max_marks]})]}),(0,ra.jsxs)("div",{className:"bg-red-50 rounded-lg p-4",children:[(0,ra.jsx)("p",{className:"text-sm text-red-600",children:"Lowest Score"}),(0,ra.jsxs)("p",{className:"text-2xl font-bold text-red-700",children:[n.lowest_score,"/",n.max_marks]})]}),(0,ra.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4",children:[(0,ra.jsx)("p",{className:"text-sm text-purple-600",children:"Difficulty Index"}),(0,ra.jsxs)("p",{className:"text-2xl font-bold text-purple-700",children:[Math.round(100*(n.difficulty_index||0)),"%"]})]})]}),n&&(0,ra.jsxs)("div",{className:"mb-8",children:[(0,ra.jsx)("h4",{className:"text-lg font-medium text-gray-700 mb-3",children:"Mark Distribution"}),(0,ra.jsx)(Gu,{width:"100%",height:250,children:(0,ra.jsxs)(LL,{data:i(n),children:[(0,ra.jsx)(fO,{strokeDasharray:"3 3"}),(0,ra.jsx)(IO,{dataKey:"range"}),(0,ra.jsx)(VO,{}),(0,ra.jsx)(YM,{}),(0,ra.jsx)(Dz,{dataKey:"count",fill:kq,children:i(n).map((e,t)=>(0,ra.jsx)(zL,{fill:"81-100"===e.range?bq:"61-80"===e.range?"#86efac":"41-60"===e.range?xq:"21-40"===e.range?"#fca5a5":wq},"cell-".concat(t)))})]})})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("h4",{className:"text-lg font-medium text-gray-700 mb-3",children:"Assessment Difficulty Comparison"}),(0,ra.jsx)(Gu,{width:"100%",height:250,children:(0,ra.jsxs)(LL,{data:o,children:[(0,ra.jsx)(fO,{strokeDasharray:"3 3"}),(0,ra.jsx)(IO,{dataKey:"name"}),(0,ra.jsx)(VO,{domain:[0,100]}),(0,ra.jsx)(YM,{}),(0,ra.jsx)(WR,{}),(0,ra.jsx)(Dz,{dataKey:"difficulty",name:"Difficulty %",fill:wq}),(0,ra.jsx)(Dz,{dataKey:"average",name:"Class Average %",fill:kq})]})})]})]}):(0,ra.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No assessment data available yet."})]})},_q=e=>{var t,r,n,a;let{overview:i,aiInsights:o,onGenerateInsights:s,loading:l}=e;return(0,ra.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,ra.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,ra.jsx)("h3",{className:"text-xl font-semibold text-gray-900","data-testid":"class-support-title",children:"Class Support Indicators"}),(0,ra.jsx)("button",{onClick:s,disabled:l,className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 disabled:opacity-50 flex items-center gap-2","data-testid":"generate-insights-btn",children:l?(0,ra.jsxs)(ra.Fragment,{children:[(0,ra.jsxs)("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[(0,ra.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),(0,ra.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Generating..."]}):(0,ra.jsxs)(ra.Fragment,{children:[(0,ra.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Generate AI Insights"]})})]}),(0,ra.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,ra.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[(0,ra.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:(null===i||void 0===i?void 0:i.total_students)||0}),(0,ra.jsx)("p",{className:"text-sm text-gray-600",children:"Total Students"})]}),(0,ra.jsxs)("div",{className:"bg-red-50 rounded-lg p-4 text-center",children:[(0,ra.jsx)("p",{className:"text-3xl font-bold text-red-600",children:(null===i||void 0===i?void 0:i.underperforming_count)||0}),(0,ra.jsx)("p",{className:"text-sm text-red-600",children:"Underperforming"})]}),(0,ra.jsxs)("div",{className:"bg-green-50 rounded-lg p-4 text-center",children:[(0,ra.jsx)("p",{className:"text-3xl font-bold text-green-600",children:(null===i||void 0===i?void 0:i.improving_count)||0}),(0,ra.jsx)("p",{className:"text-sm text-green-600",children:"Improving"})]}),(0,ra.jsxs)("div",{className:"bg-amber-50 rounded-lg p-4 text-center",children:[(0,ra.jsx)("p",{className:"text-3xl font-bold text-amber-600",children:(null===i||void 0===i?void 0:i.declining_count)||0}),(0,ra.jsx)("p",{className:"text-sm text-amber-600",children:"Declining"})]})]}),(null===o||void 0===o?void 0:o.ai_summary)&&(0,ra.jsxs)("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 mb-6",children:[(0,ra.jsxs)("h4",{className:"font-semibold text-purple-800 mb-2 flex items-center gap-2",children:[(0,ra.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"AI Intervention Recommendation"]}),(0,ra.jsx)("p",{className:"text-purple-700","data-testid":"ai-summary",children:o.ai_summary})]}),(0,ra.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ra.jsxs)("div",{children:[(0,ra.jsxs)("h4",{className:"font-semibold text-red-700 mb-3 flex items-center gap-2",children:[(0,ra.jsx)("span",{className:"w-3 h-3 bg-red-500 rounded-full"}),"Students Needing Support"]}),(null===i||void 0===i||null===(t=i.underperforming_students)||void 0===t?void 0:t.length)>0?(0,ra.jsx)("ul",{className:"space-y-2",children:i.underperforming_students.slice(0,5).map((e,t)=>(0,ra.jsxs)("li",{className:"flex justify-between items-center bg-red-50 rounded px-3 py-2",children:[(0,ra.jsx)("span",{className:"font-medium",children:e.student_name}),(0,ra.jsxs)("span",{className:"text-red-600 font-bold",children:[e.average,"%"]})]},t))}):(0,ra.jsx)("p",{className:"text-gray-500 text-sm",children:"No underperforming students"})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsxs)("h4",{className:"font-semibold text-amber-700 mb-3 flex items-center gap-2",children:[(0,ra.jsx)("span",{className:"w-3 h-3 bg-amber-500 rounded-full"}),"Declining Performance"]}),(null===i||void 0===i||null===(r=i.declining_students)||void 0===r?void 0:r.length)>0?(0,ra.jsx)("ul",{className:"space-y-2",children:i.declining_students.slice(0,5).map((e,t)=>(0,ra.jsxs)("li",{className:"flex justify-between items-center bg-amber-50 rounded px-3 py-2",children:[(0,ra.jsx)("span",{className:"font-medium",children:e.student_name}),(0,ra.jsx)("span",{className:"text-amber-600",children:e.trend})]},t))}):(0,ra.jsx)("p",{className:"text-gray-500 text-sm",children:"No declining students"})]})]}),(0,ra.jsxs)("div",{className:"mt-6",children:[(0,ra.jsx)("h4",{className:"font-semibold text-gray-700 mb-3",children:"Topic Analysis"}),(0,ra.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ra.jsxs)("div",{children:[(0,ra.jsx)("p",{className:"text-sm text-red-600 font-medium mb-2",children:"Weak Topics (<50%)"}),(null===i||void 0===i||null===(n=i.weak_topics)||void 0===n?void 0:n.length)>0?(0,ra.jsx)("ul",{className:"space-y-1",children:i.weak_topics.slice(0,5).map((e,t)=>(0,ra.jsxs)("li",{className:"flex justify-between bg-red-50 rounded px-3 py-2 text-sm",children:[(0,ra.jsx)("span",{children:e.topic}),(0,ra.jsxs)("span",{className:"text-red-600 font-medium",children:[e.average_percentage,"%"]})]},t))}):(0,ra.jsx)("p",{className:"text-gray-500 text-sm",children:"No weak topics"})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("p",{className:"text-sm text-green-600 font-medium mb-2",children:"Strong Topics (>70%)"}),(null===i||void 0===i||null===(a=i.strong_topics)||void 0===a?void 0:a.length)>0?(0,ra.jsx)("ul",{className:"space-y-1",children:i.strong_topics.slice(0,5).map((e,t)=>(0,ra.jsxs)("li",{className:"flex justify-between bg-green-50 rounded px-3 py-2 text-sm",children:[(0,ra.jsx)("span",{children:e.topic}),(0,ra.jsxs)("span",{className:"text-green-600 font-medium",children:[e.average_percentage,"%"]})]},t))}):(0,ra.jsx)("p",{className:"text-gray-500 text-sm",children:"No strong topics yet"})]})]})]})]})},Aq=e=>{var t,r,n,a;let{student:i,onClose:o,onExportPDF:s}=e;if(!i)return null;const l=(null===(t=i.recent_scores)||void 0===t?void 0:t.map((e,t)=>({name:"Test ".concat(i.recent_scores.length-t),percentage:e.percentage,date:new Date(e.date).toLocaleDateString()})).reverse())||[];return(0,ra.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,ra.jsxs)("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,ra.jsxs)("div",{className:"p-6 border-b sticky top-0 bg-white flex justify-between items-center",children:[(0,ra.jsxs)("div",{children:[(0,ra.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:i.student_name}),(0,ra.jsx)("p",{className:"text-gray-600",children:"Student Analytics Profile"})]}),(0,ra.jsxs)("div",{className:"flex gap-2",children:[(0,ra.jsxs)("button",{onClick:s,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center gap-2",children:[(0,ra.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export PDF"]}),(0,ra.jsx)("button",{onClick:o,className:"text-gray-500 hover:text-gray-700 p-2",children:(0,ra.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})]}),(0,ra.jsxs)("div",{className:"p-6",children:[(0,ra.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,ra.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[(0,ra.jsxs)("p",{className:"text-2xl font-bold text-blue-700",children:[i.overall_average,"%"]}),(0,ra.jsx)("p",{className:"text-sm text-blue-600",children:"Overall Average"})]}),(0,ra.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[(0,ra.jsx)("p",{className:"text-2xl font-bold text-gray-700",children:i.total_submissions}),(0,ra.jsx)("p",{className:"text-sm text-gray-600",children:"Total Submissions"})]}),(0,ra.jsxs)("div",{className:"rounded-lg p-4 text-center ".concat("improving"===i.trend?"bg-green-50":"declining"===i.trend?"bg-red-50":"bg-gray-50"),children:[(0,ra.jsxs)("p",{className:"text-2xl font-bold capitalize ".concat("improving"===i.trend?"text-green-700":"declining"===i.trend?"text-red-700":"text-gray-700"),children:["improving"===i.trend?"\u2191":"declining"===i.trend?"\u2193":"\u2192"," ",i.trend]}),(0,ra.jsx)("p",{className:"text-sm text-gray-600",children:"Trend"})]}),(0,ra.jsxs)("div",{className:"rounded-lg p-4 text-center ".concat(i.needs_support?"bg-red-50":"bg-green-50"),children:[(0,ra.jsx)("p",{className:"text-2xl font-bold ".concat(i.needs_support?"text-red-700":"text-green-700"),children:i.needs_support?"\u26a0\ufe0f Yes":"\u2713 No"}),(0,ra.jsx)("p",{className:"text-sm text-gray-600",children:"Needs Support"})]})]}),i.needs_support&&(null===(r=i.support_reasons)||void 0===r?void 0:r.length)>0&&(0,ra.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:[(0,ra.jsx)("h4",{className:"font-semibold text-red-800 mb-2",children:"Support Needed:"}),(0,ra.jsx)("ul",{className:"list-disc list-inside text-red-700",children:i.support_reasons.map((e,t)=>(0,ra.jsx)("li",{children:e},t))})]}),l.length>0&&(0,ra.jsxs)("div",{className:"mb-6",children:[(0,ra.jsx)("h4",{className:"font-semibold text-gray-700 mb-3",children:"Performance Trend"}),(0,ra.jsx)(Gu,{width:"100%",height:200,children:(0,ra.jsxs)(zz,{data:l,children:[(0,ra.jsx)(fO,{strokeDasharray:"3 3"}),(0,ra.jsx)(IO,{dataKey:"name"}),(0,ra.jsx)(VO,{domain:[0,100]}),(0,ra.jsx)(YM,{content:e=>{let{payload:t}=e;return t&&t[0]?(0,ra.jsxs)("div",{className:"bg-white p-2 border rounded shadow",children:[(0,ra.jsx)("p",{children:t[0].payload.date}),(0,ra.jsxs)("p",{className:"font-bold",children:[t[0].value,"%"]})]}):null}}),(0,ra.jsx)(vq,{type:"monotone",dataKey:"percentage",stroke:kq,fill:kq,fillOpacity:.3})]})})]}),(null===(n=i.weak_topics)||void 0===n?void 0:n.length)>0&&(0,ra.jsxs)("div",{className:"mb-6",children:[(0,ra.jsx)("h4",{className:"font-semibold text-gray-700 mb-3",children:"Weak Topics"}),(0,ra.jsx)("div",{className:"flex flex-wrap gap-2",children:i.weak_topics.map((e,t)=>(0,ra.jsxs)("span",{className:"bg-red-100 text-red-700 px-3 py-1 rounded-full text-sm",children:[e.topic,": ",e.average,"%"]},t))})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("h4",{className:"font-semibold text-gray-700 mb-3",children:"All Submissions"}),(0,ra.jsx)("div",{className:"overflow-x-auto",children:(0,ra.jsxs)("table",{className:"min-w-full border-collapse",children:[(0,ra.jsx)("thead",{children:(0,ra.jsxs)("tr",{className:"bg-gray-50",children:[(0,ra.jsx)("th",{className:"border px-3 py-2 text-left",children:"Subject"}),(0,ra.jsx)("th",{className:"border px-3 py-2 text-center",children:"Score"}),(0,ra.jsx)("th",{className:"border px-3 py-2 text-center",children:"Percentage"}),(0,ra.jsx)("th",{className:"border px-3 py-2 text-center",children:"Status"}),(0,ra.jsx)("th",{className:"border px-3 py-2 text-left",children:"Date"})]})}),(0,ra.jsx)("tbody",{children:null===(a=i.submissions)||void 0===a?void 0:a.map((e,t)=>{return(0,ra.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,ra.jsx)("td",{className:"border px-3 py-2",children:e.subject}),(0,ra.jsx)("td",{className:"border px-3 py-2 text-center",children:"marked"===e.status?"".concat(e.score,"/").concat(e.max_marks):"-"}),(0,ra.jsx)("td",{className:"border px-3 py-2 text-center",children:"marked"===e.status&&(0,ra.jsxs)("span",{className:"px-2 py-1 rounded text-sm ".concat((r=e.percentage,r>=70?"bg-green-100 text-green-800":r>=50?"bg-amber-100 text-amber-800":"bg-red-100 text-red-800")),children:[e.percentage,"%"]})}),(0,ra.jsx)("td",{className:"border px-3 py-2 text-center capitalize",children:e.status}),(0,ra.jsx)("td",{className:"border px-3 py-2 text-sm text-gray-600",children:e.submitted_at?new Date(e.submitted_at).toLocaleDateString():"-"})]},t);var r})})]})})]})]})]})})},Tq=e=>{let{classes:t,assessments:n}=e;const[a,i]=(0,r.useState)(null),[o,s]=(0,r.useState)(!1),[l,c]=(0,r.useState)("all"),[u,d]=(0,r.useState)("all");(0,r.useEffect)(()=>{h()},[l,u]);const h=async()=>{s(!0);try{let e="".concat(yq,"/teacher/analytics/math-performance");const t=new URLSearchParams;"all"!==u?t.append("assessment_id",u):"all"!==l&&t.append("class_id",l),t.toString()&&(e+="?".concat(t.toString()));const r=await ta.get(e);i(r.data)}catch(e){console.error("Error loading math analytics:",e)}s(!1)};if(o)return(0,ra.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,ra.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,ra.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})});if(!a||!a.analytics)return(0,ra.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,ra.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Math Performance Analytics"}),(0,ra.jsx)("div",{className:"text-center py-12 text-gray-500",children:"No math assessment data available yet. Math-specific metrics will appear here after students complete math assessments."})]});const{analytics:m,total_submissions:p}=a,{overview:f,performance_by_type:g,working_quality:v,common_mistakes:y,recommendations:b}=m,x=Object.entries(g||{}).map(e=>{let[t,r]=e;return{name:"maths"===t?"Math":"numeric"===t?"Numeric":"mixed"===t?"Mixed":"Text",avgScore:r.avg_score.toFixed(1),passRate:r.pass_rate.toFixed(1),count:r.count}}),w=[{name:"LaTeX Usage",value:f.latex_usage_percentage,color:kq},{name:"Working Provided",value:f.working_provided_percentage,color:bq},{name:"Equivalence Success",value:f.equivalence_success_rate,color:jq}];return(0,ra.jsxs)("div",{className:"space-y-6",children:[(0,ra.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,ra.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Math Performance Analytics"}),(0,ra.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Class"}),(0,ra.jsxs)("select",{className:"border rounded-lg px-3 py-2",value:l,onChange:e=>{c(e.target.value),d("all")},children:[(0,ra.jsx)("option",{value:"all",children:"All Classes"}),null===t||void 0===t?void 0:t.map(e=>(0,ra.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Assessment"}),(0,ra.jsxs)("select",{className:"border rounded-lg px-3 py-2",value:u,onChange:e=>d(e.target.value),children:[(0,ra.jsx)("option",{value:"all",children:"All Assessments"}),null===n||void 0===n?void 0:n.map(e=>(0,ra.jsxs)("option",{value:e.assessment_id,children:[e.subject," (",e.total_submissions," submissions)"]},e.assessment_id))]})]})]}),(0,ra.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[(0,ra.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,ra.jsx)("p",{className:"text-sm text-blue-600 mb-1",children:"Total Submissions"}),(0,ra.jsx)("p",{className:"text-3xl font-bold text-blue-700",children:p})]}),(0,ra.jsxs)("div",{className:"bg-green-50 rounded-lg p-4",children:[(0,ra.jsx)("p",{className:"text-sm text-green-600 mb-1",children:"LaTeX Usage"}),(0,ra.jsxs)("p",{className:"text-3xl font-bold text-green-700",children:[f.latex_usage_percentage,"%"]})]}),(0,ra.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4",children:[(0,ra.jsx)("p",{className:"text-sm text-purple-600 mb-1",children:"Working Provided"}),(0,ra.jsxs)("p",{className:"text-3xl font-bold text-purple-700",children:[f.working_provided_percentage,"%"]})]}),(0,ra.jsxs)("div",{className:"bg-amber-50 rounded-lg p-4",children:[(0,ra.jsx)("p",{className:"text-sm text-amber-600 mb-1",children:"Equivalence Checked"}),(0,ra.jsx)("p",{className:"text-3xl font-bold text-amber-700",children:f.equivalence_checked}),(0,ra.jsxs)("p",{className:"text-xs text-amber-600 mt-1",children:["Success: ",f.equivalence_success_rate,"%"]})]})]})]}),x.length>0&&(0,ra.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,ra.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Performance by Question Type"}),(0,ra.jsx)(Gu,{width:"100%",height:300,children:(0,ra.jsxs)(LL,{data:x,children:[(0,ra.jsx)(fO,{strokeDasharray:"3 3"}),(0,ra.jsx)(IO,{dataKey:"name"}),(0,ra.jsx)(VO,{yAxisId:"left",orientation:"left",stroke:kq}),(0,ra.jsx)(VO,{yAxisId:"right",orientation:"right",stroke:bq}),(0,ra.jsx)(YM,{}),(0,ra.jsx)(WR,{}),(0,ra.jsx)(Dz,{yAxisId:"left",dataKey:"avgScore",fill:kq,name:"Avg Score (%)"}),(0,ra.jsx)(Dz,{yAxisId:"right",dataKey:"passRate",fill:bq,name:"Pass Rate (%)"})]})}),(0,ra.jsx)("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:x.map((e,t)=>(0,ra.jsxs)("div",{className:"border rounded-lg p-3",children:[(0,ra.jsx)("p",{className:"text-sm font-medium text-gray-700",children:e.name}),(0,ra.jsxs)("p",{className:"text-xs text-gray-500",children:[e.count," submissions"]}),(0,ra.jsxs)("div",{className:"mt-2 flex justify-between text-xs",children:[(0,ra.jsxs)("span",{children:["Avg: ",e.avgScore,"%"]}),(0,ra.jsxs)("span",{children:["Pass: ",e.passRate,"%"]})]})]},t))})]}),(0,ra.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,ra.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Student Engagement & Tool Usage"}),(0,ra.jsx)(Gu,{width:"100%",height:250,children:(0,ra.jsxs)(LL,{data:w,layout:"horizontal",children:[(0,ra.jsx)(fO,{strokeDasharray:"3 3"}),(0,ra.jsx)(IO,{type:"number",domain:[0,100]}),(0,ra.jsx)(VO,{type:"category",dataKey:"name",width:150}),(0,ra.jsx)(YM,{}),(0,ra.jsx)(Dz,{dataKey:"value",name:"Percentage (%)",children:w.map((e,t)=>(0,ra.jsx)(zL,{fill:e.color},"cell-".concat(t)))})]})})]}),v&&v.submissions_with_working>0&&(0,ra.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,ra.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Working Quality Analysis"}),(0,ra.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[(0,ra.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,ra.jsx)("p",{className:"text-sm text-gray-600",children:"Submissions with Working"}),(0,ra.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:v.submissions_with_working})]}),(0,ra.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,ra.jsx)("p",{className:"text-sm text-gray-600",children:"Avg Working Length"}),(0,ra.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[v.average_length," chars"]})]}),(0,ra.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,ra.jsx)("p",{className:"text-sm text-gray-600",children:"Structured Working"}),(0,ra.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[v.structured_working_pct,"%"]})]}),(0,ra.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,ra.jsx)("p",{className:"text-sm text-gray-600",children:"Quality Score"}),(0,ra.jsxs)("p",{className:"text-2xl font-bold text-green-700",children:[v.quality_score,"/100"]})]})]}),(0,ra.jsx)("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4",children:(0,ra.jsxs)("p",{className:"text-sm text-blue-700",children:[(0,ra.jsx)("strong",{children:"LaTeX in Working:"})," ",v.latex_usage_in_working_pct,"% of students use LaTeX notation in their working"]})})]}),y&&y.length>0&&(0,ra.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,ra.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Common Mathematical Mistakes"}),(0,ra.jsx)("div",{className:"space-y-3",children:y.map((e,t)=>(0,ra.jsxs)("div",{className:"border-l-4 p-4 rounded ".concat("high"===e.severity?"bg-red-50 border-red-500":"medium"===e.severity?"bg-amber-50 border-amber-500":"bg-blue-50 border-blue-500"),children:[(0,ra.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,ra.jsx)("p",{className:"font-medium text-gray-900",children:e.pattern}),(0,ra.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat("high"===e.severity?"bg-red-100 text-red-700":"medium"===e.severity?"bg-amber-100 text-amber-700":"bg-blue-100 text-blue-700"),children:e.severity.toUpperCase()})]}),(0,ra.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[(0,ra.jsxs)("span",{children:["Frequency: ",e.frequency," occurrences"]}),(0,ra.jsxs)("span",{children:["(",e.percentage,"% of incorrect answers)"]})]}),e.recommendation&&(0,ra.jsxs)("p",{className:"mt-2 text-sm text-gray-700 italic",children:["\ud83d\udca1 ",e.recommendation]})]},t))})]}),b&&b.length>0&&(0,ra.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,ra.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"\ud83d\udcca Actionable Recommendations"}),(0,ra.jsx)("div",{className:"space-y-3",children:b.map((e,t)=>(0,ra.jsxs)("div",{className:"border-l-4 p-4 rounded ".concat("high"===e.priority?"bg-red-50 border-red-500":"medium"===e.priority?"bg-amber-50 border-amber-500":"bg-green-50 border-green-500"),children:[(0,ra.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,ra.jsx)("p",{className:"text-sm font-medium text-gray-600",children:e.category}),(0,ra.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat("high"===e.priority?"bg-red-100 text-red-700":"medium"===e.priority?"bg-amber-100 text-amber-700":"bg-green-100 text-green-700"),children:e.priority.toUpperCase()})]}),(0,ra.jsxs)("p",{className:"text-sm text-gray-800 mb-1",children:[(0,ra.jsx)("strong",{children:"Issue:"})," ",e.issue]}),(0,ra.jsxs)("p",{className:"text-sm text-gray-700",children:["\u2713 ",(0,ra.jsx)("strong",{children:"Action:"})," ",e.action]})]},t))})]})]})},Eq=e=>{let{user:t}=e;const n=je(),[a,i]=(0,r.useState)("students"),[o,s]=(0,r.useState)(!0),[l,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)(null),[h,m]=(0,r.useState)(null),[p,f]=(0,r.useState)(null),[g,v]=(0,r.useState)(null),[y,b]=(0,r.useState)(null),[x,w]=(0,r.useState)(null),[k,j]=(0,r.useState)([]);(0,r.useEffect)(()=>{S(),C()},[]);const S=async()=>{s(!0);try{const[e,t,r]=await Promise.all([ta.get("".concat(yq,"/teacher/analytics/overview")),ta.get("".concat(yq,"/teacher/analytics/students")),ta.get("".concat(yq,"/teacher/analytics/assessments"))]);d(e.data),m(t.data),f(r.data.assessments)}catch(e){console.error("Error loading analytics:",e)}s(!1)},C=async()=>{try{const e=await ta.get("".concat(yq,"/teacher/classes"));j(e.data.classes||[])}catch(e){console.error("Error loading classes:",e)}};return o?(0,ra.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:(0,ra.jsxs)("div",{className:"text-center",children:[(0,ra.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,ra.jsx)("p",{className:"text-gray-600",children:"Loading analytics..."})]})}):(0,ra.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,ra.jsx)("nav",{className:"bg-white shadow-sm border-b",children:(0,ra.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-4 flex justify-between items-center",children:[(0,ra.jsxs)("div",{className:"flex items-center gap-6",children:[(0,ra.jsx)("h1",{className:"text-2xl font-bold text-blue-600",children:"BlueAI"}),(0,ra.jsxs)("div",{className:"flex gap-4",children:[(0,ra.jsx)("button",{onClick:()=>n("/teacher/dashboard"),className:"text-gray-700 hover:text-blue-600",children:"Dashboard"}),(0,ra.jsx)("button",{onClick:()=>n("/teacher/questions"),className:"text-gray-700 hover:text-blue-600",children:"Questions"}),(0,ra.jsx)("button",{onClick:()=>n("/teacher/assessments"),className:"text-gray-700 hover:text-blue-600",children:"Assessments"}),(0,ra.jsx)("button",{className:"text-blue-600 font-medium",children:"Analytics"})]})]}),(0,ra.jsx)("div",{className:"flex items-center gap-4",children:(0,ra.jsx)("span",{className:"text-gray-700",children:t.name})})]})}),(0,ra.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[(0,ra.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,ra.jsxs)("div",{children:[(0,ra.jsx)("h2",{className:"text-3xl font-bold text-gray-900","data-testid":"analytics-title",children:"Analytics Dashboard"}),(0,ra.jsx)("p",{className:"text-gray-600",children:"Track student performance, identify trends, and get AI-powered insights"})]}),(0,ra.jsxs)("div",{className:"flex gap-3",children:[(0,ra.jsxs)("button",{onClick:async()=>{try{const e=await ta.get("".concat(yq,"/teacher/analytics/export/csv"),{responseType:"blob"}),t=window.URL.createObjectURL(new Blob([e.data])),r=document.createElement("a");r.href=t,r.setAttribute("download","analytics_export.csv"),document.body.appendChild(r),r.click(),r.remove()}catch(e){console.error("Error exporting CSV:",e)}},className:"bg-gray-100 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-200 flex items-center gap-2","data-testid":"export-csv-btn",children:[(0,ra.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export CSV"]}),(0,ra.jsxs)("button",{onClick:async()=>{try{const e=await ta.get("".concat(yq,"/teacher/analytics/export/pdf"),{responseType:"blob"}),t=window.URL.createObjectURL(new Blob([e.data])),r=document.createElement("a");r.href=t,r.setAttribute("download","class_analytics.pdf"),document.body.appendChild(r),r.click(),r.remove()}catch(e){console.error("Error exporting PDF:",e)}},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2","data-testid":"export-pdf-btn",children:[(0,ra.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Download PDF"]})]})]}),(0,ra.jsxs)("div",{className:"flex gap-2 mb-6 border-b",children:[(0,ra.jsx)("button",{onClick:()=>i("students"),className:"px-4 py-2 font-medium border-b-2 transition-colors ".concat("students"===a?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"),children:"Student Performance"}),(0,ra.jsx)("button",{onClick:()=>i("assessments"),className:"px-4 py-2 font-medium border-b-2 transition-colors ".concat("assessments"===a?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"),children:"Assessment Insights"}),(0,ra.jsx)("button",{onClick:()=>i("math"),className:"px-4 py-2 font-medium border-b-2 transition-colors ".concat("math"===a?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"),children:"Math Analytics"}),(0,ra.jsx)("button",{onClick:()=>i("support"),className:"px-4 py-2 font-medium border-b-2 transition-colors ".concat("support"===a?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"),children:"Class Support"})]}),"students"===a&&(0,ra.jsx)(Cq,{students:(null===h||void 0===h?void 0:h.students)||[],heatmapData:null===h||void 0===h?void 0:h.heatmap,onStudentClick:async e=>{try{const t=await ta.get("".concat(yq,"/teacher/analytics/student/").concat(encodeURIComponent(e)));w(t.data),b(e)}catch(t){console.error("Error loading student profile:",t)}}}),"assessments"===a&&(0,ra.jsx)(Nq,{assessments:p}),"math"===a&&(0,ra.jsx)(Tq,{classes:k,assessments:p}),"support"===a&&(0,ra.jsx)(_q,{overview:u,aiInsights:g,onGenerateInsights:async()=>{c(!0);try{const e=await ta.post("".concat(yq,"/teacher/analytics/generate-insights"));v(e.data)}catch(e){console.error("Error generating insights:",e)}c(!1)},loading:l})]}),y&&x&&(0,ra.jsx)(Aq,{student:x,onClose:()=>{b(null),w(null)},onExportPDF:()=>(async e=>{try{const t=await ta.get("".concat(yq,"/teacher/analytics/student/").concat(encodeURIComponent(e),"/export-pdf"),{responseType:"blob"}),r=window.URL.createObjectURL(new Blob([t.data])),n=document.createElement("a");n.href=r,n.setAttribute("download","".concat(e,"_analytics.pdf")),document.body.appendChild(n),n.click(),n.remove()}catch(t){console.error("Error exporting student PDF:",t)}})(y)})]})},Oq={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_BACKEND_URL+"/api",Pq=e=>{let{user:t}=e;const[n,a]=(0,r.useState)([]),[i,o]=(0,r.useState)(!0),[s,l]=(0,r.useState)(!1),c=je();(0,r.useEffect)(()=>{u()},[]);const u=async()=>{try{const e=await ta.get("".concat(Oq,"/teacher/classes"));a(e.data.classes)}catch(e){console.error("Error loading classes:",e)}o(!1)};return i?(0,ra.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:"Loading..."}):(0,ra.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,ra.jsx)("nav",{className:"bg-white shadow-sm border-b",children:(0,ra.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-4 flex justify-between items-center",children:[(0,ra.jsxs)("div",{className:"flex items-center gap-6",children:[(0,ra.jsx)("h1",{className:"text-2xl font-bold text-blue-600",children:"BlueAI"}),(0,ra.jsxs)("div",{className:"flex gap-4",children:[(0,ra.jsx)("button",{onClick:()=>c("/teacher/dashboard"),className:"text-gray-700 hover:text-blue-600",children:"Dashboard"}),(0,ra.jsx)("button",{onClick:()=>c("/teacher/questions"),className:"text-gray-700 hover:text-blue-600",children:"Questions"}),(0,ra.jsx)("button",{onClick:()=>c("/teacher/assessments"),className:"text-gray-700 hover:text-blue-600",children:"Assessments"}),(0,ra.jsx)("button",{className:"text-blue-600 font-medium",children:"Classes"}),(0,ra.jsx)("button",{onClick:()=>c("/teacher/analytics"),className:"text-gray-700 hover:text-blue-600",children:"Analytics"})]})]}),(0,ra.jsx)("span",{className:"text-gray-700",children:t.name})]})}),(0,ra.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[(0,ra.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,ra.jsxs)("div",{children:[(0,ra.jsx)("h2",{className:"text-3xl font-bold text-gray-900","data-testid":"classes-title",children:"Classes"}),(0,ra.jsx)("p",{className:"text-gray-600",children:"Manage your classes and students"})]}),(0,ra.jsxs)("div",{className:"flex gap-3",children:[(0,ra.jsxs)("button",{onClick:()=>c("/teacher/classes/import"),className:"bg-gray-100 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-200 flex items-center gap-2","data-testid":"import-csv-btn",children:[(0,ra.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),"Import Students (CSV)"]}),(0,ra.jsxs)("button",{onClick:()=>l(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2","data-testid":"create-class-btn",children:[(0,ra.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),"Create Class"]})]})]}),0===n.length?(0,ra.jsxs)("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[(0,ra.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,ra.jsx)("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),(0,ra.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No classes yet"}),(0,ra.jsx)("p",{className:"text-gray-600 mb-6",children:"Create your first class to start managing students and assessments."}),(0,ra.jsx)("button",{onClick:()=>l(!0),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700",children:"Create Your First Class"})]}):(0,ra.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(e=>(0,ra.jsx)("div",{className:"bg-white rounded-lg shadow hover:shadow-md transition-shadow cursor-pointer",onClick:()=>c("/teacher/classes/".concat(e.id)),"data-testid":"class-card-".concat(e.id),children:(0,ra.jsxs)("div",{className:"p-6",children:[(0,ra.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,ra.jsxs)("div",{children:[(0,ra.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.class_name}),e.subject&&(0,ra.jsx)("p",{className:"text-sm text-gray-600",children:e.subject}),e.year_group&&(0,ra.jsxs)("p",{className:"text-sm text-gray-500",children:["Year ",e.year_group]})]}),null!==e.average_score&&(0,ra.jsxs)("div",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat(e.average_score>=70?"bg-green-100 text-green-700":e.average_score>=50?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"),children:[e.average_score,"%"]})]}),(0,ra.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,ra.jsxs)("div",{className:"bg-gray-50 rounded p-3 text-center",children:[(0,ra.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:e.student_count}),(0,ra.jsx)("p",{className:"text-gray-600",children:"Students"})]}),(0,ra.jsxs)("div",{className:"bg-gray-50 rounded p-3 text-center",children:[(0,ra.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:e.assessment_count}),(0,ra.jsx)("p",{className:"text-gray-600",children:"Assessments"})]})]}),e.last_assessment_date&&(0,ra.jsxs)("p",{className:"text-xs text-gray-500 mt-4",children:["Last assessment: ",new Date(e.last_assessment_date).toLocaleDateString()]})]})},e.id))})]}),s&&(0,ra.jsx)(Iq,{onClose:()=>l(!1),onCreated:()=>{l(!1),u()}})]})},Iq=e=>{let{onClose:t,onCreated:n}=e;const[a,i]=(0,r.useState)({class_name:"",subject:"",year_group:""}),[o,s]=(0,r.useState)(!1),[l,c]=(0,r.useState)("");return(0,ra.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,ra.jsxs)("div",{className:"bg-white rounded-xl max-w-md w-full",children:[(0,ra.jsxs)("div",{className:"p-6 border-b flex justify-between items-center",children:[(0,ra.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Create New Class"}),(0,ra.jsx)("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:(0,ra.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),(0,ra.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),a.class_name.trim()){s(!0),c("");try{await ta.post("".concat(Oq,"/teacher/classes"),a),n()}catch(l){var t,r;c((null===(t=l.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||"Failed to create class")}s(!1)}else c("Class name is required")},className:"p-6 space-y-4",children:[l&&(0,ra.jsx)("div",{className:"bg-red-50 text-red-700 p-3 rounded-lg text-sm",children:l}),(0,ra.jsxs)("div",{children:[(0,ra.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Class Name ",(0,ra.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ra.jsx)("input",{type:"text",value:a.class_name,onChange:e=>i(u(u({},a),{},{class_name:e.target.value})),className:"w-full border rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500",placeholder:"e.g., 10X1 Science","data-testid":"class-name-input"})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject"}),(0,ra.jsx)("input",{type:"text",value:a.subject,onChange:e=>i(u(u({},a),{},{subject:e.target.value})),className:"w-full border rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Physics","data-testid":"subject-input"})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Year Group"}),(0,ra.jsx)("input",{type:"text",value:a.year_group,onChange:e=>i(u(u({},a),{},{year_group:e.target.value})),className:"w-full border rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500",placeholder:"e.g., 10","data-testid":"year-group-input"})]}),(0,ra.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,ra.jsx)("button",{type:"button",onClick:t,className:"flex-1 bg-gray-100 text-gray-700 py-2 rounded-lg hover:bg-gray-200",children:"Cancel"}),(0,ra.jsx)("button",{type:"submit",disabled:o,className:"flex-1 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50","data-testid":"save-class-btn",children:o?"Creating...":"Create Class"})]})]})]})})},Mq=e=>{let{user:t}=e;const{classId:n}=Se(),a=je(),[i,o]=(0,r.useState)(null),[s,l]=(0,r.useState)(!0),[c,u]=(0,r.useState)("students"),[d,h]=(0,r.useState)(!1),[m,p]=(0,r.useState)(!1);(0,r.useEffect)(()=>{f()},[n]);const f=async()=>{try{const e=await ta.get("".concat(Oq,"/teacher/classes/").concat(n));o(e.data)}catch(e){console.error("Error loading class:",e)}l(!1)};return s?(0,ra.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:"Loading..."}):i?(0,ra.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,ra.jsx)("nav",{className:"bg-white shadow-sm border-b",children:(0,ra.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-4 flex justify-between items-center",children:[(0,ra.jsxs)("div",{className:"flex items-center gap-6",children:[(0,ra.jsx)("h1",{className:"text-2xl font-bold text-blue-600",children:"BlueAI"}),(0,ra.jsx)("button",{onClick:()=>a("/teacher/classes"),className:"text-gray-700 hover:text-blue-600",children:"\u2190 Back to Classes"})]}),(0,ra.jsx)("span",{className:"text-gray-700",children:t.name})]})}),(0,ra.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[(0,ra.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[(0,ra.jsxs)("div",{className:"flex justify-between items-start",children:[(0,ra.jsxs)("div",{children:[(0,ra.jsx)("h2",{className:"text-3xl font-bold text-gray-900","data-testid":"class-name",children:i.class.class_name}),(0,ra.jsxs)("div",{className:"flex gap-4 mt-2 text-gray-600",children:[i.class.subject&&(0,ra.jsx)("span",{children:i.class.subject}),i.class.year_group&&(0,ra.jsxs)("span",{children:["Year ",i.class.year_group]})]})]}),(0,ra.jsxs)("div",{className:"flex gap-2",children:[(0,ra.jsx)("button",{onClick:()=>p(!0),className:"bg-gray-100 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-200",children:"Edit"}),(0,ra.jsx)("button",{onClick:async()=>{if(window.confirm("Are you sure you want to delete this class? Students will be archived."))try{await ta.delete("".concat(Oq,"/teacher/classes/").concat(n)),a("/teacher/classes")}catch(r){var e,t;alert((null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||"Failed to delete class")}},className:"bg-red-100 text-red-700 px-4 py-2 rounded-lg hover:bg-red-200",children:"Delete"})]})]}),(0,ra.jsxs)("div",{className:"grid grid-cols-4 gap-4 mt-6",children:[(0,ra.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[(0,ra.jsx)("p",{className:"text-3xl font-bold text-blue-600",children:i.student_count}),(0,ra.jsx)("p",{className:"text-sm text-blue-600",children:"Students"})]}),(0,ra.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4 text-center",children:[(0,ra.jsx)("p",{className:"text-3xl font-bold text-purple-600",children:i.assessments.length}),(0,ra.jsx)("p",{className:"text-sm text-purple-600",children:"Assessments"})]}),(0,ra.jsxs)("div",{className:"bg-green-50 rounded-lg p-4 text-center",children:[(0,ra.jsx)("p",{className:"text-3xl font-bold text-green-600",children:i.assessments.reduce((e,t)=>e+(t.marked_count||0),0)}),(0,ra.jsx)("p",{className:"text-sm text-green-600",children:"Marked"})]}),(0,ra.jsxs)("div",{className:"bg-amber-50 rounded-lg p-4 text-center",children:[(0,ra.jsx)("p",{className:"text-3xl font-bold text-amber-600",children:i.assessments.reduce((e,t)=>e+(t.submission_count||0)-(t.marked_count||0),0)}),(0,ra.jsx)("p",{className:"text-sm text-amber-600",children:"Pending"})]})]})]}),(0,ra.jsxs)("div",{className:"flex gap-2 mb-6 border-b bg-white rounded-t-lg",children:[(0,ra.jsxs)("button",{onClick:()=>u("students"),className:"px-6 py-3 font-medium border-b-2 transition-colors ".concat("students"===c?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"),children:["Students (",i.student_count,")"]}),(0,ra.jsxs)("button",{onClick:()=>u("assessments"),className:"px-6 py-3 font-medium border-b-2 transition-colors ".concat("assessments"===c?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"),children:["Assessments (",i.assessments.length,")"]}),(0,ra.jsx)("button",{onClick:()=>u("analytics"),className:"px-6 py-3 font-medium border-b-2 transition-colors ".concat("analytics"===c?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"),children:"Analytics"})]}),"students"===c&&(0,ra.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,ra.jsxs)("div",{className:"p-4 border-b flex justify-between items-center",children:[(0,ra.jsx)("h3",{className:"font-semibold text-gray-900",children:"Students"}),(0,ra.jsxs)("div",{className:"flex gap-2",children:[(0,ra.jsx)("button",{onClick:()=>a("/teacher/classes/".concat(n,"/import")),className:"bg-gray-100 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-200 text-sm",children:"Import CSV"}),(0,ra.jsx)("button",{onClick:()=>h(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 text-sm","data-testid":"add-student-btn",children:"Add Student"})]})]}),0===i.students.length?(0,ra.jsxs)("div",{className:"p-8 text-center text-gray-500",children:[(0,ra.jsx)("p",{children:"No students in this class yet."}),(0,ra.jsx)("button",{onClick:()=>h(!0),className:"mt-4 text-blue-600 hover:underline",children:"Add your first student"})]}):(0,ra.jsx)("div",{className:"overflow-x-auto",children:(0,ra.jsxs)("table",{className:"min-w-full",children:[(0,ra.jsx)("thead",{className:"bg-gray-50",children:(0,ra.jsxs)("tr",{children:[(0,ra.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),(0,ra.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Student Code"}),(0,ra.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"SEN"}),(0,ra.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"PP"}),(0,ra.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"EAL"}),(0,ra.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),(0,ra.jsx)("tbody",{className:"divide-y",children:i.students.map(e=>(0,ra.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,ra.jsx)("td",{className:"px-4 py-3",children:(0,ra.jsxs)("div",{children:[(0,ra.jsxs)("p",{className:"font-medium text-gray-900",children:[e.first_name," ",e.last_name]}),e.preferred_name&&(0,ra.jsxs)("p",{className:"text-sm text-gray-500",children:["(",e.preferred_name,")"]})]})}),(0,ra.jsx)("td",{className:"px-4 py-3 text-gray-600",children:e.student_code||"-"}),(0,ra.jsx)("td",{className:"px-4 py-3 text-center",children:e.sen_flag&&(0,ra.jsx)("span",{className:"bg-purple-100 text-purple-700 px-2 py-1 rounded text-xs",children:"SEN"})}),(0,ra.jsx)("td",{className:"px-4 py-3 text-center",children:e.pupil_premium_flag&&(0,ra.jsx)("span",{className:"bg-amber-100 text-amber-700 px-2 py-1 rounded text-xs",children:"PP"})}),(0,ra.jsx)("td",{className:"px-4 py-3 text-center",children:e.eal_flag&&(0,ra.jsx)("span",{className:"bg-blue-100 text-blue-700 px-2 py-1 rounded text-xs",children:"EAL"})}),(0,ra.jsxs)("td",{className:"px-4 py-3 text-right",children:[(0,ra.jsx)("button",{onClick:()=>a("/teacher/students/".concat(e.id)),className:"text-blue-600 hover:text-blue-700 text-sm mr-3",children:"View"}),(0,ra.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Remove this student from the class?"))try{await ta.delete("".concat(Oq,"/teacher/students/").concat(e)),f()}catch(n){var t,r;alert((null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||"Failed to remove student")}})(e.id),className:"text-red-600 hover:text-red-700 text-sm",children:"Remove"})]})]},e.id))})]})})]}),"assessments"===c&&(0,ra.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,ra.jsxs)("div",{className:"p-4 border-b flex justify-between items-center",children:[(0,ra.jsx)("h3",{className:"font-semibold text-gray-900",children:"Assessments"}),(0,ra.jsx)("button",{onClick:()=>a("/teacher/assessments/new?classId=".concat(n)),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 text-sm",children:"Create Assessment"})]}),0===i.assessments.length?(0,ra.jsx)("div",{className:"p-8 text-center text-gray-500",children:(0,ra.jsx)("p",{children:"No assessments for this class yet."})}):(0,ra.jsx)("div",{className:"divide-y",children:i.assessments.map(e=>(0,ra.jsx)("div",{className:"p-4 hover:bg-gray-50",children:(0,ra.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ra.jsxs)("div",{children:[(0,ra.jsxs)("p",{className:"font-medium text-gray-900",children:["Assessment #",e.id.slice(0,8)]}),(0,ra.jsxs)("p",{className:"text-sm text-gray-500",children:["Join Code: ",(0,ra.jsx)("span",{className:"font-mono text-blue-600",children:e.join_code})]})]}),(0,ra.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ra.jsxs)("div",{className:"text-sm text-gray-600",children:[e.marked_count,"/",e.submission_count," marked"]}),(0,ra.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat("started"===e.status?"bg-green-100 text-green-700":"closed"===e.status?"bg-gray-100 text-gray-700":"bg-amber-100 text-amber-700"),children:e.status}),(0,ra.jsx)("button",{onClick:()=>a("/teacher/assessments/".concat(e.id)),className:"text-blue-600 hover:text-blue-700 text-sm",children:"View \u2192"})]})]})},e.id))})]}),"analytics"===c&&(0,ra.jsx)(Rq,{classId:n,className:i.class.class_name})]}),d&&(0,ra.jsx)(Dq,{classId:n,onClose:()=>h(!1),onAdded:()=>{h(!1),f()}}),m&&(0,ra.jsx)(Lq,{classData:i.class,onClose:()=>p(!1),onUpdated:()=>{p(!1),f()}})]}):(0,ra.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:"Class not found"})},Rq=e=>{var t,n;let{classId:a,className:i}=e;const[o,s]=(0,r.useState)(null),[l,c]=(0,r.useState)(null),[u,d]=(0,r.useState)(!0),[h,m]=(0,r.useState)(""),[p,f]=(0,r.useState)(!1),[g,v]=(0,r.useState)(!1),[y,b]=(0,r.useState)("overview");(0,r.useEffect)(()=>{x()},[a]);const x=async()=>{try{d(!0);const[e,t]=await Promise.all([ta.get("".concat(Oq,"/teacher/classes/").concat(a,"/analytics")),ta.get("".concat(Oq,"/teacher/classes/").concat(a,"/analytics/heatmap"))]);s(e.data),c(t.data)}catch(h){console.error("Error loading analytics:",h),m("Failed to load analytics")}d(!1)};if(u)return(0,ra.jsxs)("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[(0,ra.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),(0,ra.jsx)("p",{className:"text-gray-600",children:"Loading analytics..."})]});if(h||!o)return(0,ra.jsxs)("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[(0,ra.jsx)("p",{className:"text-red-600",children:h||"Failed to load analytics"}),(0,ra.jsx)("button",{onClick:x,className:"mt-4 text-blue-600 hover:underline",children:"Retry"})]});const{summary:w,students:k,topics_to_reteach:j,assessments:S}=o;return(0,ra.jsxs)("div",{className:"space-y-6",children:[(0,ra.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ra.jsxs)("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[(0,ra.jsx)("button",{onClick:()=>b("overview"),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors ".concat("overview"===y?"bg-white text-blue-600 shadow":"text-gray-600 hover:text-gray-900"),"data-testid":"overview-tab",children:"Overview"}),(0,ra.jsx)("button",{onClick:()=>b("heatmap"),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors ".concat("heatmap"===y?"bg-white text-blue-600 shadow":"text-gray-600 hover:text-gray-900"),"data-testid":"heatmap-tab",children:"Performance Heatmap"})]}),(0,ra.jsxs)("div",{className:"flex gap-3",children:[(0,ra.jsxs)("button",{onClick:async()=>{f(!0);try{const e=await ta.get("".concat(Oq,"/teacher/classes/").concat(a,"/analytics/export-csv"),{responseType:"blob"}),t=window.URL.createObjectURL(new Blob([e.data])),r=document.createElement("a");r.href=t,r.setAttribute("download","Class_Analytics_".concat(i.replace(/\s+/g,"_"),".csv")),document.body.appendChild(r),r.click(),r.remove()}catch(h){console.error("Error exporting CSV:",h),alert("Failed to export CSV")}f(!1)},disabled:p,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 disabled:opacity-50 flex items-center gap-2","data-testid":"export-csv-btn",children:[(0,ra.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),p?"Exporting...":"Export CSV"]}),(0,ra.jsxs)("button",{onClick:async()=>{v(!0);try{const e=await ta.get("".concat(Oq,"/teacher/classes/").concat(a,"/analytics/export-pdf"),{responseType:"blob"}),t=window.URL.createObjectURL(new Blob([e.data])),r=document.createElement("a");r.href=t,r.setAttribute("download","Class_Analytics_".concat(i.replace(/\s+/g,"_"),".pdf")),document.body.appendChild(r),r.click(),r.remove()}catch(h){console.error("Error exporting PDF:",h),alert("Failed to export PDF")}v(!1)},disabled:g,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 disabled:opacity-50 flex items-center gap-2","data-testid":"export-pdf-btn",children:[(0,ra.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),g?"Generating...":"Export PDF"]})]})]}),"heatmap"===y&&l&&(0,ra.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,ra.jsxs)("div",{className:"p-4 border-b bg-gradient-to-r from-blue-50 to-indigo-50",children:[(0,ra.jsxs)("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[(0,ra.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Performance Heatmap"]}),(0,ra.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Students \xd7 Assessments - hover for details"})]}),(0,ra.jsxs)("div",{className:"px-4 py-2 bg-gray-50 border-b flex items-center gap-4 text-xs",children:[(0,ra.jsx)("span",{className:"text-gray-600",children:"Score Legend:"}),(0,ra.jsxs)("div",{className:"flex items-center gap-1",children:[(0,ra.jsx)("div",{className:"w-4 h-4 rounded bg-green-500"}),(0,ra.jsx)("span",{children:"70%+"})]}),(0,ra.jsxs)("div",{className:"flex items-center gap-1",children:[(0,ra.jsx)("div",{className:"w-4 h-4 rounded bg-yellow-400"}),(0,ra.jsx)("span",{children:"50-69%"})]}),(0,ra.jsxs)("div",{className:"flex items-center gap-1",children:[(0,ra.jsx)("div",{className:"w-4 h-4 rounded bg-orange-500"}),(0,ra.jsx)("span",{children:"30-49%"})]}),(0,ra.jsxs)("div",{className:"flex items-center gap-1",children:[(0,ra.jsx)("div",{className:"w-4 h-4 rounded bg-red-500"}),(0,ra.jsx)("span",{children:"<30%"})]}),(0,ra.jsxs)("div",{className:"flex items-center gap-1",children:[(0,ra.jsx)("div",{className:"w-4 h-4 rounded bg-gray-200"}),(0,ra.jsx)("span",{children:"No data"})]})]}),(null===(t=l.matrix)||void 0===t?void 0:t.length)>0?(0,ra.jsx)("div",{className:"overflow-x-auto",children:(0,ra.jsxs)("table",{className:"w-full",children:[(0,ra.jsx)("thead",{children:(0,ra.jsxs)("tr",{className:"bg-gray-50",children:[(0,ra.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase sticky left-0 bg-gray-50 z-10 min-w-[180px]",children:"Student"}),null===(n=l.assessments)||void 0===n?void 0:n.map((e,t)=>(0,ra.jsxs)("th",{className:"px-2 py-3 text-center text-xs font-medium text-gray-500 uppercase min-w-[80px]",title:"".concat(e.subject," - ").concat(e.topic||"N/A"),children:[(0,ra.jsx)("div",{className:"truncate max-w-[80px]",children:e.subject}),(0,ra.jsx)("div",{className:"text-[10px] text-gray-400 font-normal",children:e.join_code})]},t)),(0,ra.jsx)("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 uppercase bg-blue-50 sticky right-0 z-10",children:"Avg"})]})}),(0,ra.jsx)("tbody",{className:"divide-y divide-gray-100",children:l.matrix.map((e,t)=>{var r;return(0,ra.jsxs)("tr",{className:t%2===0?"bg-white":"bg-gray-50",children:[(0,ra.jsx)("td",{className:"px-4 py-2 sticky left-0 bg-inherit z-10",children:(0,ra.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ra.jsx)("span",{className:"font-medium text-gray-900 text-sm",children:e.preferred_name||e.student_name}),e.sen_flag&&(0,ra.jsx)("span",{className:"px-1 py-0.5 bg-purple-100 text-purple-700 text-[10px] rounded",children:"SEN"}),e.pupil_premium_flag&&(0,ra.jsx)("span",{className:"px-1 py-0.5 bg-blue-100 text-blue-700 text-[10px] rounded",children:"PP"})]})}),null===(r=e.scores)||void 0===r?void 0:r.map((e,t)=>{return(0,ra.jsx)("td",{className:"px-1 py-1 text-center",title:null!==e.percentage?"".concat(e.score,"/").concat(e.max_marks," (").concat(e.percentage,"%)"):"No submission",children:(0,ra.jsx)("div",{className:"w-full h-8 rounded flex items-center justify-center text-xs font-medium cursor-default transition-transform hover:scale-105 ".concat((r=e.percentage,null===r?"bg-gray-100":r>=70?"bg-green-500 text-white":r>=50?"bg-yellow-400 text-gray-900":r>=30?"bg-orange-500 text-white":"bg-red-500 text-white")),children:null!==e.percentage?"".concat(Math.round(e.percentage),"%"):"-"})},t);var r}),(0,ra.jsx)("td",{className:"px-2 py-1 text-center sticky right-0 bg-blue-50 z-10",children:(0,ra.jsx)("span",{className:"text-sm font-bold ".concat(null===e.average?"text-gray-400":e.average>=70?"text-green-600":e.average>=50?"text-amber-600":"text-red-600"),children:null!==e.average?"".concat(e.average,"%"):"-"})})]},t)})})]})}):(0,ra.jsxs)("div",{className:"p-8 text-center text-gray-500",children:[(0,ra.jsx)("p",{children:"No assessment data available for heatmap."}),(0,ra.jsx)("p",{className:"text-sm mt-2",children:"Link assessments to this class to see performance data."})]})]}),"overview"===y&&(0,ra.jsxs)(ra.Fragment,{children:[(0,ra.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,ra.jsxs)("div",{className:"bg-white rounded-lg shadow p-4 text-center",children:[(0,ra.jsxs)("p",{className:"text-3xl font-bold text-blue-600",children:[w.class_average||0,"%"]}),(0,ra.jsx)("p",{className:"text-sm text-gray-600",children:"Class Average"})]}),(0,ra.jsxs)("div",{className:"bg-white rounded-lg shadow p-4 text-center",children:[(0,ra.jsx)("p",{className:"text-3xl font-bold text-green-600",children:w.improving_count}),(0,ra.jsx)("p",{className:"text-sm text-gray-600",children:"Improving"})]}),(0,ra.jsxs)("div",{className:"bg-white rounded-lg shadow p-4 text-center",children:[(0,ra.jsx)("p",{className:"text-3xl font-bold text-red-600",children:w.students_needing_support}),(0,ra.jsx)("p",{className:"text-sm text-gray-600",children:"Need Support"})]}),(0,ra.jsxs)("div",{className:"bg-white rounded-lg shadow p-4 text-center",children:[(0,ra.jsx)("p",{className:"text-3xl font-bold text-amber-600",children:w.declining_count}),(0,ra.jsx)("p",{className:"text-sm text-gray-600",children:"Declining"})]})]}),k.needing_support.length>0&&(0,ra.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[(0,ra.jsxs)("h3",{className:"font-semibold text-red-800 mb-4 flex items-center gap-2",children:[(0,ra.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Students Needing Support (",k.needing_support.length,")"]}),(0,ra.jsx)("div",{className:"space-y-3",children:k.needing_support.map((e,t)=>(0,ra.jsxs)("div",{className:"bg-white rounded-lg p-4 flex justify-between items-center",children:[(0,ra.jsxs)("div",{children:[(0,ra.jsx)("p",{className:"font-medium text-gray-900",children:e.student_name}),(0,ra.jsx)("p",{className:"text-sm text-red-600",children:e.support_reasons.join(", ")})]}),(0,ra.jsxs)("div",{className:"text-right",children:[(0,ra.jsxs)("p",{className:"text-lg font-bold text-red-600",children:[e.average_score||0,"%"]}),(0,ra.jsxs)("p",{className:"text-xs text-gray-500",children:[e.marked_attempts," assessments"]})]})]},t))})]}),j.length>0&&(0,ra.jsxs)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-6",children:[(0,ra.jsxs)("h3",{className:"font-semibold text-amber-800 mb-4 flex items-center gap-2",children:[(0,ra.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),"Topics to Reteach (",j.length,")"]}),(0,ra.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:j.map((e,t)=>(0,ra.jsxs)("div",{className:"bg-white rounded-lg p-4",children:[(0,ra.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,ra.jsx)("p",{className:"font-medium text-gray-900",children:e.topic}),(0,ra.jsxs)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat(e.average_percentage<40?"bg-red-100 text-red-700":"bg-amber-100 text-amber-700"),children:[e.average_percentage,"%"]})]}),(0,ra.jsxs)("p",{className:"text-sm text-gray-600",children:[e.attempts," attempts"]}),e.struggling_students.length>0&&(0,ra.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["Struggling: ",e.struggling_students.slice(0,3).join(", "),e.struggling_students.length>3&&" +".concat(e.struggling_students.length-3," more")]})]},t))})]}),(0,ra.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,ra.jsx)("div",{className:"p-4 border-b",children:(0,ra.jsx)("h3",{className:"font-semibold text-gray-900",children:"All Students Performance"})}),(0,ra.jsx)("div",{className:"overflow-x-auto",children:(0,ra.jsxs)("table",{className:"w-full",children:[(0,ra.jsx)("thead",{className:"bg-gray-50",children:(0,ra.jsxs)("tr",{children:[(0,ra.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Student"}),(0,ra.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Assessments"}),(0,ra.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Average"}),(0,ra.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Trend"}),(0,ra.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),(0,ra.jsx)("tbody",{className:"divide-y divide-gray-200",children:k.all.map((e,t)=>(0,ra.jsxs)("tr",{className:e.needs_support?"bg-red-50":"",children:[(0,ra.jsx)("td",{className:"px-4 py-3",children:(0,ra.jsxs)("div",{children:[(0,ra.jsx)("p",{className:"font-medium text-gray-900",children:e.student_name}),(0,ra.jsxs)("div",{className:"flex gap-1 mt-1",children:[e.sen_flag&&(0,ra.jsx)("span",{className:"px-1.5 py-0.5 bg-purple-100 text-purple-700 text-xs rounded",children:"SEN"}),e.pupil_premium_flag&&(0,ra.jsx)("span",{className:"px-1.5 py-0.5 bg-blue-100 text-blue-700 text-xs rounded",children:"PP"})]})]})}),(0,ra.jsx)("td",{className:"px-4 py-3 text-center text-gray-600",children:e.marked_attempts}),(0,ra.jsx)("td",{className:"px-4 py-3 text-center",children:null!==e.average_score?(0,ra.jsxs)("span",{className:"font-medium ".concat(e.average_score>=70?"text-green-600":e.average_score>=50?"text-amber-600":"text-red-600"),children:[e.average_score,"%"]}):(0,ra.jsx)("span",{className:"text-gray-400",children:"N/A"})}),(0,ra.jsxs)("td",{className:"px-4 py-3 text-center",children:["improving"===e.trend&&(0,ra.jsxs)("span",{className:"text-green-600 flex items-center justify-center gap-1",children:[(0,ra.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 10l7-7m0 0l7 7m-7-7v18"})}),"Improving"]}),"declining"===e.trend&&(0,ra.jsxs)("span",{className:"text-red-600 flex items-center justify-center gap-1",children:[(0,ra.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 14l-7 7m0 0l-7-7m7 7V3"})}),"Declining"]}),"stable"===e.trend&&(0,ra.jsx)("span",{className:"text-gray-500",children:"Stable"}),"no_data"===e.trend&&(0,ra.jsx)("span",{className:"text-gray-400",children:"-"})]}),(0,ra.jsx)("td",{className:"px-4 py-3 text-center",children:e.needs_support?(0,ra.jsx)("span",{className:"px-2 py-1 bg-red-100 text-red-700 text-xs rounded-full",children:"Needs Support"}):e.marked_attempts>0?(0,ra.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs rounded-full",children:"On Track"}):(0,ra.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-500 text-xs rounded-full",children:"No Data"})})]},t))})]})})]}),S.length>0&&(0,ra.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,ra.jsx)("div",{className:"p-4 border-b",children:(0,ra.jsx)("h3",{className:"font-semibold text-gray-900",children:"Recent Assessments"})}),(0,ra.jsx)("div",{className:"divide-y",children:S.slice(0,5).map((e,t)=>(0,ra.jsxs)("div",{className:"p-4 flex justify-between items-center",children:[(0,ra.jsxs)("div",{children:[(0,ra.jsx)("p",{className:"font-medium text-gray-900",children:e.subject}),e.topic&&(0,ra.jsx)("p",{className:"text-sm text-gray-500",children:e.topic}),(0,ra.jsxs)("p",{className:"text-xs text-gray-400",children:[e.marked_count,"/",e.total_submissions," marked"]})]}),(0,ra.jsxs)("div",{className:"text-right",children:[(0,ra.jsxs)("p",{className:"text-lg font-bold ".concat(e.average_score>=70?"text-green-600":e.average_score>=50?"text-amber-600":"text-red-600"),children:[e.average_score,"%"]}),(0,ra.jsx)("p",{className:"text-xs text-gray-500",children:"avg score"})]})]},t))})]})]})]})},Dq=e=>{let{classId:t,onClose:n,onAdded:a}=e;const[i,o]=(0,r.useState)({class_id:t,first_name:"",last_name:"",preferred_name:"",student_code:"",email:"",sen_flag:!1,pupil_premium_flag:!1,eal_flag:!1,notes:""}),[s,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)("");return(0,ra.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,ra.jsxs)("div",{className:"bg-white rounded-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[(0,ra.jsxs)("div",{className:"p-6 border-b flex justify-between items-center sticky top-0 bg-white",children:[(0,ra.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Add Student"}),(0,ra.jsx)("button",{onClick:n,className:"text-gray-500 hover:text-gray-700",children:(0,ra.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),(0,ra.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),i.first_name.trim()&&i.last_name.trim()){l(!0),d("");try{await ta.post("".concat(Oq,"/teacher/students"),i),a()}catch(c){var t,r;d((null===(t=c.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||"Failed to add student")}l(!1)}else d("First name and last name are required")},className:"p-6 space-y-4",children:[c&&(0,ra.jsx)("div",{className:"bg-red-50 text-red-700 p-3 rounded-lg text-sm",children:c}),(0,ra.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ra.jsxs)("div",{children:[(0,ra.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["First Name ",(0,ra.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ra.jsx)("input",{type:"text",value:i.first_name,onChange:e=>o(u(u({},i),{},{first_name:e.target.value})),className:"w-full border rounded-lg px-4 py-2","data-testid":"student-first-name"})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Last Name ",(0,ra.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ra.jsx)("input",{type:"text",value:i.last_name,onChange:e=>o(u(u({},i),{},{last_name:e.target.value})),className:"w-full border rounded-lg px-4 py-2","data-testid":"student-last-name"})]})]}),(0,ra.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Preferred Name"}),(0,ra.jsx)("input",{type:"text",value:i.preferred_name,onChange:e=>o(u(u({},i),{},{preferred_name:e.target.value})),className:"w-full border rounded-lg px-4 py-2",placeholder:"Optional"})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Student Code"}),(0,ra.jsx)("input",{type:"text",value:i.student_code,onChange:e=>o(u(u({},i),{},{student_code:e.target.value})),className:"w-full border rounded-lg px-4 py-2",placeholder:"e.g., STU001"})]})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email Address",(0,ra.jsx)("span",{className:"text-gray-400 font-normal ml-1",children:"(for sending reports)"})]}),(0,ra.jsx)("input",{type:"email",value:i.email,onChange:e=>o(u(u({},i),{},{email:e.target.value})),className:"w-full border rounded-lg px-4 py-2",placeholder:"student@school.edu","data-testid":"student-email"})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Flags"}),(0,ra.jsxs)("div",{className:"flex gap-4",children:[(0,ra.jsxs)("label",{className:"flex items-center gap-2",children:[(0,ra.jsx)("input",{type:"checkbox",checked:i.sen_flag,onChange:e=>o(u(u({},i),{},{sen_flag:e.target.checked})),className:"rounded"}),(0,ra.jsx)("span",{className:"text-sm",children:"SEN"})]}),(0,ra.jsxs)("label",{className:"flex items-center gap-2",children:[(0,ra.jsx)("input",{type:"checkbox",checked:i.pupil_premium_flag,onChange:e=>o(u(u({},i),{},{pupil_premium_flag:e.target.checked})),className:"rounded"}),(0,ra.jsx)("span",{className:"text-sm",children:"Pupil Premium"})]}),(0,ra.jsxs)("label",{className:"flex items-center gap-2",children:[(0,ra.jsx)("input",{type:"checkbox",checked:i.eal_flag,onChange:e=>o(u(u({},i),{},{eal_flag:e.target.checked})),className:"rounded"}),(0,ra.jsx)("span",{className:"text-sm",children:"EAL"})]})]})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),(0,ra.jsx)("textarea",{value:i.notes,onChange:e=>o(u(u({},i),{},{notes:e.target.value})),className:"w-full border rounded-lg px-4 py-2",rows:"2",placeholder:"Optional notes about the student"})]}),(0,ra.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,ra.jsx)("button",{type:"button",onClick:n,className:"flex-1 bg-gray-100 text-gray-700 py-2 rounded-lg hover:bg-gray-200",children:"Cancel"}),(0,ra.jsx)("button",{type:"submit",disabled:s,className:"flex-1 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50","data-testid":"save-student-btn",children:s?"Adding...":"Add Student"})]})]})]})})},Lq=e=>{let{classData:t,onClose:n,onUpdated:a}=e;const[i,o]=(0,r.useState)({class_name:t.class_name||"",subject:t.subject||"",year_group:t.year_group||""}),[s,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)("");return(0,ra.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,ra.jsxs)("div",{className:"bg-white rounded-xl max-w-md w-full",children:[(0,ra.jsxs)("div",{className:"p-6 border-b flex justify-between items-center",children:[(0,ra.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Edit Class"}),(0,ra.jsx)("button",{onClick:n,className:"text-gray-500 hover:text-gray-700",children:(0,ra.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),(0,ra.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),i.class_name.trim()){l(!0),d("");try{await ta.put("".concat(Oq,"/teacher/classes/").concat(t.id),i),a()}catch(c){var r,n;d((null===(r=c.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.detail)||"Failed to update class")}l(!1)}else d("Class name is required")},className:"p-6 space-y-4",children:[c&&(0,ra.jsx)("div",{className:"bg-red-50 text-red-700 p-3 rounded-lg text-sm",children:c}),(0,ra.jsxs)("div",{children:[(0,ra.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Class Name ",(0,ra.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ra.jsx)("input",{type:"text",value:i.class_name,onChange:e=>o(u(u({},i),{},{class_name:e.target.value})),className:"w-full border rounded-lg px-4 py-2"})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject"}),(0,ra.jsx)("input",{type:"text",value:i.subject,onChange:e=>o(u(u({},i),{},{subject:e.target.value})),className:"w-full border rounded-lg px-4 py-2"})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Year Group"}),(0,ra.jsx)("input",{type:"text",value:i.year_group,onChange:e=>o(u(u({},i),{},{year_group:e.target.value})),className:"w-full border rounded-lg px-4 py-2"})]}),(0,ra.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,ra.jsx)("button",{type:"button",onClick:n,className:"flex-1 bg-gray-100 text-gray-700 py-2 rounded-lg hover:bg-gray-200",children:"Cancel"}),(0,ra.jsx)("button",{type:"submit",disabled:s,className:"flex-1 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:s?"Saving...":"Save Changes"})]})]})]})})},zq={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_BACKEND_URL+"/api",qq=e=>{let{user:t}=e;const{classId:n}=Se(),a=je(),i=(0,r.useRef)(null),[o,s]=(0,r.useState)("upload"),[l,c]=(0,r.useState)(""),[u,d]=(0,r.useState)(""),[h,m]=(0,r.useState)(null),[p,f]=(0,r.useState)(null),[g,v]=(0,r.useState)(!1),[y,b]=(0,r.useState)(""),x=(e,t)=>{if(!t)return(0,ra.jsx)("span",{className:"bg-red-100 text-red-700 px-2 py-1 rounded text-xs",children:"Skip (Error)"});switch(e){case"create":return(0,ra.jsx)("span",{className:"bg-green-100 text-green-700 px-2 py-1 rounded text-xs",children:"Create"});case"update":return(0,ra.jsx)("span",{className:"bg-blue-100 text-blue-700 px-2 py-1 rounded text-xs",children:"Update"});case"skip":return(0,ra.jsx)("span",{className:"bg-gray-100 text-gray-700 px-2 py-1 rounded text-xs",children:"Skip"});default:return null}};return(0,ra.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,ra.jsx)("nav",{className:"bg-white shadow-sm border-b",children:(0,ra.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-4 flex justify-between items-center",children:[(0,ra.jsxs)("div",{className:"flex items-center gap-6",children:[(0,ra.jsx)("h1",{className:"text-2xl font-bold text-blue-600",children:"BlueAI"}),(0,ra.jsxs)("button",{onClick:()=>a(n?"/teacher/classes/".concat(n):"/teacher/classes"),className:"text-gray-700 hover:text-blue-600",children:["\u2190 Back to ",n?"Class":"Classes"]})]}),(0,ra.jsx)("span",{className:"text-gray-700",children:t.name})]})}),(0,ra.jsxs)("div",{className:"max-w-4xl mx-auto px-6 py-8",children:[(0,ra.jsxs)("div",{className:"mb-8",children:[(0,ra.jsx)("h2",{className:"text-3xl font-bold text-gray-900","data-testid":"import-title",children:"Import Students from CSV"}),(0,ra.jsx)("p",{className:"text-gray-600 mt-2",children:"Upload a CSV file to bulk import students into your classes"})]}),(0,ra.jsxs)("div",{className:"flex items-center justify-center mb-8",children:[(0,ra.jsxs)("div",{className:"flex items-center ".concat("upload"===o?"text-blue-600":"text-gray-400"),children:[(0,ra.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center font-medium ".concat("upload"===o?"bg-blue-600 text-white":"upload"!==o?"bg-green-500 text-white":"bg-gray-200"),children:"upload"!==o?"\u2713":"1"}),(0,ra.jsx)("span",{className:"ml-2 font-medium",children:"Upload"})]}),(0,ra.jsx)("div",{className:"w-16 h-1 bg-gray-200 mx-2"}),(0,ra.jsxs)("div",{className:"flex items-center ".concat("preview"===o?"text-blue-600":"text-gray-400"),children:[(0,ra.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center font-medium ".concat("preview"===o?"bg-blue-600 text-white":["importing","complete"].includes(o)?"bg-green-500 text-white":"bg-gray-200"),children:["importing","complete"].includes(o)?"\u2713":"2"}),(0,ra.jsx)("span",{className:"ml-2 font-medium",children:"Preview"})]}),(0,ra.jsx)("div",{className:"w-16 h-1 bg-gray-200 mx-2"}),(0,ra.jsxs)("div",{className:"flex items-center ".concat("complete"===o?"text-green-600":"text-gray-400"),children:[(0,ra.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center font-medium ".concat("complete"===o?"bg-green-500 text-white":"bg-gray-200"),children:"complete"===o?"\u2713":"3"}),(0,ra.jsx)("span",{className:"ml-2 font-medium",children:"Complete"})]})]}),y&&(0,ra.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 p-4 rounded-lg mb-6",children:y}),"upload"===o&&(0,ra.jsxs)("div",{className:"bg-white rounded-lg shadow p-8",children:[(0,ra.jsxs)("div",{className:"text-center mb-8",children:[(0,ra.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,ra.jsx)("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),(0,ra.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Upload CSV File"}),(0,ra.jsx)("p",{className:"text-gray-600 mb-4",children:"Select a CSV file with your student data. Classes will be created automatically if they don't exist."}),(0,ra.jsx)("button",{onClick:async()=>{try{const e=await ta.get("".concat(zq,"/teacher/students/csv-template"),{responseType:"blob"}),t=window.URL.createObjectURL(new Blob([e.data])),r=document.createElement("a");r.href=t,r.setAttribute("download","student_import_template.csv"),document.body.appendChild(r),r.click(),r.remove()}catch(y){console.error("Error downloading template:",y)}},className:"text-blue-600 hover:text-blue-700 underline text-sm mb-6 inline-block","data-testid":"download-template-btn",children:"Download CSV Template"})]}),(0,ra.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-blue-400 transition-colors cursor-pointer",onClick:()=>{var e;return null===(e=i.current)||void 0===e?void 0:e.click()},children:[(0,ra.jsx)("input",{type:"file",ref:i,onChange:e=>{const t=e.target.files[0];if(!t)return;if(!t.name.endsWith(".csv"))return void b("Please select a CSV file");d(t.name),b("");const r=new FileReader;r.onload=e=>{c(e.target.result)},r.readAsText(t)},accept:".csv",className:"hidden","data-testid":"csv-file-input"}),u?(0,ra.jsxs)("div",{children:[(0,ra.jsx)("svg",{className:"w-12 h-12 text-green-500 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,ra.jsx)("p",{className:"text-gray-900 font-medium",children:u}),(0,ra.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Click to select a different file"})]}):(0,ra.jsxs)("div",{children:[(0,ra.jsx)("svg",{className:"w-12 h-12 text-gray-400 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,ra.jsx)("p",{className:"text-gray-600",children:"Click to select a CSV file"}),(0,ra.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"or drag and drop"})]})]}),(0,ra.jsxs)("div",{className:"mt-6 bg-gray-50 rounded-lg p-4",children:[(0,ra.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Required CSV Columns:"}),(0,ra.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,ra.jsxs)("div",{children:[(0,ra.jsx)("span",{className:"text-red-500",children:"*"})," class_name"]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("span",{className:"text-red-500",children:"*"})," first_name"]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("span",{className:"text-red-500",children:"*"})," last_name"]}),(0,ra.jsx)("div",{children:"preferred_name (optional)"}),(0,ra.jsx)("div",{children:"student_code (optional)"}),(0,ra.jsx)("div",{children:"sen_flag (TRUE/FALSE)"}),(0,ra.jsx)("div",{children:"pupil_premium_flag (TRUE/FALSE)"}),(0,ra.jsx)("div",{children:"eal_flag (TRUE/FALSE)"})]})]}),(0,ra.jsx)("div",{className:"mt-6 flex justify-end",children:(0,ra.jsx)("button",{onClick:async()=>{if(l){v(!0),b("");try{const e=await ta.post("".concat(zq,"/teacher/students/csv-preview"),{csv_content:l});m(e.data),s("preview")}catch(y){var e,t;b((null===(e=y.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||"Failed to preview CSV")}v(!1)}else b("Please select a CSV file first")},disabled:!l||g,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed","data-testid":"preview-btn",children:g?"Processing...":"Preview Import"})})]}),"preview"===o&&h&&(0,ra.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,ra.jsxs)("div",{className:"p-6 border-b",children:[(0,ra.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Preview Import"}),(0,ra.jsx)("p",{className:"text-gray-600 mt-1",children:"Review the changes before importing"})]}),(0,ra.jsxs)("div",{className:"p-6 bg-gray-50 border-b",children:[(0,ra.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,ra.jsxs)("div",{className:"bg-white rounded-lg p-4 text-center shadow-sm",children:[(0,ra.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:h.total_rows}),(0,ra.jsx)("p",{className:"text-sm text-gray-600",children:"Total Rows"})]}),(0,ra.jsxs)("div",{className:"bg-white rounded-lg p-4 text-center shadow-sm",children:[(0,ra.jsx)("p",{className:"text-3xl font-bold text-green-600",children:h.summary.will_create}),(0,ra.jsx)("p",{className:"text-sm text-green-600",children:"Will Create"})]}),(0,ra.jsxs)("div",{className:"bg-white rounded-lg p-4 text-center shadow-sm",children:[(0,ra.jsx)("p",{className:"text-3xl font-bold text-blue-600",children:h.summary.will_update}),(0,ra.jsx)("p",{className:"text-sm text-blue-600",children:"Will Update"})]}),(0,ra.jsxs)("div",{className:"bg-white rounded-lg p-4 text-center shadow-sm",children:[(0,ra.jsx)("p",{className:"text-3xl font-bold text-red-600",children:h.summary.will_skip}),(0,ra.jsx)("p",{className:"text-sm text-red-600",children:"Will Skip"})]})]}),h.summary.new_classes.length>0&&(0,ra.jsx)("div",{className:"mt-4 bg-amber-50 border border-amber-200 rounded-lg p-3",children:(0,ra.jsxs)("p",{className:"text-amber-800 text-sm",children:[(0,ra.jsx)("strong",{children:"New classes will be created:"})," ",h.summary.new_classes.join(", ")]})})]}),(0,ra.jsx)("div",{className:"overflow-x-auto max-h-96 overflow-y-auto",children:(0,ra.jsxs)("table",{className:"min-w-full",children:[(0,ra.jsx)("thead",{className:"bg-gray-50 sticky top-0",children:(0,ra.jsxs)("tr",{children:[(0,ra.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Row"}),(0,ra.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Action"}),(0,ra.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Class"}),(0,ra.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),(0,ra.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Code"}),(0,ra.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Flags"}),(0,ra.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Notes"})]})}),(0,ra.jsx)("tbody",{className:"divide-y",children:h.preview.map((e,t)=>(0,ra.jsxs)("tr",{className:"".concat(e.valid?"update"===e.action?"bg-blue-50":"":"bg-red-50"),children:[(0,ra.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.row_num}),(0,ra.jsx)("td",{className:"px-4 py-3",children:x(e.action,e.valid)}),(0,ra.jsx)("td",{className:"px-4 py-3 text-sm",children:e.class_name}),(0,ra.jsx)("td",{className:"px-4 py-3",children:(0,ra.jsxs)("div",{children:[(0,ra.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:[e.first_name," ",e.last_name]}),e.preferred_name&&(0,ra.jsxs)("p",{className:"text-xs text-gray-500",children:["(",e.preferred_name,")"]})]})}),(0,ra.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.student_code||"-"}),(0,ra.jsx)("td",{className:"px-4 py-3",children:(0,ra.jsxs)("div",{className:"flex gap-1",children:[e.sen_flag&&(0,ra.jsx)("span",{className:"bg-purple-100 text-purple-700 px-1 py-0.5 rounded text-xs",children:"SEN"}),e.pupil_premium_flag&&(0,ra.jsx)("span",{className:"bg-amber-100 text-amber-700 px-1 py-0.5 rounded text-xs",children:"PP"}),e.eal_flag&&(0,ra.jsx)("span",{className:"bg-blue-100 text-blue-700 px-1 py-0.5 rounded text-xs",children:"EAL"})]})}),(0,ra.jsx)("td",{className:"px-4 py-3 text-xs text-gray-500",children:e.reason})]},t))})]})}),(0,ra.jsxs)("div",{className:"p-6 border-t flex justify-between",children:[(0,ra.jsx)("button",{onClick:()=>{s("upload"),m(null)},className:"bg-gray-100 text-gray-700 px-6 py-2 rounded-lg hover:bg-gray-200",children:"\u2190 Back to Upload"}),(0,ra.jsx)("button",{onClick:async()=>{if(h){s("importing"),v(!0),b("");try{const e=await ta.post("".concat(zq,"/teacher/students/csv-import"),{rows:h.preview});f(e.data),s("complete")}catch(y){var e,t;b((null===(e=y.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||"Import failed"),s("preview")}v(!1)}},disabled:g||h.summary.will_create+h.summary.will_update===0,className:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed","data-testid":"confirm-import-btn",children:g?"Importing...":"Import ".concat(h.summary.will_create+h.summary.will_update," Students")})]})]}),"importing"===o&&(0,ra.jsxs)("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[(0,ra.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"}),(0,ra.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Importing Students..."}),(0,ra.jsx)("p",{className:"text-gray-600 mt-2",children:"Please wait while we process your data"})]}),"complete"===o&&p&&(0,ra.jsxs)("div",{className:"bg-white rounded-lg shadow p-8",children:[(0,ra.jsxs)("div",{className:"text-center mb-8",children:[(0,ra.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,ra.jsx)("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,ra.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:"Import Complete!"}),(0,ra.jsx)("p",{className:"text-gray-600 mt-2",children:p.message})]}),(0,ra.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[(0,ra.jsxs)("div",{className:"bg-green-50 rounded-lg p-6 text-center",children:[(0,ra.jsx)("p",{className:"text-4xl font-bold text-green-600",children:p.summary.created}),(0,ra.jsx)("p",{className:"text-green-600 font-medium",children:"Students Created"})]}),(0,ra.jsxs)("div",{className:"bg-blue-50 rounded-lg p-6 text-center",children:[(0,ra.jsx)("p",{className:"text-4xl font-bold text-blue-600",children:p.summary.updated}),(0,ra.jsx)("p",{className:"text-blue-600 font-medium",children:"Students Updated"})]}),(0,ra.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 text-center",children:[(0,ra.jsx)("p",{className:"text-4xl font-bold text-gray-600",children:p.summary.skipped}),(0,ra.jsx)("p",{className:"text-gray-600 font-medium",children:"Rows Skipped"})]})]}),p.summary.classes_created.length>0&&(0,ra.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 mb-6",children:(0,ra.jsxs)("p",{className:"text-amber-800",children:[(0,ra.jsx)("strong",{children:"New classes created:"})," ",p.summary.classes_created.join(", ")]})}),p.errors.length>0&&(0,ra.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:[(0,ra.jsxs)("h4",{className:"font-medium text-red-800 mb-2",children:["Errors (",p.errors.length,")"]}),(0,ra.jsxs)("ul",{className:"text-sm text-red-700 list-disc list-inside",children:[p.errors.slice(0,5).map((e,t)=>(0,ra.jsxs)("li",{children:["Row ",e.row,": ",e.error]},t)),p.errors.length>5&&(0,ra.jsxs)("li",{children:["...and ",p.errors.length-5," more errors"]})]})]}),(0,ra.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,ra.jsx)("button",{onClick:()=>a("/teacher/classes"),className:"bg-gray-100 text-gray-700 px-6 py-2 rounded-lg hover:bg-gray-200",children:"View All Classes"}),(0,ra.jsx)("button",{onClick:()=>{s("upload"),c(""),d(""),m(null),f(null)},className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700",children:"Import More Students"})]})]})]})]})},Bq=window.location.origin;function Fq(e){let{user:t}=e;const n=je(),[a,i]=(0,r.useState)([]),[o,s]=(0,r.useState)(""),[l,c]=(0,r.useState)(""),[u,d]=(0,r.useState)(""),[h,m]=(0,r.useState)([]),[p,f]=(0,r.useState)(!1),[g,v]=(0,r.useState)(""),[y,b]=(0,r.useState)(0);(0,r.useEffect)(()=>{x()},[]);const x=async()=>{try{const e=await fetch("".concat(Bq,"/api/teacher/assessments"),{credentials:"include"});if(e.ok){const t=await e.json();i(t)}}catch(e){console.error("Failed to fetch assessments:",e)}};return(0,ra.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50",children:[(0,ra.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,ra.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,ra.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ra.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,ra.jsx)("button",{onClick:()=>n("/teacher/dashboard"),className:"text-gray-600 hover:text-gray-900 transition-colors",children:"\u2190 Back to Dashboard"}),(0,ra.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Upload Student Script (OCR)"})]}),(0,ra.jsxs)("div",{className:"text-sm text-gray-500",children:["Logged in as ",(0,ra.jsx)("span",{className:"font-medium text-gray-900",children:t.name})]})]})})}),(0,ra.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,ra.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[(0,ra.jsxs)("div",{className:"mb-6",children:[(0,ra.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Upload Handwritten Script"}),(0,ra.jsx)("p",{className:"text-gray-600",children:"Upload a PDF or multiple images of a student's handwritten answer for OCR processing and AI marking."})]}),g&&(0,ra.jsx)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,ra.jsx)("p",{className:"text-red-700",children:g})}),(0,ra.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),o&&l&&0!==h.length){f(!0),v(""),b(10);try{const e=await fetch("".concat(Bq,"/api/ocr/submissions"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({assessment_id:o,student_name:l,batch_label:u||null})});if(!e.ok)throw new Error("Failed to create submission");const{submission_id:t}=await e.json();b(30);const r=new FormData;h.forEach(e=>{r.append("files",e)});if(!(await fetch("".concat(Bq,"/api/ocr/submissions/").concat(t,"/upload"),{method:"POST",credentials:"include",body:r})).ok)throw new Error("Failed to upload files");b(60);if(!(await fetch("".concat(Bq,"/api/ocr/submissions/").concat(t,"/process"),{method:"POST",credentials:"include"})).ok)throw new Error("Failed to process OCR");b(100),setTimeout(()=>{n("/teacher/ocr-review/".concat(t))},500)}catch(t){v(t.message||"Upload failed. Please try again."),b(0)}finally{f(!1)}}else v("Please fill all required fields and select files")},className:"space-y-6",children:[(0,ra.jsxs)("div",{children:[(0,ra.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Select Assessment ",(0,ra.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ra.jsxs)("select",{value:o,onChange:e=>s(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,disabled:p,children:[(0,ra.jsx)("option",{value:"",children:"Choose an assessment..."}),a.map(e=>(0,ra.jsxs)("option",{value:e.id,children:[e.join_code," - ",e.status]},e.id))]})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Student Name ",(0,ra.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ra.jsx)("input",{type:"text",value:l,onChange:e=>c(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter student's full name",required:!0,disabled:p})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Batch Label (Optional)"}),(0,ra.jsx)("input",{type:"text",value:u,onChange:e=>d(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Class 10A, Morning Session",disabled:p})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Upload Files ",(0,ra.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ra.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-blue-400 transition-colors",children:[(0,ra.jsx)("input",{type:"file",onChange:e=>{const t=Array.from(e.target.files);m(t)},accept:".pdf,.jpg,.jpeg,.png",multiple:!0,className:"hidden",id:"file-upload",disabled:p}),(0,ra.jsx)("label",{htmlFor:"file-upload",className:"cursor-pointer",children:(0,ra.jsxs)("div",{className:"text-gray-600",children:[(0,ra.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,ra.jsxs)("p",{className:"mt-2 text-sm",children:[(0,ra.jsx)("span",{className:"font-medium text-blue-600 hover:text-blue-500",children:"Click to upload"})," or drag and drop"]}),(0,ra.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"PDF or Images (JPG, PNG)"})]})})]}),h.length>0&&(0,ra.jsxs)("div",{className:"mt-4",children:[(0,ra.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Selected Files:"}),(0,ra.jsx)("ul",{className:"space-y-2",children:h.map((e,t)=>(0,ra.jsxs)("li",{className:"flex items-center justify-between bg-gray-50 px-4 py-2 rounded",children:[(0,ra.jsx)("span",{className:"text-sm text-gray-700",children:e.name}),(0,ra.jsxs)("span",{className:"text-xs text-gray-500",children:[(e.size/1024/1024).toFixed(2)," MB"]})]},t))})]})]}),p&&y>0&&(0,ra.jsxs)("div",{children:[(0,ra.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,ra.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Processing..."}),(0,ra.jsxs)("span",{className:"text-sm text-gray-600",children:[y,"%"]})]}),(0,ra.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,ra.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-500",style:{width:"".concat(y,"%")}})})]}),(0,ra.jsxs)("div",{className:"flex space-x-4",children:[(0,ra.jsx)("button",{type:"submit",disabled:p||!o||!l||0===h.length,className:"flex-1 bg-blue-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:p?"Processing...":"Upload & Process OCR"}),(0,ra.jsx)("button",{type:"button",onClick:()=>n("/teacher/dashboard"),disabled:p,className:"px-6 py-3 border border-gray-300 rounded-lg font-semibold text-gray-700 hover:bg-gray-50 disabled:bg-gray-100 disabled:cursor-not-allowed transition-colors",children:"Cancel"})]})]})]})})]})}const Uq=window.location.origin;function Hq(e){var t;let{user:n}=e;const a=je(),{submissionId:i}=Se(),[o,s]=(0,r.useState)(null),[l,c]=(0,r.useState)([]),[d,h]=(0,r.useState)(0),[m,p]=(0,r.useState)(""),[f,g]=(0,r.useState)(!0),[v,y]=(0,r.useState)(!1),[b,x]=(0,r.useState)(""),[w,k]=(0,r.useState)("");(0,r.useEffect)(()=>{j()},[i]),(0,r.useEffect)(()=>{var e;l.length>0&&p((null===(e=l[d])||void 0===e?void 0:e.approved_ocr_text)||"")},[d,l]);const j=async()=>{try{const e=await fetch("".concat(Uq,"/api/ocr/submissions/").concat(i),{credentials:"include"});if(!e.ok)throw new Error("Failed to fetch submission");const t=await e.json();s(t.submission),c(t.pages),t.pages.length>0&&p(t.pages[0].approved_ocr_text||"")}catch(e){x(e.message)}finally{g(!1)}},S=async()=>{y(!0),x(""),k("");try{const e=l[d];if(!(await fetch("".concat(Uq,"/api/ocr/pages/").concat(i,"/").concat(e.page_number),{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({approved_ocr_text:m,is_approved:!0})})).ok)throw new Error("Failed to save page");const t=[...l];t[d]=u(u({},t[d]),{},{approved_ocr_text:m,is_approved:!0}),c(t),k("Page saved successfully!"),setTimeout(()=>k(""),3e3)}catch(e){x(e.message)}finally{y(!1)}};if(f)return(0,ra.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center",children:(0,ra.jsxs)("div",{className:"text-center",children:[(0,ra.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,ra.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading OCR submission..."})]})});if(!o)return(0,ra.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center",children:(0,ra.jsx)("div",{className:"text-center",children:(0,ra.jsx)("p",{className:"text-red-600",children:"Submission not found"})})});const C=l[d];return(0,ra.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50",children:[(0,ra.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,ra.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,ra.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ra.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,ra.jsx)("button",{onClick:()=>a("/teacher/dashboard"),className:"text-gray-600 hover:text-gray-900 transition-colors",children:"\u2190 Back to Dashboard"}),(0,ra.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Review OCR Text"})]}),(0,ra.jsxs)("div",{className:"text-sm text-gray-500",children:["Student: ",(0,ra.jsx)("span",{className:"font-medium text-gray-900",children:o.student_name})]})]})})}),b&&(0,ra.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-4",children:(0,ra.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,ra.jsx)("p",{className:"text-red-700",children:b})})}),w&&(0,ra.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-4",children:(0,ra.jsx)("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:(0,ra.jsx)("p",{className:"text-green-700",children:w})})}),(0,ra.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,ra.jsx)("div",{className:"bg-white rounded-lg shadow-md p-4 mb-6",children:(0,ra.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ra.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,ra.jsx)("button",{onClick:()=>h(Math.max(0,d-1)),disabled:0===d,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"\u2190 Previous"}),(0,ra.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["Page ",d+1," of ",l.length]}),(0,ra.jsx)("button",{onClick:()=>h(Math.min(l.length-1,d+1)),disabled:d===l.length-1,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Next \u2192"})]}),(0,ra.jsx)("div",{className:"flex items-center space-x-2",children:l.map((e,t)=>(0,ra.jsx)("button",{onClick:()=>h(t),className:"w-8 h-8 rounded-full text-xs font-medium transition-colors ".concat(t===d?"bg-blue-600 text-white":e.is_approved?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:t+1},t))})]})}),(0,ra.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,ra.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,ra.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Scanned Image"}),(0,ra.jsx)("div",{className:"border border-gray-300 rounded-lg overflow-hidden bg-gray-50",children:(0,ra.jsx)("div",{className:"aspect-[3/4] flex items-center justify-center",children:(0,ra.jsxs)("div",{className:"text-center text-gray-500",children:[(0,ra.jsx)("svg",{className:"w-16 h-16 mx-auto mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,ra.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,ra.jsx)("p",{className:"text-sm",children:"Image preview not available"}),(0,ra.jsxs)("p",{className:"text-xs mt-1",children:["File: ",null===C||void 0===C||null===(t=C.file_path)||void 0===t?void 0:t.split("/").pop()]})]})})}),(null===C||void 0===C?void 0:C.confidence)&&(0,ra.jsx)("div",{className:"mt-4",children:(0,ra.jsxs)("p",{className:"text-sm text-gray-600",children:["OCR Confidence: ",(0,ra.jsxs)("span",{className:"font-medium",children:[(100*C.confidence).toFixed(1),"%"]})]})})]}),(0,ra.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,ra.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ra.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Extracted Text"}),(null===C||void 0===C?void 0:C.is_approved)&&(0,ra.jsx)("span",{className:"px-3 py-1 bg-green-100 text-green-700 text-xs font-medium rounded-full",children:"\u2713 Approved"})]}),(0,ra.jsx)("textarea",{value:m,onChange:e=>p(e.target.value),className:"w-full h-[500px] p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm",placeholder:"Edit the OCR text here..."}),(0,ra.jsxs)("div",{className:"mt-4 flex space-x-3",children:[(0,ra.jsx)("button",{onClick:S,disabled:v,className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg font-semibold hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:v?"Saving...":"Save & Approve Page"}),(0,ra.jsx)("button",{onClick:async()=>{y(!0),x("");try{if(!(await fetch("".concat(Uq,"/api/ocr/submissions/").concat(i,"/process"),{method:"POST",credentials:"include"})).ok)throw new Error("Failed to re-run OCR");await j(),k("OCR re-processed successfully!"),setTimeout(()=>k(""),3e3)}catch(e){x(e.message)}finally{y(!1)}},disabled:v,className:"px-4 py-2 border border-gray-300 rounded-lg font-semibold text-gray-700 hover:bg-gray-50 disabled:bg-gray-100 disabled:cursor-not-allowed transition-colors",children:"Re-run OCR"})]})]})]}),(0,ra.jsx)("div",{className:"mt-8 bg-white rounded-lg shadow-lg p-6",children:(0,ra.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ra.jsxs)("div",{children:[(0,ra.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Ready to Mark?"}),(0,ra.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Once you're satisfied with all pages, approve and send for AI marking"})]}),(0,ra.jsx)("button",{onClick:async()=>{y(!0),x("");try{await S();if(!(await fetch("".concat(Uq,"/api/ocr/submissions/").concat(i,"/approve"),{method:"POST",credentials:"include"})).ok)throw new Error("Failed to approve submission");if(!(await fetch("".concat(Uq,"/api/ocr/submissions/").concat(i,"/mark"),{method:"POST",credentials:"include"})).ok)throw new Error("Failed to mark submission");a("/teacher/ocr-moderate/".concat(i))}catch(e){x(e.message)}finally{y(!1)}},disabled:v,className:"bg-green-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-green-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:v?"Processing...":"Approve All & Mark"})]})})]})]})}const Wq=window.location.origin;function Kq(e){let{user:t}=e;const n=je(),{submissionId:a}=Se(),[i,o]=(0,r.useState)(null),[s,l]=(0,r.useState)(null),[c,u]=(0,r.useState)(null),[d,h]=(0,r.useState)(null),[m,p]=(0,r.useState)(!0),[f,g]=(0,r.useState)(!1),[v,y]=(0,r.useState)(""),[b,x]=(0,r.useState)(""),[w,k]=(0,r.useState)(0),[j,S]=(0,r.useState)(""),[C,N]=(0,r.useState)(""),[_,A]=(0,r.useState)("");(0,r.useEffect)(()=>{T()},[a]);const T=async()=>{try{const e=await fetch("".concat(Wq,"/api/ocr/submissions/").concat(a),{credentials:"include"});if(!e.ok)throw new Error("Failed to fetch submission");const t=await e.json();o(t.submission);const r=await fetch("".concat(Wq,"/api/ocr/submissions/").concat(a,"/marking"),{credentials:"include"});if(!r.ok)throw new Error("Failed to fetch marking result");const n=await r.json();l(n),k(n.total_score||0),S(n.www||""),N(n.next_steps||""),A(n.overall_feedback||"");const i=await fetch("".concat(Wq,"/api/teacher/assessments"),{credentials:"include"});if(i.ok){const e=(await i.json()).find(e=>e.id===t.submission.assessment_id);if(u(e),e){const t=await fetch("".concat(Wq,"/api/teacher/questions"),{credentials:"include"});if(t.ok){const r=(await t.json()).find(t=>t.id===e.question_id);h(r)}}}}catch(e){y(e.message)}finally{p(!1)}},E=async()=>{g(!0),y(""),x("");try{if(!(await fetch("".concat(Wq,"/api/ocr/submissions/").concat(a,"/moderate"),{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({total_score:w,www:j,next_steps:C,overall_feedback:_})})).ok)throw new Error("Failed to save changes");x("Changes saved successfully!"),setTimeout(()=>x(""),3e3)}catch(e){y(e.message)}finally{g(!1)}};return m?(0,ra.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center",children:(0,ra.jsxs)("div",{className:"text-center",children:[(0,ra.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,ra.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading marking results..."})]})}):i&&s?(0,ra.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50",children:[(0,ra.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,ra.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,ra.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ra.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,ra.jsx)("button",{onClick:()=>n("/teacher/dashboard"),className:"text-gray-600 hover:text-gray-900 transition-colors",children:"\u2190 Back to Dashboard"}),(0,ra.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Moderate AI Marking"})]}),(0,ra.jsxs)("div",{className:"text-sm text-gray-500",children:["Student: ",(0,ra.jsx)("span",{className:"font-medium text-gray-900",children:i.student_name})]})]})})}),v&&(0,ra.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 pt-4",children:(0,ra.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,ra.jsx)("p",{className:"text-red-700",children:v})})}),b&&(0,ra.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 pt-4",children:(0,ra.jsx)("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:(0,ra.jsx)("p",{className:"text-green-700",children:b})})}),(0,ra.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[d&&(0,ra.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[(0,ra.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Assessment Context"}),(0,ra.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,ra.jsxs)("p",{children:[(0,ra.jsx)("span",{className:"font-medium text-gray-700",children:"Subject:"})," ",d.subject]}),(0,ra.jsxs)("p",{children:[(0,ra.jsx)("span",{className:"font-medium text-gray-700",children:"Topic:"})," ",d.topic]}),(0,ra.jsxs)("p",{children:[(0,ra.jsx)("span",{className:"font-medium text-gray-700",children:"Maximum Marks:"})," ",d.max_marks]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("span",{className:"font-medium text-gray-700",children:"Question:"}),(0,ra.jsx)("p",{className:"mt-1 text-gray-600",children:d.question_text})]})]})]}),(0,ra.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6",children:[(0,ra.jsx)("h2",{className:"text-lg font-semibold text-blue-900 mb-3",children:"AI Generated Marks"}),(0,ra.jsxs)("div",{className:"space-y-4",children:[(0,ra.jsxs)("div",{children:[(0,ra.jsx)("p",{className:"text-sm font-medium text-blue-800",children:"Original Score"}),(0,ra.jsxs)("p",{className:"text-2xl font-bold text-blue-900",children:[s.total_score," / ",(null===d||void 0===d?void 0:d.max_marks)||"?"]})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("p",{className:"text-sm font-medium text-blue-800",children:"What Went Well (AI)"}),(0,ra.jsx)("p",{className:"text-sm text-blue-900 bg-white rounded p-3 mt-1",children:s.www})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("p",{className:"text-sm font-medium text-blue-800",children:"Next Steps (AI)"}),(0,ra.jsx)("p",{className:"text-sm text-blue-900 bg-white rounded p-3 mt-1",children:s.next_steps})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("p",{className:"text-sm font-medium text-blue-800",children:"Overall Feedback (AI)"}),(0,ra.jsx)("p",{className:"text-sm text-blue-900 bg-white rounded p-3 mt-1",children:s.overall_feedback})]})]})]}),(0,ra.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[(0,ra.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Your Moderation"}),(0,ra.jsx)("p",{className:"text-sm text-gray-600 mb-6",children:"Review and adjust the AI-generated marks and feedback below:"}),(0,ra.jsxs)("div",{className:"space-y-6",children:[(0,ra.jsxs)("div",{children:[(0,ra.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Final Score ",(0,ra.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ra.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,ra.jsx)("input",{type:"number",min:"0",max:(null===d||void 0===d?void 0:d.max_marks)||100,value:w,onChange:e=>k(parseInt(e.target.value)||0),className:"w-24 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-lg font-semibold"}),(0,ra.jsxs)("span",{className:"text-lg font-medium text-gray-600",children:["/ ",(null===d||void 0===d?void 0:d.max_marks)||"?"]})]})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"What Went Well"}),(0,ra.jsx)("textarea",{value:j,onChange:e=>S(e.target.value),rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Highlight the student's strengths..."})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Next Steps"}),(0,ra.jsx)("textarea",{value:C,onChange:e=>N(e.target.value),rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Suggest areas for improvement..."})]}),(0,ra.jsxs)("div",{children:[(0,ra.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Overall Feedback"}),(0,ra.jsx)("textarea",{value:_,onChange:e=>A(e.target.value),rows:5,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Provide a summary of the student's performance..."})]})]})]}),(0,ra.jsx)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:(0,ra.jsxs)("div",{className:"flex space-x-4",children:[(0,ra.jsx)("button",{onClick:E,disabled:f,className:"flex-1 bg-blue-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:f?"Saving...":"Save Changes"}),(0,ra.jsx)("button",{onClick:async()=>{g(!0),y("");try{await E();const e=await fetch("".concat(Wq,"/api/ocr/submissions/").concat(a,"/finalize"),{method:"POST",credentials:"include"});if(!e.ok)throw new Error("Failed to finalize submission");const t=await e.json();n("/teacher/dashboard",{state:{message:"Submission finalized! PDF generated: ".concat(t.pdf_url)}})}catch(e){y(e.message)}finally{g(!1)}},disabled:f,className:"flex-1 bg-green-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-green-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:f?"Processing...":"Finalize & Generate PDF"}),(0,ra.jsx)("button",{onClick:()=>n("/teacher/dashboard"),disabled:f,className:"px-6 py-3 border border-gray-300 rounded-lg font-semibold text-gray-700 hover:bg-gray-50 disabled:bg-gray-100 disabled:cursor-not-allowed transition-colors",children:"Cancel"})]})})]})]}):(0,ra.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center",children:(0,ra.jsx)("div",{className:"text-center",children:(0,ra.jsx)("p",{className:"text-red-600",children:"Marking results not found"})})})}function Vq(){var e;return null!==(e=xe().hash)&&void 0!==e&&e.includes("session_id=")?(0,ra.jsx)(ia,{}):(0,ra.jsxs)(Ve,{children:[(0,ra.jsx)(We,{path:"/",element:(0,ra.jsx)(na,{})}),(0,ra.jsx)(We,{path:"/join",element:(0,ra.jsx)(ca,{})}),(0,ra.jsx)(We,{path:"/attempt/:attemptId",element:(0,ra.jsx)(bc,{})}),(0,ra.jsx)(We,{path:"/enhanced-attempt/:attemptId",element:(0,ra.jsx)(Fc,{})}),(0,ra.jsx)(We,{path:"/teacher/login",element:(0,ra.jsx)(sa,{})}),(0,ra.jsx)(We,{path:"/teacher/dashboard",element:(0,ra.jsx)(Yc,{children:e=>(0,ra.jsx)(wc,{user:e})})}),(0,ra.jsx)(We,{path:"/teacher/questions",element:(0,ra.jsx)(Yc,{children:e=>(0,ra.jsx)(Ac,{user:e})})}),(0,ra.jsx)(We,{path:"/teacher/assessments",element:(0,ra.jsx)(Yc,{children:e=>(0,ra.jsx)(Xc,{user:e})})}),(0,ra.jsx)(We,{path:"/teacher/assessments/create",element:(0,ra.jsx)(Yc,{children:e=>(0,ra.jsx)(qc,{user:e})})}),(0,ra.jsx)(We,{path:"/teacher/assessments/:assessmentId/edit",element:(0,ra.jsx)(Yc,{children:e=>(0,ra.jsx)(qc,{user:e})})}),(0,ra.jsx)(We,{path:"/teacher/assessments/:assessmentId",element:(0,ra.jsx)(Yc,{children:e=>(0,ra.jsx)(Zc,{user:e})})}),(0,ra.jsx)(We,{path:"/teacher/assessments/:assessmentId/enhanced",element:(0,ra.jsx)(Yc,{children:e=>(0,ra.jsx)(Wc,{user:e})})}),(0,ra.jsx)(We,{path:"/teacher/submissions/:attemptId/enhanced",element:(0,ra.jsx)(Yc,{children:e=>(0,ra.jsx)(Gc,{user:e})})}),(0,ra.jsx)(We,{path:"/teacher/assessments/:assessmentId/security-report",element:(0,ra.jsx)(Yc,{children:e=>(0,ra.jsx)(tu,{user:e})})}),(0,ra.jsx)(We,{path:"/teacher/classes",element:(0,ra.jsx)(Yc,{children:e=>(0,ra.jsx)(Pq,{user:e})})}),(0,ra.jsx)(We,{path:"/teacher/classes/import",element:(0,ra.jsx)(Yc,{children:e=>(0,ra.jsx)(qq,{user:e})})}),(0,ra.jsx)(We,{path:"/teacher/classes/:classId",element:(0,ra.jsx)(Yc,{children:e=>(0,ra.jsx)(Mq,{user:e})})}),(0,ra.jsx)(We,{path:"/teacher/classes/:classId/import",element:(0,ra.jsx)(Yc,{children:e=>(0,ra.jsx)(qq,{user:e})})}),(0,ra.jsx)(We,{path:"/teacher/analytics",element:(0,ra.jsx)(Yc,{children:e=>(0,ra.jsx)(Eq,{user:e})})}),(0,ra.jsx)(We,{path:"/teacher/submissions/:submissionId",element:(0,ra.jsx)(Yc,{children:e=>(0,ra.jsx)(eu,{user:e})})}),(0,ra.jsx)(We,{path:"/teacher/profile",element:(0,ra.jsx)(Yc,{children:e=>(0,ra.jsx)(ru,{user:e})})}),(0,ra.jsx)(We,{path:"/teacher/ocr-upload",element:(0,ra.jsx)(Yc,{children:e=>(0,ra.jsx)(Fq,{user:e})})}),(0,ra.jsx)(We,{path:"/teacher/ocr-review/:submissionId",element:(0,ra.jsx)(Yc,{children:e=>(0,ra.jsx)(Hq,{user:e})})}),(0,ra.jsx)(We,{path:"/teacher/ocr-moderate/:submissionId",element:(0,ra.jsx)(Yc,{children:e=>(0,ra.jsx)(Kq,{user:e})})}),(0,ra.jsx)(We,{path:"/admin/dashboard",element:(0,ra.jsx)(Yc,{adminOnly:!0,children:e=>(0,ra.jsx)(iu,{user:e})})}),(0,ra.jsx)(We,{path:"*",element:(0,ra.jsx)(He,{to:"/",replace:!0})})]})}function Gq(){return(0,ra.jsx)(Ct,{children:(0,ra.jsx)(Vq,{})})}ta.defaults.withCredentials=!0;const Qq={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},Yq=200,$q=400,Jq=400,Xq=499,Zq=500,eB=599,tB="GET",rB="POST",nB=[Qq.OPENID_SCOPE,Qq.PROFILE_SCOPE,Qq.OFFLINE_ACCESS_SCOPE],aB=[...nB,Qq.EMAIL_SCOPE],iB="Content-Type",oB="Content-Length",sB="Retry-After",lB="X-AnchorMailbox",cB="x-ms-request-id",uB="x-ms-httpver",dB="active-account-filters",hB="common",mB="organizations",pB="consumers",fB="access_token",gB="xms_cc",vB="login",yB="select_account",bB="consent",xB="none",wB="no_session",kB="code",jB="id_token token refresh_token",SB="query",CB="fragment",NB="query",_B="authorization_code",AB="refresh_token",TB="MSSTS",EB="ADFS",OB="Generic",PB="-",IB=".",MB={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},RB="appmetadata",DB="1",LB="authority-metadata",zB=86400,qB="config",BB="cache",FB="network",UB="hardcoded_values",HB={SCHEMA_VERSION:5,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},WB={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},KB=60,VB=3600,GB="throttling",QB="retry-after, h429",YB="invalid_grant",$B="client_mismatch",JB="1",XB="3",ZB="4",eF="2",tF="4",rF="5",nF="0",aF="1",iF="2",oF="3",sF="4",lF="pop",cF="unexpected_error",uF="post_request_failed",dF={[cF]:"Unexpected error in authentication.",[uF]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."};class hF extends Error{constructor(e,t,r){super(t?"".concat(e,": ").concat(t):e),Object.setPrototypeOf(this,hF.prototype),this.errorCode=e||Qq.EMPTY_STRING,this.errorMessage=t||Qq.EMPTY_STRING,this.subError=r||Qq.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}function mF(e,t){return new hF(e,t?"".concat(dF[e]," ").concat(t):dF[e])}const pF="storage_not_supported",fF="stubbed_public_client_application_called",gF="in_mem_redirect_unavailable",vF={[pF]:"Given storage configuration option was not supported.",[fF]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[gF]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."};class yF extends hF{constructor(e,t){super(e,t),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,yF.prototype)}}function bF(e){return new yF(e,vF[e])}const xF={initialize:()=>Promise.reject(bF(fF)),acquireTokenPopup:()=>Promise.reject(bF(fF)),acquireTokenRedirect:()=>Promise.reject(bF(fF)),acquireTokenSilent:()=>Promise.reject(bF(fF)),acquireTokenByCode:()=>Promise.reject(bF(fF)),getAllAccounts:()=>[],getAccount:()=>null,getAccountByHomeId:()=>null,getAccountByUsername:()=>null,getAccountByLocalId:()=>null,handleRedirectPromise:()=>Promise.reject(bF(fF)),loginPopup:()=>Promise.reject(bF(fF)),loginRedirect:()=>Promise.reject(bF(fF)),logout:()=>Promise.reject(bF(fF)),logoutRedirect:()=>Promise.reject(bF(fF)),logoutPopup:()=>Promise.reject(bF(fF)),ssoSilent:()=>Promise.reject(bF(fF)),addEventCallback:()=>null,removeEventCallback:()=>{},addPerformanceCallback:()=>"",removePerformanceCallback:()=>!1,enableAccountStorageEvents:()=>{},disableAccountStorageEvents:()=>{},getTokenCache:()=>{throw bF(fF)},getLogger:()=>{throw bF(fF)},setLogger:()=>{},setActiveAccount:()=>{},getActiveAccount:()=>null,initializeWrapperLibrary:()=>{},setNavigationClient:()=>{},getConfiguration:()=>{throw bF(fF)},hydrateCache:()=>Promise.reject(bF(fF)),clearCache:()=>Promise.reject(bF(fF))},wF="invalid_grant",kF=483,jF=600,SF="msal",CF=30,NF="msal.js.browser",_F="53ee284d-920a-4b59-9d30-a60315b26836",AF="ppnbnpeolgkicgegkbkbjmhlideopiji",TF="MATS",EF="MicrosoftEntra",OF="DOM API",PF="get-token-and-sign-out",IF="PlatformAuthDOMHandler",MF="PlatformAuthExtensionHandler",RF="Handshake",DF="HandshakeResponse",LF="GetToken",zF="Response",qF="localStorage",BF="sessionStorage",FF="memoryStorage",UF="GET",HF="POST",WF="signin",KF="signout",VF="request.origin",GF="urlHash",QF="request.params",YF="code.verifier",$F="interaction.status",JF="request.native",XF="wrapper.sku",ZF="wrapper.version",eU=861,tU=862,rU=863,nU=865,aU=866,iU=61,oU=961,sU=962,lU=963,cU=964,uU={861:"acquireTokenRedirect",862:"acquireTokenPopup",863:"ssoSilent",864:"acquireTokenSilent_authCode",865:"handleRedirectPromise",866:"acquireTokenByCode",61:"acquireTokenSilent_silentFlow",961:"logout",962:"logoutPopup",963:"hydrateCache",964:"loadExternalTokens"};var dU;!function(e){e.Redirect="redirect",e.Popup="popup",e.Silent="silent",e.None="none"}(dU||(dU={}));const hU="startup",mU="login",pU="logout",fU="acquireToken",gU="ssoSilent",vU="handleRedirect",yU="none",bU={scopes:nB},xU="@azure/msal-react",wU="msal.db",kU="".concat(wU,".keys"),jU=0,SU=1,CU=2,NU=3,_U=4,AU=5,TU=[jU,AU,_U];var EU;!function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Info=2]="Info",e[e.Verbose=3]="Verbose",e[e.Trace=4]="Trace"}(EU||(EU={}));class OU{constructor(e,t,r){this.level=EU.Info;const n=e||OU.createDefaultLoggerOptions();this.localCallback=n.loggerCallback||(()=>{}),this.piiLoggingEnabled=n.piiLoggingEnabled||!1,this.level="number"===typeof n.logLevel?n.logLevel:EU.Info,this.correlationId=n.correlationId||Qq.EMPTY_STRING,this.packageName=t||Qq.EMPTY_STRING,this.packageVersion=r||Qq.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:EU.Info}}clone(e,t,r){return new OU({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:r||this.correlationId},e,t)}logMessage(e,t){if(t.logLevel>this.level||!this.piiLoggingEnabled&&t.containsPii)return;const r=(new Date).toUTCString(),n="[".concat(r,"] : [").concat(t.correlationId||this.correlationId||"","]"),a="".concat(n," : ").concat(this.packageName,"@").concat(this.packageVersion," : ").concat(EU[t.logLevel]," - ").concat(e);this.executeCallback(t.logLevel,a,t.containsPii||!1)}executeCallback(e,t,r){this.localCallback&&this.localCallback(e,t,r)}error(e,t){this.logMessage(e,{logLevel:EU.Error,containsPii:!1,correlationId:t||Qq.EMPTY_STRING})}errorPii(e,t){this.logMessage(e,{logLevel:EU.Error,containsPii:!0,correlationId:t||Qq.EMPTY_STRING})}warning(e,t){this.logMessage(e,{logLevel:EU.Warning,containsPii:!1,correlationId:t||Qq.EMPTY_STRING})}warningPii(e,t){this.logMessage(e,{logLevel:EU.Warning,containsPii:!0,correlationId:t||Qq.EMPTY_STRING})}info(e,t){this.logMessage(e,{logLevel:EU.Info,containsPii:!1,correlationId:t||Qq.EMPTY_STRING})}infoPii(e,t){this.logMessage(e,{logLevel:EU.Info,containsPii:!0,correlationId:t||Qq.EMPTY_STRING})}verbose(e,t){this.logMessage(e,{logLevel:EU.Verbose,containsPii:!1,correlationId:t||Qq.EMPTY_STRING})}verbosePii(e,t){this.logMessage(e,{logLevel:EU.Verbose,containsPii:!0,correlationId:t||Qq.EMPTY_STRING})}trace(e,t){this.logMessage(e,{logLevel:EU.Trace,containsPii:!1,correlationId:t||Qq.EMPTY_STRING})}tracePii(e,t){this.logMessage(e,{logLevel:EU.Trace,containsPii:!0,correlationId:t||Qq.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}const PU={instance:xF,inProgress:yU,accounts:[],logger:new OU({})},IU=r.createContext(PU),MU=(IU.Consumer,"msal:initializeStart"),RU="msal:initializeEnd",DU="msal:accountAdded",LU="msal:accountRemoved",zU="msal:activeAccountChanged",qU="msal:loginStart",BU="msal:loginSuccess",FU="msal:loginFailure",UU="msal:acquireTokenStart",HU="msal:acquireTokenSuccess",WU="msal:acquireTokenFailure",KU="msal:acquireTokenFromNetworkStart",VU="msal:ssoSilentStart",GU="msal:ssoSilentSuccess",QU="msal:ssoSilentFailure",YU="msal:acquireTokenByCodeStart",$U="msal:acquireTokenByCodeSuccess",JU="msal:acquireTokenByCodeFailure",XU="msal:handleRedirectStart",ZU="msal:handleRedirectEnd",eH="msal:popupOpened",tH="msal:logoutStart",rH="msal:logoutSuccess",nH="msal:logoutFailure",aH="msal:logoutEnd",iH="msal:restoreFromBFCache";class oH{static getInteractionStatusFromEvent(e,t){switch(e.eventType){case qU:return mU;case VU:return gU;case UU:if(e.interactionType===dU.Redirect||e.interactionType===dU.Popup)return fU;break;case XU:return vU;case tH:return pU;case GU:case QU:if(t&&t!==gU)break;return yU;case aH:if(t&&t!==pU)break;return yU;case ZU:if(t&&t!==vU)break;return yU;case BU:case FU:case HU:case WU:case iH:if(e.interactionType===dU.Redirect||e.interactionType===dU.Popup){if(t&&t!==mU&&t!==fU)break;return yU}}return null}}function sH(e,t){if(e.length!==t.length)return!1;const r=[...t];return e.every(e=>{const t=r.shift();return!(!e||!t)&&(e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username)})}const lH="3.0.25",cH="UNBLOCK_INPROGRESS",uH="EVENT",dH=(e,t)=>{const{type:r,payload:n}=t;let a=e.inProgress;switch(r){case cH:e.inProgress===hU&&(a=yU,n.logger.info("MsalProvider - handleRedirectPromise resolved, setting inProgress to 'none'"));break;case uH:const t=n.message,i=oH.getInteractionStatusFromEvent(t,e.inProgress);i&&(n.logger.info("MsalProvider - ".concat(t.eventType," results in setting inProgress from ").concat(e.inProgress," to ").concat(i)),a=i);break;default:throw new Error("Unknown action type: ".concat(r))}if(a===hU)return e;const i=n.instance.getAllAccounts();return a===e.inProgress||sH(i,e.accounts)?a!==e.inProgress?u(u({},e),{},{inProgress:a}):sH(i,e.accounts)?e:u(u({},e),{},{accounts:i}):u(u({},e),{},{inProgress:a,accounts:i})};function hH(e){let{instance:t,children:n}=e;(0,r.useEffect)(()=>{t.initializeWrapperLibrary(xU,lH)},[t]);const a=(0,r.useMemo)(()=>t.getLogger().clone("@azure/msal-react",lH),[t]),[i,o]=(0,r.useReducer)(dH,void 0,()=>({inProgress:hU,accounts:[]}));(0,r.useEffect)(()=>{const e=t.addEventCallback(e=>{o({payload:{instance:t,logger:a,message:e},type:uH})});return a.verbose("MsalProvider - Registered event callback with id: ".concat(e)),t.initialize().then(()=>{t.handleRedirectPromise().catch(()=>{}).finally(()=>{o({payload:{instance:t,logger:a},type:cH})})}).catch(()=>{}),()=>{e&&(a.verbose("MsalProvider - Removing event callback ".concat(e)),t.removeEventCallback(e))}},[t,a]);const s={instance:t,inProgress:i.inProgress,accounts:i.accounts,logger:a};return r.createElement(IU.Provider,{value:s},n)}const mH="AAD",pH="OIDC",fH="EAR",gH="none",vH="client_info_decoding_error",yH="client_info_empty_error",bH="token_parsing_error",xH="null_or_empty_token",wH="endpoints_resolution_error",kH="network_error",jH="openid_config_error",SH="hash_not_deserialized",CH="invalid_state",NH="state_mismatch",_H="state_not_found",AH="nonce_mismatch",TH="auth_time_not_found",EH="max_age_transpired",OH="multiple_matching_tokens",PH="multiple_matching_accounts",IH="multiple_matching_appMetadata",MH="request_cannot_be_made",RH="cannot_remove_empty_scope",DH="cannot_append_scopeset",LH="empty_input_scopeset",zH="device_code_polling_cancelled",qH="device_code_expired",BH="device_code_unknown_error",FH="no_account_in_silent_request",UH="invalid_cache_record",HH="invalid_cache_environment",WH="no_account_found",KH="no_crypto_object",VH="unexpected_credential_type",GH="invalid_assertion",QH="invalid_client_credential",YH="token_refresh_required",$H="user_timeout_reached",JH="token_claims_cnf_required_for_signedjwt",XH="authorization_code_missing_from_server_response",ZH="binding_key_not_removed",eW="end_session_endpoint_not_supported",tW="key_id_missing",rW="no_network_connectivity",nW="user_canceled",aW="missing_tenant_id_error",iW="method_not_implemented",oW="nested_app_auth_bridge_disabled",sW="platform_broker_error",lW={[vH]:"The client info could not be parsed/decoded correctly",[yH]:"The client info was empty",[bH]:"Token cannot be parsed",[xH]:"The token is null or empty",[wH]:"Endpoints cannot be resolved",[kH]:"Network request failed",[jH]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[SH]:"The hash parameters could not be deserialized",[CH]:"State was not the expected format",[NH]:"State mismatch error",[_H]:"State not found",[AH]:"Nonce mismatch error",[TH]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[EH]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[OH]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[PH]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[IH]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[MH]:"Token request cannot be made without authorization code or refresh token.",[RH]:"Cannot remove null or empty scope from ScopeSet",[DH]:"Cannot append ScopeSet",[LH]:"Empty input ScopeSet cannot be processed",[zH]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[qH]:"Device code is expired.",[BH]:"Device code stopped polling for unknown reasons.",[FH]:"Please pass an account object, silent flow is not supported without account information",[UH]:"Cache record object was null or undefined.",[HH]:"Invalid environment when attempting to create cache entry",[WH]:"No account found in cache for given key.",[KH]:"No crypto object detected.",[VH]:"Unexpected credential type.",[GH]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[QH]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[YH]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[$H]:"User defined timeout for device code polling reached",[JH]:"Cannot generate a POP jwt if the token_claims are not populated",[XH]:"Server response does not contain an authorization code to proceed",[ZH]:"Could not remove the credential's binding key from storage.",[eW]:"The provided authority does not support logout",[tW]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[rW]:"No network connectivity. Check your internet connection.",[nW]:"User cancelled the flow.",[aW]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[iW]:"This method has not been implemented",[oW]:"The nested app auth bridge is disabled",[sW]:"An error occurred in the native broker. See the platformBrokerError property for details."};class cW extends hF{constructor(e,t){super(e,t?"".concat(lW[e],": ").concat(t):lW[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,cW.prototype)}}function uW(e,t){return new cW(e,t)}const dW={createNewGuid:()=>{throw uW(iW)},base64Decode:()=>{throw uW(iW)},base64Encode:()=>{throw uW(iW)},base64UrlEncode:()=>{throw uW(iW)},encodeKid:()=>{throw uW(iW)},async getPublicKeyThumbprint(){throw uW(iW)},async removeTokenBindingKey(){throw uW(iW)},async clearKeystore(){throw uW(iW)},async signJwt(){throw uW(iW)},async hashString(){throw uW(iW)}},hW="@azure/msal-common",mW="15.14.1",pW="redirect_uri_empty",fW="claims_request_parsing_error",gW="authority_uri_insecure",vW="url_parse_error",yW="empty_url_error",bW="empty_input_scopes_error",xW="invalid_claims",wW="token_request_empty",kW="logout_request_empty",jW="invalid_code_challenge_method",SW="pkce_params_missing",CW="invalid_cloud_discovery_metadata",NW="invalid_authority_metadata",_W="untrusted_authority",AW="missing_ssh_jwk",TW="missing_ssh_kid",EW="missing_nonce_authentication_header",OW="invalid_authentication_header",PW="cannot_set_OIDCOptions",IW="cannot_allow_platform_broker",MW="authority_mismatch",RW="invalid_request_method_for_EAR",DW="invalid_authorize_post_body_parameters",LW="invalid_platform_broker_configuration",zW={[pW]:"A redirect URI is required for all calls, and none has been set.",[fW]:"Could not parse the given claims request object.",[gW]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[vW]:"URL could not be parsed into appropriate segments.",[yW]:"URL was empty or null.",[bW]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[xW]:"Given claims parameter must be a stringified JSON object.",[wW]:"Token request was empty and not found in cache.",[kW]:"The logout request was null or undefined.",[jW]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[SW]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[CW]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[NW]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[_W]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[AW]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[TW]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[EW]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[OW]:"Invalid authentication header provided",[PW]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[IW]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[MW]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority.",[DW]:"Invalid authorize post body parameters provided. If you are using authorizePostBodyParameters, the request method must be POST. Please check the request method and parameters.",[RW]:"Invalid request method for EAR protocol mode. The request method cannot be GET when using EAR protocol mode. Please change the request method to POST.",[LW]:"Invalid platform broker configuration. `allowPlatformBrokerWithDOM` can only be enabled when `allowPlatformBroker` is enabled."};class qW extends hF{constructor(e){super(e,zW[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,qW.prototype)}}function BW(e){return new qW(e)}class FW{static isEmptyObj(e){if(e)try{const t=JSON.parse(e);return 0===Object.keys(t).length}catch(OX){}return!0}static startsWith(e,t){return 0===e.indexOf(t)}static endsWith(e,t){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length}static queryStringToObject(e){const t={},r=e.split("&"),n=e=>decodeURIComponent(e.replace(/\+/g," "));return r.forEach(e=>{if(e.trim()){const[r,a]=e.split(/=(.+)/g,2);r&&a&&(t[n(r)]=n(a))}}),t}static trimArrayEntries(e){return e.map(e=>e.trim())}static removeEmptyStringsFromArray(e){return e.filter(e=>!!e)}static jsonParseHelper(e){try{return JSON.parse(e)}catch(OX){return null}}static matchPattern(e,t){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(t)}}class UW{constructor(e){const t=e?FW.trimArrayEntries([...e]):[],r=t?FW.removeEmptyStringsFromArray(t):[];if(!r||!r.length)throw BW(bW);this.scopes=new Set,r.forEach(e=>this.scopes.add(e))}static fromString(e){const t=(e||Qq.EMPTY_STRING).split(" ");return new UW(t)}static createSearchScopes(e){const t=e&&e.length>0?e:[...nB],r=new UW(t);return r.containsOnlyOIDCScopes()?r.removeScope(Qq.OFFLINE_ACCESS_SCOPE):r.removeOIDCScopes(),r}containsScope(e){const t=this.printScopesLowerCase().split(" "),r=new UW(t);return!!e&&r.scopes.has(e.toLowerCase())}containsScopeSet(e){return!(!e||e.scopes.size<=0)&&(this.scopes.size>=e.scopes.size&&e.asArray().every(e=>this.containsScope(e)))}containsOnlyOIDCScopes(){let e=0;return aB.forEach(t=>{this.containsScope(t)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(e=>this.appendScope(e))}catch(OX){throw uW(DH)}}removeScope(e){if(!e)throw uW(RH);this.scopes.delete(e.trim())}removeOIDCScopes(){aB.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw uW(LH);const t=new Set;return e.scopes.forEach(e=>t.add(e.toLowerCase())),this.scopes.forEach(e=>t.add(e.toLowerCase())),t}intersectingScopeSets(e){if(!e)throw uW(LH);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();const t=this.unionScopeSets(e),r=e.getScopeCount(),n=this.getScopeCount();return t.size<n+r}getScopeCount(){return this.scopes.size}asArray(){const e=[];return this.scopes.forEach(t=>e.push(t)),e}printScopes(){if(this.scopes){return this.asArray().join(" ")}return Qq.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}function HW(e,t){if(!e)throw uW(yH);try{const r=t(e);return JSON.parse(r)}catch(OX){throw uW(vH)}}function WW(e){if(!e)throw uW(vH);const t=e.split(IB,2);return{uid:t[0],utid:t.length<2?Qq.EMPTY_STRING:t[1]}}const KW=["isHomeTenant"],VW=["isHomeTenant"];function GW(e,t){return!!e&&!!t&&e===t.split(".")[1]}function QW(e,t,r,n){if(n){const{oid:t,sub:r,tid:a,name:i,tfp:o,acr:s,preferred_username:l,upn:c,login_hint:u}=n,d=a||o||s||"";return{tenantId:d,localAccountId:t||r||"",name:i,username:l||c||"",loginHint:u,isHomeTenant:GW(d,e)}}return{tenantId:r,localAccountId:t,username:"",isHomeTenant:GW(r,e)}}function YW(e,t,r,n){let a=e;if(t){const{isHomeTenant:r}=t,n=i(t,KW);a=u(u({},e),n)}if(r){const t=QW(e.homeAccountId,e.localAccountId,e.tenantId,r),{isHomeTenant:o}=t,s=i(t,VW);return a=u(u(u({},a),s),{},{idTokenClaims:r,idToken:n}),a}return a}const $W=0,JW=1,XW=2,ZW=3;function eK(e){if(e){return e.tid||e.tfp||e.acr||null}return null}class tK{static getAccountInfo(e){const t=e.tenantProfiles||[];return 0===t.length&&e.realm&&e.localAccountId&&t.push(QW(e.homeAccountId,e.localAccountId,e.realm)),{homeAccountId:e.homeAccountId,environment:e.environment,tenantId:e.realm,username:e.username,localAccountId:e.localAccountId,loginHint:e.loginHint,name:e.name,nativeAccountId:e.nativeAccountId,authorityType:e.authorityType,tenantProfiles:new Map(t.map(e=>[e.tenantId,e])),dataBoundary:e.dataBoundary}}isSingleTenant(){return!this.tenantProfiles}static createAccount(e,t,r){var n,a,i,o,s,l,c,u,d;const h=new tK;let m;t.authorityType===JW?h.authorityType=EB:t.protocolMode===pH?h.authorityType=OB:h.authorityType=TB,e.clientInfo&&r&&(m=HW(e.clientInfo,r),m.xms_tdbr&&(h.dataBoundary="EU"===m.xms_tdbr?"EU":"None")),h.clientInfo=e.clientInfo,h.homeAccountId=e.homeAccountId,h.nativeAccountId=e.nativeAccountId;const p=e.environment||t&&t.getPreferredCache();if(!p)throw uW(HH);h.environment=p,h.realm=(null===(n=m)||void 0===n?void 0:n.utid)||eK(e.idTokenClaims)||"",h.localAccountId=(null===(a=m)||void 0===a?void 0:a.uid)||(null===(i=e.idTokenClaims)||void 0===i?void 0:i.oid)||(null===(o=e.idTokenClaims)||void 0===o?void 0:o.sub)||"";const f=(null===(s=e.idTokenClaims)||void 0===s?void 0:s.preferred_username)||(null===(l=e.idTokenClaims)||void 0===l?void 0:l.upn),g=null!==(c=e.idTokenClaims)&&void 0!==c&&c.emails?e.idTokenClaims.emails[0]:null;if(h.username=f||g||"",h.loginHint=null===(u=e.idTokenClaims)||void 0===u?void 0:u.login_hint,h.name=(null===(d=e.idTokenClaims)||void 0===d?void 0:d.name)||"",h.cloudGraphHostName=e.cloudGraphHostName,h.msGraphHost=e.msGraphHost,e.tenantProfiles)h.tenantProfiles=e.tenantProfiles;else{const t=QW(e.homeAccountId,h.localAccountId,h.realm,e.idTokenClaims);h.tenantProfiles=[t]}return h}static createFromAccountInfo(e,t,r){var n;const a=new tK;a.authorityType=e.authorityType||OB,a.homeAccountId=e.homeAccountId,a.localAccountId=e.localAccountId,a.nativeAccountId=e.nativeAccountId,a.realm=e.tenantId,a.environment=e.environment,a.username=e.username,a.name=e.name,a.loginHint=e.loginHint,a.cloudGraphHostName=t,a.msGraphHost=r;const i=Array.from((null===(n=e.tenantProfiles)||void 0===n?void 0:n.values())||[]);return 0===i.length&&e.tenantId&&e.localAccountId&&i.push(QW(e.homeAccountId,e.localAccountId,e.tenantId,e.idTokenClaims)),a.tenantProfiles=i,a.dataBoundary=e.dataBoundary,a}static generateHomeAccountId(e,t,r,n,a){if(t!==JW&&t!==XW){if(e)try{const t=HW(e,n.base64Decode);if(t.uid&&t.utid)return"".concat(t.uid,".").concat(t.utid)}catch(OX){}r.warning("No client info in response")}return(null===a||void 0===a?void 0:a.sub)||""}static isAccountEntity(e){return!!e&&(e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"))}static accountInfoIsEqual(e,t,r){if(!e||!t)return!1;let n=!0;if(r){const r=e.idTokenClaims||{},a=t.idTokenClaims||{};n=r.iat===a.iat&&r.nonce===a.nonce}return e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username&&e.tenantId===t.tenantId&&e.loginHint===t.loginHint&&e.environment===t.environment&&e.nativeAccountId===t.nativeAccountId&&n}}function rK(e,t){const r=function(e){if(!e)throw uW(xH);const t=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(e);if(!t||t.length<4)throw uW(bH);return t[2]}(e);try{const e=t(r);return JSON.parse(e)}catch(n){throw uW(bH)}}function nK(e){if(!e.signin_state)return!1;const t=["kmsi","dvc_dmjd"],r=e.signin_state.some(e=>t.includes(e.trim().toLowerCase()));return r}function aK(e,t){if(0===t||Date.now()-3e5>e+t)throw uW(EH)}function iK(e){if(!e)return e;let t=e.toLowerCase();return FW.endsWith(t,"?")?t=t.slice(0,-1):FW.endsWith(t,"?/")&&(t=t.slice(0,-2)),FW.endsWith(t,"/")||(t+="/"),t}function oK(e){return e.startsWith("#/")?e.substring(2):e.startsWith("#")||e.startsWith("?")?e.substring(1):e}function sK(e){if(!e||e.indexOf("=")<0)return null;try{const t=oK(e),r=Object.fromEntries(new URLSearchParams(t));if(r.code||r.ear_jwe||r.error||r.error_description||r.state)return r}catch(OX){throw uW(SH)}return null}function lK(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2?arguments[2]:void 0;const n=new Array;return e.forEach((e,a)=>{!t&&r&&a in r?n.push("".concat(a,"=").concat(e)):n.push("".concat(a,"=").concat(encodeURIComponent(e)))}),n.join("&")}function cK(e){if(!e)return e;const t=e.split("#")[0];try{const e=new URL(t);return iK(e.origin+e.pathname+e.search)}catch(OX){return iK(t)}}class uK{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw BW(yW);e.includes("#")||(this._urlString=uK.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let t=e.toLowerCase();return FW.endsWith(t,"?")?t=t.slice(0,-1):FW.endsWith(t,"?/")&&(t=t.slice(0,-2)),FW.endsWith(t,"/")||(t+="/"),t}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch(OX){throw BW(vW)}if(!e.HostNameAndPort||!e.PathSegments)throw BW(vW);if(!e.Protocol||"https:"!==e.Protocol.toLowerCase())throw BW(gW)}static appendQueryString(e,t){return t?e.indexOf("?")<0?"".concat(e,"?").concat(t):"".concat(e,"&").concat(t):e}static removeHashFromUrl(e){return uK.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){const t=this.getUrlComponents(),r=t.PathSegments;return!e||0===r.length||r[0]!==hB&&r[0]!==mB||(r[0]=e),uK.constructAuthorityUriFromObject(t)}getUrlComponents(){const e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),t=this.urlString.match(e);if(!t)throw BW(vW);const r={Protocol:t[1],HostNameAndPort:t[4],AbsolutePath:t[5],QueryString:t[7]};let n=r.AbsolutePath.split("/");return n=n.filter(e=>e&&e.length>0),r.PathSegments=n,r.QueryString&&r.QueryString.endsWith("/")&&(r.QueryString=r.QueryString.substring(0,r.QueryString.length-1)),r}static getDomainFromUrl(e){const t=RegExp("^([^:/?#]+://)?([^/?#]*)"),r=e.match(t);if(!r)throw BW(vW);return r[2]}static getAbsoluteUrl(e,t){if(e[0]===Qq.FORWARD_SLASH){const r=new uK(t).getUrlComponents();return r.Protocol+"//"+r.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new uK(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!sK(e)}}const dK={"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},hK={metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},mK=new Set;function pK(e,t,r,n){if(null===n||void 0===n||n.trace("getAliasesFromMetadata called with source: ".concat(r)),e&&t){const a=fK(t,e);if(a)return null===n||void 0===n||n.trace("getAliasesFromMetadata: found cloud discovery metadata in ".concat(r,", returning aliases")),a.aliases;null===n||void 0===n||n.trace("getAliasesFromMetadata: did not find cloud discovery metadata in ".concat(r))}return null}function fK(e,t){for(let r=0;r<e.length;r++){const n=e[r];if(n.aliases.includes(t))return n}return null}hK.metadata.forEach(e=>{e.aliases.forEach(e=>{mK.add(e)})});const gK="cache_quota_exceeded",vK="cache_error_unknown",yK={[gK]:"Exceeded cache storage capacity.",[vK]:"Unexpected error occurred when using cache storage."};class bK extends hF{constructor(e,t){const r=t||(yK[e]?yK[e]:yK[vK]);super("".concat(e,": ").concat(r)),Object.setPrototypeOf(this,bK.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=r}}function xK(e){return e instanceof Error?"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name||e.message.includes("exceeded the quota")?new bK(gK):new bK(e.name,e.message):new bK(vK)}class wK{constructor(e,t,r,n,a){this.clientId=e,this.cryptoImpl=t,this.commonLogger=r.clone(hW,mW),this.staticAuthorityOptions=a,this.performanceClient=n}getAllAccounts(e,t){return this.buildTenantProfiles(this.getAccountsFilteredBy(e,t),t,e)}getAccountInfoFilteredBy(e,t){if(0===Object.keys(e).length||Object.values(e).every(e=>!e))return this.commonLogger.warning("getAccountInfoFilteredBy: Account filter is empty or invalid, returning null"),null;const r=this.getAllAccounts(e,t);if(r.length>1){return r.sort(e=>e.idTokenClaims?-1:1)[0]}return 1===r.length?r[0]:null}getBaseAccountInfo(e,t){const r=this.getAccountsFilteredBy(e,t);return r.length>0?tK.getAccountInfo(r[0]):null}buildTenantProfiles(e,t,r){return e.flatMap(e=>this.getTenantProfilesFromAccountEntity(e,t,null===r||void 0===r?void 0:r.tenantId,r))}getTenantedAccountInfoByFilter(e,t,r,n,a){let i,o=null;if(a&&!this.tenantProfileMatchesFilter(r,a))return null;const s=this.getIdToken(e,n,t,r.tenantId);return s&&(i=rK(s.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(i,a))?null:(o=YW(e,r,i,null===s||void 0===s?void 0:s.secret),o)}getTenantProfilesFromAccountEntity(e,t,r,n){const a=tK.getAccountInfo(e);let i=a.tenantProfiles||new Map;const o=this.getTokenKeys();if(r){const e=i.get(r);if(!e)return[];i=new Map([[r,e]])}const s=[];return i.forEach(e=>{const r=this.getTenantedAccountInfoByFilter(a,o,e,t,n);r&&s.push(r)}),s}tenantProfileMatchesFilter(e,t){return!(t.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,t.localAccountId))&&((!t.name||e.name===t.name)&&(void 0===t.isHomeTenant||e.isHomeTenant===t.isHomeTenant))}idTokenClaimsMatchTenantProfileFilter(e,t){if(t){if(t.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,t.localAccountId))return!1;if(t.loginHint&&!this.matchLoginHintFromTokenClaims(e,t.loginHint))return!1;if(t.username&&!this.matchUsername(e.preferred_username,t.username))return!1;if(t.name&&!this.matchName(e,t.name))return!1;if(t.sid&&!this.matchSid(e,t.sid))return!1}return!0}async saveCacheRecord(e,t,r,n,a){if(!e)throw uW(UH);try{e.account&&await this.setAccount(e.account,t,r,n),e.idToken&&!1!==(null===a||void 0===a?void 0:a.idToken)&&await this.setIdTokenCredential(e.idToken,t,r),e.accessToken&&!1!==(null===a||void 0===a?void 0:a.accessToken)&&await this.saveAccessToken(e.accessToken,t,r),e.refreshToken&&!1!==(null===a||void 0===a?void 0:a.refreshToken)&&await this.setRefreshTokenCredential(e.refreshToken,t,r),e.appMetadata&&this.setAppMetadata(e.appMetadata,t)}catch(OX){var i;throw null===(i=this.commonLogger)||void 0===i||i.error("CacheManager.saveCacheRecord: failed"),OX instanceof hF?OX:xK(OX)}}async saveAccessToken(e,t,r){const n={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},a=this.getTokenKeys(),i=UW.fromString(e.target);a.accessToken.forEach(e=>{if(!this.accessTokenKeyMatchesFilter(e,n,!1))return;const r=this.getAccessTokenCredential(e,t);if(r&&this.credentialMatchesFilter(r,n)){UW.fromString(r.target).intersectingScopeSets(i)&&this.removeAccessToken(e,t)}}),await this.setAccessTokenCredential(e,t,r)}getAccountsFilteredBy(e,t){const r=this.getAccountKeys(),n=[];return r.forEach(r=>{var a;const i=this.getAccount(r,t);if(!i)return;if(e.homeAccountId&&!this.matchHomeAccountId(i,e.homeAccountId))return;if(e.username&&!this.matchUsername(i.username,e.username))return;if(e.environment&&!this.matchEnvironment(i,e.environment))return;if(e.realm&&!this.matchRealm(i,e.realm))return;if(e.nativeAccountId&&!this.matchNativeAccountId(i,e.nativeAccountId))return;if(e.authorityType&&!this.matchAuthorityType(i,e.authorityType))return;const o={localAccountId:null===e||void 0===e?void 0:e.localAccountId,name:null===e||void 0===e?void 0:e.name},s=null===(a=i.tenantProfiles)||void 0===a?void 0:a.filter(e=>this.tenantProfileMatchesFilter(e,o));s&&0===s.length||n.push(i)}),n}credentialMatchesFilter(e,t){if(t.clientId&&!this.matchClientId(e,t.clientId))return!1;if(t.userAssertionHash&&!this.matchUserAssertionHash(e,t.userAssertionHash))return!1;if("string"===typeof t.homeAccountId&&!this.matchHomeAccountId(e,t.homeAccountId))return!1;if(t.environment&&!this.matchEnvironment(e,t.environment))return!1;if(t.realm&&!this.matchRealm(e,t.realm))return!1;if(t.credentialType&&!this.matchCredentialType(e,t.credentialType))return!1;if(t.familyId&&!this.matchFamilyId(e,t.familyId))return!1;if(t.target&&!this.matchTarget(e,t.target))return!1;if((t.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==t.requestedClaimsHash)return!1;if(e.credentialType===MB.ACCESS_TOKEN_WITH_AUTH_SCHEME){if(t.tokenType&&!this.matchTokenType(e,t.tokenType))return!1;if(t.tokenType===WB.SSH&&t.keyId&&!this.matchKeyId(e,t.keyId))return!1}return!0}getAppMetadataFilteredBy(e){const t=this.getKeys(),r={};return t.forEach(t=>{if(!this.isAppMetadata(t))return;const n=this.getAppMetadata(t);n&&(e.environment&&!this.matchEnvironment(n,e.environment)||e.clientId&&!this.matchClientId(n,e.clientId)||(r[t]=n))}),r}getAuthorityMetadataByAlias(e){const t=this.getAuthorityMetadataKeys();let r=null;return t.forEach(t=>{if(!this.isAuthorityMetadata(t)||-1===t.indexOf(this.clientId))return;const n=this.getAuthorityMetadata(t);n&&-1!==n.aliases.indexOf(e)&&(r=n)}),r}removeAllAccounts(e){this.getAllAccounts({},e).forEach(t=>{this.removeAccount(t,e)})}removeAccount(e,t){this.removeAccountContext(e,t);this.getAccountKeys().filter(t=>t.includes(e.homeAccountId)&&t.includes(e.environment)).forEach(e=>{this.removeItem(e,t),this.performanceClient.incrementFields({accountsRemoved:1},t)})}removeAccountContext(e,t){const r=this.getTokenKeys(),n=t=>t.includes(e.homeAccountId)&&t.includes(e.environment);r.idToken.filter(n).forEach(e=>{this.removeIdToken(e,t)}),r.accessToken.filter(n).forEach(e=>{this.removeAccessToken(e,t)}),r.refreshToken.filter(n).forEach(e=>{this.removeRefreshToken(e,t)})}removeAccessToken(e,t){const r=this.getAccessTokenCredential(e,t);if(this.removeItem(e,t),this.performanceClient.incrementFields({accessTokensRemoved:1},t),!r||r.credentialType.toLowerCase()!==MB.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()||r.tokenType!==WB.POP)return;const n=r.keyId;n&&this.cryptoImpl.removeTokenBindingKey(n).catch(()=>{var e;this.commonLogger.error("Failed to remove token binding key ".concat(n),t),null===(e=this.performanceClient)||void 0===e||e.incrementFields({removeTokenBindingKeyFailure:1},t)})}removeAppMetadata(e){return this.getKeys().forEach(t=>{this.isAppMetadata(t)&&this.removeItem(t,e)}),!0}getIdToken(e,t,r,n,a){this.commonLogger.trace("CacheManager - getIdToken called");const i={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:MB.ID_TOKEN,clientId:this.clientId,realm:n},o=this.getIdTokensByFilter(i,t,r),s=o.size;if(s<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(s>1){let r=o;if(!n){const t=new Map;o.forEach((r,n)=>{r.realm===e.tenantId&&t.set(n,r)});const n=t.size;if(n<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),o.values().next().value;if(1===n)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),t.values().next().value;r=t}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),r.forEach((e,r)=>{this.removeIdToken(r,t)}),a&&t&&a.addFields({multiMatchedID:o.size},t),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),o.values().next().value}getIdTokensByFilter(e,t,r){const n=r&&r.idToken||this.getTokenKeys().idToken,a=new Map;return n.forEach(r=>{if(!this.idTokenKeyMatchesFilter(r,u({clientId:this.clientId},e)))return;const n=this.getIdTokenCredential(r,t);n&&this.credentialMatchesFilter(n,e)&&a.set(r,n)}),a}idTokenKeyMatchesFilter(e,t){const r=e.toLowerCase();return(!t.clientId||-1!==r.indexOf(t.clientId.toLowerCase()))&&(!t.homeAccountId||-1!==r.indexOf(t.homeAccountId.toLowerCase()))}removeIdToken(e,t){this.removeItem(e,t)}removeRefreshToken(e,t){this.removeItem(e,t)}getAccessToken(e,t,r,n){const a=t.correlationId;this.commonLogger.trace("CacheManager - getAccessToken called",a);const i=UW.createSearchScopes(t.scopes),o=t.authenticationScheme||WB.BEARER,s=o&&o.toLowerCase()!==WB.BEARER.toLowerCase()?MB.ACCESS_TOKEN_WITH_AUTH_SCHEME:MB.ACCESS_TOKEN,l={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:s,clientId:this.clientId,realm:n||e.tenantId,target:i,tokenType:o,keyId:t.sshKid,requestedClaimsHash:t.requestedClaimsHash},c=r&&r.accessToken||this.getTokenKeys().accessToken,u=[];c.forEach(e=>{if(this.accessTokenKeyMatchesFilter(e,l,!0)){const t=this.getAccessTokenCredential(e,a);t&&this.credentialMatchesFilter(t,l)&&u.push(t)}});const d=u.length;return d<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found",a),null):d>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them",a),u.forEach(e=>{this.removeAccessToken(this.generateCredentialKey(e),a)}),this.performanceClient.addFields({multiMatchedAT:u.length},a),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token",a),u[0])}accessTokenKeyMatchesFilter(e,t,r){const n=e.toLowerCase();if(t.clientId&&-1===n.indexOf(t.clientId.toLowerCase()))return!1;if(t.homeAccountId&&-1===n.indexOf(t.homeAccountId.toLowerCase()))return!1;if(t.realm&&-1===n.indexOf(t.realm.toLowerCase()))return!1;if(t.requestedClaimsHash&&-1===n.indexOf(t.requestedClaimsHash.toLowerCase()))return!1;if(t.target){const e=t.target.asArray();for(let t=0;t<e.length;t++){if(r&&!n.includes(e[t].toLowerCase()))return!1;if(!r&&n.includes(e[t].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e,t){const r=this.getTokenKeys(),n=[];return r.accessToken.forEach(r=>{if(!this.accessTokenKeyMatchesFilter(r,e,!0))return;const a=this.getAccessTokenCredential(r,t);a&&this.credentialMatchesFilter(a,e)&&n.push(a)}),n}getRefreshToken(e,t,r,n,a){this.commonLogger.trace("CacheManager - getRefreshToken called");const i=t?DB:void 0,o={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:MB.REFRESH_TOKEN,clientId:this.clientId,familyId:i},s=n&&n.refreshToken||this.getTokenKeys().refreshToken,l=[];s.forEach(e=>{if(this.refreshTokenKeyMatchesFilter(e,o)){const t=this.getRefreshTokenCredential(e,r);t&&this.credentialMatchesFilter(t,o)&&l.push(t)}});const c=l.length;return c<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(c>1&&a&&r&&a.addFields({multiMatchedRT:c},r),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),l[0])}refreshTokenKeyMatchesFilter(e,t){const r=e.toLowerCase();return(!t.familyId||-1!==r.indexOf(t.familyId.toLowerCase()))&&(!(!t.familyId&&t.clientId&&-1===r.indexOf(t.clientId.toLowerCase()))&&(!t.homeAccountId||-1!==r.indexOf(t.homeAccountId.toLowerCase())))}readAppMetadataFromCache(e){const t={environment:e,clientId:this.clientId},r=this.getAppMetadataFilteredBy(t),n=Object.keys(r).map(e=>r[e]),a=n.length;if(a<1)return null;if(a>1)throw uW(IH);return n[0]}isAppMetadataFOCI(e){const t=this.readAppMetadataFromCache(e);return!(!t||t.familyId!==DB)}matchHomeAccountId(e,t){return!("string"!==typeof e.homeAccountId||t!==e.homeAccountId)}matchLocalAccountIdFromTokenClaims(e,t){return t===(e.oid||e.sub)}matchLocalAccountIdFromTenantProfile(e,t){return e.localAccountId===t}matchName(e,t){var r;return!(t.toLowerCase()!==(null===(r=e.name)||void 0===r?void 0:r.toLowerCase()))}matchUsername(e,t){return!(!e||"string"!==typeof e||(null===t||void 0===t?void 0:t.toLowerCase())!==e.toLowerCase())}matchUserAssertionHash(e,t){return!(!e.userAssertionHash||t!==e.userAssertionHash)}matchEnvironment(e,t){if(this.staticAuthorityOptions){const r=function(e,t){let r;const n=e.canonicalAuthority;if(n){var a;const i=new uK(n).getUrlComponents().HostNameAndPort;r=pK(i,null===(a=e.cloudDiscoveryMetadata)||void 0===a?void 0:a.metadata,qB,t)||pK(i,hK.metadata,UB,t)||e.knownAuthorities}return r||[]}(this.staticAuthorityOptions,this.commonLogger);if(r.includes(t)&&r.includes(e.environment))return!0}const r=this.getAuthorityMetadataByAlias(t);return!!(r&&r.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,t){return e.credentialType&&t.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,t){return!(!e.clientId||t!==e.clientId)}matchFamilyId(e,t){return!(!e.familyId||t!==e.familyId)}matchRealm(e,t){var r;return!((null===(r=e.realm)||void 0===r?void 0:r.toLowerCase())!==t.toLowerCase())}matchNativeAccountId(e,t){return!(!e.nativeAccountId||t!==e.nativeAccountId)}matchLoginHintFromTokenClaims(e,t){return e.login_hint===t||(e.preferred_username===t||e.upn===t)}matchSid(e,t){return e.sid===t}matchAuthorityType(e,t){return!(!e.authorityType||t.toLowerCase()!==e.authorityType.toLowerCase())}matchTarget(e,t){if(e.credentialType!==MB.ACCESS_TOKEN&&e.credentialType!==MB.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target)return!1;return UW.fromString(e.target).containsScopeSet(t)}matchTokenType(e,t){return!(!e.tokenType||e.tokenType!==t)}matchKeyId(e,t){return!(!e.keyId||e.keyId!==t)}isAppMetadata(e){return-1!==e.indexOf(RB)}isAuthorityMetadata(e){return-1!==e.indexOf(LB)}generateAuthorityMetadataCacheKey(e){return"".concat(LB,"-").concat(this.clientId,"-").concat(e)}static toObject(e,t){for(const r in t)e[r]=t[r];return e}}class kK extends wK{async setAccount(){throw uW(iW)}getAccount(){throw uW(iW)}async setIdTokenCredential(){throw uW(iW)}getIdTokenCredential(){throw uW(iW)}async setAccessTokenCredential(){throw uW(iW)}getAccessTokenCredential(){throw uW(iW)}async setRefreshTokenCredential(){throw uW(iW)}getRefreshTokenCredential(){throw uW(iW)}setAppMetadata(){throw uW(iW)}getAppMetadata(){throw uW(iW)}setServerTelemetry(){throw uW(iW)}getServerTelemetry(){throw uW(iW)}setAuthorityMetadata(){throw uW(iW)}getAuthorityMetadata(){throw uW(iW)}getAuthorityMetadataKeys(){throw uW(iW)}setThrottlingCache(){throw uW(iW)}getThrottlingCache(){throw uW(iW)}removeItem(){throw uW(iW)}getKeys(){throw uW(iW)}getAccountKeys(){throw uW(iW)}getTokenKeys(){throw uW(iW)}generateCredentialKey(){throw uW(iW)}generateAccountKey(){throw uW(iW)}}const jK="acquireTokenByCode",SK="acquireTokenByRefreshToken",CK="acquireTokenSilent",NK="acquireTokenSilentAsync",_K="acquireTokenPopup",AK="acquireTokenPreRedirect",TK="acquireTokenRedirect",EK="cryptoOptsGetPublicKeyThumbprint",OK="cryptoOptsSignJwt",PK="silentCacheClientAcquireToken",IK="silentIframeClientAcquireToken",MK="awaitConcurrentIframe",RK="silentRefreshClientAcquireToken",DK="ssoSilent",LK="standardInteractionClientGetDiscoveredAuthority",zK="nativeInteractionClientAcquireToken",qK="networkClientSendPostRequestAsync",BK="refreshTokenClientExecutePostToTokenEndpoint",FK="authorizationCodeClientExecutePostToTokenEndpoint",UK="refreshTokenClientExecuteTokenRequest",HK="refreshTokenClientAcquireToken",WK="refreshTokenClientAcquireTokenWithCachedRefreshToken",KK="refreshTokenClientAcquireTokenByRefreshToken",VK="refreshTokenClientCreateTokenRequestBody",GK="acquireTokenFromCache",QK="silentFlowClientAcquireCachedToken",YK="silentFlowClientGenerateResultFromCacheRecord",$K="acquireTokenBySilentIframe",JK="initializeBaseRequest",XK="initializeSilentRequest",ZK="initializeClientApplication",eV="initializeCache",tV="silentIframeClientTokenHelper",rV="silentHandlerInitiateAuthRequest",nV="silentHandlerMonitorIframeForHash",aV="silentHandlerLoadFrame",iV="silentHandlerLoadFrameSync",oV="standardInteractionClientCreateAuthCodeClient",sV="standardInteractionClientGetClientConfiguration",lV="standardInteractionClientInitializeAuthorizationRequest",cV="getAuthCodeUrl",uV="getStandardParams",dV="handleCodeResponseFromServer",hV="handleCodeResponse",mV="handleResponseEar",pV="handleResponsePlatformBroker",fV="handleResponseCode",gV="updateTokenEndpointAuthority",vV="authClientAcquireToken",yV="authClientExecuteTokenRequest",bV="authClientCreateTokenRequestBody",xV="popTokenGenerateCnf",wV="popTokenGenerateKid",kV="handleServerTokenResponse",jV="deserializeResponse",SV="authorityFactoryCreateDiscoveredInstance",CV="authorityResolveEndpointsAsync",NV="authorityGetCloudDiscoveryMetadataFromNetwork",_V="authorityUpdateCloudDiscoveryMetadata",AV="authorityGetEndpointMetadataFromNetwork",TV="authorityUpdateEndpointMetadata",EV="authorityUpdateMetadataWithRegionalInformation",OV="regionDiscoveryDetectRegion",PV="regionDiscoveryGetRegionFromIMDS",IV="regionDiscoveryGetCurrentVersion",MV="acquireTokenByCodeAsync",RV="handleRedirectPromise",DV="handleNativeRedirectPromise",LV="nativeMessageHandlerHandshake",zV="removeHiddenIframe",qV="clearTokensAndKeysWithClaims",BV="cacheManagerGetRefreshToken",FV="importExistingCache",UV="setUserData",HV="localStorageUpdated",WV="generatePkceCodes",KV="generateCodeVerifier",VV="generateCodeChallengeFromVerifier",GV="sha256Digest",QV="getRandomValues",YV="generateHKDF",$V="generateBaseKey",JV="base64Decode",XV="urlEncodeArr",ZV="encrypt",eG="decrypt",tG="generateEarKey",rG="decryptEarResponse",nG="LoadExternalTokens",aG="loadAccount",iG="loadIdToken",oG="loadAccessToken",sG="loadRefreshToken",lG=(new Map([[jK,"ATByCode"],[SK,"ATByRT"],[CK,"ATS"],[NK,"ATSAsync"],[_K,"ATPopup"],[TK,"ATRedirect"],[EK,"CryptoGetPKThumb"],[OK,"CryptoSignJwt"],[PK,"SltCacheClientAT"],[IK,"SltIframeClientAT"],[RK,"SltRClientAT"],[DK,"SsoSlt"],[LK,"StdIntClientGetDiscAuth"],["fetchAccountIdWithNativeBroker","FetchAccIdWithNtvBroker"],[zK,"NtvIntClientAT"],["baseClientCreateTokenRequestHeaders","BaseClientCreateTReqHead"],[qK,"NetClientSendPost"],[BK,"RTClientExecPost"],[FK,"AuthCodeClientExecPost"],["brokerHandshake","BrokerHandshake"],["acquireTokenByRefreshTokenInBroker","ATByRTInBroker"],["acquireTokenByBroker","ATByBroker"],[UK,"RTClientExecTReq"],[HK,"RTClientAT"],[WK,"RTClientATWithCachedRT"],[KK,"RTClientATByRT"],[VK,"RTClientCreateTReqBody"],[GK,"ATFromCache"],[QK,"SltFlowClientATCached"],[YK,"SltFlowClientGenResFromCache"],[$K,"ATBySltIframe"],[JK,"InitBaseReq"],[XK,"InitSltReq"],[ZK,"InitClientApplication"],[eV,"InitCache"],[FV,"importCache"],[UV,"setUserData"],[HV,"localStorageUpdated"],[tV,"SIClientTHelper"],[rV,"SHandlerInitAuthReq"],[nV,"SltHandlerMonitorIframeForHash"],[aV,"SHandlerLoadFrame"],[iV,"SHandlerLoadFrameSync"],[oV,"StdIntClientCreateAuthCodeClient"],[sV,"StdIntClientGetClientConf"],[lV,"StdIntClientInitAuthReq"],[cV,"GetAuthCodeUrl"],[dV,"HandleCodeResFromServer"],[hV,"HandleCodeResp"],[mV,"HandleRespEar"],[fV,"HandleRespCode"],[pV,"HandleRespPlatBroker"],[gV,"UpdTEndpointAuth"],[vV,"AuthClientAT"],[yV,"AuthClientExecTReq"],[bV,"AuthClientCreateTReqBody"],[xV,"PopTGenCnf"],[wV,"PopTGenKid"],[kV,"HandleServerTRes"],[jV,"DeserializeRes"],[SV,"AuthFactCreateDiscInst"],[CV,"AuthResolveEndpointsAsync"],["authorityResolveEndpointsFromLocalSources","AuthResolveEndpointsFromLocal"],[NV,"AuthGetCDMetaFromNet"],[_V,"AuthUpdCDMeta"],[AV,"AuthUpdCDMetaFromNet"],[TV,"AuthUpdEndpointMeta"],[EV,"AuthUpdMetaWithRegInfo"],[OV,"RegDiscDetectReg"],[PV,"RegDiscGetRegFromIMDS"],[IV,"RegDiscGetCurrentVer"],[MV,"ATByCodeAsync"],["getEndpointMetadataFromNetwork","GetEndpointMetaFromNet"],["getCloudDiscoveryMetadataFromNetworkMeasurement","GetCDMetaFromNet"],[RV,"HandleRedirectPromise"],[DV,"HandleNtvRedirectPromise"],["updateCloudDiscoveryMetadataMeasurement","UpdateCDMeta"],["usernamePasswordClientAcquireToken","UserPassClientAT"],[LV,"NtvMsgHandlerHandshake"],["nativeGenerateAuthResult","NtvGenAuthRes"],[zV,"RemoveHiddenIframe"],[qV,"ClearTAndKeysWithClaims"],[BV,"CacheManagerGetRT"],[WV,"GenPkceCodes"],[KV,"GenCodeVerifier"],[VV,"GenCodeChallengeFromVerifier"],[GV,"Sha256Digest"],[QV,"GetRandomValues"],[YV,"genHKDF"],[$V,"genBaseKey"],[JV,"b64Decode"],[XV,"urlEncArr"],[ZV,"encrypt"],[eG,"decrypt"],[tG,"genEarKey"],[rG,"decryptEarResp"]]),1);new Set(["accessTokenSize","durationMs","idTokenSize","matsSilentStatus","matsHttpStatus","refreshTokenSize","queuedTimeMs","startTimeMs","status","multiMatchedAT","multiMatchedID","multiMatchedRT","unencryptedCacheCount","encryptedCacheExpiredCount","oldAccountCount","oldAccessCount","oldIdCount","oldRefreshCount","currAccountCount","currAccessCount","currIdCount","currRefreshCount","expiredCacheRemovedCount","upgradedCacheCount"]);class cG{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class uG{generateId(){return"callback-id"}startMeasurement(e,t){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:lG,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:t||""},measurement:new cG}}startPerformanceMeasurement(){return new cG}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}const dG={tokenRenewalOffsetSeconds:300,preventCorsPreflight:!1},hG={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:EU.Info,correlationId:Qq.EMPTY_STRING},mG={claimsBasedCachingEnabled:!1},pG={async sendGetRequestAsync(){throw uW(iW)},async sendPostRequestAsync(){throw uW(iW)}},fG={sku:Qq.SKU,version:mW,cpu:Qq.EMPTY_STRING,os:Qq.EMPTY_STRING},gG={clientSecret:Qq.EMPTY_STRING,clientAssertion:void 0},vG={azureCloudInstance:gH,tenant:"".concat(Qq.DEFAULT_COMMON_TENANT)},yG={application:{appName:"",appVersion:""}};function bG(e){return e.authOptions.authority.options.protocolMode===pH}const xG={sendGetRequestAsync:()=>Promise.reject(uW(iW)),sendPostRequestAsync:()=>Promise.reject(uW(iW))},wG="pkce_not_created",kG="ear_jwk_empty",jG="ear_jwe_empty",SG="crypto_nonexistent",CG="empty_navigate_uri",NG="hash_empty_error",_G="no_state_in_hash",AG="hash_does_not_contain_known_properties",TG="unable_to_parse_state",EG="state_interaction_type_mismatch",OG="interaction_in_progress",PG="popup_window_error",IG="empty_window_error",MG="user_cancelled",RG="monitor_popup_timeout",DG="monitor_window_timeout",LG="redirect_in_iframe",zG="block_iframe_reload",qG="block_nested_popups",BG="iframe_closed_prematurely",FG="silent_logout_unsupported",UG="no_account_error",HG="silent_prompt_value_error",WG="no_token_request_cache_error",KG="unable_to_parse_token_request_cache_error",VG="auth_request_not_set_error",GG="invalid_cache_type",QG="non_browser_environment",YG="database_not_open",$G="no_network_connectivity",JG="post_request_failed",XG="get_request_failed",ZG="failed_to_parse_response",eQ="unable_to_load_token",tQ="crypto_key_not_found",rQ="auth_code_required",nQ="auth_code_or_nativeAccountId_required",aQ="spa_code_and_nativeAccountId_present",iQ="database_unavailable",oQ="unable_to_acquire_token_from_native_platform",sQ="native_handshake_timeout",lQ="native_extension_not_installed",cQ="native_connection_not_established",uQ="uninitialized_public_client_application",dQ="native_prompt_not_supported",hQ="invalid_base64_string",mQ="invalid_pop_token_request",pQ="failed_to_build_headers",fQ="failed_to_parse_headers",gQ="failed_to_decrypt_ear_response",vQ="timed_out",yQ="For more visit: aka.ms/msaljs/browser-errors",bQ={[wG]:"The PKCE code challenge and verifier could not be generated.",[kG]:"No EAR encryption key provided. This is unexpected.",[jG]:"Server response does not contain ear_jwe property. This is unexpected.",[SG]:"The crypto object or function is not available.",[CG]:"Navigation URI is empty. Please check stack trace for more info.",[NG]:"Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ".concat(yQ),[_G]:"Hash does not contain state. Please verify that the request originated from msal.",[AG]:"Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ".concat(yQ),[TG]:"Unable to parse state. Please verify that the request originated from msal.",[EG]:"Hash contains state but the interaction type does not match the caller.",[OG]:"Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ".concat(yQ),[PG]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[IG]:"window.open returned null or undefined window object.",[MG]:"User cancelled the flow.",[RG]:"Token acquisition in popup failed due to timeout.  ".concat(yQ),[DG]:"Token acquisition in iframe failed due to timeout.  ".concat(yQ),[LG]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[zG]:"Request was blocked inside an iframe because MSAL detected an authentication response.  ".concat(yQ),[qG]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[BG]:"The iframe being monitored was closed prematurely.",[FG]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[UG]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[HG]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[WG]:"No token request found in cache.",[KG]:"The cached token request could not be parsed.",[VG]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[GG]:"Invalid cache type",[QG]:"Login and token requests are not supported in non-browser environments.",[YG]:"Database is not open!",[$G]:"No network connectivity. Check your internet connection.",[JG]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[XG]:"Network request failed. Please check the network trace to determine root cause.",[ZG]:"Failed to parse network response. Check network trace.",[eQ]:"Error loading token to cache.",[tQ]:"Cryptographic Key or Keypair not found in browser storage.",[rQ]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[nQ]:"An authorization code or nativeAccountId must be provided to this flow.",[aQ]:"Request cannot contain both spa code and native account id.",[iQ]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[oQ]:"Unable to acquire token from native platform.  ".concat(yQ),[sQ]:"Timed out while attempting to establish connection to browser extension",[lQ]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[cQ]:"Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ".concat(yQ),[uQ]:"You must call and await the initialize function before attempting to call any other MSAL API.  ".concat(yQ),[dQ]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[hQ]:"Invalid base64 encoded string.",[mQ]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true.",[pQ]:"Failed to build request headers object.",[fQ]:"Failed to parse response headers",[gQ]:"Failed to decrypt ear response",[vQ]:"The request timed out."};class xQ extends hF{constructor(e,t){super(e,bQ[e],t),Object.setPrototypeOf(this,xQ.prototype),this.name="BrowserAuthError"}}function wQ(e,t){return new xQ(e,t)}class kQ{navigateInternal(e,t){return kQ.defaultNavigateWindow(e,t)}navigateExternal(e,t){return kQ.defaultNavigateWindow(e,t)}static defaultNavigateWindow(e,t){return t.noHistory?window.location.replace(e):window.location.assign(e),new Promise((e,r)=>{setTimeout(()=>{r(wQ(vQ,"failed_to_redirect"))},t.timeout)})}}class jQ extends hF{constructor(e,t,r){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,jQ.prototype),this.name="NetworkError",this.error=e,this.httpStatus=t,this.responseHeaders=r}}function SQ(e,t,r,n){return e.errorMessage="".concat(e.errorMessage,", additionalErrorInfo: error.name:").concat(null===n||void 0===n?void 0:n.name,", error.message:").concat(null===n||void 0===n?void 0:n.message),new jQ(e,t,r)}class CQ{async sendGetRequestAsync(e,t){let r,n={},a=0;const i=NQ(t);try{r=await fetch(e,{method:UF,headers:i})}catch(OX){throw SQ(wQ(window.navigator.onLine?XG:$G),void 0,void 0,OX)}n=_Q(r.headers);try{return a=r.status,{headers:n,body:await r.json(),status:a}}catch(OX){throw SQ(wQ(ZG),a,n,OX)}}async sendPostRequestAsync(e,t){const r=t&&t.body||"",n=NQ(t);let a,i=0,o={};try{a=await fetch(e,{method:HF,headers:n,body:r})}catch(OX){throw SQ(wQ(window.navigator.onLine?JG:$G),void 0,void 0,OX)}o=_Q(a.headers);try{return i=a.status,{headers:o,body:await a.json(),status:i}}catch(OX){throw SQ(wQ(ZG),i,o,OX)}}}function NQ(e){try{const t=new Headers;if(!e||!e.headers)return t;const r=e.headers;return Object.entries(r).forEach(e=>{let[r,n]=e;t.append(r,n)}),t}catch(OX){throw SQ(wQ(pQ),void 0,void 0,OX)}}function _Q(e){try{const t={};return e.forEach((e,r)=>{t[r]=e}),t}catch(OX){throw wQ(fQ)}}const AQ="client_id",TQ="redirect_uri",EQ="token_type",OQ="req_cnf",PQ="return_spa_code",IQ="x-client-xtra-sku",MQ="brk_client_id",RQ="brk_redirect_uri",DQ="instance_aware";function LQ(e,t,r){if(!t)return;const n=e.get(AQ);n&&e.has(MQ)&&(null===r||void 0===r||r.addFields({embeddedClientId:n,embeddedRedirectUri:e.get(TQ)},t))}function zQ(e,t){e.set("response_type",t)}function qQ(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:nB;!r||n.includes("openid")||t.includes("openid")||n.push("openid");const a=r?[...t||[],...n]:t||[],i=new UW(a);e.set("scope",i.printScopes())}function BQ(e,t){e.set(AQ,t)}function FQ(e,t){e.set(TQ,t)}function UQ(e,t){e.set("login_hint",t)}function HQ(e,t){e.set(lB,"UPN:".concat(t))}function WQ(e,t){e.set(lB,"Oid:".concat(t.uid,"@").concat(t.utid))}function KQ(e,t){e.set("sid",t)}function VQ(e,t,r){const n=iY(t,r);try{JSON.parse(n)}catch(OX){throw BW(xW)}e.set("claims",n)}function GQ(e,t){e.set("client-request-id",t)}function QQ(e,t){e.set("x-client-SKU",t.sku),e.set("x-client-VER",t.version),t.os&&e.set("x-client-OS",t.os),t.cpu&&e.set("x-client-CPU",t.cpu)}function YQ(e,t){null!==t&&void 0!==t&&t.appName&&e.set("x-app-name",t.appName),null!==t&&void 0!==t&&t.appVersion&&e.set("x-app-ver",t.appVersion)}function $Q(e,t){t&&e.set("state",t)}function JQ(e,t,r){if(!t||!r)throw BW(SW);e.set("code_challenge",t),e.set("code_challenge_method",r)}function XQ(e,t){e.set("client_secret",t)}function ZQ(e,t){t&&e.set("client_assertion",t)}function eY(e,t){t&&e.set("client_assertion_type",t)}function tY(e,t){e.set("grant_type",t)}function rY(e){e.set("client_info","1")}function nY(e){e.has(DQ)||e.set(DQ,"true")}function aY(e,t){Object.entries(t).forEach(t=>{let[r,n]=t;!e.has(r)&&n&&e.set(r,n)})}function iY(e,t){let r;if(e)try{r=JSON.parse(e)}catch(OX){throw BW(xW)}else r={};return t&&t.length>0&&(r.hasOwnProperty(fB)||(r[fB]={}),r[fB][gB]={values:t}),JSON.stringify(r)}function oY(e,t){t&&(e.set(EQ,WB.POP),e.set(OQ,t))}function sY(e,t){t&&(e.set(EQ,WB.SSH),e.set(OQ,t))}function lY(e,t){e.set("x-client-current-telemetry",t.generateCurrentRequestHeaderValue()),e.set("x-client-last-telemetry",t.generateLastRequestHeaderValue())}function cY(e){e.set("x-ms-lib-capability",QB)}function uY(e,t,r){e.has(MQ)||e.set(MQ,t),e.has(RQ)||e.set(RQ,r)}function dY(e){return encodeURIComponent(mY(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function hY(e){return pY(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function mY(e){return pY((new TextEncoder).encode(e))}function pY(e){const t=Array.from(e,e=>String.fromCodePoint(e)).join("");return btoa(t)}function fY(e){return(new TextDecoder).decode(gY(e))}function gY(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw wQ(hQ)}const r=atob(t);return Uint8Array.from(r,e=>e.codePointAt(0)||0)}const vY="AES-GCM",yY="HKDF",bY="SHA-256",xY=new Uint8Array([1,0,1]),wY="0123456789abcdef",kY=new Uint32Array(1),jY="raw",SY="encrypt",CY="decrypt",NY={name:"RSASSA-PKCS1-v1_5",hash:bY,modulusLength:2048,publicExponent:xY};async function _Y(e,t,r){null===t||void 0===t||t.addQueueMeasurement(GV,r);const n=(new TextEncoder).encode(e);return window.crypto.subtle.digest(bY,n)}function AY(e){return window.crypto.getRandomValues(e)}function TY(){return window.crypto.getRandomValues(kY),kY[0]}function EY(){const e=Date.now(),t=1024*TY()+(1023&TY()),r=new Uint8Array(16),n=Math.trunc(t/2**30),a=t&2**30-1,i=TY();r[0]=e/2**40,r[1]=e/2**32,r[2]=e/2**24,r[3]=e/65536,r[4]=e/256,r[5]=e,r[6]=112|n>>>8,r[7]=n,r[8]=128|a>>>24,r[9]=a>>>16,r[10]=a>>>8,r[11]=a,r[12]=i>>>24,r[13]=i>>>16,r[14]=i>>>8,r[15]=i;let o="";for(let s=0;s<r.length;s++)o+=wY.charAt(r[s]>>>4),o+=wY.charAt(15&r[s]),3!==s&&5!==s&&7!==s&&9!==s||(o+="-");return o}async function OY(e){return window.crypto.subtle.exportKey("jwk",e)}async function PY(){const e=await MY(),t={alg:"dir",kty:"oct",k:hY(new Uint8Array(e))};return mY(JSON.stringify(t))}async function IY(e,t){const r=t.split(".");if(5!==r.length)throw wQ(gQ,"jwe_length");const n=await async function(e){const t=fY(e),r=gY(JSON.parse(t).k);return window.crypto.subtle.importKey(jY,r,vY,!1,[CY])}(e).catch(()=>{throw wQ(gQ,"import_key")});try{const e=(new TextEncoder).encode(r[0]),t=gY(r[2]),a=gY(r[3]),i=gY(r[4]),o=8*i.byteLength,s=new Uint8Array(a.length+i.length);s.set(a),s.set(i,a.length);const l=await window.crypto.subtle.decrypt({name:vY,iv:t,tagLength:o,additionalData:e},n,s);return(new TextDecoder).decode(l)}catch(OX){throw wQ(gQ,"decrypt")}}async function MY(){const e=await window.crypto.subtle.generateKey({name:vY,length:256},!0,[SY,CY]);return window.crypto.subtle.exportKey(jY,e)}async function RY(e){return window.crypto.subtle.importKey(jY,e,yY,!1,["deriveKey"])}async function DY(e,t,r){return window.crypto.subtle.deriveKey({name:yY,salt:t,hash:bY,info:(new TextEncoder).encode(r)},e,{name:vY,length:256},!1,[SY,CY])}async function LY(e,t,r){const n=(new TextEncoder).encode(t),a=window.crypto.getRandomValues(new Uint8Array(16)),i=await DY(e,a,r),o=await window.crypto.subtle.encrypt({name:vY,iv:new Uint8Array(12)},i,n);return{data:hY(new Uint8Array(o)),nonce:hY(a)}}async function zY(e,t,r,n){const a=gY(n),i=await DY(e,gY(t),r),o=await window.crypto.subtle.decrypt({name:vY,iv:new Uint8Array(12)},i,a);return(new TextDecoder).decode(o)}async function qY(e){const t=await _Y(e);return hY(new Uint8Array(t))}function BY(e){e.location.hash="","function"===typeof e.history.replaceState&&e.history.replaceState(null,"","".concat(e.location.origin).concat(e.location.pathname).concat(e.location.search))}function FY(){return window.parent!==window}function UY(){return"undefined"!==typeof window&&window.location?window.location.href.split("?")[0].split("#")[0]:""}function HY(){if("undefined"!==typeof window&&window.opener&&window.opener!==window&&"string"===typeof window.name&&0===window.name.indexOf("".concat(SF,".")))throw wQ(qG)}function WY(){if("undefined"===typeof window)throw wQ(QG)}function KY(e){if(!e)throw wQ(uQ)}function VY(e){WY(),function(){if(uK.hashContainsKnownProperties(window.location.hash)&&FY())throw wQ(zG)}(),HY(),KY(e)}function GY(e,t){if(VY(e),function(e){if(FY()&&!e)throw wQ(LG)}(t.system.allowRedirectInIframe),t.cache.cacheLocation===FF&&!t.cache.storeAuthStateInCookie)throw bF(gF)}function QY(e){const t=document.createElement("link");t.rel="preconnect",t.href=new URL(e).origin,t.crossOrigin="anonymous",document.head.appendChild(t),window.setTimeout(()=>{try{document.head.removeChild(t)}catch(e){}},1e4)}const YY=1e4;const $Y="4.28.1",JY="msal",XY="browser",ZY="".concat(JY,".").concat(XY,".log.level"),e$="".concat(JY,".").concat(XY,".log.pii"),t$=("".concat(JY,".").concat(XY,".performance.enabled"),"".concat(JY,".version")),r$="account.keys",n$="token.keys";function a$(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return e<1?"".concat(JY,".").concat(r$):"".concat(JY,".").concat(e,".").concat(r$)}function i$(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return t<1?"".concat(JY,".").concat(n$,".").concat(e):"".concat(JY,".").concat(t,".").concat(n$,".").concat(e)}class o${static loggerCallback(e,t){switch(e){case EU.Error:return void console.error(t);case EU.Info:return void console.info(t);case EU.Verbose:return void console.debug(t);case EU.Warning:return void console.warn(t);default:return void console.log(t)}}constructor(e){var t,r;let n;this.browserEnvironment="undefined"!==typeof window,this.config=function(e,t){let{auth:r,cache:n,system:a,telemetry:i}=e;const o={clientId:Qq.EMPTY_STRING,authority:"".concat(Qq.DEFAULT_AUTHORITY),knownAuthorities:[],cloudDiscoveryMetadata:Qq.EMPTY_STRING,authorityMetadata:Qq.EMPTY_STRING,redirectUri:"undefined"!==typeof window?UY():"",postLogoutRedirectUri:Qq.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:mH,OIDCOptions:{serverResponseType:CB,defaultScopes:[Qq.OPENID_SCOPE,Qq.PROFILE_SCOPE,Qq.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:gH,tenant:Qq.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1,encodeExtraQueryParams:!1},s={cacheLocation:BF,cacheRetentionDays:5,temporaryCacheLocation:BF,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!(!n||n.cacheLocation!==qF),claimsBasedCachingEnabled:!1},l={loggerCallback:()=>{},logLevel:EU.Info,piiLoggingEnabled:!1},c=u(u({},dG),{},{loggerOptions:l,networkClient:t?new CQ:xG,navigationClient:new kQ,loadFrameTimeout:0,windowHashTimeout:(null===a||void 0===a?void 0:a.loadFrameTimeout)||6e4,iframeHashTimeout:(null===a||void 0===a?void 0:a.loadFrameTimeout)||YY,navigateFrameWait:0,redirectNavigationTimeout:3e4,asyncPopups:!1,allowRedirectInIframe:!1,allowPlatformBroker:!1,allowPlatformBrokerWithDOM:!1,nativeBrokerHandshakeTimeout:(null===a||void 0===a?void 0:a.nativeBrokerHandshakeTimeout)||2e3,pollIntervalMilliseconds:CF}),d=u(u(u({},c),a),{},{loggerOptions:(null===a||void 0===a?void 0:a.loggerOptions)||l}),h={application:{appName:Qq.EMPTY_STRING,appVersion:Qq.EMPTY_STRING},client:new uG};(null===r||void 0===r?void 0:r.protocolMode)!==pH&&null!==r&&void 0!==r&&r.OIDCOptions&&new OU(d.loggerOptions).warning(JSON.stringify(BW(PW)));if(null!==r&&void 0!==r&&r.protocolMode&&r.protocolMode===pH&&null!==d&&void 0!==d&&d.allowPlatformBroker)throw BW(IW);return{auth:u(u(u({},o),r),{},{OIDCOptions:u(u({},o.OIDCOptions),null===r||void 0===r?void 0:r.OIDCOptions)}),cache:u(u({},s),n),system:d,telemetry:u(u({},h),i)}}(e,this.browserEnvironment);try{n=window[BF]}catch(OX){}const a=null===(t=n)||void 0===t?void 0:t.getItem(ZY),i=null===(r=n)||void 0===r||null===(r=r.getItem(e$))||void 0===r?void 0:r.toLowerCase(),o="true"===i||"false"!==i&&void 0,s=u({},this.config.system.loggerOptions),l=a&&Object.keys(EU).includes(a)?EU[a]:void 0;l&&(s.loggerCallback=o$.loggerCallback,s.logLevel=l),void 0!==o&&(s.piiLoggingEnabled=o),this.logger=new OU(s,"@azure/msal-browser",$Y),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}class s$ extends o${getModuleName(){return s$.MODULE_NAME}getId(){return s$.ID}async initialize(){return this.available="undefined"!==typeof window,this.available}}s$.MODULE_NAME="",s$.ID="StandardOperatingContext";const l$="missing_kid_error",c$="missing_alg_error",u$={[l$]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[c$]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class d$ extends hF{constructor(e,t){super(e,t),this.name="JoseHeaderError",Object.setPrototypeOf(this,d$.prototype)}}function h$(e){return new d$(e,u$[e])}class m${constructor(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}static getShrHeaderString(e){if(!e.kid)throw h$(l$);if(!e.alg)throw h$(c$);const t=new m$({typ:e.typ||lF,kid:e.kid,alg:e.alg});return JSON.stringify(t)}}class p${constructor(){this.dbName=wU,this.version=1,this.tableName=kU,this.dbOpen=!1}async open(){return new Promise((e,t)=>{const r=window.indexedDB.open(this.dbName,this.version);r.addEventListener("upgradeneeded",e=>{e.target.result.createObjectStore(this.tableName)}),r.addEventListener("success",t=>{const r=t;this.db=r.target.result,this.dbOpen=!0,e()}),r.addEventListener("error",()=>t(wQ(iQ)))})}closeConnection(){const e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)}async validateDbIsOpen(){if(!this.dbOpen)return this.open()}async getItem(e){return await this.validateDbIsOpen(),new Promise((t,r)=>{if(!this.db)return r(wQ(YG));const n=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(e);n.addEventListener("success",e=>{const r=e;this.closeConnection(),t(r.target.result)}),n.addEventListener("error",e=>{this.closeConnection(),r(e)})})}async setItem(e,t){return await this.validateDbIsOpen(),new Promise((r,n)=>{if(!this.db)return n(wQ(YG));const a=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(t,e);a.addEventListener("success",()=>{this.closeConnection(),r()}),a.addEventListener("error",e=>{this.closeConnection(),n(e)})})}async removeItem(e){return await this.validateDbIsOpen(),new Promise((t,r)=>{if(!this.db)return r(wQ(YG));const n=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(e);n.addEventListener("success",()=>{this.closeConnection(),t()}),n.addEventListener("error",e=>{this.closeConnection(),r(e)})})}async getKeys(){return await this.validateDbIsOpen(),new Promise((e,t)=>{if(!this.db)return t(wQ(YG));const r=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();r.addEventListener("success",t=>{const r=t;this.closeConnection(),e(r.target.result)}),r.addEventListener("error",e=>{this.closeConnection(),t(e)})})}async containsKey(e){return await this.validateDbIsOpen(),new Promise((t,r)=>{if(!this.db)return r(wQ(YG));const n=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(e);n.addEventListener("success",e=>{const r=e;this.closeConnection(),t(1===r.target.result)}),n.addEventListener("error",e=>{this.closeConnection(),r(e)})})}async deleteDatabase(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise((e,t)=>{const r=window.indexedDB.deleteDatabase(wU),n=setTimeout(()=>t(!1),200);r.addEventListener("success",()=>(clearTimeout(n),e(!0))),r.addEventListener("blocked",()=>(clearTimeout(n),e(!0))),r.addEventListener("error",()=>(clearTimeout(n),t(!1)))})}}class f${constructor(){this.cache=new Map}async initialize(){}getItem(e){return this.cache.get(e)||null}getUserData(e){return this.getItem(e)}setItem(e,t){this.cache.set(e,t)}async setUserData(e,t){this.setItem(e,t)}removeItem(e){this.cache.delete(e)}getKeys(){const e=[];return this.cache.forEach((t,r)=>{e.push(r)}),e}containsKey(e){return this.cache.has(e)}clear(){this.cache.clear()}decryptData(){return Promise.resolve(null)}}class g${constructor(e){this.inMemoryCache=new f$,this.indexedDBCache=new p$,this.logger=e}handleDatabaseAccessError(e){if(!(e instanceof xQ&&e.errorCode===iQ))throw e;this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.")}async getItem(e){const t=this.inMemoryCache.getItem(e);if(!t)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.getItem(e)}catch(OX){this.handleDatabaseAccessError(OX)}return t}async setItem(e,t){this.inMemoryCache.setItem(e,t);try{await this.indexedDBCache.setItem(e,t)}catch(OX){this.handleDatabaseAccessError(OX)}}async removeItem(e){this.inMemoryCache.removeItem(e);try{await this.indexedDBCache.removeItem(e)}catch(OX){this.handleDatabaseAccessError(OX)}}async getKeys(){const e=this.inMemoryCache.getKeys();if(0===e.length)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),await this.indexedDBCache.getKeys()}catch(OX){this.handleDatabaseAccessError(OX)}return e}async containsKey(e){const t=this.inMemoryCache.containsKey(e);if(!t)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.containsKey(e)}catch(OX){this.handleDatabaseAccessError(OX)}return t}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}async clearPersistent(){try{this.logger.verbose("Deleting persistent keystore");const e=await this.indexedDBCache.deleteDatabase();return e&&this.logger.verbose("Persistent keystore deleted"),e}catch(OX){return this.handleDatabaseAccessError(OX),!1}}}class v${constructor(e,t,r){this.logger=e,function(e){if(!window)throw wQ(QG);if(!window.crypto)throw wQ(SG);if(!e&&!window.crypto.subtle)throw wQ(SG,"crypto_subtle_undefined")}(null!==r&&void 0!==r&&r),this.cache=new g$(this.logger),this.performanceClient=t}createNewGuid(){return EY()}base64Encode(e){return mY(e)}base64Decode(e){return fY(e)}base64UrlEncode(e){return dY(e)}encodeKid(e){return this.base64UrlEncode(JSON.stringify({kid:e}))}async getPublicKeyThumbprint(e){var t;const r=null===(t=this.performanceClient)||void 0===t?void 0:t.startMeasurement(EK,e.correlationId),n=await async function(e,t){return window.crypto.subtle.generateKey(NY,e,t)}(v$.EXTRACTABLE,v$.POP_KEY_USAGES),a=await OY(n.publicKey),i=y$({e:a.e,kty:a.kty,n:a.n}),o=await this.hashString(i),s=await OY(n.privateKey),l=await async function(e,t,r){return window.crypto.subtle.importKey("jwk",e,NY,t,r)}(s,!1,["sign"]);return await this.cache.setItem(o,{privateKey:l,publicKey:n.publicKey,requestMethod:e.resourceRequestMethod,requestUri:e.resourceRequestUri}),r&&r.end({success:!0}),o}async removeTokenBindingKey(e){await this.cache.removeItem(e);if(await this.cache.containsKey(e))throw uW(ZH)}async clearKeystore(){this.cache.clearInMemory();try{return await this.cache.clearPersistent(),!0}catch(OX){return OX instanceof Error?this.logger.error("Clearing keystore failed with error: ".concat(OX.message)):this.logger.error("Clearing keystore failed with unknown error"),!1}}async signJwt(e,t,r,n){var a;const i=null===(a=this.performanceClient)||void 0===a?void 0:a.startMeasurement(OK,n),o=await this.cache.getItem(t);if(!o)throw wQ(tQ);const s=await OY(o.publicKey),l=y$(s),c=dY(JSON.stringify({kid:t})),d=dY(m$.getShrHeaderString(u(u({},null===r||void 0===r?void 0:r.header),{},{alg:s.alg,kid:c})));e.cnf={jwk:JSON.parse(l)};const h=dY(JSON.stringify(e)),m="".concat(d,".").concat(h),p=(new TextEncoder).encode(m),f=await async function(e,t){return window.crypto.subtle.sign(NY,e,t)}(o.privateKey,p),g=hY(new Uint8Array(f)),v="".concat(m,".").concat(g);return i&&i.end({success:!0}),v}async hashString(e){return qY(e)}}function y$(e){return JSON.stringify(e,Object.keys(e).sort())}v$.POP_KEY_USAGES=["sign","verify"],v$.EXTRACTABLE=!0;const b$=(e,t,r,n,a)=>function(){r.trace("Executing function ".concat(t));const i=null===n||void 0===n?void 0:n.startMeasurement(t,a);if(a){const e=t+"CallCount";null===n||void 0===n||n.incrementFields({[e]:1},a)}try{const n=e(...arguments);return null===i||void 0===i||i.end({success:!0}),r.trace("Returning result from ".concat(t)),n}catch(OX){r.trace("Error occurred in ".concat(t));try{r.trace(JSON.stringify(OX))}catch(OX){r.trace("Unable to print error message.")}throw null===i||void 0===i||i.end({success:!1},OX),OX}},x$=(e,t,r,n,a)=>function(){r.trace("Executing function ".concat(t));const i=null===n||void 0===n?void 0:n.startMeasurement(t,a);if(a){const e=t+"CallCount";null===n||void 0===n||n.incrementFields({[e]:1},a)}return null===n||void 0===n||n.setPreQueueTime(t,a),e(...arguments).then(e=>(r.trace("Returning result from ".concat(t)),null===i||void 0===i||i.end({success:!0}),e)).catch(e=>{r.trace("Error occurred in ".concat(t));try{r.trace(JSON.stringify(e))}catch(e){r.trace("Unable to print error message.")}throw null===i||void 0===i||i.end({success:!1},e),e})};class w${constructor(e,t,r,n){this.networkInterface=e,this.logger=t,this.performanceClient=r,this.correlationId=n}async detectRegion(e,t){var r;null===(r=this.performanceClient)||void 0===r||r.addQueueMeasurement(OV,this.correlationId);let n=e;if(n)t.region_source=XB;else{const e=w$.IMDS_OPTIONS;try{const r=await x$(this.getRegionFromIMDS.bind(this),PV,this.logger,this.performanceClient,this.correlationId)(Qq.IMDS_VERSION,e);if(r.status===Yq&&(n=r.body,t.region_source=ZB),r.status===Jq){const r=await x$(this.getCurrentVersion.bind(this),IV,this.logger,this.performanceClient,this.correlationId)(e);if(!r)return t.region_source=JB,null;const a=await x$(this.getRegionFromIMDS.bind(this),PV,this.logger,this.performanceClient,this.correlationId)(r,e);a.status===Yq&&(n=a.body,t.region_source=ZB)}}catch(OX){return t.region_source=JB,null}}return n||(t.region_source=JB),n||null}async getRegionFromIMDS(e,t){var r;return null===(r=this.performanceClient)||void 0===r||r.addQueueMeasurement(PV,this.correlationId),this.networkInterface.sendGetRequestAsync("".concat(Qq.IMDS_ENDPOINT,"?api-version=").concat(e,"&format=text"),t,Qq.IMDS_TIMEOUT)}async getCurrentVersion(e){var t;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(IV,this.correlationId);try{const t=await this.networkInterface.sendGetRequestAsync("".concat(Qq.IMDS_ENDPOINT,"?format=json"),e);return t.status===Jq&&t.body&&t.body["newest-versions"]&&t.body["newest-versions"].length>0?t.body["newest-versions"][0]:null}catch(OX){return null}}}function k$(){return Math.round((new Date).getTime()/1e3)}function j$(e){return e.getTime()/1e3}function S$(e){return e?new Date(1e3*Number(e)):new Date}function C$(e,t){const r=Number(e)||0;return k$()+t>r}function N$(e,t){const r=Number(e)+24*t*60*60*1e3;return Date.now()>r}function _$(e,t,r,n,a){return{credentialType:MB.ID_TOKEN,homeAccountId:e,environment:t,clientId:n,secret:r,realm:a,lastUpdatedAt:Date.now().toString()}}function A$(e,t,r,n,a,i,o,s,l,c,u,d,h,m,p){var f,g;const v={homeAccountId:e,credentialType:MB.ACCESS_TOKEN,secret:r,cachedAt:k$().toString(),expiresOn:o.toString(),extendedExpiresOn:s.toString(),environment:t,clientId:n,realm:a,target:i,tokenType:u||WB.BEARER,lastUpdatedAt:Date.now().toString()};if(d&&(v.userAssertionHash=d),c&&(v.refreshOn=c.toString()),m&&(v.requestedClaims=m,v.requestedClaimsHash=p),(null===(f=v.tokenType)||void 0===f?void 0:f.toLowerCase())!==WB.BEARER.toLowerCase())switch(v.credentialType=MB.ACCESS_TOKEN_WITH_AUTH_SCHEME,v.tokenType){case WB.POP:const e=rK(r,l);if(null===e||void 0===e||null===(g=e.cnf)||void 0===g||!g.kid)throw uW(JH);v.keyId=e.cnf.kid;break;case WB.SSH:v.keyId=h}return v}function T$(e,t,r,n,a,i,o){const s={credentialType:MB.REFRESH_TOKEN,homeAccountId:e,environment:t,clientId:n,secret:r,lastUpdatedAt:Date.now().toString()};return i&&(s.userAssertionHash=i),a&&(s.familyId=a),o&&(s.expiresOn=o.toString()),s}function E$(e){return e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("credentialType")&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("secret")}function O$(e){return!!e&&(E$(e)&&e.hasOwnProperty("realm")&&e.hasOwnProperty("target")&&(e.credentialType===MB.ACCESS_TOKEN||e.credentialType===MB.ACCESS_TOKEN_WITH_AUTH_SCHEME))}function P$(e){return!!e&&(E$(e)&&e.credentialType===MB.REFRESH_TOKEN)}function I$(){return k$()+zB}function M$(e,t,r){e.authorization_endpoint=t.authorization_endpoint,e.token_endpoint=t.token_endpoint,e.end_session_endpoint=t.end_session_endpoint,e.issuer=t.issuer,e.endpointsFromNetwork=r,e.jwks_uri=t.jwks_uri}function R$(e,t,r){e.aliases=t.aliases,e.preferred_cache=t.preferred_cache,e.preferred_network=t.preferred_network,e.aliasesFromNetwork=r}function D$(e){return e.expiresAt<=k$()}w$.IMDS_OPTIONS={headers:{Metadata:"true"}};class L${constructor(e,t,r,n,a,i,o,s){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=t,this.cacheManager=r,this.authorityOptions=n,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=a,this.performanceClient=o,this.correlationId=i,this.managedIdentity=s||!1,this.regionDiscovery=new w$(t,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(Qq.CIAM_AUTH_URL))return ZW;const t=e.PathSegments;if(t.length)switch(t[0].toLowerCase()){case Qq.ADFS:return JW;case Qq.DSTS:return XW}return $W}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new uK(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw uW(wH)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw uW(wH)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw uW(wH)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw uW(eW);return this.replacePath(this.metadata.end_session_endpoint)}throw uW(wH)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw uW(wH)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw uW(wH)}canReplaceTenant(e){return 1===e.PathSegments.length&&!L$.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===$W&&this.protocolMode!==pH}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let t=e;const r=new uK(this.metadata.canonical_authority).getUrlComponents(),n=r.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((e,a)=>{let i=n[a];if(0===a&&this.canReplaceTenant(r)){const e=new uK(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];i!==e&&(this.logger.verbose("Replacing tenant domain name ".concat(i," with id ").concat(e)),i=e)}e!==i&&(t=t.replace("/".concat(i,"/"),"/".concat(e,"/")))}),this.replaceTenant(t)}get defaultOpenIdConfigurationEndpoint(){const e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===JW||this.protocolMode===pH&&!this.isAliasOfKnownMicrosoftAuthority(e)?"".concat(this.canonicalAuthority,".well-known/openid-configuration"):"".concat(this.canonicalAuthority,"v2.0/.well-known/openid-configuration")}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){var e,t;null===(e=this.performanceClient)||void 0===e||e.addQueueMeasurement(CV,this.correlationId);const r=this.getCurrentMetadataEntity(),n=await x$(this.updateCloudDiscoveryMetadata.bind(this),_V,this.logger,this.performanceClient,this.correlationId)(r);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,r.preferred_network);const a=await x$(this.updateEndpointMetadata.bind(this),TV,this.logger,this.performanceClient,this.correlationId)(r);this.updateCachedMetadata(r,n,{source:a}),null===(t=this.performanceClient)||void 0===t||t.addFields({cloudDiscoverySource:n,authorityEndpointSource:a},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:I$(),jwks_uri:""}),e}updateCachedMetadata(e,t,r){t!==BB&&(null===r||void 0===r?void 0:r.source)!==BB&&(e.expiresAt=I$(),e.canonical_authority=this.canonicalAuthority);const n=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(n,e),this.metadata=e}async updateEndpointMetadata(e){var t;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(TV,this.correlationId);const r=this.updateEndpointMetadataFromLocalSources(e);if(r){var n;if(r.source===UB)if(null!==(n=this.authorityOptions.azureRegionConfiguration)&&void 0!==n&&n.azureRegion&&r.metadata){M$(e,await x$(this.updateMetadataWithRegionalInformation.bind(this),EV,this.logger,this.performanceClient,this.correlationId)(r.metadata),!1),e.canonical_authority=this.canonicalAuthority}return r.source}let a=await x$(this.getEndpointMetadataFromNetwork.bind(this),AV,this.logger,this.performanceClient,this.correlationId)();var i;if(a)return null!==(i=this.authorityOptions.azureRegionConfiguration)&&void 0!==i&&i.azureRegion&&(a=await x$(this.updateMetadataWithRegionalInformation.bind(this),EV,this.logger,this.performanceClient,this.correlationId)(a)),M$(e,a,!0),FB;throw uW(jH,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const t=this.getEndpointMetadataFromConfig();if(t)return this.logger.verbose("Found endpoint metadata in authority configuration"),M$(e,t,!1),{source:qB};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const t=this.getEndpointMetadataFromHardcodedValues();if(t)return M$(e,t,!1),{source:UB,metadata:t};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const r=D$(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!r?(this.logger.verbose("Found endpoint metadata in the cache."),{source:BB}):(r&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new uK(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch(OX){throw BW(NW)}return null}async getEndpointMetadataFromNetwork(){var e;null===(e=this.performanceClient)||void 0===e||e.addQueueMeasurement(AV,this.correlationId);const t={},r=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose("Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ".concat(r));try{const e=await this.networkInterface.sendGetRequestAsync(r,t),n=function(e){return e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("jwks_uri")}(e.body);return n?e.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(OX){return this.logger.verbose("Authority.getEndpointMetadataFromNetwork: ".concat(OX)),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in dK?dK[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){var t,r;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(EV,this.correlationId);const n=null===(r=this.authorityOptions.azureRegionConfiguration)||void 0===r?void 0:r.azureRegion;if(n){var a;if(n!==Qq.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=eF,this.regionDiscoveryMetadata.region_used=n,L$.replaceWithRegionalInformation(e,n);const t=await x$(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),OV,this.logger,this.performanceClient,this.correlationId)(null===(a=this.authorityOptions.azureRegionConfiguration)||void 0===a?void 0:a.environmentRegion,this.regionDiscoveryMetadata);if(t)return this.regionDiscoveryMetadata.region_outcome=tF,this.regionDiscoveryMetadata.region_used=t,L$.replaceWithRegionalInformation(e,t);this.regionDiscoveryMetadata.region_outcome=rF}return e}async updateCloudDiscoveryMetadata(e){var t;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(_V,this.correlationId);const r=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(r)return r;const n=await x$(this.getCloudDiscoveryMetadataFromNetwork.bind(this),NV,this.logger,this.performanceClient,this.correlationId)();if(n)return R$(e,n,!0),FB;throw BW(_W)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii("Known Authorities: ".concat(this.authorityOptions.knownAuthorities||Qq.NOT_APPLICABLE)),this.logger.verbosePii("Authority Metadata: ".concat(this.authorityOptions.authorityMetadata||Qq.NOT_APPLICABLE)),this.logger.verbosePii("Canonical Authority: ".concat(e.canonical_authority||Qq.NOT_APPLICABLE));const t=this.getCloudDiscoveryMetadataFromConfig();if(t)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),R$(e,t,!1),qB;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const t=(r=this.hostnameAndPort,fK(hK.metadata,r));if(t)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),R$(e,t,!1),UB;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}var r;const n=D$(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!n?(this.logger.verbose("Found cloud discovery metadata in the cache."),BB):(n&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===ZW)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),L$.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const e=fK(JSON.parse(this.authorityOptions.cloudDiscoveryMetadata).metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),e)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),e;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch(OX){throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),BW(CW)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),L$.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){var e;null===(e=this.performanceClient)||void 0===e||e.addQueueMeasurement(NV,this.correlationId);const t="".concat(Qq.AAD_INSTANCE_DISCOVERY_ENDPT).concat(this.canonicalAuthority,"oauth2/v2.0/authorize"),r={};let n=null;try{const e=await this.networkInterface.sendGetRequestAsync(t,r);let a,i;if(function(e){return e.hasOwnProperty("tenant_discovery_endpoint")&&e.hasOwnProperty("metadata")}(e.body))a=e.body,i=a.metadata,this.logger.verbosePii("tenant_discovery_endpoint is: ".concat(a.tenant_discovery_endpoint));else{if(!function(e){return e.hasOwnProperty("error")&&e.hasOwnProperty("error_description")}(e.body))return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;if(this.logger.warning("A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ".concat(e.status)),a=e.body,a.error===Qq.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning("The CloudInstanceDiscoveryErrorResponse error is ".concat(a.error)),this.logger.warning("The CloudInstanceDiscoveryErrorResponse error description is ".concat(a.error_description)),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),i=[]}this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),n=fK(i,this.hostnameAndPort)}catch(a){if(a instanceof hF)this.logger.error("There was a network error while attempting to get the cloud discovery instance metadata.\nError: ".concat(a.errorCode,"\nError Description: ").concat(a.errorMessage));else{const e=a;this.logger.error("A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.\nError: ".concat(e.name,"\nError Description: ").concat(e.message))}return null}return n||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),n=L$.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),n}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(e=>e&&uK.getDomainFromUrl(e).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,t){let r;if(t&&t.azureCloudInstance!==gH){const e=t.tenant?t.tenant:Qq.DEFAULT_COMMON_TENANT;r="".concat(t.azureCloudInstance,"/").concat(e,"/")}return r||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return Qq.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw uW(wH)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return mK.has(e)}static isPublicCloudAuthority(e){return Qq.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,t,r){const n=new uK(e);n.validateAsUri();const a=n.getUrlComponents();let i="".concat(t,".").concat(a.HostNameAndPort);this.isPublicCloudAuthority(a.HostNameAndPort)&&(i="".concat(t,".").concat(Qq.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX));const o=uK.constructAuthorityUriFromObject(u(u({},n.getUrlComponents()),{},{HostNameAndPort:i})).urlString;return r?"".concat(o,"?").concat(r):o}static replaceWithRegionalInformation(e,t){const r=u({},e);return r.authorization_endpoint=L$.buildRegionalAuthorityString(r.authorization_endpoint,t),r.token_endpoint=L$.buildRegionalAuthorityString(r.token_endpoint,t),r.end_session_endpoint&&(r.end_session_endpoint=L$.buildRegionalAuthorityString(r.end_session_endpoint,t)),r}static transformCIAMAuthority(e){let t=e;const r=new uK(e).getUrlComponents();if(0===r.PathSegments.length&&r.HostNameAndPort.endsWith(Qq.CIAM_AUTH_URL)){const e=r.HostNameAndPort.split(".")[0];t="".concat(t).concat(e).concat(Qq.AAD_TENANT_DOMAIN_SUFFIX)}return t}}function z$(e){return e.endsWith(Qq.FORWARD_SLASH)?e:"".concat(e).concat(Qq.FORWARD_SLASH)}L$.reservedTenantDomains=new Set(["{tenant}","{tenantid}",hB,pB,mB]);const q$="no_tokens_found",B$="native_account_unavailable",F$="refresh_token_expired",U$="ux_not_allowed",H$="bad_token",W$=["interaction_required","consent_required","login_required",H$,U$],K$=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],V$={[q$]:"No refresh token found in the cache. Please sign-in.",[B$]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[F$]:"Refresh token has expired.",[H$]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve.",[U$]:"`canShowUI` flag in Edge was set to false. User interaction required on web page. Please invoke an interactive API to resolve."};class G$ extends hF{constructor(e,t,r,n,a,i,o,s){super(e,t,r),Object.setPrototypeOf(this,G$.prototype),this.timestamp=n||Qq.EMPTY_STRING,this.traceId=a||Qq.EMPTY_STRING,this.correlationId=i||Qq.EMPTY_STRING,this.claims=o||Qq.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=s}}function Q$(e,t,r){const n=!!e&&W$.indexOf(e)>-1,a=!!r&&K$.indexOf(r)>-1,i=!!t&&W$.some(e=>t.indexOf(e)>-1);return n||i||a}function Y$(e){return new G$(e,V$[e])}function $$(e,t,r){var n;return{clientId:e,authority:t.authority,scopes:t.scopes,homeAccountIdentifier:r,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid,embeddedClientId:t.embeddedClientId||(null===(n=t.tokenBodyParameters)||void 0===n?void 0:n.clientId)}}const J$=864e5,X$="Lax",Z$="None";class eJ{initialize(){return Promise.resolve()}getItem(e){const t="".concat(encodeURIComponent(e)),r=document.cookie.split(";");for(let n=0;n<r.length;n++){const e=r[n],[a,...i]=decodeURIComponent(e).trim().split("="),o=i.join("=");if(a===t)return o}return""}getUserData(){throw uW(iW)}setItem(e,t,r){let n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:X$,i="".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t),";path=/;SameSite=").concat(a,";");if(r){const e=function(e){const t=new Date,r=new Date(t.getTime()+e*J$);return r.toUTCString()}(r);i+="expires=".concat(e,";")}(n||a===Z$)&&(i+="Secure;"),document.cookie=i}async setUserData(){return Promise.reject(uW(iW))}removeItem(e){this.setItem(e,"",-1)}getKeys(){const e=document.cookie.split(";"),t=[];return e.forEach(e=>{const r=decodeURIComponent(e).trim().split("=");t.push(r[0])}),t}containsKey(e){return this.getKeys().includes(e)}decryptData(){return Promise.resolve(null)}}function tJ(e,t){const r=e.getItem(a$(t));return r?JSON.parse(r):[]}function rJ(e,t,r){const n=t.getItem(i$(e,r));if(n){const e=JSON.parse(n);if(e&&e.hasOwnProperty("idToken")&&e.hasOwnProperty("accessToken")&&e.hasOwnProperty("refreshToken"))return e}return{idToken:[],accessToken:[],refreshToken:[]}}function nJ(e){return e.hasOwnProperty("id")&&e.hasOwnProperty("nonce")&&e.hasOwnProperty("data")}const aJ="msal.cache.encryption";class iJ{constructor(e,t,r){if(!window.localStorage)throw bF(pF);this.memoryStorage=new f$,this.initialized=!1,this.clientId=e,this.logger=t,this.performanceClient=r,this.broadcast=new BroadcastChannel("msal.broadcast.cache")}async initialize(e){const t=new eJ,r=t.getItem(aJ);let n={key:"",id:""};if(r)try{n=JSON.parse(r)}catch(OX){}if(n.key&&n.id){const t=b$(gY,JV,this.logger,this.performanceClient,e)(n.key);this.encryptionCookie={id:n.id,key:await x$(RY,YV,this.logger,this.performanceClient,e)(t)}}else{const r=EY(),n=await x$(MY,$V,this.logger,this.performanceClient,e)(),a=b$(hY,XV,this.logger,this.performanceClient,e)(new Uint8Array(n));this.encryptionCookie={id:r,key:await x$(RY,YV,this.logger,this.performanceClient,e)(n)};const i={id:r,key:a};t.setItem(aJ,JSON.stringify(i),0,!0,Z$)}await x$(this.importExistingCache.bind(this),FV,this.logger,this.performanceClient,e)(e),this.broadcast.addEventListener("message",this.updateCache.bind(this)),this.initialized=!0}getItem(e){return window.localStorage.getItem(e)}getUserData(e){if(!this.initialized)throw wQ(uQ);return this.memoryStorage.getItem(e)}async decryptData(e,t,r){if(!this.initialized||!this.encryptionCookie)throw wQ(uQ);if(t.id!==this.encryptionCookie.id)return this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},r),null;const n=await x$(zY,eG,this.logger,this.performanceClient,r)(this.encryptionCookie.key,t.nonce,this.getContext(e),t.data);if(!n)return null;try{return u(u({},JSON.parse(n)),{},{lastUpdatedAt:t.lastUpdatedAt})}catch(OX){return this.performanceClient.incrementFields({encryptedCacheCorruptionCount:1},r),null}}setItem(e,t){window.localStorage.setItem(e,t)}async setUserData(e,t,r,n,a){if(!this.initialized||!this.encryptionCookie)throw wQ(uQ);if(a)this.setItem(e,t);else{const{data:a,nonce:i}=await x$(LY,ZV,this.logger,this.performanceClient,r)(this.encryptionCookie.key,t,this.getContext(e)),o={id:this.encryptionCookie.id,nonce:i,data:a,lastUpdatedAt:n};this.setItem(e,JSON.stringify(o))}this.memoryStorage.setItem(e,t),this.broadcast.postMessage({key:e,value:t,context:this.getContext(e)})}removeItem(e){this.memoryStorage.containsKey(e)&&(this.memoryStorage.removeItem(e),this.broadcast.postMessage({key:e,value:null,context:this.getContext(e)})),window.localStorage.removeItem(e)}getKeys(){return Object.keys(window.localStorage)}containsKey(e){return window.localStorage.hasOwnProperty(e)}clear(){this.memoryStorage.clear();tJ(this).forEach(e=>this.removeItem(e));const e=rJ(this.clientId,this);e.idToken.forEach(e=>this.removeItem(e)),e.accessToken.forEach(e=>this.removeItem(e)),e.refreshToken.forEach(e=>this.removeItem(e)),this.getKeys().forEach(e=>{(e.startsWith(JY)||-1!==e.indexOf(this.clientId))&&this.removeItem(e)})}async importExistingCache(e){if(!this.encryptionCookie)return;let t=tJ(this);t=await this.importArray(t,e),t.length?this.setItem(a$(),JSON.stringify(t)):this.removeItem(a$());const r=rJ(this.clientId,this);r.idToken=await this.importArray(r.idToken,e),r.accessToken=await this.importArray(r.accessToken,e),r.refreshToken=await this.importArray(r.refreshToken,e),r.idToken.length||r.accessToken.length||r.refreshToken.length?this.setItem(i$(this.clientId),JSON.stringify(r)):this.removeItem(i$(this.clientId))}async getItemFromEncryptedCache(e,t){if(!this.encryptionCookie)return null;const r=this.getItem(e);if(!r)return null;let n;try{n=JSON.parse(r)}catch(OX){return null}return nJ(n)?n.id!==this.encryptionCookie.id?(this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},t),null):(this.performanceClient.incrementFields({encryptedCacheCount:1},t),x$(zY,eG,this.logger,this.performanceClient,t)(this.encryptionCookie.key,n.nonce,this.getContext(e),n.data)):(this.performanceClient.incrementFields({unencryptedCacheCount:1},t),r)}async importArray(e,t){const r=[],n=[];return e.forEach(e=>{const a=this.getItemFromEncryptedCache(e,t).then(t=>{t?(this.memoryStorage.setItem(e,t),r.push(e)):this.removeItem(e)});n.push(a)}),await Promise.all(n),r}getContext(e){let t="";return e.includes(this.clientId)&&(t=this.clientId),t}updateCache(e){this.logger.trace("Updating internal cache from broadcast event");const t=this.performanceClient.startMeasurement(HV);t.add({isBackground:!0});const{key:r,value:n,context:a}=e.data;return r?a&&a!==this.clientId?(this.logger.trace("Ignoring broadcast event from clientId: ".concat(a)),void t.end({success:!1,errorCode:"contextMismatch"})):(n?(this.memoryStorage.setItem(r,n),this.logger.verbose("Updated item in internal cache")):(this.memoryStorage.removeItem(r),this.logger.verbose("Removed item from internal cache")),void t.end({success:!0})):(this.logger.error("Broadcast event missing key"),void t.end({success:!1,errorCode:"noKey"}))}}class oJ{constructor(){if(!window.sessionStorage)throw bF(pF)}async initialize(){}getItem(e){return window.sessionStorage.getItem(e)}getUserData(e){return this.getItem(e)}setItem(e,t){window.sessionStorage.setItem(e,t)}async setUserData(e,t){this.setItem(e,t)}removeItem(e){window.sessionStorage.removeItem(e)}getKeys(){return Object.keys(window.sessionStorage)}containsKey(e){return window.sessionStorage.hasOwnProperty(e)}decryptData(){return Promise.resolve(null)}}function sJ(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}class lJ extends wK{constructor(e,t,r,n,a,i,o){super(e,r,n,a,o),this.cacheConfig=t,this.logger=n,this.internalStorage=new f$,this.browserStorage=cJ(e,t.cacheLocation,n,a),this.temporaryCacheStorage=cJ(e,t.temporaryCacheLocation,n,a),this.cookieStorage=new eJ,this.eventHandler=i}async initialize(e){this.performanceClient.addFields({cacheLocation:this.cacheConfig.cacheLocation,cacheRetentionDays:this.cacheConfig.cacheRetentionDays},e),await this.browserStorage.initialize(e),await this.migrateExistingCache(e),this.trackVersionChanges(e)}async migrateExistingCache(e){let t=tJ(this.browserStorage),r=rJ(this.clientId,this.browserStorage);this.performanceClient.addFields({preMigrateAcntCount:t.length,preMigrateATCount:r.accessToken.length,preMigrateITCount:r.idToken.length,preMigrateRTCount:r.refreshToken.length},e);for(let a=0;a<2;a++){const t=a;await this.removeStaleAccounts(a,t,e)}for(let a=0;a<2;a++){const t=a;await this.migrateIdTokens(a,t,e)}const n=this.getKMSIValues();for(let a=0;a<2;a++)await this.migrateAccessTokens(a,n,e),await this.migrateRefreshTokens(a,n,e);t=tJ(this.browserStorage),r=rJ(this.clientId,this.browserStorage),this.performanceClient.addFields({postMigrateAcntCount:t.length,postMigrateATCount:r.accessToken.length,postMigrateITCount:r.idToken.length,postMigrateRTCount:r.refreshToken.length},e)}async updateOldEntry(e,t){const r=this.browserStorage.getItem(e),n=this.validateAndParseJson(r||"");if(!n)return this.browserStorage.removeItem(e),null;if(n.lastUpdatedAt){if(N$(n.lastUpdatedAt,this.cacheConfig.cacheRetentionDays))return this.browserStorage.removeItem(e),this.performanceClient.incrementFields({expiredCacheRemovedCount:1},t),null}else n.lastUpdatedAt=Date.now().toString(),this.setItem(e,JSON.stringify(n),t);const a=nJ(n)?await this.browserStorage.decryptData(e,n,t):n;return a&&E$(a)?(O$(a)||P$(a))&&a.expiresOn&&C$(a.expiresOn,300)?(this.browserStorage.removeItem(e),this.performanceClient.incrementFields({expiredCacheRemovedCount:1},t),null):a:(this.performanceClient.incrementFields({invalidCacheCount:1},t),null)}async removeStaleAccounts(e,t,r){const n=tJ(this.browserStorage,e);if(0!==n.length){for(const e of[...n]){this.performanceClient.incrementFields({oldAcntCount:1},r);const a=this.browserStorage.getItem(e),i=this.validateAndParseJson(a||"");i?i.lastUpdatedAt?N$(i.lastUpdatedAt,this.cacheConfig.cacheRetentionDays)&&(await this.removeAccountOldSchema(e,i,t,r),sJ(n,e)):(i.lastUpdatedAt=Date.now().toString(),this.setItem(e,JSON.stringify(i),r)):sJ(n,e)}this.setAccountKeys(n,r,e)}}async removeAccountOldSchema(e,t,r,n){const a=nJ(t)?await this.browserStorage.decryptData(e,t,n):t,i=null===a||void 0===a?void 0:a.homeAccountId;if(i){const e=this.getTokenKeys(r);[...e.idToken].filter(e=>e.includes(i)).forEach(t=>{this.browserStorage.removeItem(t),sJ(e.idToken,t)}),[...e.accessToken].filter(e=>e.includes(i)).forEach(t=>{this.browserStorage.removeItem(t),sJ(e.accessToken,t)}),[...e.refreshToken].filter(e=>e.includes(i)).forEach(t=>{this.browserStorage.removeItem(t),sJ(e.refreshToken,t)}),this.setTokenKeys(e,n,r)}this.performanceClient.incrementFields({expiredAcntRemovedCount:1},n),this.browserStorage.removeItem(e)}getKMSIValues(){const e={},t=this.getTokenKeys().idToken;for(const r of t){const t=this.browserStorage.getUserData(r);if(t){const r=JSON.parse(t),n=rK(r.secret,fY);n&&(e[r.homeAccountId]=nK(n))}}return e}async migrateIdTokens(e,t,r){const n=rJ(this.clientId,this.browserStorage,e);if(0===n.idToken.length)return;const a=rJ(this.clientId,this.browserStorage,2),i=tJ(this.browserStorage),o=tJ(this.browserStorage,t);for(const s of[...n.idToken]){this.performanceClient.incrementFields({oldITCount:1},r);const e=await this.updateOldEntry(s,r);if(!e){sJ(n.idToken,s);continue}const t=i.find(t=>t.includes(e.homeAccountId)),l=o.find(t=>t.includes(e.homeAccountId));let c=null;if(t)c=this.getAccount(t,r);else if(l){const e=this.browserStorage.getItem(l),t=this.validateAndParseJson(e||"");c=t&&nJ(t)?await this.browserStorage.decryptData(l,t,r):t}if(!c){this.performanceClient.incrementFields({skipITMigrateCount:1},r);continue}const u=rK(e.secret,fY),d=this.generateCredentialKey(e),h=this.getIdTokenCredential(d,r),m=Object.keys(u).includes("signin_state"),p=h&&Object.keys(rK(h.secret,fY)||{}).includes("signin_state");if(!h||e.lastUpdatedAt>h.lastUpdatedAt&&(m||!p)){const t=c.tenantProfiles||[],n=eK(u)||c.realm;if(n&&!t.find(e=>e.tenantId===n)){const e=QW(c.homeAccountId,c.localAccountId,n,u);t.push(e)}c.tenantProfiles=t;const o=this.generateAccountKey(tK.getAccountInfo(c)),s=nK(u);await this.setUserData(o,JSON.stringify(c),r,c.lastUpdatedAt,s),i.includes(o)||i.push(o),await this.setUserData(d,JSON.stringify(e),r,e.lastUpdatedAt,s),this.performanceClient.incrementFields({migratedITCount:1},r),a.idToken.push(d)}}this.setTokenKeys(n,r,e),this.setTokenKeys(a,r),this.setAccountKeys(i,r)}async migrateAccessTokens(e,t,r){const n=rJ(this.clientId,this.browserStorage,e);if(0===n.accessToken.length)return;const a=rJ(this.clientId,this.browserStorage,2);for(const i of[...n.accessToken]){this.performanceClient.incrementFields({oldATCount:1},r);const e=await this.updateOldEntry(i,r);if(!e){sJ(n.accessToken,i);continue}if(!Object.keys(t).includes(e.homeAccountId)){this.performanceClient.incrementFields({skipATMigrateCount:1},r);continue}const o=this.generateCredentialKey(e),s=t[e.homeAccountId];if(a.accessToken.includes(o)){const t=this.getAccessTokenCredential(o,r);(!t||e.lastUpdatedAt>t.lastUpdatedAt)&&(await this.setUserData(o,JSON.stringify(e),r,e.lastUpdatedAt,s),this.performanceClient.incrementFields({migratedATCount:1},r))}else await this.setUserData(o,JSON.stringify(e),r,e.lastUpdatedAt,s),this.performanceClient.incrementFields({migratedATCount:1},r),a.accessToken.push(o)}this.setTokenKeys(n,r,e),this.setTokenKeys(a,r)}async migrateRefreshTokens(e,t,r){const n=rJ(this.clientId,this.browserStorage,e);if(0===n.refreshToken.length)return;const a=rJ(this.clientId,this.browserStorage,2);for(const i of[...n.refreshToken]){this.performanceClient.incrementFields({oldRTCount:1},r);const e=await this.updateOldEntry(i,r);if(!e){sJ(n.refreshToken,i);continue}if(!Object.keys(t).includes(e.homeAccountId)){this.performanceClient.incrementFields({skipRTMigrateCount:1},r);continue}const o=this.generateCredentialKey(e),s=t[e.homeAccountId];if(a.refreshToken.includes(o)){const t=this.getRefreshTokenCredential(o,r);(!t||e.lastUpdatedAt>t.lastUpdatedAt)&&(await this.setUserData(o,JSON.stringify(e),r,e.lastUpdatedAt,s),this.performanceClient.incrementFields({migratedRTCount:1},r))}else await this.setUserData(o,JSON.stringify(e),r,e.lastUpdatedAt,s),this.performanceClient.incrementFields({migratedRTCount:1},r),a.refreshToken.push(o)}this.setTokenKeys(n,r,e),this.setTokenKeys(a,r)}trackVersionChanges(e){const t=this.browserStorage.getItem(t$);t&&(this.logger.info("MSAL.js was last initialized by version: ".concat(t)),this.performanceClient.addFields({previousLibraryVersion:t},e)),t!==$Y&&this.setItem(t$,$Y,e)}validateAndParseJson(e){if(!e)return null;try{const t=JSON.parse(e);return t&&"object"===typeof t?t:null}catch(t){return null}}setItem(e,t,r){const n=new Array(3).fill(0),a=[];for(let i=0;i<=20;i++)try{if(this.browserStorage.setItem(e,t),i>0)for(let e=0;e<=2;e++){const t=n.slice(0,e).reduce((e,t)=>e+t,0);if(t>=i)break;const o=i>t+n[e]?t+n[e]:i;i>t&&n[e]>0&&this.removeAccessTokenKeys(a.slice(t,o),r,e)}break}catch(OX){const s=xK(OX);if(!(s.errorCode===gK&&i<20))throw s;if(!a.length)for(let r=0;r<=2;r++)if(e===i$(this.clientId,r)){const e=JSON.parse(t).accessToken;a.push(...e),n[r]=e.length}else{const e=this.getTokenKeys(r).accessToken;a.push(...e),n[r]=e.length}if(a.length<=i)throw s;this.removeAccessToken(a[i],r,!1)}}async setUserData(e,t,r,n,a){const i=new Array(3).fill(0),o=[];for(let s=0;s<=20;s++)try{if(await x$(this.browserStorage.setUserData.bind(this.browserStorage),UV,this.logger,this.performanceClient)(e,t,r,n,a),s>0)for(let e=0;e<=2;e++){const t=i.slice(0,e).reduce((e,t)=>e+t,0);if(t>=s)break;const n=s>t+i[e]?t+i[e]:s;s>t&&i[e]>0&&this.removeAccessTokenKeys(o.slice(t,n),r,e)}break}catch(OX){const t=xK(OX);if(!(t.errorCode===gK&&s<20))throw t;if(!o.length)for(let r=0;r<=2;r++){const e=this.getTokenKeys(r).accessToken;o.push(...e),i[r]=e.length}if(o.length<=s)throw t;this.removeAccessToken(o[s],r,!1)}}getAccount(e,t){this.logger.trace("BrowserCacheManager.getAccount called");const r=this.browserStorage.getUserData(e);if(!r)return this.removeAccountKeyFromMap(e,t),null;const n=this.validateAndParseJson(r);return n&&tK.isAccountEntity(n)?(this.performanceClient.addFields({accountCachedBy:(a=n.cachedByApiId,"number"===typeof a&&a in uU?uU[a]:"unknown")},t),wK.toObject(new tK,n)):null;var a}async setAccount(e,t,r,n){this.logger.trace("BrowserCacheManager.setAccount called");const a=this.generateAccountKey(tK.getAccountInfo(e)),i=Date.now().toString();e.lastUpdatedAt=i,e.cachedByApiId=n,await this.setUserData(a,JSON.stringify(e),t,i,r);const o=this.addAccountKeyToMap(a,t);this.performanceClient.addFields({kmsi:r},t),this.cacheConfig.cacheLocation===qF&&o&&this.eventHandler.emitEvent(DU,void 0,tK.getAccountInfo(e))}getAccountKeys(){return tJ(this.browserStorage)}setAccountKeys(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;0===e.length?this.removeItem(a$(r)):this.setItem(a$(r),JSON.stringify(e),t)}addAccountKeyToMap(e,t){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii("BrowserCacheManager.addAccountKeyToMap called with key: ".concat(e));const r=this.getAccountKeys();return-1===r.indexOf(e)?(r.push(e),this.setItem(a$(),JSON.stringify(r),t),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added"),!0):(this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map"),!1)}removeAccountKeyFromMap(e,t){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii("BrowserCacheManager.removeAccountKeyFromMap called with key: ".concat(e));const r=this.getAccountKeys(),n=r.indexOf(e);n>-1?(r.splice(n,1),this.setAccountKeys(r,t),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")):this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}removeAccount(e,t){const r=this.getActiveAccount(t);(null===r||void 0===r?void 0:r.homeAccountId)===e.homeAccountId&&(null===r||void 0===r?void 0:r.environment)===e.environment&&this.setActiveAccount(null,t),super.removeAccount(e,t),this.removeAccountKeyFromMap(this.generateAccountKey(e),t),this.browserStorage.getKeys().forEach(t=>{t.includes(e.homeAccountId)&&t.includes(e.environment)&&this.browserStorage.removeItem(t)}),this.cacheConfig.cacheLocation===qF&&this.eventHandler.emitEvent(LU,void 0,e)}removeIdToken(e,t){super.removeIdToken(e,t);const r=this.getTokenKeys(),n=r.idToken.indexOf(e);n>-1&&(this.logger.info("idToken removed from tokenKeys map"),r.idToken.splice(n,1),this.setTokenKeys(r,t))}removeAccessToken(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];super.removeAccessToken(e,t),r&&this.removeAccessTokenKeys([e],t)}removeAccessTokenKeys(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;this.logger.trace("removeAccessTokenKey called");const n=this.getTokenKeys(r);let a=0;if(e.forEach(e=>{const t=n.accessToken.indexOf(e);t>-1&&(n.accessToken.splice(t,1),a++)}),a>0)return this.logger.info("removed ".concat(a," accessToken keys from tokenKeys map")),void this.setTokenKeys(n,t,r)}removeRefreshToken(e,t){super.removeRefreshToken(e,t);const r=this.getTokenKeys(),n=r.refreshToken.indexOf(e);n>-1&&(this.logger.info("refreshToken removed from tokenKeys map"),r.refreshToken.splice(n,1),this.setTokenKeys(r,t))}getTokenKeys(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return rJ(this.clientId,this.browserStorage,e)}setTokenKeys(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;0!==e.idToken.length||0!==e.accessToken.length||0!==e.refreshToken.length?this.setItem(i$(this.clientId,r),JSON.stringify(e),t):this.removeItem(i$(this.clientId,r))}getIdTokenCredential(e,t){const r=this.browserStorage.getUserData(e);if(!r)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeIdToken(e,t),null;const n=this.validateAndParseJson(r);return n&&(a=n)&&E$(a)&&a.hasOwnProperty("realm")&&a.credentialType===MB.ID_TOKEN?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),n):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),null);var a}async setIdTokenCredential(e,t,r){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");const n=this.generateCredentialKey(e),a=Date.now().toString();e.lastUpdatedAt=a,await this.setUserData(n,JSON.stringify(e),t,a,r);const i=this.getTokenKeys();-1===i.idToken.indexOf(n)&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),i.idToken.push(n),this.setTokenKeys(i,t))}getAccessTokenCredential(e,t){const r=this.browserStorage.getUserData(e);if(!r)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeAccessTokenKeys([e],t),null;const n=this.validateAndParseJson(r);return n&&O$(n)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),n):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),null)}async setAccessTokenCredential(e,t,r){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");const n=this.generateCredentialKey(e),a=Date.now().toString();e.lastUpdatedAt=a,await this.setUserData(n,JSON.stringify(e),t,a,r);const i=this.getTokenKeys(),o=i.accessToken.indexOf(n);-1!==o&&i.accessToken.splice(o,1),this.logger.trace("access token ".concat(-1===o?"added to":"updated in"," map")),i.accessToken.push(n),this.setTokenKeys(i,t)}getRefreshTokenCredential(e,t){const r=this.browserStorage.getUserData(e);if(!r)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeRefreshToken(e,t),null;const n=this.validateAndParseJson(r);return n&&P$(n)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),n):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),null)}async setRefreshTokenCredential(e,t,r){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");const n=this.generateCredentialKey(e),a=Date.now().toString();e.lastUpdatedAt=a,await this.setUserData(n,JSON.stringify(e),t,a,r);const i=this.getTokenKeys();-1===i.refreshToken.indexOf(n)&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),i.refreshToken.push(n),this.setTokenKeys(i,t))}getAppMetadata(e){const t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(t);return r&&(n=e,(a=r)&&0===n.indexOf(RB)&&a.hasOwnProperty("clientId")&&a.hasOwnProperty("environment"))?(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),r):(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null);var n,a}setAppMetadata(e,t){this.logger.trace("BrowserCacheManager.setAppMetadata called");const r=function(e){let{environment:t,clientId:r}=e;return[RB,t,r].join(PB).toLowerCase()}(e);this.setItem(r,JSON.stringify(e),t)}getServerTelemetry(e){const t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;const r=this.validateAndParseJson(t);return r&&function(e,t){const r=0===e.indexOf(HB.CACHE_KEY);let n=!0;return t&&(n=t.hasOwnProperty("failedRequests")&&t.hasOwnProperty("errors")&&t.hasOwnProperty("cacheHits")),r&&n}(e,r)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),r):(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null)}setServerTelemetry(e,t,r){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(e,JSON.stringify(t),r)}getAuthorityMetadata(e){const t=this.internalStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(t);return r&&function(e,t){return!!t&&0===e.indexOf(LB)&&t.hasOwnProperty("aliases")&&t.hasOwnProperty("preferred_cache")&&t.hasOwnProperty("preferred_network")&&t.hasOwnProperty("canonical_authority")&&t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("aliasesFromNetwork")&&t.hasOwnProperty("endpointsFromNetwork")&&t.hasOwnProperty("expiresAt")&&t.hasOwnProperty("jwks_uri")}(e,r)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),r):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(e=>this.isAuthorityMetadata(e))}setWrapperMetadata(e,t){this.internalStorage.setItem(XF,e),this.internalStorage.setItem(ZF,t)}getWrapperMetadata(){return[this.internalStorage.getItem(XF)||Qq.EMPTY_STRING,this.internalStorage.getItem(ZF)||Qq.EMPTY_STRING]}setAuthorityMetadata(e,t){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(t))}getActiveAccount(e){const t=this.generateCacheKey(dB),r=this.browserStorage.getItem(t);if(!r)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters found"),null;const n=this.validateAndParseJson(r);return n?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:n.homeAccountId,localAccountId:n.localAccountId,tenantId:n.tenantId},e)):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(e,t){const r=this.generateCacheKey(dB);if(e){this.logger.verbose("setActiveAccount: Active account set");const n={homeAccountId:e.homeAccountId,localAccountId:e.localAccountId,tenantId:e.tenantId,lastUpdatedAt:k$().toString()};this.setItem(r,JSON.stringify(n),t)}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(r);this.eventHandler.emitEvent(zU)}getThrottlingCache(e){const t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;const r=this.validateAndParseJson(t);return r&&function(e,t){let r=!1;e&&(r=0===e.indexOf(GB));let n=!0;return t&&(n=t.hasOwnProperty("throttleTime")),r&&n}(e,r)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),r):(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null)}setThrottlingCache(e,t,r){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(e,JSON.stringify(t),r)}getTemporaryCache(e,t){const r=t?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){const e=this.cookieStorage.getItem(r);if(e)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),e}const n=this.temporaryCacheStorage.getItem(r);if(!n){if(this.cacheConfig.cacheLocation===qF){const e=this.browserStorage.getItem(r);if(e)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),e}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),n}setTemporaryCache(e,t,r){const n=r?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(n,t),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.cookieStorage.setItem(n,t,void 0,this.cacheConfig.secureCookies))}removeItem(e){this.browserStorage.removeItem(e)}removeTemporaryItem(e){this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.cookieStorage.removeItem(e))}getKeys(){return this.browserStorage.getKeys()}clear(e){this.removeAllAccounts(e),this.removeAppMetadata(e),this.temporaryCacheStorage.getKeys().forEach(e=>{-1===e.indexOf(JY)&&-1===e.indexOf(this.clientId)||this.removeTemporaryItem(e)}),this.browserStorage.getKeys().forEach(e=>{-1===e.indexOf(JY)&&-1===e.indexOf(this.clientId)||this.browserStorage.removeItem(e)}),this.internalStorage.clear()}clearTokensAndKeysWithClaims(e){this.performanceClient.addQueueMeasurement(qV,e);const t=this.getTokenKeys();let r=0;t.accessToken.forEach(t=>{const n=this.getAccessTokenCredential(t,e);null!==n&&void 0!==n&&n.requestedClaimsHash&&t.includes(n.requestedClaimsHash.toLowerCase())&&(this.removeAccessToken(t,e),r++)}),r>0&&this.logger.warning("".concat(r," access tokens with claims in the cache keys have been removed from the cache."))}generateCacheKey(e){return FW.startsWith(e,JY)?e:"".concat(JY,".").concat(this.clientId,".").concat(e)}generateCredentialKey(e){const t=e.credentialType===MB.REFRESH_TOKEN&&e.familyId||e.clientId,r=e.tokenType&&e.tokenType.toLowerCase()!==WB.BEARER.toLowerCase()?e.tokenType.toLowerCase():"";return["".concat(JY,".").concat(2),e.homeAccountId,e.environment,e.credentialType,t,e.realm||"",e.target||"",e.requestedClaimsHash||"",r].join("|").toLowerCase()}generateAccountKey(e){const t=e.homeAccountId.split(".")[1];return["".concat(JY,".").concat(2),e.homeAccountId,e.environment,t||e.tenantId||""].join("|").toLowerCase()}resetRequestCache(){this.logger.trace("BrowserCacheManager.resetRequestCache called"),this.removeTemporaryItem(this.generateCacheKey(QF)),this.removeTemporaryItem(this.generateCacheKey(YF)),this.removeTemporaryItem(this.generateCacheKey(VF)),this.removeTemporaryItem(this.generateCacheKey(GF)),this.removeTemporaryItem(this.generateCacheKey(JF)),this.setInteractionInProgress(!1)}cacheAuthorizeRequest(e,t){this.logger.trace("BrowserCacheManager.cacheAuthorizeRequest called");const r=mY(JSON.stringify(e));if(this.setTemporaryCache(QF,r,!0),t){const e=mY(t);this.setTemporaryCache(YF,e,!0)}}getCachedRequest(){this.logger.trace("BrowserCacheManager.getCachedRequest called");const e=this.getTemporaryCache(QF,!0);if(!e)throw wQ(WG);const t=this.getTemporaryCache(YF,!0);let r,n="";try{r=JSON.parse(fY(e)),t&&(n=fY(t))}catch(OX){throw this.logger.errorPii("Attempted to parse: ".concat(e)),this.logger.error("Parsing cached token request threw with error: ".concat(OX)),wQ(KG)}return[r,n]}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");const e=this.getTemporaryCache(JF,!0);if(!e)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;const t=this.validateAndParseJson(e);return t||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)}isInteractionInProgress(e){var t;const r=null===(t=this.getInteractionInProgress())||void 0===t?void 0:t.clientId;return e?r===this.clientId:!!r}getInteractionInProgress(){const e="".concat(JY,".").concat($F),t=this.getTemporaryCache(e,!1);try{return t?JSON.parse(t):null}catch(OX){return this.logger.error("Cannot parse interaction status. Removing temporary cache items and clearing url hash. Retrying interaction should fix the error"),this.removeTemporaryItem(e),this.resetRequestCache(),BY(window),null}}setInteractionInProgress(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:WF;const n="".concat(JY,".").concat($F);if(e){if(this.getInteractionInProgress())throw wQ(OG);this.setTemporaryCache(n,JSON.stringify({clientId:this.clientId,type:r}),!1)}else e||(null===(t=this.getInteractionInProgress())||void 0===t?void 0:t.clientId)!==this.clientId||this.removeTemporaryItem(n)}async hydrateCache(e,t){const r=_$(e.account.homeAccountId,e.account.environment,e.idToken,this.clientId,e.tenantId);let n;t.claims&&(n=await this.cryptoImpl.hashString(t.claims));const a={idToken:r,accessToken:A$(e.account.homeAccountId,e.account.environment,e.accessToken,this.clientId,e.tenantId,e.scopes.join(" "),e.expiresOn?j$(e.expiresOn):0,e.extExpiresOn?j$(e.extExpiresOn):0,fY,void 0,e.tokenType,void 0,t.sshKid,t.claims,n)};return this.saveCacheRecord(a,e.correlationId,nK(rK(e.idToken,fY)),lU)}async saveCacheRecord(e,t,r,n,a){try{await super.saveCacheRecord(e,t,r,n,a)}catch(OX){if(OX instanceof bK&&this.performanceClient&&t)try{const e=this.getTokenKeys();this.performanceClient.addFields({cacheRtCount:e.refreshToken.length,cacheIdCount:e.idToken.length,cacheAtCount:e.accessToken.length},t)}catch(OX){}throw OX}}}function cJ(e,t,r,n){try{switch(t){case qF:return new iJ(e,r,n);case BF:return new oJ}}catch(OX){r.error(OX)}return new f$}class uJ{constructor(e){this.eventCallbacks=new Map,this.logger=e||new OU({}),"undefined"!==typeof BroadcastChannel&&(this.broadcastChannel=new BroadcastChannel("msal.broadcast.event")),this.invokeCrossTabCallbacks=this.invokeCrossTabCallbacks.bind(this)}addEventCallback(e,t,r){if("undefined"!==typeof window){const n=r||EY();return this.eventCallbacks.has(n)?(this.logger.error("Event callback with id: ".concat(n," is already registered. Please provide a unique id or remove the existing callback and try again.")),null):(this.eventCallbacks.set(n,[e,t||[]]),this.logger.verbose("Event callback registered with id: ".concat(n)),n)}return null}removeEventCallback(e){this.eventCallbacks.delete(e),this.logger.verbose("Event callback ".concat(e," removed."))}emitEvent(e,t,r,n){var a;const i={eventType:e,interactionType:t||null,payload:r||null,error:n||null,timestamp:Date.now()};switch(e){case DU:case LU:case zU:null===(a=this.broadcastChannel)||void 0===a||a.postMessage(i);break;default:this.invokeCallbacks(i)}}invokeCallbacks(e){this.eventCallbacks.forEach((t,r)=>{let[n,a]=t;(0===a.length||a.includes(e.eventType))&&(this.logger.verbose("Emitting event to callback ".concat(r,": ").concat(e.eventType)),n.apply(null,[e]))})}invokeCrossTabCallbacks(e){const t=e.data;this.invokeCallbacks(t)}subscribeCrossTab(){var e;null===(e=this.broadcastChannel)||void 0===e||e.addEventListener("message",this.invokeCrossTabCallbacks)}unsubscribeCrossTab(){var e;null===(e=this.broadcastChannel)||void 0===e||e.removeEventListener("message",this.invokeCrossTabCallbacks)}}const dJ="home_account_id",hJ="UPN";async function mJ(e,t,r,n,a,i,o){null===o||void 0===o||o.addQueueMeasurement(SV,i);const s=L$.transformCIAMAuthority(z$(e)),l=new L$(s,t,r,n,a,i,o);try{return await x$(l.resolveEndpointsAsync.bind(l),CV,a,o,i)(),l}catch(OX){throw uW(wH)}}class pJ extends hF{constructor(e,t,r,n,a){super(e,t,r),this.name="ServerError",this.errorNo=n,this.status=a,Object.setPrototypeOf(this,pJ.prototype)}}class fJ{static generateThrottlingStorageKey(e){return"".concat(GB,".").concat(JSON.stringify(e))}static preProcess(e,t,r){const n=fJ.generateThrottlingStorageKey(t),a=e.getThrottlingCache(n);if(a){var i;if(a.throttleTime<Date.now())return void e.removeItem(n,r);throw new pJ((null===(i=a.errorCodes)||void 0===i?void 0:i.join(" "))||Qq.EMPTY_STRING,a.errorMessage,a.subError)}}static postProcess(e,t,r,n){if(fJ.checkResponseStatus(r)||fJ.checkResponseForRetryAfter(r)){const a={throttleTime:fJ.calculateThrottleTime(parseInt(r.headers[sB])),error:r.body.error,errorCodes:r.body.error_codes,errorMessage:r.body.error_description,subError:r.body.suberror};e.setThrottlingCache(fJ.generateThrottlingStorageKey(t),a,n)}}static checkResponseStatus(e){return 429===e.status||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return!!e.headers&&(e.headers.hasOwnProperty(sB)&&(e.status<200||e.status>=300))}static calculateThrottleTime(e){const t=e<=0?0:e,r=Date.now()/1e3;return Math.floor(1e3*Math.min(r+(t||KB),r+VB))}static removeThrottle(e,t,r,n){const a=$$(t,r,n),i=this.generateThrottlingStorageKey(a);e.removeItem(i,r.correlationId)}}class gJ{constructor(e,t){this.config=function(e){let{authOptions:t,systemOptions:r,loggerOptions:n,cacheOptions:a,storageInterface:i,networkInterface:o,cryptoInterface:s,clientCredentials:l,libraryInfo:c,telemetry:d,serverTelemetryManager:h,persistencePlugin:m,serializableCache:p}=e;const f=u(u({},hG),n);return{authOptions:(g=t,u({clientCapabilities:[],azureCloudOptions:vG,skipAuthorityMetadataCache:!1,instanceAware:!1,encodeExtraQueryParams:!1},g)),systemOptions:u(u({},dG),r),loggerOptions:f,cacheOptions:u(u({},mG),a),storageInterface:i||new kK(t.clientId,dW,new OU(f),new uG),networkInterface:o||pG,cryptoInterface:s||dW,clientCredentials:l||gG,libraryInfo:u(u({},fG),c),telemetry:u(u({},yG),d),serverTelemetryManager:h||null,persistencePlugin:m||null,serializableCache:p||null};var g}(e),this.logger=new OU(this.config.loggerOptions,hW,mW),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=t}createTokenRequestHeaders(e){const t={};if(t[iB]=Qq.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case dJ:try{const r=WW(e.credential);t[lB]="Oid:".concat(r.uid,"@").concat(r.utid)}catch(OX){this.logger.verbose("Could not parse home account ID for CCS Header: "+OX)}break;case hJ:t[lB]="UPN: ".concat(e.credential)}return t}async executePostToTokenEndpoint(e,t,r,n,a,i){var o;i&&(null===(o=this.performanceClient)||void 0===o||o.addQueueMeasurement(i,a));const s=await this.sendPostRequest(n,e,{body:t,headers:r},a);return this.config.serverTelemetryManager&&s.status<500&&429!==s.status&&this.config.serverTelemetryManager.clearTelemetryCache(),s}async sendPostRequest(e,t,r,n){let a;fJ.preProcess(this.cacheManager,e,n);try{var i,o;a=await x$(this.networkClient.sendPostRequestAsync.bind(this.networkClient),qK,this.logger,this.performanceClient,n)(t,r);const e=a.headers||{};null===(i=this.performanceClient)||void 0===i||i.addFields({refreshTokenSize:(null===(o=a.body.refresh_token)||void 0===o?void 0:o.length)||0,httpVerToken:e[uB]||"",requestId:e[cB]||""},n)}catch(OX){if(OX instanceof jQ){const t=OX.responseHeaders;var s;if(t)null===(s=this.performanceClient)||void 0===s||s.addFields({httpVerToken:t[uB]||"",requestId:t[cB]||"",contentTypeHeader:t[iB]||void 0,contentLengthHeader:t[oB]||void 0,httpStatus:OX.httpStatus},n);throw OX.error}throw OX instanceof hF?OX:uW(kH)}return fJ.postProcess(this.cacheManager,e,a,n),a}async updateAuthority(e,t){var r;null===(r=this.performanceClient)||void 0===r||r.addQueueMeasurement(gV,t);const n="https://".concat(e,"/").concat(this.authority.tenant,"/"),a=await mJ(n,this.networkClient,this.cacheManager,this.authority.options,this.logger,t,this.performanceClient);this.authority=a}createTokenQueryParameters(e){const t=new Map;return e.embeddedClientId&&uY(t,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenQueryParameters&&aY(t,e.tokenQueryParameters),GQ(t,e.correlationId),LQ(t,e.correlationId,this.performanceClient),lK(t)}}class vJ{static setRequestState(e,t,r){const n=vJ.generateLibraryState(e,r);return t?"".concat(n).concat(Qq.RESOURCE_DELIM).concat(t):n}static generateLibraryState(e,t){if(!e)throw uW(KH);const r={id:e.createNewGuid()};t&&(r.meta=t);const n=JSON.stringify(r);return e.base64Encode(n)}static parseRequestState(e,t){if(!e)throw uW(KH);if(!t)throw uW(CH);try{const r=t.split(Qq.RESOURCE_DELIM),n=r[0],a=r.length>1?r.slice(1).join(Qq.RESOURCE_DELIM):Qq.EMPTY_STRING,i=e.base64Decode(n),o=JSON.parse(i);return{userRequestState:a||Qq.EMPTY_STRING,libraryState:o}}catch(OX){throw uW(CH)}}}const yJ="sw";class bJ{constructor(e,t){this.cryptoUtils=e,this.performanceClient=t}async generateCnf(e,t){var r;null===(r=this.performanceClient)||void 0===r||r.addQueueMeasurement(xV,e.correlationId);const n=await x$(this.generateKid.bind(this),xV,t,this.performanceClient,e.correlationId)(e),a=this.cryptoUtils.base64UrlEncode(JSON.stringify(n));return{kid:n.kid,reqCnfString:a}}async generateKid(e){var t;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(wV,e.correlationId);return{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:yJ}}async signPopToken(e,t,r){return this.signPayload(e,t,r)}async signPayload(e,t,r,n){const{resourceRequestMethod:a,resourceRequestUri:i,shrClaims:o,shrNonce:s,shrOptions:l}=r,c=i?new uK(i):void 0,d=null===c||void 0===c?void 0:c.getUrlComponents();return this.cryptoUtils.signJwt(u({at:e,ts:k$(),m:null===a||void 0===a?void 0:a.toUpperCase(),u:null===d||void 0===d?void 0:d.HostNameAndPort,nonce:s||this.cryptoUtils.createNewGuid(),p:null===d||void 0===d?void 0:d.AbsolutePath,q:null!==d&&void 0!==d&&d.QueryString?[[],d.QueryString]:void 0,client_claims:o||void 0},n),t,l,r.correlationId)}}class xJ{constructor(e,t){this.cache=e,this.hasChanged=t}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}class wJ{constructor(e,t,r,n,a,i,o){this.clientId=e,this.cacheStorage=t,this.cryptoObj=r,this.logger=n,this.serializableCache=a,this.persistencePlugin=i,this.performanceClient=o}validateTokenResponse(e,t){if(e.error||e.error_description||e.suberror){var r;const n="Error(s): ".concat(e.error_codes||Qq.NOT_AVAILABLE," - Timestamp: ").concat(e.timestamp||Qq.NOT_AVAILABLE," - Description: ").concat(e.error_description||Qq.NOT_AVAILABLE," - Correlation ID: ").concat(e.correlation_id||Qq.NOT_AVAILABLE," - Trace ID: ").concat(e.trace_id||Qq.NOT_AVAILABLE),a=null!==(r=e.error_codes)&&void 0!==r&&r.length?e.error_codes[0]:void 0,i=new pJ(e.error,n,e.suberror,a,e.status);if(t&&e.status&&e.status>=Zq&&e.status<=eB)return void this.logger.warning("executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.\n".concat(i));if(t&&e.status&&e.status>=$q&&e.status<=Xq)return void this.logger.warning("executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.\n".concat(i));if(Q$(e.error,e.error_description,e.suberror))throw new G$(e.error,e.error_description,e.suberror,e.timestamp||Qq.EMPTY_STRING,e.trace_id||Qq.EMPTY_STRING,e.correlation_id||Qq.EMPTY_STRING,e.claims||Qq.EMPTY_STRING,a);throw i}}async handleServerTokenResponse(e,t,r,n,a,i,o,s,l,c){var u;let d,h;if(null===(u=this.performanceClient)||void 0===u||u.addQueueMeasurement(kV,e.correlation_id),e.id_token){if(d=rK(e.id_token||Qq.EMPTY_STRING,this.cryptoObj.base64Decode),i&&i.nonce&&d.nonce!==i.nonce)throw uW(AH);if(n.maxAge||0===n.maxAge){const e=d.auth_time;if(!e)throw uW(TH);aK(e,n.maxAge)}}this.homeAccountIdentifier=tK.generateHomeAccountId(e.client_info||Qq.EMPTY_STRING,t.authorityType,this.logger,this.cryptoObj,d),i&&i.state&&(h=vJ.parseRequestState(this.cryptoObj,i.state)),e.key_id=e.key_id||n.sshKid||void 0;const m=this.generateCacheRecord(e,t,r,n,d,o,i);let p;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),p=new xJ(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(p)),s&&!l&&m.account){var f;if(this.cacheStorage.getAllAccounts({homeAccountId:m.account.homeAccountId,environment:m.account.environment},n.correlationId).length<1)return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),null===(f=this.performanceClient)||void 0===f||f.addFields({acntLoggedOut:!0},n.correlationId),await wJ.generateAuthenticationResult(this.cryptoObj,t,m,!1,n,d,h,void 0,c)}await this.cacheStorage.saveCacheRecord(m,n.correlationId,nK(d||{}),a,n.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&p&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(p))}return wJ.generateAuthenticationResult(this.cryptoObj,t,m,!1,n,d,h,e,c)}generateCacheRecord(e,t,r,n,a,i,o){const s=t.getPreferredCache();if(!s)throw uW(HH);const l=eK(a);let c,u;e.id_token&&a&&(c=_$(this.homeAccountIdentifier,s,e.id_token,this.clientId,l||""),u=kJ(this.cacheStorage,t,this.homeAccountIdentifier,this.cryptoObj.base64Decode,n.correlationId,a,e.client_info,s,l,o,void 0,this.logger));let d=null;if(e.access_token){const a=e.scope?UW.fromString(e.scope):new UW(n.scopes||[]),o=("string"===typeof e.expires_in?parseInt(e.expires_in,10):e.expires_in)||0,c=("string"===typeof e.ext_expires_in?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,u=("string"===typeof e.refresh_in?parseInt(e.refresh_in,10):e.refresh_in)||void 0,h=r+o,m=h+c,p=u&&u>0?r+u:void 0;d=A$(this.homeAccountIdentifier,s,e.access_token,this.clientId,l||t.tenant||"",a.printScopes(),h,m,this.cryptoObj.base64Decode,p,e.token_type,i,e.key_id,n.claims,n.requestedClaimsHash)}let h=null;if(e.refresh_token){let t;if(e.refresh_token_expires_in){var m;t=r+("string"===typeof e.refresh_token_expires_in?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in),null===(m=this.performanceClient)||void 0===m||m.addFields({ntwkRtExpiresOnSeconds:t},n.correlationId)}h=T$(this.homeAccountIdentifier,s,e.refresh_token,this.clientId,e.foci,i,t)}let p=null;return e.foci&&(p={clientId:this.clientId,environment:s,familyId:e.foci}),{account:u,idToken:c,accessToken:d,refreshToken:h,appMetadata:p}}static async generateAuthenticationResult(e,t,r,n,a,i,o,s,l){var c,u,d,h,m;let p,f,g=Qq.EMPTY_STRING,v=[],y=null,b=Qq.EMPTY_STRING;if(r.accessToken){if(r.accessToken.tokenType!==WB.POP||a.popKid)g=r.accessToken.secret;else{const t=new bJ(e),{secret:n,keyId:i}=r.accessToken;if(!i)throw uW(tW);g=await t.signPopToken(n,i,a)}v=UW.fromString(r.accessToken.target).asArray(),y=S$(r.accessToken.expiresOn),p=S$(r.accessToken.extendedExpiresOn),r.accessToken.refreshOn&&(f=S$(r.accessToken.refreshOn))}r.appMetadata&&(b=r.appMetadata.familyId===DB?DB:"");const x=(null===i||void 0===i?void 0:i.oid)||(null===i||void 0===i?void 0:i.sub)||"",w=(null===i||void 0===i?void 0:i.tid)||"";null!==s&&void 0!==s&&s.spa_accountid&&r.account&&(r.account.nativeAccountId=null===s||void 0===s?void 0:s.spa_accountid);const k=r.account?YW(tK.getAccountInfo(r.account),void 0,i,null===(c=r.idToken)||void 0===c?void 0:c.secret):null;return{authority:t.canonicalAuthority,uniqueId:x,tenantId:w,scopes:v,account:k,idToken:(null===r||void 0===r||null===(u=r.idToken)||void 0===u?void 0:u.secret)||"",idTokenClaims:i||{},accessToken:g,fromCache:n,expiresOn:y,extExpiresOn:p,refreshOn:f,correlationId:a.correlationId,requestId:l||Qq.EMPTY_STRING,familyId:b,tokenType:(null===(d=r.accessToken)||void 0===d?void 0:d.tokenType)||Qq.EMPTY_STRING,state:o?o.userRequestState:Qq.EMPTY_STRING,cloudGraphHostName:(null===(h=r.account)||void 0===h?void 0:h.cloudGraphHostName)||Qq.EMPTY_STRING,msGraphHost:(null===(m=r.account)||void 0===m?void 0:m.msGraphHost)||Qq.EMPTY_STRING,code:null===s||void 0===s?void 0:s.spa_code,fromNativeBroker:!1}}}function kJ(e,t,r,n,a,i,o,s,l,c,u,d){null===d||void 0===d||d.verbose("setCachedAccount called");const h=e.getAccountKeys().find(e=>e.startsWith(r));let m=null;h&&(m=e.getAccount(h,a));const p=m||tK.createAccount({homeAccountId:r,idTokenClaims:i,clientInfo:o,environment:s,cloudGraphHostName:null===c||void 0===c?void 0:c.cloud_graph_host_name,msGraphHost:null===c||void 0===c?void 0:c.msgraph_host,nativeAccountId:u},t,n),f=p.tenantProfiles||[],g=l||p.realm;if(g&&!f.find(e=>e.tenantId===g)){const e=QW(r,p.localAccountId,g,i);f.push(e)}return p.tenantProfiles=f,p}async function jJ(e,t,r){if("string"===typeof e)return e;return e({clientId:t,tokenEndpoint:r})}class SJ extends gJ{constructor(e,t){var r;super(e,t),this.includeRedirectUri=!0,this.oidcDefaultScopes=null===(r=this.config.authOptions.authority.options.OIDCOptions)||void 0===r?void 0:r.defaultScopes}async acquireToken(e,t,r){var n,a;if(null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(vV,e.correlationId),!e.code)throw uW(MH);const i=k$(),o=await x$(this.executeTokenRequest.bind(this),yV,this.logger,this.performanceClient,e.correlationId)(this.authority,e),s=null===(a=o.headers)||void 0===a?void 0:a[cB],l=new wJ(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return l.validateTokenResponse(o.body),x$(l.handleServerTokenResponse.bind(l),kV,this.logger,this.performanceClient,e.correlationId)(o.body,this.authority,i,e,t,r,void 0,void 0,void 0,s)}getLogoutUri(e){if(!e)throw BW(kW);const t=this.createLogoutUrlQueryString(e);return uK.appendQueryString(this.authority.endSessionEndpoint,t)}async executeTokenRequest(e,t){var r;null===(r=this.performanceClient)||void 0===r||r.addQueueMeasurement(yV,t.correlationId);const n=this.createTokenQueryParameters(t),a=uK.appendQueryString(e.tokenEndpoint,n),i=await x$(this.createTokenRequestBody.bind(this),bV,this.logger,this.performanceClient,t.correlationId)(t);let o;if(t.clientInfo)try{const e=HW(t.clientInfo,this.cryptoUtils.base64Decode);o={credential:"".concat(e.uid).concat(IB).concat(e.utid),type:dJ}}catch(OX){this.logger.verbose("Could not parse client info for CCS Header: "+OX)}const s=this.createTokenRequestHeaders(o||t.ccsCredential),l=$$(this.config.authOptions.clientId,t);return x$(this.executePostToTokenEndpoint.bind(this),FK,this.logger,this.performanceClient,t.correlationId)(a,i,s,l,t.correlationId,FK)}async createTokenRequestBody(e){var t,r;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(bV,e.correlationId);const n=new Map;if(BQ(n,e.embeddedClientId||(null===(r=e.tokenBodyParameters)||void 0===r?void 0:r[AQ])||this.config.authOptions.clientId),this.includeRedirectUri)FQ(n,e.redirectUri);else if(!e.redirectUri)throw BW(pW);if(qQ(n,e.scopes,!0,this.oidcDefaultScopes),function(e,t){e.set("code",t)}(n,e.code),QQ(n,this.config.libraryInfo),YQ(n,this.config.telemetry.application),cY(n),this.serverTelemetryManager&&!bG(this.config)&&lY(n,this.serverTelemetryManager),e.codeVerifier&&function(e,t){e.set("code_verifier",t)}(n,e.codeVerifier),this.config.clientCredentials.clientSecret&&XQ(n,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const t=this.config.clientCredentials.clientAssertion;ZQ(n,await jJ(t.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),eY(n,t.assertionType)}if(tY(n,_B),rY(n),e.authenticationScheme===WB.POP){const t=new bJ(this.cryptoUtils,this.performanceClient);let r;if(e.popKid)r=this.cryptoUtils.encodeKid(e.popKid);else{r=(await x$(t.generateCnf.bind(t),xV,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString}oY(n,r)}else if(e.authenticationScheme===WB.SSH){if(!e.sshJwk)throw BW(AW);sY(n,e.sshJwk)}let a;if((!FW.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&VQ(n,e.claims,this.config.authOptions.clientCapabilities),e.clientInfo)try{const t=HW(e.clientInfo,this.cryptoUtils.base64Decode);a={credential:"".concat(t.uid).concat(IB).concat(t.utid),type:dJ}}catch(OX){this.logger.verbose("Could not parse client info for CCS Header: "+OX)}else a=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&a)switch(a.type){case dJ:try{WQ(n,WW(a.credential))}catch(OX){this.logger.verbose("Could not parse home account ID for CCS Header: "+OX)}break;case hJ:HQ(n,a.credential)}return e.embeddedClientId&&uY(n,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&aY(n,e.tokenBodyParameters),!e.enableSpaAuthorizationCode||e.tokenBodyParameters&&e.tokenBodyParameters[PQ]||aY(n,{[PQ]:"1"}),LQ(n,e.correlationId,this.performanceClient),lK(n)}createLogoutUrlQueryString(e){const t=new Map;return e.postLogoutRedirectUri&&function(e,t){e.set("post_logout_redirect_uri",t)}(t,e.postLogoutRedirectUri),e.correlationId&&GQ(t,e.correlationId),e.idTokenHint&&function(e,t){e.set("id_token_hint",t)}(t,e.idTokenHint),e.state&&$Q(t,e.state),e.logoutHint&&function(e,t){e.set("logout_hint",t)}(t,e.logoutHint),e.extraQueryParameters&&aY(t,e.extraQueryParameters),this.config.authOptions.instanceAware&&nY(t),lK(t,this.config.authOptions.encodeExtraQueryParams,e.extraQueryParameters)}}function CJ(e){const{skus:t,libraryName:r,libraryVersion:n,extensionName:a,extensionVersion:i}=e,o=new Map([[0,[r,n]],[2,[a,i]]]);let s=[];if(null!==t&&void 0!==t&&t.length){if(s=t.split(","),s.length<4)return t}else s=Array.from({length:4},()=>"|");return o.forEach((e,t)=>{var r,n;2===e.length&&null!==(r=e[0])&&void 0!==r&&r.length&&null!==(n=e[1])&&void 0!==n&&n.length&&function(e){const{skuArr:t,index:r,skuName:n,skuVersion:a}=e;if(r>=t.length)return;t[r]=[n,a].join("|")}({skuArr:s,index:t,skuName:e[0],skuVersion:e[1]})}),s.join(",")}class NJ{constructor(e,t){this.cacheOutcome=nF,this.cacheManager=t,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||Qq.EMPTY_STRING,this.wrapperVer=e.wrapperVer||Qq.EMPTY_STRING,this.telemetryCacheKey=HB.CACHE_KEY+PB+e.clientId}generateCurrentRequestHeaderValue(){const e="".concat(this.apiId).concat(HB.VALUE_SEPARATOR).concat(this.cacheOutcome),t=[this.wrapperSKU,this.wrapperVer],r=this.getNativeBrokerErrorCode();null!==r&&void 0!==r&&r.length&&t.push("broker_error=".concat(r));const n=t.join(HB.VALUE_SEPARATOR),a=[e,this.getRegionDiscoveryFields()].join(HB.VALUE_SEPARATOR);return[HB.SCHEMA_VERSION,a,n].join(HB.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const e=this.getLastRequests(),t=NJ.maxErrorsToSend(e),r=e.failedRequests.slice(0,2*t).join(HB.VALUE_SEPARATOR),n=e.errors.slice(0,t).join(HB.VALUE_SEPARATOR),a=e.errors.length,i=[a,t<a?HB.OVERFLOW_TRUE:HB.OVERFLOW_FALSE].join(HB.VALUE_SEPARATOR);return[HB.SCHEMA_VERSION,e.cacheHits,r,n,i].join(HB.CATEGORY_SEPARATOR)}cacheFailedRequest(e){const t=this.getLastRequests();t.errors.length>=HB.MAX_CACHED_ERRORS&&(t.failedRequests.shift(),t.failedRequests.shift(),t.errors.shift()),t.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof hF?e.subError?t.errors.push(e.subError):e.errorCode?t.errors.push(e.errorCode):t.errors.push(e.toString()):t.errors.push(e.toString()):t.errors.push(HB.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t,this.correlationId)}incrementCacheHits(){const e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId),e.cacheHits}getLastRequests(){return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||{failedRequests:[],errors:[],cacheHits:0}}clearTelemetryCache(){const e=this.getLastRequests(),t=NJ.maxErrorsToSend(e);if(t===e.errors.length)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{const r={failedRequests:e.failedRequests.slice(2*t),errors:e.errors.slice(t),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,r,this.correlationId)}}static maxErrorsToSend(e){let t,r=0,n=0;const a=e.errors.length;for(t=0;t<a;t++){const a=e.failedRequests[2*t]||Qq.EMPTY_STRING,i=e.failedRequests[2*t+1]||Qq.EMPTY_STRING,o=e.errors[t]||Qq.EMPTY_STRING;if(n+=a.toString().length+i.toString().length+o.length+3,!(n<HB.MAX_LAST_HEADER_BYTES))break;r+=1}return r}getRegionDiscoveryFields(){const e=[];return e.push(this.regionUsed||Qq.EMPTY_STRING),e.push(this.regionSource||Qq.EMPTY_STRING),e.push(this.regionOutcome||Qq.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){const t=this.getLastRequests();t.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId)}static makeExtraSkuString(e){return CJ(e)}}class _J{constructor(e,t,r,n,a,i,o,s,l){this.config=e,this.browserStorage=t,this.browserCrypto=r,this.networkClient=this.config.system.networkClient,this.eventHandler=a,this.navigationClient=i,this.platformAuthProvider=s,this.correlationId=l||EY(),this.logger=n.clone(NF,$Y,this.correlationId),this.performanceClient=o}async clearCacheOnLogout(e,t){if(t)try{this.browserStorage.removeAccount(t,e),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch(r){this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),this.browserStorage.clear(e),await this.browserCrypto.clearKeystore()}catch(OX){this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}}getRedirectUri(e){this.logger.verbose("getRedirectUri called");const t=e||this.config.auth.redirectUri;return uK.getAbsoluteUrl(t,UY())}initializeServerTelemetryManager(e,t){this.logger.verbose("initializeServerTelemetryManager called");const r={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:e,forceRefresh:t||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new NJ(r,this.browserStorage)}async getDiscoveredAuthority(e){const{account:t}=e,r=e.requestExtraQueryParameters&&e.requestExtraQueryParameters.hasOwnProperty("instance_aware")?e.requestExtraQueryParameters.instance_aware:void 0;this.performanceClient.addQueueMeasurement(LK,this.correlationId);const n={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},a=e.requestAuthority||this.config.auth.authority,i=null!==r&&void 0!==r&&r.length?"true"===r:this.config.auth.instanceAware,o=t&&i?this.config.auth.authority.replace(uK.getDomainFromUrl(a),t.environment):a,s=L$.generateAuthority(o,e.requestAzureCloudOptions||this.config.auth.azureCloudOptions),l=await x$(mJ,SV,this.logger,this.performanceClient,this.correlationId)(s,this.config.system.networkClient,this.browserStorage,n,this.logger,this.correlationId,this.performanceClient);if(t&&!l.isAlias(t.environment))throw BW(MW);return l}}async function AJ(e,t,r,n){r.addQueueMeasurement(JK,e.correlationId);const a=e.authority||t.auth.authority,i=[...e&&e.scopes||[]],o=u(u({},e),{},{correlationId:e.correlationId,authority:a,scopes:i});if(o.authenticationScheme){if(o.authenticationScheme===WB.SSH){if(!e.sshJwk)throw BW(AW);if(!e.sshKid)throw BW(TW)}n.verbose('Authentication Scheme set to "'.concat(o.authenticationScheme,'" as configured in Auth request'))}else o.authenticationScheme=WB.BEARER,n.verbose('Authentication Scheme wasn\'t explicitly set in request, defaulting to "Bearer" request');return t.cache.claimsBasedCachingEnabled&&e.claims&&!FW.isEmptyObj(e.claims)&&(o.requestedClaimsHash=await qY(e.claims)),o}async function TJ(e,t,r,n,a){n.addQueueMeasurement(XK,e.correlationId);const i=await x$(AJ,JK,a,n,e.correlationId)(e,r,n,a);return u(u(u({},e),i),{},{account:t,forceRefresh:e.forceRefresh||!1})}function EJ(e,t){let r;const n=e.httpMethod;if(t===fH){if(r=n||rB,r!==rB)throw BW(RW)}else r=n||tB;if(e.authorizePostBodyParameters&&r!==rB)throw BW(DW);return r}class OJ extends _J{initializeLogoutRequest(e){this.logger.verbose("initializeLogoutRequest called",null===e||void 0===e?void 0:e.correlationId);const t=u({correlationId:this.correlationId||EY()},e);if(e)if(e.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(e.account){const r=this.getLogoutHintFromIdTokenClaims(e.account);r&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),t.logoutHint=r)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return e&&null===e.postLogoutRedirectUri?this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",t.correlationId):e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",t.correlationId),t.postLogoutRedirectUri=uK.getAbsoluteUrl(e.postLogoutRedirectUri,UY())):null===this.config.auth.postLogoutRedirectUri?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",t.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",t.correlationId),t.postLogoutRedirectUri=uK.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,UY())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",t.correlationId),t.postLogoutRedirectUri=uK.getAbsoluteUrl(UY(),UY())),t}getLogoutHintFromIdTokenClaims(e){const t=e.idTokenClaims;if(t){if(t.login_hint)return t.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}async createAuthCodeClient(e){this.performanceClient.addQueueMeasurement(oV,this.correlationId);const t=await x$(this.getClientConfiguration.bind(this),sV,this.logger,this.performanceClient,this.correlationId)(e);return new SJ(t,this.performanceClient)}async getClientConfiguration(e){const{serverTelemetryManager:t,requestAuthority:r,requestAzureCloudOptions:n,requestExtraQueryParameters:a,account:i}=e;this.performanceClient.addQueueMeasurement(sV,this.correlationId);const o=e.authority||await x$(this.getDiscoveredAuthority.bind(this),LK,this.logger,this.performanceClient,this.correlationId)({requestAuthority:r,requestAzureCloudOptions:n,requestExtraQueryParameters:a,account:i}),s=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:o,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:this.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:s.loggerCallback,piiLoggingEnabled:s.piiLoggingEnabled,logLevel:s.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:t,libraryInfo:{sku:NF,version:$Y,cpu:Qq.EMPTY_STRING,os:Qq.EMPTY_STRING},telemetry:this.config.telemetry}}async initializeAuthorizationRequest(e,t){this.performanceClient.addQueueMeasurement(lV,this.correlationId);const r=this.getRedirectUri(e.redirectUri),n={interactionType:t},a=vJ.setRequestState(this.browserCrypto,e&&e.state||Qq.EMPTY_STRING,n),i=await x$(AJ,JK,this.logger,this.performanceClient,this.correlationId)(u(u({},e),{},{correlationId:this.correlationId}),this.config,this.performanceClient,this.logger),o=u(u({},i),{},{redirectUri:r,state:a,nonce:e.nonce||EY(),responseMode:this.config.auth.OIDCOptions.serverResponseType}),s=u(u({},o),{},{httpMethod:EJ(o,this.config.auth.protocolMode)});if(e.loginHint||e.sid)return s;const l=e.account||this.browserStorage.getActiveAccount(this.correlationId);return l&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii("Setting validated request account: ".concat(l.homeAccountId),this.correlationId),s.account=l),s}}function PJ(e,t,r){const n=sK(e);if(!n)throw oK(e)?(r.error("A ".concat(t," is present in the iframe but it does not contain known properties. It's likely that the ").concat(t," has been replaced by code running on the redirectUri page.")),r.errorPii("The ".concat(t," detected is: ").concat(e)),wQ(AG)):(r.error("The request has returned to the redirectUri but a ".concat(t," is not present. It's likely that the ").concat(t," has been removed or the page has been redirected by code running on the redirectUri page.")),wQ(NG));return n}function IJ(e,t,r){if(!e.state)throw wQ(_G);const n=function(e,t){if(!t)return null;try{return vJ.parseRequestState(e,t).libraryState.meta}catch(OX){throw uW(CH)}}(t,e.state);if(!n)throw wQ(TG);if(n.interactionType!==r)throw wQ(EG)}function MJ(e,t,r,n){var a,i;const o=t.correlationId,s=new Map;BQ(s,t.embeddedClientId||(null===(a=t.extraQueryParameters)||void 0===a?void 0:a[AQ])||e.clientId);if(qQ(s,[...t.scopes||[],...t.extraScopesToConsent||[]],!0,null===(i=e.authority.options.OIDCOptions)||void 0===i?void 0:i.defaultScopes),FQ(s,t.redirectUri),GQ(s,o),function(e,t){e.set("response_mode",t||NB)}(s,t.responseMode),rY(s),t.prompt&&(!function(e,t){e.set("prompt",t)}(s,t.prompt),null===n||void 0===n||n.addFields({prompt:t.prompt},o)),t.domainHint&&(!function(e,t){e.set("domain_hint",t)}(s,t.domainHint),null===n||void 0===n||n.addFields({domainHintFromRequest:!0},o)),t.prompt!==yB)if(t.sid&&t.prompt===xB)r.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),KQ(s,t.sid),null===n||void 0===n||n.addFields({sidFromRequest:!0},o);else if(t.account){const e=function(e){var t;return(null===(t=e.idTokenClaims)||void 0===t?void 0:t.sid)||null}(t.account);let a=function(e){var t;return e.loginHint||(null===(t=e.idTokenClaims)||void 0===t?void 0:t.login_hint)||null}(t.account);if(a&&t.domainHint&&(r.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),a=null),a){r.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),UQ(s,a),null===n||void 0===n||n.addFields({loginHintFromClaim:!0},o);try{WQ(s,WW(t.account.homeAccountId))}catch(OX){r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e&&t.prompt===xB){r.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),KQ(s,e),null===n||void 0===n||n.addFields({sidFromClaim:!0},o);try{WQ(s,WW(t.account.homeAccountId))}catch(OX){r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(t.loginHint)r.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),UQ(s,t.loginHint),HQ(s,t.loginHint),null===n||void 0===n||n.addFields({loginHintFromRequest:!0},o);else if(t.account.username){r.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),UQ(s,t.account.username),null===n||void 0===n||n.addFields({loginHintFromUpn:!0},o);try{WQ(s,WW(t.account.homeAccountId))}catch(OX){r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else t.loginHint&&(r.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),UQ(s,t.loginHint),HQ(s,t.loginHint),null===n||void 0===n||n.addFields({loginHintFromRequest:!0},o));else r.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return t.nonce&&function(e,t){e.set("nonce",t)}(s,t.nonce),t.state&&$Q(s,t.state),(t.claims||e.clientCapabilities&&e.clientCapabilities.length>0)&&VQ(s,t.claims,e.clientCapabilities),t.embeddedClientId&&uY(s,e.clientId,e.redirectUri),!e.instanceAware||t.extraQueryParameters&&Object.keys(t.extraQueryParameters).includes(DQ)||nY(s),s}function RJ(e,t,r,n){const a=lK(t,r,n);return uK.appendQueryString(e.authorizationEndpoint,a)}function DJ(e,t){if(!e.state||!t)throw e.state?uW(_H,"Cached State"):uW(_H,"Server State");let r,n;try{r=decodeURIComponent(e.state)}catch(OX){throw uW(CH,e.state)}try{n=decodeURIComponent(t)}catch(OX){throw uW(CH,e.state)}if(r!==n)throw uW(NH);if(e.error||e.error_description||e.suberror){const t=function(e){var t,r;const n="code=",a=null===(t=e.error_uri)||void 0===t?void 0:t.lastIndexOf(n);return a&&a>=0?null===(r=e.error_uri)||void 0===r?void 0:r.substring(a+n.length):void 0}(e);if(Q$(e.error,e.error_description,e.suberror))throw new G$(e.error||"",e.error_description,e.suberror,e.timestamp||"",e.trace_id||"",e.correlation_id||"",e.claims||"",t);throw new pJ(e.error||"",e.error_description,e.suberror,t)}}class LJ{constructor(e,t,r,n,a){this.authModule=e,this.browserStorage=t,this.authCodeRequest=r,this.logger=n,this.performanceClient=a}async handleCodeResponse(e,t,r){let n;this.performanceClient.addQueueMeasurement(hV,t.correlationId);try{n=function(e,t){if(DJ(e,t),!e.code)throw uW(XH);return e}(e,t.state)}catch(OX){throw OX instanceof pJ&&OX.subError===MG?wQ(MG):OX}return x$(this.handleCodeResponseFromServer.bind(this),dV,this.logger,this.performanceClient,t.correlationId)(n,t,r)}async handleCodeResponseFromServer(e,t,r){let n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(this.performanceClient.addQueueMeasurement(dV,t.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),this.authCodeRequest.code=e.code,e.cloud_instance_host_name&&await x$(this.authModule.updateAuthority.bind(this.authModule),gV,this.logger,this.performanceClient,t.correlationId)(e.cloud_instance_host_name,t.correlationId),n&&(e.nonce=t.nonce||void 0),e.state=t.state,e.client_info)this.authCodeRequest.clientInfo=e.client_info;else{const e=this.createCcsCredentials(t);e&&(this.authCodeRequest.ccsCredential=e)}return await x$(this.authModule.acquireToken.bind(this.authModule),vV,this.logger,this.performanceClient,t.correlationId)(this.authCodeRequest,r,e)}createCcsCredentials(e){return e.account?{credential:e.account.homeAccountId,type:dJ}:e.loginHint?{credential:e.loginHint,type:hJ}:null}}const zJ="user_switch",qJ={[zJ]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."};class BJ extends hF{constructor(e,t,r){super(e,t),Object.setPrototypeOf(this,BJ.prototype),this.name="NativeAuthError",this.ext=r}}function FJ(e){if(e.ext&&e.ext.status&&"DISABLED"===e.ext.status)return!0;if(e.ext&&e.ext.error&&-2147186943===e.ext.error)return!0;switch(e.errorCode){case"ContentError":case"PageException":return!0;default:return!1}}function UJ(e,t,r){if(r&&r.status)switch(r.status){case"ACCOUNT_UNAVAILABLE":return Y$(B$);case"USER_INTERACTION_REQUIRED":return new G$(e,t);case"USER_CANCEL":return wQ(MG);case"NO_NETWORK":return wQ($G);case"UX_NOT_ALLOWED":return Y$(U$)}return new BJ(e,qJ[e]||t,r)}class HJ extends gJ{constructor(e,t){super(e,t)}async acquireCachedToken(e){var t;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(QK,e.correlationId);let r=nF;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!FW.isEmptyObj(e.claims))throw this.setCacheOutcome(aF,e.correlationId),uW(YH);if(!e.account)throw uW(FH);const n=e.account.tenantId||function(e){var t;const r=null===(t=new uK(e).getUrlComponents().PathSegments.slice(-1)[0])||void 0===t?void 0:t.toLowerCase();switch(r){case hB:case mB:case pB:return;default:return r}}(e.authority),a=this.cacheManager.getTokenKeys(),i=this.cacheManager.getAccessToken(e.account,e,a,n);if(!i)throw this.setCacheOutcome(iF,e.correlationId),uW(YH);if(o=i.cachedAt,Number(o)>k$()||C$(i.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(oF,e.correlationId),uW(YH);var o;i.refreshOn&&C$(i.refreshOn,0)&&(r=sF);const s=e.authority||this.authority.getPreferredCache(),l={account:this.cacheManager.getAccount(this.cacheManager.generateAccountKey(e.account),e.correlationId),accessToken:i,idToken:this.cacheManager.getIdToken(e.account,e.correlationId,a,n,this.performanceClient),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(s)};return this.setCacheOutcome(r,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await x$(this.generateResultFromCacheRecord.bind(this),YK,this.logger,this.performanceClient,e.correlationId)(l,e),r]}setCacheOutcome(e,t){var r,n;null===(r=this.serverTelemetryManager)||void 0===r||r.setCacheOutcome(e),null===(n=this.performanceClient)||void 0===n||n.addFields({cacheOutcome:e},t),e!==nF&&this.logger.info("Token refresh is required due to cache outcome: ".concat(e))}async generateResultFromCacheRecord(e,t){var r;let n;if(null===(r=this.performanceClient)||void 0===r||r.addQueueMeasurement(YK,t.correlationId),e.idToken&&(n=rK(e.idToken.secret,this.config.cryptoInterface.base64Decode)),t.maxAge||0===t.maxAge){var a;const e=null===(a=n)||void 0===a?void 0:a.auth_time;if(!e)throw uW(TH);aK(e,t.maxAge)}return wJ.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,t,n)}}class WJ extends OJ{async acquireToken(e){this.performanceClient.addQueueMeasurement(PK,e.correlationId);const t=this.initializeServerTelemetryManager(iU),r=await x$(this.getClientConfiguration.bind(this),sV,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:t,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}),n=new HJ(r,this.performanceClient);this.logger.verbose("Silent auth client created");try{const t=(await x$(n.acquireCachedToken.bind(n),QK,this.logger,this.performanceClient,e.correlationId)(e))[0];return this.performanceClient.addFields({fromCache:!0},e.correlationId),t}catch(a){throw a instanceof xQ&&a.errorCode===tQ&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),a}}logout(e){this.logger.verbose("logoutRedirect called");const t=this.initializeLogoutRequest(e);return this.clearCacheOnLogout(t.correlationId,null===t||void 0===t?void 0:t.account)}}const KJ=["prompt"],VJ=["scopes"];class GJ extends _J{constructor(e,t,r,n,a,i,o,s,l,c,u,d){super(e,t,r,n,a,i,s,l,d),this.apiId=o,this.accountId=c,this.platformAuthProvider=l,this.nativeStorageManager=u,this.silentCacheClient=new WJ(e,this.nativeStorageManager,r,n,a,i,s,l,d);const h=this.platformAuthProvider.getExtensionName();this.skus=NJ.makeExtraSkuString({libraryName:NF,libraryVersion:$Y,extensionName:h,extensionVersion:this.platformAuthProvider.getExtensionVersion()})}addRequestSKUs(e){e.extraParameters=u(u({},e.extraParameters),{},{[IQ]:this.skus})}async acquireToken(e,t){this.performanceClient.addQueueMeasurement(zK,this.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");const r=this.performanceClient.startMeasurement(zK,this.correlationId),n=k$(),a=this.initializeServerTelemetryManager(this.apiId);try{const i=await this.initializeNativeRequest(e);try{const e=await this.acquireTokensFromCache(this.accountId,i);return r.end({success:!0,isNativeBroker:!1,fromCache:!0}),e}catch(OX){if(t===SU)throw this.logger.info("MSAL internal Cache does not contain tokens, return error as per cache policy"),r.end({success:!1,brokerErrorCode:"cache_request_failed"}),OX;this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}const o=await this.platformAuthProvider.sendMessage(i);return await this.handleNativeResponse(o,i,n).then(e=>(r.end({success:!0,isNativeBroker:!0,requestId:e.requestId}),a.clearNativeBrokerErrorCode(),e)).catch(e=>{throw r.end({success:!1,errorCode:e.errorCode,subErrorCode:e.subError}),e})}catch(OX){throw OX instanceof BJ&&a.setNativeBrokerErrorCode(OX.errorCode),r.end({success:!1}),OX}}createSilentCacheRequest(e,t){return{authority:e.authority,correlationId:this.correlationId,scopes:UW.fromString(e.scope).asArray(),account:t,forceRefresh:!1}}async acquireTokensFromCache(e,t){if(!e)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),uW(WH);const r=this.browserStorage.getBaseAccountInfo({nativeAccountId:e},this.correlationId);if(!r)throw uW(WH);try{const e=this.createSilentCacheRequest(t,r),n=await this.silentCacheClient.acquireToken(e),a=u(u({},r),{},{idTokenClaims:null===n||void 0===n?void 0:n.idTokenClaims,idToken:null===n||void 0===n?void 0:n.idToken});return u(u({},n),{},{account:a})}catch(OX){throw OX}}async acquireTokenRedirect(e,t){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");const r=Object.assign({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),e));delete r.onRedirectNavigate;const n=await this.initializeNativeRequest(r);try{await this.platformAuthProvider.sendMessage(n)}catch(OX){if(OX instanceof BJ){if(this.initializeServerTelemetryManager(this.apiId).setNativeBrokerErrorCode(OX.errorCode),FJ(OX))throw OX}}this.browserStorage.setTemporaryCache(JF,JSON.stringify(n),!0);const a={apiId:eU,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},i=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(e.redirectUri);t.end({success:!0}),await this.navigationClient.navigateExternal(i,a)}async handleRedirectPromise(e,t){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const r=this.browserStorage.getCachedNativeRequest();if(!r)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),e&&t&&(null===e||void 0===e||e.addFields({errorCode:"no_cached_request"},t)),null;const{prompt:n}=r,a=i(r,KJ);n&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(JF));const o=k$();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");const t=await this.platformAuthProvider.sendMessage(a),r=await this.handleNativeResponse(t,a,o);return this.initializeServerTelemetryManager(this.apiId).clearNativeBrokerErrorCode(),e&&this.correlationId&&this.performanceClient.addFields({isNativeBroker:!0},this.correlationId),r}catch(OX){throw OX}}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}async handleNativeResponse(e,t,r){var n,a;this.logger.trace("NativeInteractionClient - handleNativeResponse called.");const i=rK(e.id_token,fY),o=this.createHomeAccountIdentifier(e,i),s=null===(n=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:t.accountId},this.correlationId))||void 0===n?void 0:n.homeAccountId;if(null!==(a=t.extraParameters)&&void 0!==a&&a.child_client_id&&e.account.id!==t.accountId)this.logger.info("handleNativeServerResponse: Double broker flow detected, ignoring accountId mismatch");else if(o!==s&&e.account.id!==t.accountId)throw UJ(zJ);const l=await this.getDiscoveredAuthority({requestAuthority:t.authority}),c=kJ(this.browserStorage,l,o,fY,this.correlationId,i,e.client_info,void 0,i.tid,void 0,e.account.id,this.logger);e.expires_in=Number(e.expires_in);const u=await this.generateAuthenticationResult(e,t,i,c,l.canonicalAuthority,r);return await this.cacheAccount(c,this.correlationId,nK(i)),await this.cacheNativeTokens(e,t,o,i,e.access_token,u.tenantId,r),u}createHomeAccountIdentifier(e,t){return tK.generateHomeAccountId(e.client_info||Qq.EMPTY_STRING,$W,this.logger,this.browserCrypto,t)}generateScopes(e,t){return t?UW.fromString(t):UW.fromString(e)}async generatePopAccessToken(e,t){if(t.tokenType===WB.POP&&t.signPopToken){if(e.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),e.shr;const r=new bJ(this.browserCrypto),n={resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,shrNonce:t.shrNonce};if(!t.keyId)throw uW(tW);return r.signPopToken(e.access_token,t.keyId,n)}return e.access_token}async generateAuthenticationResult(e,t,r,n,a,i){const o=this.addTelemetryFromNativeResponse(e.properties.MATS),s=this.generateScopes(t.scope,e.scope),l=e.account.properties||{},c=l.UID||r.oid||r.sub||Qq.EMPTY_STRING,u=l.TenantId||r.tid||Qq.EMPTY_STRING,d=YW(tK.getAccountInfo(n),void 0,r,e.id_token);d.nativeAccountId!==e.account.id&&(d.nativeAccountId=e.account.id);const h=await this.generatePopAccessToken(e,t),m=t.tokenType===WB.POP?WB.POP:WB.BEARER;return{authority:a,uniqueId:c,tenantId:u,scopes:s.asArray(),account:d,idToken:e.id_token,idTokenClaims:r,accessToken:h,fromCache:!!o&&this.isResponseFromCache(o),expiresOn:S$(i+e.expires_in),tokenType:m,correlationId:this.correlationId,state:e.state,fromNativeBroker:!0}}async cacheAccount(e,t,r){await this.browserStorage.setAccount(e,this.correlationId,r,this.apiId),this.browserStorage.removeAccountContext(tK.getAccountInfo(e),t)}cacheNativeTokens(e,t,r,n,a,i,o){const s=_$(r,t.authority,e.id_token||"",t.clientId,n.tid||""),l=o+(t.tokenType===WB.POP?Qq.SHR_NONCE_VALIDITY:("string"===typeof e.expires_in?parseInt(e.expires_in,10):e.expires_in)||0),c=this.generateScopes(e.scope,t.scope),u={idToken:s,accessToken:A$(r,t.authority,a,t.clientId,n.tid||i,c.printScopes(),l,0,fY,void 0,t.tokenType,void 0,t.keyId)};return this.nativeStorageManager.saveCacheRecord(u,this.correlationId,nK(n),this.apiId,t.storeInCache)}getExpiresInValue(e,t){return e===WB.POP?Qq.SHR_NONCE_VALIDITY:("string"===typeof t?parseInt(t,10):t)||0}addTelemetryFromNativeResponse(e){const t=this.getMATSFromResponse(e);return t?(this.performanceClient.addFields({extensionId:this.platformAuthProvider.getExtensionId(),extensionVersion:this.platformAuthProvider.getExtensionVersion(),matsBrokerVersion:t.broker_version,matsAccountJoinOnStart:t.account_join_on_start,matsAccountJoinOnEnd:t.account_join_on_end,matsDeviceJoin:t.device_join,matsPromptBehavior:t.prompt_behavior,matsApiErrorCode:t.api_error_code,matsUiVisible:t.ui_visible,matsSilentCode:t.silent_code,matsSilentBiSubCode:t.silent_bi_sub_code,matsSilentMessage:t.silent_message,matsSilentStatus:t.silent_status,matsHttpStatus:t.http_status,matsHttpEventCount:t.http_event_count},this.correlationId),t):null}getMATSFromResponse(e){if(e)try{return JSON.parse(e)}catch(OX){this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(e){return"undefined"===typeof e.is_cached?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached}async initializeNativeRequest(e){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");const t=await this.getCanonicalAuthority(e),{scopes:r}=e,n=i(e,VJ),a=new UW(r||[]);a.appendScopes(nB);const o=u(u({},n),{},{accountId:this.accountId,clientId:this.config.auth.clientId,authority:t.urlString,scope:a.printScopes(),redirectUri:this.getRedirectUri(e.redirectUri),prompt:this.getPrompt(e.prompt),correlationId:this.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:u(u({},e.extraQueryParameters),e.tokenQueryParameters),extendedExpiryToken:!1,keyId:e.popKid});if(o.signPopToken&&e.popKid)throw wQ(mQ);if(this.handleExtraBrokerParams(o),o.extraParameters=o.extraParameters||{},o.extraParameters.telemetry=TF,e.authenticationScheme===WB.POP){const t={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},r=new bJ(this.browserCrypto);let n;if(o.keyId)n=this.browserCrypto.base64UrlEncode(JSON.stringify({kid:o.keyId})),o.signPopToken=!1;else{const e=await x$(r.generateCnf.bind(r),xV,this.logger,this.performanceClient,this.correlationId)(t,this.logger);n=e.reqCnfString,o.keyId=e.kid,o.signPopToken=!0}o.reqCnf=n}return this.addRequestSKUs(o),o}async getCanonicalAuthority(e){const t=e.authority||this.config.auth.authority;e.account&&await this.getDiscoveredAuthority({requestAuthority:t,requestAzureCloudOptions:e.azureCloudOptions,account:e.account});const r=new uK(t);return r.validateAsUri(),r}getPrompt(e){switch(this.apiId){case rU:case iU:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),xB}if(e)switch(e){case xB:case bB:case vB:case yB:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),e;default:throw this.logger.trace("initializeNativeRequest: prompt = ".concat(e," is not compatible with native flow")),wQ(dQ)}else this.logger.trace("initializeNativeRequest: prompt was not provided")}handleExtraBrokerParams(e){var t;const r=e.extraParameters&&e.extraParameters.hasOwnProperty(MQ)&&e.extraParameters.hasOwnProperty(RQ)&&e.extraParameters.hasOwnProperty(AQ);if(!e.embeddedClientId&&!r)return;let n="";const a=e.redirectUri;e.embeddedClientId?(e.redirectUri=this.config.auth.redirectUri,n=e.embeddedClientId):e.extraParameters&&(e.redirectUri=e.extraParameters[RQ],n=e.extraParameters[AQ]),e.extraParameters={child_client_id:n,child_redirect_uri:a},null===(t=this.performanceClient)||void 0===t||t.addFields({embeddedClientId:n,embeddedRedirectUri:a},this.correlationId)}}async function QJ(e,t,r,n,a){const i=MJ(u(u({},e.auth),{},{authority:t}),r,n,a);if(QQ(i,{sku:NF,version:$Y,os:"",cpu:""}),e.auth.protocolMode!==pH&&YQ(i,e.telemetry.application),r.platformBroker&&(function(e){e.set("nativebroker","1")}(i),a.addFields({isPlatformAuthorizeRequest:!0},r.correlationId),r.authenticationScheme===WB.POP)){const e=new v$(n,a),t=new bJ(e);let o;if(r.popKid)o=e.encodeKid(r.popKid);else{o=(await x$(t.generateCnf.bind(t),xV,n,a,r.correlationId)(r,n)).reqCnfString}oY(i,o)}return LQ(i,r.correlationId,a),i}async function YJ(e,t,r,n,a){if(!r.codeChallenge)throw BW(SW);const i=await x$(QJ,uV,n,a,r.correlationId)(e,t,r,n,a);return zQ(i,kB),JQ(i,r.codeChallenge,Qq.S256_CODE_CHALLENGE_METHOD),aY(i,r.extraQueryParameters||{}),RJ(t,i,e.auth.encodeExtraQueryParams,r.extraQueryParameters)}async function $J(e,t,r,n,a,i){if(!n.earJwk)throw wQ(kG);const o=await QJ(t,r,n,a,i);zQ(o,jB),function(e,t){e.set("ear_jwk",encodeURIComponent(t)),e.set("ear_jwe_crypto","eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0")}(o,n.earJwk),JQ(o,n.codeChallenge,Qq.S256_CODE_CHALLENGE_METHOD);const s=new Map;aY(s,n.extraQueryParameters||{});return XJ(e,RJ(r,s,t.auth.encodeExtraQueryParams,n.extraQueryParameters),o)}async function JJ(e,t,r,n,a,i){const o=await QJ(t,r,n,a,i);zQ(o,kB),JQ(o,n.codeChallenge,n.codeChallengeMethod||Qq.S256_CODE_CHALLENGE_METHOD),function(e,t){Object.entries(t).forEach(t=>{let[r,n]=t;n&&e.set(r,n)})}(o,n.authorizePostBodyParameters||{});const s=new Map;aY(s,n.extraQueryParameters||{});return XJ(e,RJ(r,s,t.auth.encodeExtraQueryParams,n.extraQueryParameters),o)}function XJ(e,t,r){const n=e.createElement("form");return n.method="post",n.action=t,r.forEach((t,r)=>{const a=e.createElement("input");a.hidden=!0,a.name=r,a.value=t,n.appendChild(a)}),e.body.appendChild(n),n}async function ZJ(e,t,r,n,a,i,o,s,l,c){if(s.verbose("Account id found, calling WAM for token"),!c)throw wQ(cQ);const d=new v$(s,l),h=new GJ(n,a,d,s,o,n.system.navigationClient,r,l,c,t,i,e.correlationId),{userRequestState:m}=vJ.parseRequestState(d,e.state);return x$(h.acquireToken.bind(h),zK,s,l,e.correlationId)(u(u({},e),{},{state:m,prompt:void 0}))}async function eX(e,t,r,n,a,i,o,s,l,c,d,h){if(fJ.removeThrottle(o,a.auth.clientId,e),t.accountId)return x$(ZJ,pV,c,d,e.correlationId)(e,t.accountId,n,a,o,s,l,c,d,h);const m=u(u({},e),{},{code:t.code||"",codeVerifier:r}),p=new LJ(i,o,m,c,d);return await x$(p.handleCodeResponse.bind(p),hV,c,d,e.correlationId)(t,e,n)}async function tX(e,t,r,n,a,i,o,s,l,c,u){if(fJ.removeThrottle(i,n.auth.clientId,e),DJ(t,e.state),!t.ear_jwe)throw wQ(jG);if(!e.earJwk)throw wQ(kG);const d=JSON.parse(await x$(IY,rG,l,c,e.correlationId)(e.earJwk,t.ear_jwe));if(d.accountId)return x$(ZJ,pV,l,c,e.correlationId)(e,d.accountId,r,n,i,o,s,l,c,u);const h=new wJ(n.auth.clientId,i,new v$(l,c),l,null,null,c);h.validateTokenResponse(d);const m={code:"",state:e.state,nonce:e.nonce,client_info:d.client_info,cloud_graph_host_name:d.cloud_graph_host_name,cloud_instance_host_name:d.cloud_instance_host_name,cloud_instance_name:d.cloud_instance_name,msgraph_host:d.msgraph_host};return await x$(h.handleServerTokenResponse.bind(h),kV,l,c,e.correlationId)(d,a,k$(),e,r,m,void 0,void 0,void 0,void 0)}async function rX(e,t,r){e.addQueueMeasurement(WV,r);const n=b$(nX,KV,t,e,r)(e,t,r);return{verifier:n,challenge:await x$(aX,VV,t,e,r)(n,e,t,r)}}function nX(e,t,r){try{const n=new Uint8Array(32);b$(AY,QV,t,e,r)(n);return hY(n)}catch(OX){throw wQ(wG)}}async function aX(e,t,r,n){t.addQueueMeasurement(VV,n);try{const a=await x$(_Y,GV,r,t,n)(e,t,n);return hY(new Uint8Array(a))}catch(OX){throw wQ(wG)}}class iX{constructor(e,t,r,n){this.logger=e,this.handshakeTimeoutMs=t,this.extensionId=n,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=r,this.handshakeEvent=r.startMeasurement(LV),this.platformAuthType=MF}async sendMessage(e){this.logger.trace(this.platformAuthType+" - sendMessage called.");const t={method:LF,request:e},r={channel:_F,extensionId:this.extensionId,responseId:EY(),body:t};this.logger.trace(this.platformAuthType+" - Sending request to browser extension"),this.logger.tracePii(this.platformAuthType+" - Sending request to browser extension: ".concat(JSON.stringify(r))),this.messageChannel.port1.postMessage(r);const n=await new Promise((e,t)=>{this.resolvers.set(r.responseId,{resolve:e,reject:t})});return this.validatePlatformBrokerResponse(n)}static async createProvider(e,t,r){e.trace("PlatformAuthExtensionHandler - createProvider called.");try{const n=new iX(e,t,r,AF);return await n.sendHandshakeRequest(),n}catch(OX){const a=new iX(e,t,r);return await a.sendHandshakeRequest(),a}}async sendHandshakeRequest(){this.logger.trace(this.platformAuthType+" - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);const e={channel:_F,extensionId:this.extensionId,responseId:EY(),body:{method:RF}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=e=>{this.onChannelMessage(e)},window.postMessage(e,window.origin,[this.messageChannel.port2]),new Promise((t,r)=>{this.handshakeResolvers.set(e.responseId,{resolve:t,reject:r}),this.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),r(wQ(sQ)),this.handshakeResolvers.delete(e.responseId)},this.handshakeTimeoutMs)})}onWindowMessage(e){if(this.logger.trace(this.platformAuthType+" - onWindowMessage called"),e.source!==window)return;const t=e.data;if(t.channel&&t.channel===_F&&(!t.extensionId||t.extensionId===this.extensionId)&&t.body.method===RF){const e=this.handshakeResolvers.get(t.responseId);if(!e)return void this.logger.trace(this.platformAuthType+".onWindowMessage - resolver can't be found for request ".concat(t.responseId));this.logger.verbose(t.extensionId?"Extension with id: ".concat(t.extensionId," not installed"):"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),e.reject(wQ(lQ))}}onChannelMessage(e){this.logger.trace(this.platformAuthType+" - onChannelMessage called.");const t=e.data,r=this.resolvers.get(t.responseId),n=this.handshakeResolvers.get(t.responseId);try{const e=t.body.method;if(e===zF){if(!r)return;const e=t.body.response;if(this.logger.trace(this.platformAuthType+" - Received response from browser extension"),this.logger.tracePii(this.platformAuthType+" - Received response from browser extension: ".concat(JSON.stringify(e))),"Success"!==e.status)r.reject(UJ(e.code,e.description,e.ext));else{if(!e.result)throw mF(cF,"Event does not contain result.");e.result.code&&e.result.description?r.reject(UJ(e.result.code,e.result.description,e.result.ext)):r.resolve(e.result)}this.resolvers.delete(t.responseId)}else if(e===DF){if(!n)return void this.logger.trace(this.platformAuthType+".onChannelMessage - resolver can't be found for request ".concat(t.responseId));clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=t.extensionId,this.extensionVersion=t.body.version,this.logger.verbose(this.platformAuthType+" - Received HandshakeResponse from extension: ".concat(this.extensionId)),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),n.resolve(),this.handshakeResolvers.delete(t.responseId)}}catch(a){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii("Error parsing response from WAM Extension: ".concat(a)),this.logger.errorPii("Unable to parse ".concat(e)),r?r.reject(a):n&&n.reject(a)}}validatePlatformBrokerResponse(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw mF(cF,"Response missing expected properties.")}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}getExtensionName(){var e;return this.getExtensionId()===AF?"chrome":null!==(e=this.getExtensionId())&&void 0!==e&&e.length?"unknown":void 0}}const oX=["accountId","clientId","authority","scope","redirectUri","correlationId","state","storeInCache","embeddedClientId","extraParameters"];class sX{constructor(e,t,r){this.logger=e,this.performanceClient=t,this.correlationId=r,this.platformAuthType=IF}static async createProvider(e,t,r){var n;if(e.trace("PlatformAuthDOMHandler: createProvider called"),null!==(n=window.navigator)&&void 0!==n&&n.platformAuthentication){const n=await window.navigator.platformAuthentication.getSupportedContracts(EF);if(null!==n&&void 0!==n&&n.includes(PF))return e.trace("Platform auth api available in DOM"),new sX(e,t,r)}}getExtensionId(){return EF}getExtensionVersion(){return""}getExtensionName(){return OF}async sendMessage(e){this.logger.trace(this.platformAuthType+" - Sending request to browser DOM API");try{const t=this.initializePlatformDOMRequest(e),r=await window.navigator.platformAuthentication.executeGetToken(t);return this.validatePlatformBrokerResponse(r)}catch(OX){throw this.logger.error(this.platformAuthType+" - executeGetToken DOM API error"),OX}}initializePlatformDOMRequest(e){this.logger.trace(this.platformAuthType+" - initializeNativeDOMRequest called");const{accountId:t,clientId:r,authority:n,scope:a,redirectUri:o,correlationId:s,state:l,storeInCache:c,embeddedClientId:d,extraParameters:h}=e,m=i(e,oX),p=this.getDOMExtraParams(m);return{accountId:t,brokerId:this.getExtensionId(),authority:n,clientId:r,correlationId:s||this.correlationId,extraParameters:u(u({},h),p),isSecurityTokenService:!1,redirectUri:o,scope:a,state:l,storeInCache:c,embeddedClientId:d}}validatePlatformBrokerResponse(e){if(e.hasOwnProperty("isSuccess")){if(e.hasOwnProperty("accessToken")&&e.hasOwnProperty("idToken")&&e.hasOwnProperty("clientInfo")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scopes")&&e.hasOwnProperty("expiresIn"))return this.logger.trace(this.platformAuthType+" - platform broker returned successful and valid response"),this.convertToPlatformBrokerResponse(e);if(e.hasOwnProperty("error")){const t=e;if(!1===t.isSuccess&&t.error&&t.error.code)throw this.logger.trace(this.platformAuthType+" - platform broker returned error response"),UJ(t.error.code,t.error.description,{error:parseInt(t.error.errorCode),protocol_error:t.error.protocolError,status:t.error.status,properties:t.error.properties})}}throw mF(cF,"Response missing expected properties.")}convertToPlatformBrokerResponse(e){var t;this.logger.trace(this.platformAuthType+" - convertToNativeResponse called");return{access_token:e.accessToken,id_token:e.idToken,client_info:e.clientInfo,account:e.account,expires_in:e.expiresIn,scope:e.scopes,state:e.state||"",properties:e.properties||{},extendedLifetimeToken:null!==(t=e.extendedLifetimeToken)&&void 0!==t&&t,shr:e.proofOfPossessionPayload}}getDOMExtraParams(e){const t=Object.entries(e).reduce((e,t)=>{let[r,n]=t;return e[r]=String(n),e},{});return u({},t)}}async function lX(e,t,r,n,a){let i;e.trace("getPlatformAuthProvider called",r),e.trace("Has client allowed platform auth via DOM API: "+a);try{a&&(i=await sX.createProvider(e,t,r)),i||(e.trace("Platform auth via DOM API not available, checking for extension"),i=await iX.createProvider(e,n||2e3,t))}catch(OX){e.trace("Platform auth not available",OX)}return i}function cX(e,t,r,n){if(t.trace("isPlatformAuthAllowed called"),!e.system.allowPlatformBroker&&e.system.allowPlatformBrokerWithDOM)throw BW(LW);if(!e.system.allowPlatformBroker)return t.trace("isPlatformAuthAllowed: allowPlatformBroker is not enabled, returning false"),!1;if(!r)return t.trace("isPlatformAuthAllowed: Platform auth provider is not initialized, returning false"),!1;if(n)switch(n){case WB.BEARER:case WB.POP:return t.trace("isPlatformAuthAllowed: authenticationScheme is supported, returning true"),!0;default:return t.trace("isPlatformAuthAllowed: authenticationScheme is not supported, returning false"),!1}return!0}class uX extends OJ{constructor(e,t,r,n,a,i,o,s,l,c){super(e,t,r,n,a,i,o,l,c),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=s,this.eventHandler=a}acquireToken(e,t){let r;try{var n;if(r={popupName:this.generatePopupName(e.scopes||nB,e.authority||this.config.auth.authority),popupWindowAttributes:e.popupWindowAttributes||{},popupWindowParent:null!==(n=e.popupWindowParent)&&void 0!==n?n:window},this.performanceClient.addFields({isAsyncPopup:this.config.system.asyncPopups},this.correlationId),this.config.system.asyncPopups)return this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,r,t);{const n=u(u({},e),{},{httpMethod:EJ(e,this.config.auth.protocolMode)});return this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),r.popup=this.openSizedPopup("about:blank",r),this.acquireTokenPopupAsync(n,r,t)}}catch(OX){return Promise.reject(OX)}}logout(e){try{var t;this.logger.verbose("logoutPopup called");const r=this.initializeLogoutRequest(e),n={popupName:this.generateLogoutPopupName(r),popupWindowAttributes:(null===e||void 0===e?void 0:e.popupWindowAttributes)||{},popupWindowParent:null!==(t=null===e||void 0===e?void 0:e.popupWindowParent)&&void 0!==t?t:window},a=e&&e.authority,i=e&&e.mainWindowRedirectUri;return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(r,n,a,i)):(this.logger.verbose("asyncPopup set to false, opening popup"),n.popup=this.openSizedPopup("about:blank",n),this.logoutPopupAsync(r,n,a,i))}catch(OX){return Promise.reject(OX)}}async acquireTokenPopupAsync(e,t,r){this.logger.verbose("acquireTokenPopupAsync called");const n=await x$(this.initializeAuthorizationRequest.bind(this),lV,this.logger,this.performanceClient,this.correlationId)(e,dU.Popup);t.popup&&QY(n.authority);const a=cX(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme);return n.platformBroker=a,this.config.auth.protocolMode===fH?this.executeEarFlow(n,t,r):this.executeCodeFlow(n,t,r)}async executeCodeFlow(e,t,r){const n=e.correlationId,a=this.initializeServerTelemetryManager(tU),i=r||await x$(rX,WV,this.logger,this.performanceClient,n)(this.performanceClient,this.logger,n),o=u(u({},e),{},{codeChallenge:i.challenge});try{const r=await x$(this.createAuthCodeClient.bind(this),oV,this.logger,this.performanceClient,n)({serverTelemetryManager:a,requestAuthority:o.authority,requestAzureCloudOptions:o.azureCloudOptions,requestExtraQueryParameters:o.extraQueryParameters,account:o.account});if(o.httpMethod===rB)return await this.executeCodeFlowWithPost(o,t,r,i.verifier);{const a=await x$(YJ,cV,this.logger,this.performanceClient,n)(this.config,r.authority,o,this.logger,this.performanceClient),s=this.initiateAuthRequest(a,t);this.eventHandler.emitEvent(eH,dU.Popup,{popupWindow:s},null);const l=await this.monitorPopupForHash(s,t.popupWindowParent),c=b$(PJ,jV,this.logger,this.performanceClient,this.correlationId)(l,this.config.auth.OIDCOptions.serverResponseType,this.logger);return await x$(eX,fV,this.logger,this.performanceClient,n)(e,c,i.verifier,tU,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}catch(OX){var s;throw null===(s=t.popup)||void 0===s||s.close(),OX instanceof hF&&(OX.setCorrelationId(this.correlationId),a.cacheFailedRequest(OX)),OX}}async executeEarFlow(e,t,r){const n=e.correlationId,a=await x$(this.getDiscoveredAuthority.bind(this),LK,this.logger,this.performanceClient,n)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),i=await x$(PY,tG,this.logger,this.performanceClient,n)(),o=r||await x$(rX,WV,this.logger,this.performanceClient,n)(this.performanceClient,this.logger,n),s=u(u({},e),{},{earJwk:i,codeChallenge:o.challenge}),l=t.popup||this.openPopup("about:blank",t);(await $J(l.document,this.config,a,s,this.logger,this.performanceClient)).submit();const c=await x$(this.monitorPopupForHash.bind(this),nV,this.logger,this.performanceClient,n)(l,t.popupWindowParent),d=b$(PJ,jV,this.logger,this.performanceClient,this.correlationId)(c,this.config.auth.OIDCOptions.serverResponseType,this.logger);if(!d.ear_jwe&&d.code){const t=await x$(this.createAuthCodeClient.bind(this),oV,this.logger,this.performanceClient,n)({serverTelemetryManager:this.initializeServerTelemetryManager(tU),requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account,authority:a});return x$(eX,fV,this.logger,this.performanceClient,n)(s,d,o.verifier,tU,this.config,t,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}return x$(tX,mV,this.logger,this.performanceClient,n)(s,d,tU,this.config,a,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async executeCodeFlowWithPost(e,t,r,n){const a=e.correlationId,i=await x$(this.getDiscoveredAuthority.bind(this),LK,this.logger,this.performanceClient,a)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),o=t.popup||this.openPopup("about:blank",t);(await JJ(o.document,this.config,i,e,this.logger,this.performanceClient)).submit();const s=await x$(this.monitorPopupForHash.bind(this),nV,this.logger,this.performanceClient,a)(o,t.popupWindowParent),l=b$(PJ,jV,this.logger,this.performanceClient,this.correlationId)(s,this.config.auth.OIDCOptions.serverResponseType,this.logger);return x$(eX,fV,this.logger,this.performanceClient,a)(e,l,n,tU,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async logoutPopupAsync(e,t,r,n){this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(tH,dU.Popup,e);const a=this.initializeServerTelemetryManager(sU);try{await this.clearCacheOnLogout(this.correlationId,e.account);const s=await x$(this.createAuthCodeClient.bind(this),oV,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:a,requestAuthority:r,account:e.account||void 0});try{s.authority.endSessionEndpoint}catch(l){var i;if(null!==(i=e.account)&&void 0!==i&&i.homeAccountId&&e.postLogoutRedirectUri&&s.authority.protocolMode===pH){var o;if(this.eventHandler.emitEvent(rH,dU.Popup,e),n){const e={apiId:sU,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},t=uK.getAbsoluteUrl(n,UY());await this.navigationClient.navigateInternal(t,e)}return void(null===(o=t.popup)||void 0===o||o.close())}}const c=s.getLogoutUri(e);this.eventHandler.emitEvent(rH,dU.Popup,e);const u=this.openPopup(c,t);if(this.eventHandler.emitEvent(eH,dU.Popup,{popupWindow:u},null),await this.monitorPopupForHash(u,t.popupWindowParent).catch(()=>{}),n){const e={apiId:sU,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},t=uK.getAbsoluteUrl(n,UY());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii("Redirecting main window to: ".concat(t)),await this.navigationClient.navigateInternal(t,e)}else this.logger.verbose("No main window navigation requested")}catch(OX){var s;throw null===(s=t.popup)||void 0===s||s.close(),OX instanceof hF&&(OX.setCorrelationId(this.correlationId),a.cacheFailedRequest(OX)),this.eventHandler.emitEvent(nH,dU.Popup,null,OX),this.eventHandler.emitEvent(aH,dU.Popup),OX}this.eventHandler.emitEvent(aH,dU.Popup)}initiateAuthRequest(e,t){if(e)return this.logger.infoPii("Navigate to: ".concat(e)),this.openPopup(e,t);throw this.logger.error("Navigate url is empty"),wQ(CG)}monitorPopupForHash(e,t){return new Promise((t,r)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");const n=setInterval(()=>{if(e.closed)return this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(n),void r(wQ(MG));let a="";try{a=e.location.href}catch(OX){}if(!a||"about:blank"===a)return;clearInterval(n);let i="";const o=this.config.auth.OIDCOptions.serverResponseType;e&&(i=o===SB?e.location.search:e.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),t(i)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(e,t)})}openPopup(e,t){try{let r;if(t.popup?(r=t.popup,this.logger.verbosePii("Navigating popup window to: ".concat(e)),r.location.assign(e)):"undefined"===typeof t.popup&&(this.logger.verbosePii("Opening popup window to: ".concat(e)),r=this.openSizedPopup(e,t)),!r)throw wQ(IG);return r.focus&&r.focus(),this.currentWindow=r,t.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),r}catch(OX){throw this.logger.error("error opening popup "+OX.message),wQ(PG)}}openSizedPopup(e,t){var r,n,a,i;let{popupName:o,popupWindowAttributes:s,popupWindowParent:l}=t;const c=l.screenLeft?l.screenLeft:l.screenX,u=l.screenTop?l.screenTop:l.screenY,d=l.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,h=l.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let m=null===(r=s.popupSize)||void 0===r?void 0:r.width,p=null===(n=s.popupSize)||void 0===n?void 0:n.height,f=null===(a=s.popupPosition)||void 0===a?void 0:a.top,g=null===(i=s.popupPosition)||void 0===i?void 0:i.left;return(!m||m<0||m>d)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),m=kF),(!p||p<0||p>h)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),p=jF),(!f||f<0||f>h)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),f=Math.max(0,h/2-jF/2+u)),(!g||g<0||g>d)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),g=Math.max(0,d/2-kF/2+c)),l.open(e,o,"width=".concat(m,", height=").concat(p,", top=").concat(f,", left=").concat(g,", scrollbars=yes"))}unloadWindow(e){this.currentWindow&&this.currentWindow.close(),e.preventDefault()}cleanPopup(e,t){e.close(),t.removeEventListener("beforeunload",this.unloadWindow)}generatePopupName(e,t){return"".concat(SF,".").concat(this.config.auth.clientId,".").concat(e.join("-"),".").concat(t,".").concat(this.correlationId)}generateLogoutPopupName(e){const t=e.account&&e.account.homeAccountId;return"".concat(SF,".").concat(this.config.auth.clientId,".").concat(t,".").concat(this.correlationId)}}class dX extends OJ{constructor(e,t,r,n,a,i,o,s,l,c){super(e,t,r,n,a,i,o,l,c),this.nativeStorage=s}async acquireToken(e){const t=await x$(this.initializeAuthorizationRequest.bind(this),lV,this.logger,this.performanceClient,this.correlationId)(e,dU.Redirect);t.platformBroker=cX(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme);const r=e=>{e.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.resetRequestCache(),this.eventHandler.emitEvent(iH,dU.Redirect))},n=this.getRedirectStartPage(e.redirectStartPage);this.logger.verbosePii("Redirect start page: ".concat(n)),this.browserStorage.setTemporaryCache(VF,n,!0),window.addEventListener("pageshow",r);try{this.config.auth.protocolMode===fH?await this.executeEarFlow(t):await this.executeCodeFlow(t,e.onRedirectNavigate)}catch(OX){throw OX instanceof hF&&OX.setCorrelationId(this.correlationId),window.removeEventListener("pageshow",r),OX}}async executeCodeFlow(e,t){const r=e.correlationId,n=this.initializeServerTelemetryManager(eU),a=await x$(rX,WV,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),i=u(u({},e),{},{codeChallenge:a.challenge});this.browserStorage.cacheAuthorizeRequest(i,a.verifier);try{if(i.httpMethod===rB)return await this.executeCodeFlowWithPost(i);{const r=await x$(this.createAuthCodeClient.bind(this),oV,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:n,requestAuthority:i.authority,requestAzureCloudOptions:i.azureCloudOptions,requestExtraQueryParameters:i.extraQueryParameters,account:i.account}),a=await x$(YJ,cV,this.logger,this.performanceClient,e.correlationId)(this.config,r.authority,i,this.logger,this.performanceClient);return await this.initiateAuthRequest(a,t)}}catch(OX){throw OX instanceof hF&&(OX.setCorrelationId(this.correlationId),n.cacheFailedRequest(OX)),OX}}async executeEarFlow(e){const t=e.correlationId,r=await x$(this.getDiscoveredAuthority.bind(this),LK,this.logger,this.performanceClient,t)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),n=await x$(PY,tG,this.logger,this.performanceClient,t)(),a=await x$(rX,WV,this.logger,this.performanceClient,t)(this.performanceClient,this.logger,t),i=u(u({},e),{},{earJwk:n,codeChallenge:a.challenge});this.browserStorage.cacheAuthorizeRequest(i,a.verifier);return(await $J(document,this.config,r,i,this.logger,this.performanceClient)).submit(),new Promise((e,t)=>{setTimeout(()=>{t(wQ(vQ,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})}async executeCodeFlowWithPost(e){const t=e.correlationId,r=await x$(this.getDiscoveredAuthority.bind(this),LK,this.logger,this.performanceClient,t)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});this.browserStorage.cacheAuthorizeRequest(e);return(await JJ(document,this.config,r,e,this.logger,this.performanceClient)).submit(),new Promise((e,t)=>{setTimeout(()=>{t(wQ(vQ,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})}async handleRedirectPromise(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;const a=this.initializeServerTelemetryManager(nU);try{const[i,o]=this.getRedirectResponse(e||"");if(!i)return this.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),this.browserStorage.resetRequestCache(),"back_forward"!==function(){if("undefined"===typeof window||"undefined"===typeof window.performance||"function"!==typeof window.performance.getEntriesByType)return;const e=window.performance.getEntriesByType("navigation"),t=e.length?e[0]:void 0;return null===t||void 0===t?void 0:t.type}()?n.event.errorCode="no_server_response":this.logger.verbose("Back navigation event detected. Muting no_server_response error"),null;const s=this.browserStorage.getTemporaryCache(VF,!0)||Qq.EMPTY_STRING,l=cK(s);if(l===cK(window.location.href)&&this.config.auth.navigateToLoginRequestUrl){this.logger.verbose("Current page is loginRequestUrl, handling response"),s.indexOf("#")>-1&&function(e){const t=e.split("#");t.shift(),window.location.hash=t.length>0?t.join("#"):""}(s);return await this.handleResponse(i,t,r,a)}if(!this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),await this.handleResponse(i,t,r,a);if(!FY()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(GF,o,!0);const e={apiId:nU,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0};let n=!0;if(s&&"null"!==s)this.logger.verbose("Navigating to loginRequestUrl: ".concat(s)),n=await this.navigationClient.navigateInternal(s,e);else{const t=function(){const e=new uK(window.location.href).getUrlComponents();return"".concat(e.Protocol,"//").concat(e.HostNameAndPort,"/")}();this.browserStorage.setTemporaryCache(VF,t,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),n=await this.navigationClient.navigateInternal(t,e)}if(!n)return await this.handleResponse(i,t,r,a)}return null}catch(OX){throw OX instanceof hF&&(OX.setCorrelationId(this.correlationId),a.cacheFailedRequest(OX)),OX}}getRedirectResponse(e){this.logger.verbose("getRedirectResponseHash called");let t=e;t||(t=this.config.auth.OIDCOptions.serverResponseType===SB?window.location.search:window.location.hash);let r=sK(t);if(r){try{IJ(r,this.browserCrypto,dU.Redirect)}catch(OX){return OX instanceof hF&&this.logger.error("Interaction type validation failed due to ".concat(OX.errorCode,": ").concat(OX.errorMessage)),[null,""]}return BY(window),this.logger.verbose("Hash contains known properties, returning response hash"),[r,t]}const n=this.browserStorage.getTemporaryCache(GF,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(GF)),n&&(r=sK(n),r)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[r,n]):[null,""]}async handleResponse(e,t,r,n){if(!e.state)throw wQ(_G);if(e.ear_jwe){const r=await x$(this.getDiscoveredAuthority.bind(this),LK,this.logger,this.performanceClient,t.correlationId)({requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account});return x$(tX,mV,this.logger,this.performanceClient,t.correlationId)(t,e,eU,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}const a=await x$(this.createAuthCodeClient.bind(this),oV,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:n,requestAuthority:t.authority});return x$(eX,fV,this.logger,this.performanceClient,t.correlationId)(t,e,r,eU,this.config,a,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async initiateAuthRequest(e,t){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),e){this.logger.infoPii("RedirectHandler.initiateAuthRequest: Navigate to: ".concat(e));const r={apiId:eU,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},n=t||this.config.auth.onRedirectNavigate;if("function"===typeof n){this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback");return!1!==n(e)?(this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),void await this.navigationClient.navigateExternal(e,r)):void this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation")}return this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),void await this.navigationClient.navigateExternal(e,r)}throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),wQ(CG)}async logout(e){this.logger.verbose("logoutRedirect called");const t=this.initializeLogoutRequest(e),r=this.initializeServerTelemetryManager(oU);try{this.eventHandler.emitEvent(tH,dU.Redirect,e),await this.clearCacheOnLogout(this.correlationId,t.account);const i={apiId:oU,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},o=await x$(this.createAuthCodeClient.bind(this),oV,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:e&&e.authority,requestExtraQueryParameters:null===e||void 0===e?void 0:e.extraQueryParameters,account:e&&e.account||void 0});if(o.authority.protocolMode===pH)try{o.authority.endSessionEndpoint}catch(a){var n;if(null!==(n=t.account)&&void 0!==n&&n.homeAccountId)return void this.eventHandler.emitEvent(rH,dU.Redirect,t)}const s=o.getLogoutUri(t);if(this.eventHandler.emitEvent(rH,dU.Redirect,t),!e||"function"!==typeof e.onRedirectNavigate)return this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,KF),void await this.navigationClient.navigateExternal(s,i);if(!1!==e.onRedirectNavigate(s))return this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,KF),void await this.navigationClient.navigateExternal(s,i);this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation")}catch(OX){throw OX instanceof hF&&(OX.setCorrelationId(this.correlationId),r.cacheFailedRequest(OX)),this.eventHandler.emitEvent(nH,dU.Redirect,null,OX),this.eventHandler.emitEvent(aH,dU.Redirect),OX}this.eventHandler.emitEvent(aH,dU.Redirect)}getRedirectStartPage(e){const t=e||window.location.href;return uK.getAbsoluteUrl(t,UY())}}async function hX(e,t,r,n,a){if(t.addQueueMeasurement(rV,n),!e)throw r.info("Navigate url is empty"),wQ(CG);return a?x$(gX,aV,r,t,n)(e,a,t,n):b$(vX,iV,r,t,n)(e)}async function mX(e,t,r,n,a){const i=yX();if(!i.contentDocument)throw"No document associated with iframe!";return(await JJ(i.contentDocument,e,t,r,n,a)).submit(),i}async function pX(e,t,r,n,a){const i=yX();if(!i.contentDocument)throw"No document associated with iframe!";return(await $J(i.contentDocument,e,t,r,n,a)).submit(),i}async function fX(e,t,r,n,a,i,o){return n.addQueueMeasurement(nV,i),new Promise((n,i)=>{t<YY&&a.warning("system.loadFrameTimeout or system.iframeHashTimeout set to lower (".concat(t,"ms) than the default (").concat(YY,"ms). This may result in timeouts."));const s=window.setTimeout(()=>{window.clearInterval(l),i(wQ(DG))},t),l=window.setInterval(()=>{let t="";const r=e.contentWindow;try{t=r?r.location.href:""}catch(OX){}if(!t||"about:blank"===t)return;let a="";r&&(a=o===SB?r.location.search:r.location.hash),window.clearTimeout(s),window.clearInterval(l),n(a)},r)}).finally(()=>{b$(bX,zV,a,n,i)(e)})}function gX(e,t,r,n){return r.addQueueMeasurement(aV,n),new Promise((r,n)=>{const a=yX();window.setTimeout(()=>{a?(a.src=e,r(a)):n("Unable to load iframe")},t)})}function vX(e){const t=yX();return t.src=e,t}function yX(){const e=document.createElement("iframe");return e.className="msalSilentIframe",e.style.visibility="hidden",e.style.position="absolute",e.style.width=e.style.height="0",e.style.border="0",e.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),e.setAttribute("allow","local-network-access *"),document.body.appendChild(e),e}function bX(e){document.body===e.parentNode&&document.body.removeChild(e)}class xX extends OJ{constructor(e,t,r,n,a,i,o,s,l,c,u){super(e,t,r,n,a,i,s,c,u),this.apiId=o,this.nativeStorage=l}async acquireToken(e){this.performanceClient.addQueueMeasurement(IK,e.correlationId),e.loginHint||e.sid||e.account&&e.account.username||this.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");const t=u({},e);t.prompt?t.prompt!==xB&&t.prompt!==wB&&(this.logger.warning("SilentIframeClient. Replacing invalid prompt ".concat(t.prompt," with ").concat(xB)),t.prompt=xB):t.prompt=xB;const r=await x$(this.initializeAuthorizationRequest.bind(this),lV,this.logger,this.performanceClient,e.correlationId)(t,dU.Silent);return r.platformBroker=cX(this.config,this.logger,this.platformAuthProvider,r.authenticationScheme),QY(r.authority),this.config.auth.protocolMode===fH?this.executeEarFlow(r):this.executeCodeFlow(r)}async executeCodeFlow(e){let t;const r=this.initializeServerTelemetryManager(this.apiId);try{return t=await x$(this.createAuthCodeClient.bind(this),oV,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:r,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),await x$(this.silentTokenHelper.bind(this),tV,this.logger,this.performanceClient,e.correlationId)(t,e)}catch(OX){if(OX instanceof hF&&(OX.setCorrelationId(this.correlationId),r.cacheFailedRequest(OX)),!t||!(OX instanceof hF)||OX.errorCode!==wF)throw OX;return this.performanceClient.addFields({retryError:OX.errorCode},this.correlationId),await x$(this.silentTokenHelper.bind(this),tV,this.logger,this.performanceClient,this.correlationId)(t,e)}}async executeEarFlow(e){const t=e.correlationId,r=await x$(this.getDiscoveredAuthority.bind(this),LK,this.logger,this.performanceClient,t)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),n=await x$(PY,tG,this.logger,this.performanceClient,t)(),a=await x$(rX,WV,this.logger,this.performanceClient,t)(this.performanceClient,this.logger,t),i=u(u({},e),{},{earJwk:n,codeChallenge:a.challenge}),o=await x$(pX,rV,this.logger,this.performanceClient,t)(this.config,r,i,this.logger,this.performanceClient),s=this.config.auth.OIDCOptions.serverResponseType,l=await x$(fX,nV,this.logger,this.performanceClient,t)(o,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,t,s),c=b$(PJ,jV,this.logger,this.performanceClient,t)(l,s,this.logger);if(!c.ear_jwe&&c.code){const n=await x$(this.createAuthCodeClient.bind(this),oV,this.logger,this.performanceClient,t)({serverTelemetryManager:this.initializeServerTelemetryManager(this.apiId),requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account,authority:r});return x$(eX,fV,this.logger,this.performanceClient,t)(i,c,a.verifier,this.apiId,this.config,n,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}return x$(tX,mV,this.logger,this.performanceClient,t)(i,c,this.apiId,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}logout(){return Promise.reject(wQ(FG))}async silentTokenHelper(e,t){const r=t.correlationId;this.performanceClient.addQueueMeasurement(tV,r);const n=await x$(rX,WV,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),a=u(u({},t),{},{codeChallenge:n.challenge});let i;if(t.httpMethod===rB)i=await x$(mX,rV,this.logger,this.performanceClient,r)(this.config,e.authority,a,this.logger,this.performanceClient);else{const t=await x$(YJ,cV,this.logger,this.performanceClient,r)(this.config,e.authority,a,this.logger,this.performanceClient);i=await x$(hX,rV,this.logger,this.performanceClient,r)(t,this.performanceClient,this.logger,r,this.config.system.navigateFrameWait)}const o=this.config.auth.OIDCOptions.serverResponseType,s=await x$(fX,nV,this.logger,this.performanceClient,r)(i,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,r,o),l=b$(PJ,jV,this.logger,this.performanceClient,r)(s,o,this.logger);return x$(eX,fV,this.logger,this.performanceClient,r)(t,l,n.verifier,this.apiId,this.config,e,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}class wX extends gJ{constructor(e,t){super(e,t)}async acquireToken(e,t){var r,n;null===(r=this.performanceClient)||void 0===r||r.addQueueMeasurement(HK,e.correlationId);const a=k$(),i=await x$(this.executeTokenRequest.bind(this),UK,this.logger,this.performanceClient,e.correlationId)(e,this.authority),o=null===(n=i.headers)||void 0===n?void 0:n[cB],s=new wJ(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return s.validateTokenResponse(i.body),x$(s.handleServerTokenResponse.bind(s),kV,this.logger,this.performanceClient,e.correlationId)(i.body,this.authority,a,e,t,void 0,void 0,!0,e.forceCache,o)}async acquireTokenByRefreshToken(e,t){var r;if(!e)throw BW(wW);if(null===(r=this.performanceClient)||void 0===r||r.addQueueMeasurement(KK,e.correlationId),!e.account)throw uW(FH);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await x$(this.acquireTokenWithCachedRefreshToken.bind(this),WK,this.logger,this.performanceClient,e.correlationId)(e,!0,t)}catch(OX){const n=OX instanceof G$&&OX.errorCode===q$,a=OX instanceof pJ&&OX.errorCode===YB&&OX.subError===$B;if(n||a)return x$(this.acquireTokenWithCachedRefreshToken.bind(this),WK,this.logger,this.performanceClient,e.correlationId)(e,!1,t);throw OX}return x$(this.acquireTokenWithCachedRefreshToken.bind(this),WK,this.logger,this.performanceClient,e.correlationId)(e,!1,t)}async acquireTokenWithCachedRefreshToken(e,t,r){var n;null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(WK,e.correlationId);const a=b$(this.cacheManager.getRefreshToken.bind(this.cacheManager),BV,this.logger,this.performanceClient,e.correlationId)(e.account,t,e.correlationId,void 0,this.performanceClient);if(!a)throw Y$(q$);if(a.expiresOn){var i;const t=e.refreshTokenExpirationOffsetSeconds||300;if(null===(i=this.performanceClient)||void 0===i||i.addFields({cacheRtExpiresOnSeconds:Number(a.expiresOn),rtOffsetSeconds:t},e.correlationId),C$(a.expiresOn,t))throw Y$(F$)}const o=u(u({},e),{},{refreshToken:a.secret,authenticationScheme:e.authenticationScheme||WB.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:dJ}});try{return await x$(this.acquireToken.bind(this),HK,this.logger,this.performanceClient,e.correlationId)(o,r)}catch(OX){if(OX instanceof G$&&OX.subError===H$){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");const t=this.cacheManager.generateCredentialKey(a);this.cacheManager.removeRefreshToken(t,e.correlationId)}throw OX}}async executeTokenRequest(e,t){var r;null===(r=this.performanceClient)||void 0===r||r.addQueueMeasurement(UK,e.correlationId);const n=this.createTokenQueryParameters(e),a=uK.appendQueryString(t.tokenEndpoint,n),i=await x$(this.createTokenRequestBody.bind(this),VK,this.logger,this.performanceClient,e.correlationId)(e),o=this.createTokenRequestHeaders(e.ccsCredential),s=$$(this.config.authOptions.clientId,e);return x$(this.executePostToTokenEndpoint.bind(this),BK,this.logger,this.performanceClient,e.correlationId)(a,i,o,s,e.correlationId,BK)}async createTokenRequestBody(e){var t,r,n;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(VK,e.correlationId);const a=new Map;if(BQ(a,e.embeddedClientId||(null===(r=e.tokenBodyParameters)||void 0===r?void 0:r[AQ])||this.config.authOptions.clientId),e.redirectUri&&FQ(a,e.redirectUri),qQ(a,e.scopes,!0,null===(n=this.config.authOptions.authority.options.OIDCOptions)||void 0===n?void 0:n.defaultScopes),tY(a,AB),rY(a),QQ(a,this.config.libraryInfo),YQ(a,this.config.telemetry.application),cY(a),this.serverTelemetryManager&&!bG(this.config)&&lY(a,this.serverTelemetryManager),function(e,t){e.set("refresh_token",t)}(a,e.refreshToken),this.config.clientCredentials.clientSecret&&XQ(a,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const t=this.config.clientCredentials.clientAssertion;ZQ(a,await jJ(t.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),eY(a,t.assertionType)}if(e.authenticationScheme===WB.POP){const t=new bJ(this.cryptoUtils,this.performanceClient);let r;if(e.popKid)r=this.cryptoUtils.encodeKid(e.popKid);else{r=(await x$(t.generateCnf.bind(t),xV,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString}oY(a,r)}else if(e.authenticationScheme===WB.SSH){if(!e.sshJwk)throw BW(AW);sY(a,e.sshJwk)}if((!FW.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&VQ(a,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case dJ:try{WQ(a,WW(e.ccsCredential.credential))}catch(OX){this.logger.verbose("Could not parse home account ID for CCS Header: "+OX)}break;case hJ:HQ(a,e.ccsCredential.credential)}return e.embeddedClientId&&uY(a,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&aY(a,e.tokenBodyParameters),LQ(a,e.correlationId,this.performanceClient),lK(a)}}class kX extends OJ{async acquireToken(e){this.performanceClient.addQueueMeasurement(RK,e.correlationId);const t=await x$(AJ,JK,this.logger,this.performanceClient,e.correlationId)(e,this.config,this.performanceClient,this.logger),r=u(u({},e),t);e.redirectUri&&(r.redirectUri=this.getRedirectUri(e.redirectUri));const n=this.initializeServerTelemetryManager(iU),a=await this.createRefreshTokenClient({serverTelemetryManager:n,authorityUrl:r.authority,azureCloudOptions:r.azureCloudOptions,account:r.account});return x$(a.acquireTokenByRefreshToken.bind(a),KK,this.logger,this.performanceClient,e.correlationId)(r,iU).catch(e=>{throw e.setCorrelationId(this.correlationId),n.cacheFailedRequest(e),e})}logout(){return Promise.reject(wQ(FG))}async createRefreshTokenClient(e){const t=await x$(this.getClientConfiguration.bind(this),sV,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:e.serverTelemetryManager,requestAuthority:e.authorityUrl,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return new wX(t,this.performanceClient)}}class jX{constructor(e,t,r,n,a){this.isBrowserEnvironment="undefined"!==typeof window,this.config=e,this.storage=t,this.logger=r,this.cryptoObj=n,this.performanceClient=a}async loadExternalTokens(e,t,r){if(!this.isBrowserEnvironment)throw wQ(QG);const n=e.correlationId||EY(),a=this.performanceClient.startMeasurement(nG,n);try{const i=t.id_token?rK(t.id_token,fY):void 0,o=nK(i||{}),s={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},l=e.authority||this.config.auth.authority,c=await mJ(L$.generateAuthority(l,e.azureCloudOptions),this.config.system.networkClient,this.storage,s,this.logger,n,this.performanceClient),u=await x$(this.loadAccount.bind(this),aG,this.logger,this.performanceClient,n)(e,r.clientInfo||t.client_info||"",n,c,i),d=await x$(this.loadIdToken.bind(this),iG,this.logger,this.performanceClient,n)(t,u.homeAccountId,u.environment,u.realm,n,o),h=await x$(this.loadAccessToken.bind(this),oG,this.logger,this.performanceClient,n)(e,t,u.homeAccountId,u.environment,u.realm,r,n,o),m=await x$(this.loadRefreshToken.bind(this),sG,this.logger,this.performanceClient,n)(t,u.homeAccountId,u.environment,n,o);return a.end({success:!0},void 0,tK.getAccountInfo(u)),this.generateAuthenticationResult(e,{account:u,idToken:d,accessToken:h,refreshToken:m},c,i)}catch(i){throw a.end({success:!1},i),i}}async loadAccount(e,t,r,n,a){if(this.logger.verbose("TokenCache - loading account"),e.account){const t=tK.createFromAccountInfo(e.account);return await this.storage.setAccount(t,r,nK(a||{}),cU),t}if(!t&&!a)throw this.logger.error("TokenCache - if an account is not provided on the request, clientInfo or idToken must be provided instead."),wQ(eQ);const i=tK.generateHomeAccountId(t,n.authorityType,this.logger,this.cryptoObj,a),o=null===a||void 0===a?void 0:a.tid,s=kJ(this.storage,n,i,fY,r,a,t,n.getPreferredCache(),o,void 0,void 0,this.logger);return await this.storage.setAccount(s,r,nK(a||{}),cU),s}async loadIdToken(e,t,r,n,a,i){if(!e.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");const o=_$(t,r,e.id_token,this.config.auth.clientId,n);return await this.storage.setIdTokenCredential(o,a,i),o}async loadAccessToken(e,t,r,n,a,i,o,s){if(!t.access_token)return this.logger.verbose("TokenCache - no access token found in response"),null;if(!t.expires_in)return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;if(!t.scope&&(!e.scopes||!e.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null;this.logger.verbose("TokenCache - loading access token");const l=t.scope?UW.fromString(t.scope):new UW(e.scopes),c=i.expiresOn||t.expires_in+k$(),u=i.extendedExpiresOn||(t.ext_expires_in||t.expires_in)+k$(),d=A$(r,n,t.access_token,this.config.auth.clientId,a,l.printScopes(),c,u,fY);return await this.storage.setAccessTokenCredential(d,o,s),d}async loadRefreshToken(e,t,r,n,a){if(!e.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;const i=e.refresh_token_expires_in?e.refresh_token_expires_in+k$():void 0;this.performanceClient.addFields({extRtExpiresOnSeconds:i},n),this.logger.verbose("TokenCache - loading refresh token");const o=T$(t,r,e.refresh_token,this.config.auth.clientId,e.foci,void 0,i);return await this.storage.setRefreshTokenCredential(o,n,a),o}generateAuthenticationResult(e,t,r,n){var a,i,o;let s,l="",c=[],u=null;null!==t&&void 0!==t&&t.accessToken&&(l=t.accessToken.secret,c=UW.fromString(t.accessToken.target).asArray(),u=S$(t.accessToken.expiresOn),s=S$(t.accessToken.extendedExpiresOn));const d=t.account;return{authority:r?r.canonicalAuthority:"",uniqueId:t.account.localAccountId,tenantId:t.account.realm,scopes:c,account:tK.getAccountInfo(d),idToken:(null===(a=t.idToken)||void 0===a?void 0:a.secret)||"",idTokenClaims:n||{},accessToken:l,fromCache:!0,expiresOn:u,correlationId:e.correlationId||"",requestId:"",extExpiresOn:s,familyId:(null===(i=t.refreshToken)||void 0===i?void 0:i.familyId)||"",tokenType:(null===t||void 0===t||null===(o=t.accessToken)||void 0===o?void 0:o.tokenType)||"",state:e.state||"",cloudGraphHostName:d.cloudGraphHostName||"",msGraphHost:d.msGraphHost||"",fromNativeBroker:!1}}}class SX extends SJ{constructor(e){super(e),this.includeRedirectUri=!1}}class CX extends OJ{constructor(e,t,r,n,a,i,o,s,l,c){super(e,t,r,n,a,i,s,l,c),this.apiId=o}async acquireToken(e){if(!e.code)throw wQ(rQ);const t=await x$(this.initializeAuthorizationRequest.bind(this),lV,this.logger,this.performanceClient,e.correlationId)(e,dU.Silent),r=this.initializeServerTelemetryManager(this.apiId);try{const n=u(u({},t),{},{code:e.code}),a=await x$(this.getClientConfiguration.bind(this),sV,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:r,requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account}),i=new SX(a);this.logger.verbose("Auth code client created");const o=new LJ(i,this.browserStorage,n,this.logger,this.performanceClient);return await x$(o.handleCodeResponseFromServer.bind(o),dV,this.logger,this.performanceClient,e.correlationId)({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},t,this.apiId,!1)}catch(OX){throw OX instanceof hF&&(OX.setCorrelationId(this.correlationId),r.cacheFailedRequest(OX)),OX}}logout(){return Promise.reject(wQ(FG))}}function NX(e,t,r){try{VY(e)}catch(OX){throw t.end({success:!1},OX,r),OX}}class _X{constructor(e){var t,r,n,a;this.operatingContext=e,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=e.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new v$(this.logger,this.performanceClient):dW,this.eventHandler=new uJ(this.logger),this.browserStorage=this.isBrowserEnvironment?new lJ(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler,function(e){const t=e.cloudDiscoveryMetadata;let r;if(t)try{r=JSON.parse(t)}catch(OX){throw BW(CW)}return{canonicalAuthority:e.authority?z$(e.authority):void 0,knownAuthorities:e.knownAuthorities,cloudDiscoveryMetadata:r}}(this.config.auth)):(t=this.config.auth.clientId,r=this.logger,n=this.performanceClient,a=this.eventHandler,new lJ(t,{cacheLocation:FF,cacheRetentionDays:5,temporaryCacheLocation:FF,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1},dW,r,n,a));const i={cacheLocation:FF,cacheRetentionDays:5,temporaryCacheLocation:FF,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new lJ(this.config.auth.clientId,i,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler),this.tokenCache=new jX(this.config,this.browserStorage,this.logger,this.browserCrypto,this.performanceClient),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}static async createController(e,t){const r=new _X(e);return await r.initialize(t),r}trackPageVisibility(e){e&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},e))}async initialize(e,t){if(this.logger.trace("initialize called"),this.initialized)return void this.logger.info("initialize has already been called, exiting early.");if(!this.isBrowserEnvironment)return this.logger.info("in non-browser environment, exiting early."),this.initialized=!0,void this.eventHandler.emitEvent(RU);const r=(null===e||void 0===e?void 0:e.correlationId)||this.getRequestCorrelationId(),n=this.config.system.allowPlatformBroker,a=this.performanceClient.startMeasurement(ZK,r);if(this.eventHandler.emitEvent(MU),!t)try{this.logMultipleInstances(a)}catch(i){}if(await x$(this.browserStorage.initialize.bind(this.browserStorage),eV,this.logger,this.performanceClient,r)(r),n)try{this.platformAuthProvider=await lX(this.logger,this.performanceClient,r,this.config.system.nativeBrokerHandshakeTimeout,this.config.system.allowPlatformBrokerWithDOM)}catch(OX){this.logger.verbose(OX)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),b$(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),qV,this.logger,this.performanceClient,r)(r)),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(r),this.initialized=!0,this.eventHandler.emitEvent(RU),a.end({allowPlatformBroker:n,success:!0})}async handleRedirectPromise(e){if(this.logger.verbose("handleRedirectPromise called"),KY(this.initialized),this.isBrowserEnvironment){const t=e||"";let r=this.redirectResponse.get(t);return"undefined"===typeof r?(r=this.handleRedirectPromiseInternal(e),this.redirectResponse.set(t,r),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),r}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null}async handleRedirectPromiseInternal(e){var t;if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;if((null===(t=this.browserStorage.getInteractionInProgress())||void 0===t?void 0:t.type)===KF)return this.logger.verbose("handleRedirectPromise removing interaction_in_progress flag and returning null after sign-out"),this.browserStorage.setInteractionInProgress(!1),Promise.resolve(null);const r=this.getAllAccounts(),n=this.browserStorage.getCachedNativeRequest(),a=n&&this.platformAuthProvider&&!e;let i,o;this.eventHandler.emitEvent(XU,dU.Redirect);try{if(a&&this.platformAuthProvider){i=this.performanceClient.startMeasurement(TK,(null===n||void 0===n?void 0:n.correlationId)||""),this.logger.trace("handleRedirectPromise - acquiring token from native platform"),i.add({isPlatformBrokerRequest:!0});const e=new GJ(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,nU,this.performanceClient,this.platformAuthProvider,n.accountId,this.nativeInternalStorage,n.correlationId);o=x$(e.handleRedirectPromise.bind(e),DV,this.logger,this.performanceClient,i.event.correlationId)(this.performanceClient,i.event.correlationId)}else{const[t,r]=this.browserStorage.getCachedRequest(),n=t.correlationId;i=this.performanceClient.startMeasurement(TK,n),this.logger.trace("handleRedirectPromise - acquiring token from web flow");const a=this.createRedirectClient(n);o=x$(a.handleRedirectPromise.bind(a),RV,this.logger,this.performanceClient,i.event.correlationId)(e,t,r,i)}}catch(OX){throw this.browserStorage.resetRequestCache(),OX}return o.then(e=>{if(e){this.browserStorage.resetRequestCache();r.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(BU,dU.Redirect,e),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(HU,dU.Redirect,e),this.logger.verbose("handleRedirectResponse returned result, acquire token success")),i.end({success:!0},void 0,e.account)}else i.event.errorCode?i.end({success:!1},void 0):i.discard();return this.eventHandler.emitEvent(ZU,dU.Redirect),e}).catch(e=>{this.browserStorage.resetRequestCache();const t=e;throw r.length>0?this.eventHandler.emitEvent(WU,dU.Redirect,null,t):this.eventHandler.emitEvent(FU,dU.Redirect,null,t),this.eventHandler.emitEvent(ZU,dU.Redirect),i.end({success:!1},t),e})}async acquireTokenRedirect(e){const t=this.getRequestCorrelationId(e);this.logger.verbose("acquireTokenRedirect called",t);const r=this.performanceClient.startMeasurement(AK,t);r.add({scenarioId:e.scenarioId});const n=e.onRedirectNavigate;if(n)e.onRedirectNavigate=t=>{const a="function"===typeof n?n(t):void 0;return r.add({navigateCallbackResult:!1!==a}),r.event=r.end({success:!0},void 0,e.account)||r.event,a};else{const t=this.config.auth.onRedirectNavigate;this.config.auth.onRedirectNavigate=n=>{const a="function"===typeof t?t(n):void 0;return r.add({navigateCallbackResult:!1!==a}),r.event=r.end({success:!0},void 0,e.account)||r.event,a}}const a=this.getAllAccounts().length>0;try{let n;if(GY(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,WF),a?this.eventHandler.emitEvent(UU,dU.Redirect,e):this.eventHandler.emitEvent(qU,dU.Redirect,e),this.platformAuthProvider&&this.canUsePlatformBroker(e)){n=new GJ(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,eU,this.performanceClient,this.platformAuthProvider,this.getNativeAccountId(e),this.nativeInternalStorage,t).acquireTokenRedirect(e,r).catch(n=>{if(r.add({brokerErrorName:n.name,brokerErrorCode:n.errorCode}),n instanceof BJ&&FJ(n)){this.platformAuthProvider=void 0;return this.createRedirectClient(t).acquireToken(e)}if(n instanceof G$){this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow");return this.createRedirectClient(t).acquireToken(e)}throw n})}else{n=this.createRedirectClient(t).acquireToken(e)}return await n}catch(OX){throw this.browserStorage.resetRequestCache(),2===r.event.status?this.performanceClient.startMeasurement(TK,t).end({success:!1},OX,e.account):r.end({success:!1},OX,e.account),a?this.eventHandler.emitEvent(WU,dU.Redirect,null,OX):this.eventHandler.emitEvent(FU,dU.Redirect,null,OX),OX}}acquireTokenPopup(e){const t=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(_K,t);r.add({scenarioId:e.scenarioId});try{this.logger.verbose("acquireTokenPopup called",t),NX(this.initialized,r,e.account),this.browserStorage.setInteractionInProgress(!0,WF)}catch(OX){return Promise.reject(OX)}const n=this.getAllAccounts();let a;n.length>0?this.eventHandler.emitEvent(UU,dU.Popup,e):this.eventHandler.emitEvent(qU,dU.Popup,e);const i=this.getPreGeneratedPkceCodes(t);if(this.canUsePlatformBroker(e))r.add({isPlatformBrokerRequest:!0}),a=this.acquireTokenNative(u(u({},e),{},{correlationId:t}),tU).then(e=>(r.end({success:!0},void 0,e.account),e)).catch(n=>{if(r.add({brokerErrorName:n.name,brokerErrorCode:n.errorCode}),n instanceof BJ&&FJ(n)){this.platformAuthProvider=void 0;return this.createPopupClient(t).acquireToken(e,i)}if(n instanceof G$){this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow");return this.createPopupClient(t).acquireToken(e,i)}throw n});else{a=this.createPopupClient(t).acquireToken(e,i)}return a.then(e=>(n.length<this.getAllAccounts().length?this.eventHandler.emitEvent(BU,dU.Popup,e):this.eventHandler.emitEvent(HU,dU.Popup,e),r.end({success:!0,accessTokenSize:e.accessToken.length,idTokenSize:e.idToken.length},void 0,e.account),e)).catch(t=>(n.length>0?this.eventHandler.emitEvent(WU,dU.Popup,null,t):this.eventHandler.emitEvent(FU,dU.Popup,null,t),r.end({success:!1},t,e.account),Promise.reject(t))).finally(async()=>{this.browserStorage.setInteractionInProgress(!1),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(t)})}trackPageVisibilityWithMeasurement(){const e=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;e&&(this.logger.info("Perf: Visibility change detected in ",e.event.name),e.increment({visibilityChangeCount:1}))}async ssoSilent(e){var t,r;const n=this.getRequestCorrelationId(e),a=u(u({},e),{},{prompt:e.prompt,correlationId:n});let i;if(this.ssoSilentMeasurement=this.performanceClient.startMeasurement(DK,n),null===(t=this.ssoSilentMeasurement)||void 0===t||t.add({scenarioId:e.scenarioId}),NX(this.initialized,this.ssoSilentMeasurement,e.account),null===(r=this.ssoSilentMeasurement)||void 0===r||r.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",n),this.eventHandler.emitEvent(VU,dU.Silent,a),this.canUsePlatformBroker(a)){var o;null===(o=this.ssoSilentMeasurement)||void 0===o||o.add({isPlatformBrokerRequest:!0}),i=this.acquireTokenNative(a,rU).catch(e=>{var t;if(null===(t=this.ssoSilentMeasurement)||void 0===t||t.add({brokerErrorName:e.name,brokerErrorCode:e.errorCode}),e instanceof BJ&&FJ(e)){this.platformAuthProvider=void 0;return this.createSilentIframeClient(a.correlationId).acquireToken(a)}throw e})}else{i=this.createSilentIframeClient(a.correlationId).acquireToken(a)}return i.then(e=>{var t;return this.eventHandler.emitEvent(GU,dU.Silent,e),null===(t=this.ssoSilentMeasurement)||void 0===t||t.end({success:!0,accessTokenSize:e.accessToken.length,idTokenSize:e.idToken.length},void 0,e.account),e}).catch(t=>{var r;throw this.eventHandler.emitEvent(QU,dU.Silent,null,t),null===(r=this.ssoSilentMeasurement)||void 0===r||r.end({success:!1},t,e.account),t}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenByCode(e){const t=this.getRequestCorrelationId(e);this.logger.trace("acquireTokenByCode called",t);const r=this.performanceClient.startMeasurement(jK,t);NX(this.initialized,r),this.eventHandler.emitEvent(YU,dU.Silent,e),r.add({scenarioId:e.scenarioId});try{if(e.code&&e.nativeAccountId)throw wQ(aQ);if(e.code){const n=e.code;let a=this.hybridAuthCodeResponses.get(n);return a?(this.logger.verbose("Existing acquireTokenByCode request found",t),r.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",t),a=this.acquireTokenByCodeAsync(u(u({},e),{},{correlationId:t})).then(e=>(this.eventHandler.emitEvent($U,dU.Silent,e),this.hybridAuthCodeResponses.delete(n),r.end({success:!0,accessTokenSize:e.accessToken.length,idTokenSize:e.idToken.length},void 0,e.account),e)).catch(e=>{throw this.hybridAuthCodeResponses.delete(n),this.eventHandler.emitEvent(JU,dU.Silent,null,e),r.end({success:!1},e),e}),this.hybridAuthCodeResponses.set(n,a)),await a}if(e.nativeAccountId){if(this.canUsePlatformBroker(e,e.nativeAccountId)){r.add({isPlatformBrokerRequest:!0});const n=await this.acquireTokenNative(u(u({},e),{},{correlationId:t}),aU,e.nativeAccountId).catch(e=>{throw e instanceof BJ&&FJ(e)&&(this.platformAuthProvider=void 0),r.add({brokerErrorName:e.name,brokerErrorCode:e.errorCode}),e});return r.end({success:!0},void 0,n.account),n}throw wQ(oQ)}throw wQ(nQ)}catch(OX){throw this.eventHandler.emitEvent(JU,dU.Silent,null,OX),r.end({success:!1},OX),OX}}async acquireTokenByCodeAsync(e){var t;this.logger.trace("acquireTokenByCodeAsync called",e.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(MV,e.correlationId),null===(t=this.acquireTokenByCodeAsyncMeasurement)||void 0===t||t.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement);const r=this.createSilentAuthCodeClient(e.correlationId);return await r.acquireToken(e).then(e=>{var t;return null===(t=this.acquireTokenByCodeAsyncMeasurement)||void 0===t||t.end({success:!0,fromCache:e.fromCache}),e}).catch(e=>{var t;throw null===(t=this.acquireTokenByCodeAsyncMeasurement)||void 0===t||t.end({success:!1},e),e}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenFromCache(e,t){switch(this.performanceClient.addQueueMeasurement(GK,e.correlationId),t){case jU:case SU:case CU:const t=this.createSilentCacheClient(e.correlationId);return x$(t.acquireToken.bind(t),PK,this.logger,this.performanceClient,e.correlationId)(e);default:throw uW(YH)}}async acquireTokenByRefreshToken(e,t){switch(this.performanceClient.addQueueMeasurement(SK,e.correlationId),t){case jU:case CU:case NU:case _U:const t=this.createSilentRefreshClient(e.correlationId);return x$(t.acquireToken.bind(t),RK,this.logger,this.performanceClient,e.correlationId)(e);default:throw uW(YH)}}async acquireTokenBySilentIframe(e){this.performanceClient.addQueueMeasurement($K,e.correlationId);const t=this.createSilentIframeClient(e.correlationId);return x$(t.acquireToken.bind(t),IK,this.logger,this.performanceClient,e.correlationId)(e)}async logout(e){const t=this.getRequestCorrelationId(e);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",t),this.logoutRedirect(u({correlationId:t},e))}async logoutRedirect(e){const t=this.getRequestCorrelationId(e);GY(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,KF);return this.createRedirectClient(t).logout(e)}logoutPopup(e){try{const t=this.getRequestCorrelationId(e);VY(this.initialized),this.browserStorage.setInteractionInProgress(!0,KF);return this.createPopupClient(t).logout(e).finally(()=>{this.browserStorage.setInteractionInProgress(!1)})}catch(OX){return Promise.reject(OX)}}async clearCache(e){if(!this.isBrowserEnvironment)return void this.logger.info("in non-browser environment, returning early.");const t=this.getRequestCorrelationId(e);return this.createSilentCacheClient(t).logout(e)}getAllAccounts(e){const t=this.getRequestCorrelationId();return function(e,t,r,n,a){return e.verbose("getAllAccounts called"),r?t.getAllAccounts(a||{},n):[]}(this.logger,this.browserStorage,this.isBrowserEnvironment,t,e)}getAccount(e){const t=this.getRequestCorrelationId();return function(e,t,r,n){const a=r.getAccountInfoFilteredBy(e,n);return a?(t.verbose("getAccount: Account matching provided filter found, returning"),a):(t.verbose("getAccount: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage,t)}getAccountByUsername(e){const t=this.getRequestCorrelationId();return function(e,t,r,n){if(t.trace("getAccountByUsername called"),!e)return t.warning("getAccountByUsername: No username provided"),null;const a=r.getAccountInfoFilteredBy({username:e},n);return a?(t.verbose("getAccountByUsername: Account matching username found, returning"),t.verbosePii("getAccountByUsername: Returning signed-in accounts matching username: ".concat(e)),a):(t.verbose("getAccountByUsername: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage,t)}getAccountByHomeId(e){const t=this.getRequestCorrelationId();return function(e,t,r,n){if(t.trace("getAccountByHomeId called"),!e)return t.warning("getAccountByHomeId: No homeAccountId provided"),null;const a=r.getAccountInfoFilteredBy({homeAccountId:e},n);return a?(t.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),t.verbosePii("getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ".concat(e)),a):(t.verbose("getAccountByHomeId: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage,t)}getAccountByLocalId(e){const t=this.getRequestCorrelationId();return function(e,t,r,n){if(t.trace("getAccountByLocalId called"),!e)return t.warning("getAccountByLocalId: No localAccountId provided"),null;const a=r.getAccountInfoFilteredBy({localAccountId:e},n);return a?(t.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),t.verbosePii("getAccountByLocalId: Returning signed-in accounts matching localAccountId: ".concat(e)),a):(t.verbose("getAccountByLocalId: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage,t)}setActiveAccount(e){const t=this.getRequestCorrelationId();!function(e,t,r){t.setActiveAccount(e,r)}(e,this.browserStorage,t)}getActiveAccount(){const e=this.getRequestCorrelationId();return function(e,t){return e.getActiveAccount(t)}(this.browserStorage,e)}async hydrateCache(e,t){this.logger.verbose("hydrateCache called");const r=tK.createFromAccountInfo(e.account,e.cloudGraphHostName,e.msGraphHost);return await this.browserStorage.setAccount(r,e.correlationId,nK(e.idTokenClaims),lU),e.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(e,t)):this.browserStorage.hydrateCache(e,t)}async acquireTokenNative(e,t,r,n){if(this.logger.trace("acquireTokenNative called"),!this.platformAuthProvider)throw wQ(cQ);return new GJ(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,t,this.performanceClient,this.platformAuthProvider,r||this.getNativeAccountId(e),this.nativeInternalStorage,e.correlationId).acquireToken(e,n)}canUsePlatformBroker(e,t){if(this.logger.trace("canUsePlatformBroker called"),!this.platformAuthProvider)return this.logger.trace("canUsePlatformBroker: platform broker unavilable, returning false"),!1;if(!cX(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme))return this.logger.trace("canUsePlatformBroker: isBrokerAvailable returned false, returning false"),!1;if(e.prompt)switch(e.prompt){case xB:case bB:case vB:case yB:this.logger.trace("canUsePlatformBroker: prompt is compatible with platform broker flow");break;default:return this.logger.trace("canUsePlatformBroker: prompt = ".concat(e.prompt," is not compatible with platform broker flow, returning false")),!1}return!(!t&&!this.getNativeAccountId(e))||(this.logger.trace("canUsePlatformBroker: nativeAccountId is not available, returning false"),!1)}getNativeAccountId(e){const t=e.account||this.getAccount({loginHint:e.loginHint,sid:e.sid})||this.getActiveAccount();return t&&t.nativeAccountId||""}createPopupClient(e){return new uX(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createRedirectClient(e){return new dX(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createSilentIframeClient(e){return new xX(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,rU,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createSilentCacheClient(e){return new WJ(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,e)}createSilentRefreshClient(e){return new kX(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,e)}createSilentAuthCodeClient(e){return new CX(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,aU,this.performanceClient,this.platformAuthProvider,e)}addEventCallback(e,t){return this.eventHandler.addEventCallback(e,t)}removeEventCallback(e){this.eventHandler.removeEventCallback(e)}addPerformanceCallback(e){return WY(),this.performanceClient.addPerformanceCallback(e)}removePerformanceCallback(e){return this.performanceClient.removePerformanceCallback(e)}enableAccountStorageEvents(){this.config.cache.cacheLocation===qF?this.eventHandler.subscribeCrossTab():this.logger.info("Account storage events are only available when cacheLocation is set to localStorage")}disableAccountStorageEvents(){this.config.cache.cacheLocation===qF?this.eventHandler.unsubscribeCrossTab():this.logger.info("Account storage events are only available when cacheLocation is set to localStorage")}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(e){this.logger=e}initializeWrapperLibrary(e,t){this.browserStorage.setWrapperMetadata(e,t)}setNavigationClient(e){this.navigationClient=e}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(e){return null!==e&&void 0!==e&&e.correlationId?e.correlationId:this.isBrowserEnvironment?EY():Qq.EMPTY_STRING}async loginRedirect(e){const t=this.getRequestCorrelationId(e);return this.logger.verbose("loginRedirect called",t),this.acquireTokenRedirect(u({correlationId:t},e||bU))}loginPopup(e){const t=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",t),this.acquireTokenPopup(u({correlationId:t},e||bU))}async acquireTokenSilent(e){const t=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(CK,t);r.add({cacheLookupPolicy:e.cacheLookupPolicy,scenarioId:e.scenarioId}),NX(this.initialized,r,e.account),this.logger.verbose("acquireTokenSilent called",t);const n=e.account||this.getActiveAccount();if(!n)throw wQ(UG);return this.acquireTokenSilentDeduped(e,n,t).then(n=>(r.end({success:!0,fromCache:n.fromCache,accessTokenSize:n.accessToken.length,idTokenSize:n.idToken.length},void 0,n.account),u(u({},n),{},{state:e.state,correlationId:t}))).catch(e=>{throw e instanceof hF&&e.setCorrelationId(t),r.end({success:!1},e,n),e})}async acquireTokenSilentDeduped(e,t,r){const n=$$(this.config.auth.clientId,u(u({},e),{},{authority:e.authority||this.config.auth.authority,correlationId:r}),t.homeAccountId),a=JSON.stringify(n),i=this.activeSilentTokenRequests.get(a);if("undefined"===typeof i){this.logger.verbose("acquireTokenSilent called for the first time, storing active request",r),this.performanceClient.addFields({deduped:!1},r);const n=x$(this.acquireTokenSilentAsync.bind(this),NK,this.logger,this.performanceClient,r)(u(u({},e),{},{correlationId:r}),t);return this.activeSilentTokenRequests.set(a,n),n.finally(()=>{this.activeSilentTokenRequests.delete(a)})}return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",r),this.performanceClient.addFields({deduped:!0},r),i}async acquireTokenSilentAsync(e,t){const r=()=>this.trackPageVisibility(e.correlationId);this.performanceClient.addQueueMeasurement(NK,e.correlationId),this.eventHandler.emitEvent(UU,dU.Silent,e),e.correlationId&&this.performanceClient.incrementFields({visibilityChangeCount:0},e.correlationId),document.addEventListener("visibilitychange",r);const n=await x$(TJ,XK,this.logger,this.performanceClient,e.correlationId)(e,t,this.config,this.performanceClient,this.logger),a=e.cacheLookupPolicy||jU;return this.acquireTokenSilentNoIframe(n,a).catch(async e=>{const t=function(e,t){const r=!(e instanceof G$&&e.subError!==H$),n=e.errorCode===wF||e.errorCode===YH,a=r&&n||e.errorCode===q$||e.errorCode===F$,i=TU.includes(t);return a&&i}(e,a);if(t){if(this.activeIframeRequest){if(a!==AU){const[t,r]=this.activeIframeRequest;this.logger.verbose("Iframe request is already in progress, awaiting resolution for request with correlationId: ".concat(r),n.correlationId);const i=this.performanceClient.startMeasurement(MK,n.correlationId);i.add({awaitIframeCorrelationId:r});const o=await t;if(i.end({success:o}),o)return this.logger.verbose("Parallel iframe request with correlationId: ".concat(r," succeeded. Retrying cache and/or RT redemption"),n.correlationId),this.acquireTokenSilentNoIframe(n,a);throw this.logger.info("Iframe request with correlationId: ".concat(r," failed. Interaction is required.")),e}return this.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",n.correlationId),x$(this.acquireTokenBySilentIframe.bind(this),$K,this.logger,this.performanceClient,n.correlationId)(n)}{let e;return this.activeIframeRequest=[new Promise(t=>{e=t}),n.correlationId],this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",n.correlationId),x$(this.acquireTokenBySilentIframe.bind(this),$K,this.logger,this.performanceClient,n.correlationId)(n).then(t=>(e(!0),t)).catch(t=>{throw e(!1),t}).finally(()=>{this.activeIframeRequest=void 0})}}throw e}).then(t=>(this.eventHandler.emitEvent(HU,dU.Silent,t),this.performanceClient.addFields({fromCache:t.fromCache},e.correlationId),t)).catch(e=>{throw this.eventHandler.emitEvent(WU,dU.Silent,null,e),e}).finally(()=>{document.removeEventListener("visibilitychange",r)})}async acquireTokenSilentNoIframe(e,t){return cX(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme)&&e.account.nativeAccountId?(this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),this.performanceClient.addFields({isPlatformBrokerRequest:!0},e.correlationId),this.acquireTokenNative(e,iU,e.account.nativeAccountId,t).catch(async t=>{if(this.performanceClient.addFields({brokerErrorName:t.name,brokerErrorCode:t.errorCode},e.correlationId),t instanceof BJ&&FJ(t))throw this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.platformAuthProvider=void 0,uW(YH);throw t})):(this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),t===SU&&this.logger.verbose("acquireTokenSilent - cache lookup policy set to AccessToken, attempting to acquire token from local cache"),x$(this.acquireTokenFromCache.bind(this),GK,this.logger,this.performanceClient,e.correlationId)(e,t).catch(r=>{if(t===SU)throw r;return this.eventHandler.emitEvent(KU,dU.Silent,e),x$(this.acquireTokenByRefreshToken.bind(this),SK,this.logger,this.performanceClient,e.correlationId)(e,t)}))}async preGeneratePkceCodes(e){return this.logger.verbose("Generating new PKCE codes"),this.pkceCode=await x$(rX,WV,this.logger,this.performanceClient,e)(this.performanceClient,this.logger,e),Promise.resolve()}getPreGeneratedPkceCodes(e){this.logger.verbose("Attempting to pick up pre-generated PKCE codes");const t=this.pkceCode?u({},this.pkceCode):void 0;return this.pkceCode=void 0,this.logger.verbose("".concat(t?"Found":"Did not find"," pre-generated PKCE codes")),this.performanceClient.addFields({usePreGeneratedPkce:!!t},e),t}logMultipleInstances(e){const t=this.config.auth.clientId;if(!window)return;window.msal=window.msal||{},window.msal.clientIds=window.msal.clientIds||[];window.msal.clientIds.length>0&&this.logger.verbose("There is already an instance of MSAL.js in the window."),window.msal.clientIds.push(t),function(e,t,r){var n;const a=(null===(n=window.msal)||void 0===n?void 0:n.clientIds)||[],i=a.length,o=a.filter(t=>t===e).length;o>1&&r.warning("There is already an instance of MSAL.js in the window with the same client id."),t.add({msalInstanceCount:i,sameClientIdInstanceCount:o})}(t,e,this.logger)}}class AX{static async createPublicClientApplication(e){const t=await async function(e,t){const r=new s$(e);return await r.initialize(),_X.createController(r,t)}(e);return new AX(e,t)}constructor(e,t){this.isBroker=!1,this.controller=t||new _X(new s$(e))}async initialize(e){return this.controller.initialize(e,this.isBroker)}async acquireTokenPopup(e){return this.controller.acquireTokenPopup(e)}acquireTokenRedirect(e){return this.controller.acquireTokenRedirect(e)}acquireTokenSilent(e){return this.controller.acquireTokenSilent(e)}acquireTokenByCode(e){return this.controller.acquireTokenByCode(e)}addEventCallback(e,t){return this.controller.addEventCallback(e,t)}removeEventCallback(e){return this.controller.removeEventCallback(e)}addPerformanceCallback(e){return this.controller.addPerformanceCallback(e)}removePerformanceCallback(e){return this.controller.removePerformanceCallback(e)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(e){return this.controller.getAccount(e)}getAccountByHomeId(e){return this.controller.getAccountByHomeId(e)}getAccountByLocalId(e){return this.controller.getAccountByLocalId(e)}getAccountByUsername(e){return this.controller.getAccountByUsername(e)}getAllAccounts(e){return this.controller.getAllAccounts(e)}handleRedirectPromise(e){return this.controller.handleRedirectPromise(e)}loginPopup(e){return this.controller.loginPopup(e)}loginRedirect(e){return this.controller.loginRedirect(e)}logout(e){return this.controller.logout(e)}logoutRedirect(e){return this.controller.logoutRedirect(e)}logoutPopup(e){return this.controller.logoutPopup(e)}ssoSilent(e){return this.controller.ssoSilent(e)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(e){this.controller.setLogger(e)}setActiveAccount(e){this.controller.setActiveAccount(e)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(e,t){return this.controller.initializeWrapperLibrary(e,t)}setNavigationClient(e){this.controller.setNavigationClient(e)}getConfiguration(){return this.controller.getConfiguration()}async hydrateCache(e,t){return this.controller.hydrateCache(e,t)}clearCache(e){return this.controller.clearCache(e)}}const TX={auth:{clientId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_AZURE_CLIENT_ID,authority:"https://login.microsoftonline.com/common",redirectUri:window.location.origin+"/teacher/login"},cache:{cacheLocation:"localStorage",storeAuthStateInCookie:!1},system:{loggerOptions:{loggerCallback:(e,t,r)=>{if(!r)switch(e){case EU.Error:return void console.error(t);case EU.Info:return void console.info(t);case EU.Verbose:return void console.debug(t);case EU.Warning:return void console.warn(t);default:return}}}}},EX=("api://".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_AZURE_BACKEND_CLIENT_ID,"/access_as_user"),new AX(TX));EX.initialize().then(()=>{EX.handleRedirectPromise().catch(e=>{console.error("Redirect error:",e)})}),window.msalInstance={instance:EX};a.createRoot(document.getElementById("root")).render((0,ra.jsx)(r.StrictMode,{children:(0,ra.jsx)(hH,{instance:EX,children:(0,ra.jsx)(Gq,{})})}))})()})();
//# sourceMappingURL=main.3af61ae6.js.map